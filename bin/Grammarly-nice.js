'use strict';
!function(m) {
  /**
   * @param {number} i
   * @return {?}
   */
  function t(i) {
    if (n[i]) {
      return n[i].exports;
    }
    var module = n[i] = {
      i : i,
      l : false,
      exports : {}
    };
    return m[i].call(module.exports, module, module.exports, t), module.l = true, module.exports;
  }
  var n = {};
  /** @type {!Array} */
  t.m = m;
  t.c = n;
  /**
   * @param {string} d
   * @param {string} name
   * @param {!Function} n
   * @return {undefined}
   */
  t.d = function(d, name, n) {
    if (!t.o(d, name)) {
      Object.defineProperty(d, name, {
        configurable : false,
        enumerable : true,
        get : n
      });
    }
  };
  /**
   * @param {!Object} module
   * @return {?}
   */
  t.n = function(module) {
    /** @type {function(): ?} */
    var n = module && module.__esModule ? function() {
      return module.default;
    } : function() {
      return module;
    };
    return t.d(n, "a", n), n;
  };
  /**
   * @param {!Object} t
   * @param {!Object} object
   * @return {?}
   */
  t.o = function(t, object) {
    return Object.prototype.hasOwnProperty.call(t, object);
  };
  /** @type {string} */
  t.p = "";
  t(t.s = 1284);
}([function(canCreateDiscussions, persistence, __webpack_require__) {
  var root_1 = __webpack_require__(29);
  var toSubscriber_1 = __webpack_require__(319);
  var observable_1 = __webpack_require__(155);
  var a = __webpack_require__(213);
  var Observable = function() {
    /**
     * @param {!Function} subscribe
     * @return {undefined}
     */
    function Observable(subscribe) {
      /** @type {boolean} */
      this._isScalar = false;
      if (subscribe) {
        /** @type {!Function} */
        this._subscribe = subscribe;
      }
    }
    return Observable.prototype.lift = function(operator) {
      var observable = new Observable;
      return observable.source = this, observable.operator = operator, observable;
    }, Observable.prototype.subscribe = function(event, error, complete) {
      var operator = this.operator;
      var key = toSubscriber_1.toSubscriber(event, error, complete);
      if (operator ? operator.call(key, this.source) : key.add(this.source || !key.syncErrorThrowable ? this._subscribe(key) : this._trySubscribe(key)), key.syncErrorThrowable && (key.syncErrorThrowable = false, key.syncErrorThrown)) {
        throw key.syncErrorValue;
      }
      return key;
    }, Observable.prototype._trySubscribe = function(sink) {
      try {
        return this._subscribe(sink);
      } catch (err) {
        /** @type {boolean} */
        sink.syncErrorThrown = true;
        sink.syncErrorValue = err;
        sink.error(err);
      }
    }, Observable.prototype.forEach = function(next, PromiseCtor) {
      var utils = this;
      if (PromiseCtor || (root_1.root.Rx && root_1.root.Rx.config && root_1.root.Rx.config.Promise ? PromiseCtor = root_1.root.Rx.config.Promise : root_1.root.Promise && (PromiseCtor = root_1.root.Promise)), !PromiseCtor) {
        throw new Error("no Promise impl found");
      }
      return new PromiseCtor(function(callback, query) {
        var data;
        data = utils.subscribe(function(encryptErr) {
          if (data) {
            try {
              next(encryptErr);
            } catch (deleteFromCurrentValues) {
              query(deleteFromCurrentValues);
              data.unsubscribe();
            }
          } else {
            next(encryptErr);
          }
        }, query, callback);
      });
    }, Observable.prototype._subscribe = function(name) {
      return this.source.subscribe(name);
    }, Observable.prototype[observable_1.observable] = function() {
      return this;
    }, Observable.prototype.pipe = function() {
      /** @type {!Array} */
      var e = [];
      /** @type {number} */
      var i = 0;
      for (; i < arguments.length; i++) {
        e[i - 0] = arguments[i];
      }
      return 0 === e.length ? this : a.pipeFromArray(e)(this);
    }, Observable.prototype.toPromise = function(promiseCtor) {
      var netIfc = this;
      if (promiseCtor || (root_1.root.Rx && root_1.root.Rx.config && root_1.root.Rx.config.Promise ? promiseCtor = root_1.root.Rx.config.Promise : root_1.root.Promise && (promiseCtor = root_1.root.Promise)), !promiseCtor) {
        throw new Error("no Promise impl found");
      }
      return new promiseCtor(function(saveNotifs, obtainGETData) {
        var notifications;
        netIfc.subscribe(function(_notifications) {
          return notifications = _notifications;
        }, function(val) {
          return obtainGETData(val);
        }, function() {
          return saveNotifs(notifications);
        });
      });
    }, Observable.create = function(name) {
      return new Observable(name);
    }, Observable;
  }();
  persistence.Observable = Observable;
}, function(canCreateDiscussions, exports, require) {
  /**
   * @param {!Array} prop
   * @param {!Object} val
   * @return {?}
   */
  function filter(prop, val) {
    return prop.some(function(major) {
      return major === val;
    }) ? val : void 0;
  }
  /**
   * @param {string} b
   * @return {?}
   */
  function w(b) {
    /** @type {number} */
    var w = parseInt(b, 10);
    return isNaN(w) ? void 0 : w;
  }
  var f;
  var i = this && this.__extends || (f = function(shape, t) {
    return (f = Object.setPrototypeOf || {
      __proto__ : []
    } instanceof Array && function(record, l) {
      /** @type {!Object} */
      record.__proto__ = l;
    } || function(scope, args) {
      var key;
      for (key in args) {
        if (args.hasOwnProperty(key)) {
          scope[key] = args[key];
        }
      }
    })(shape, t);
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    f(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  var call = this && this.__assign || function() {
    return (call = Object.assign || function(obj) {
      var a;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var key;
        for (key in a = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(a, key)) {
            obj[key] = a[key];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  var gotoNewOfflinePage = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var updateDevicesAfterDelay = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var collectRefsFromPathitem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var resolve = this && this.__spread || function() {
    /** @type {!Array} */
    var followedKeys = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
    }
    return followedKeys;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var chai = require(204);
  exports.assert = chai.assert;
  exports.assertNonNull = chai.assertNonNull;
  exports.AssertionError = chai.AssertionError;
  var tsUnit_2 = require(71);
  exports.SafePromise = tsUnit_2.SafePromise;
  var Bufferish = require(205);
  exports.CircularBuffer = Bufferish.CircularBuffer;
  var DragDropAction = require(71);
  var Arr = require(206);
  exports.Arr = Arr;
  var g = require(207);
  exports.Obj = g;
  var ReactMeteorData = require(208);
  exports.MapEx = ReactMeteorData;
  var GetFlashVars = require(86);
  exports.Ms = GetFlashVars;
  var Global = function() {
    /**
     * @param {number} container
     * @return {undefined}
     */
    function ComponentsArray(container) {
      /** @type {number} */
      this._getFallbackValue = container;
    }
    return ComponentsArray.prototype.init = function(reason) {
      if (void 0 !== this._value) {
        throw new Error("Global value already initialized.");
      }
      /** @type {number} */
      this._value = reason;
    }, ComponentsArray.prototype.get = function() {
      if (void 0 === this._value) {
        if (void 0 === this._getFallbackValue) {
          throw new Error("Global value not initialized and no fallback value provided.");
        }
        this._value = this._getFallbackValue();
      }
      return this._value;
    }, ComponentsArray;
  }();
  exports.Global = Global;
  /** @type {function(!Array, !Object): ?} */
  exports.optionalStringUnion = filter;
  /**
   * @param {!Array} dataset
   * @param {?} i
   * @param {string} current
   * @return {?}
   */
  exports.assertStringUnion = function(dataset, i, current) {
    var result = filter(dataset, i);
    if (void 0 !== result) {
      return result;
    }
    throw new TypeError('Unrecognized string union value "' + i + '"' + (current ? " for " + current : ""));
  };
  var UnsubscriptionError = function(e) {
    /**
     * @param {string} after
     * @return {?}
     */
    function t(after) {
      return e.call(this, "Matching not exhaustive" + (after ? ": unexpected value " + after : "")) || this;
    }
    return i(t, e), t;
  }(Error);
  exports.MatchingNotExhaustiveError = UnsubscriptionError;
  /**
   * @param {string} value
   * @return {?}
   */
  exports.assertNever = function(value) {
    throw new UnsubscriptionError(value);
  };
  /** @type {function(string): ?} */
  exports.optionalIntString = w;
  /**
   * @param {string} a
   * @param {?} msg
   * @return {?}
   */
  exports.assertIntString = function(a, msg) {
    var i = w(a);
    if (void 0 !== i) {
      return i;
    }
    throw new Error("Expected a number string, got '" + a + "'" + (void 0 !== msg ? " for " + msg : ""));
  };
  /**
   * @param {!Function} func
   * @param {!Function} input
   * @return {?}
   */
  exports.try_ = function(func, input) {
    try {
      return func();
    } catch (props) {
      return input(props);
    }
  };
  /**
   * @return {undefined}
   */
  exports.noOp = function() {
  };
  /**
   * @param {!Function} passthru
   * @return {?}
   */
  exports.callOnce = function(passthru) {
    var yOff;
    /** @type {boolean} */
    var y = false;
    return function() {
      /** @type {!Array} */
      var data = [];
      /** @type {number} */
      var i = 0;
      for (; i < arguments.length; i++) {
        data[i] = arguments[i];
      }
      return y || (y = true, yOff = passthru.apply(void 0, resolve(data))), yOff;
    };
  };
  /**
   * @param {number} e
   * @param {!Function} cb
   * @return {?}
   */
  exports.throttle = function(e, cb) {
    /**
     * @param {number} e
     * @return {?}
     */
    function cancel(e) {
      return callback && (callback = false, result = DragDropAction.SafePromise.createCompletionSource(), setTimeout(function() {
        try {
          result.resolve(cb());
        } catch (e) {
          result.reject(e);
        } finally {
          /** @type {boolean} */
          callback = true;
        }
      }, e)), result.promise;
    }
    var viewEnd;
    var result;
    /** @type {boolean} */
    var callback = true;
    return function() {
      var viewStart = viewEnd;
      return viewEnd = Date.now(), cancel(void 0 === viewStart || viewEnd - viewStart >= e ? 0 : e - (viewEnd - viewStart));
    };
  };
  /**
   * @param {number} i
   * @param {?} options
   * @param {?} fn
   * @return {?}
   */
  exports.retry = function check(i, options, fn) {
    var n = fn();
    return i > 0 ? n.catch(function(canCreateDiscussions) {
      return (new Promise(function(_nextEventFunc, canCreateDiscussions) {
        return setTimeout(_nextEventFunc, options);
      })).then(function(canCreateDiscussions) {
        return check(i - 1, options, fn);
      });
    }) : n;
  };
  /**
   * @param {!Function} upgrade
   * @param {number} t
   * @param {number} n
   * @param {?} r
   * @return {?}
   */
  exports.conditionalRetry = function(upgrade, t, n, r) {
    return void 0 === n && (n = 0), void 0 === r && (r = function(m_w) {
      return true;
    }), gotoNewOfflinePage(this, void 0, void 0, function() {
      var tRecord;
      var v;
      var e;
      var field;
      var err;
      return updateDevicesAfterDelay(this, function(_a) {
        switch(_a.label) {
          case 0:
            /** @type {number} */
            tRecord = t;
            /** @type {!Array} */
            v = [];
            /** @type {number} */
            _a.label = 1;
          case 1:
            if (!(tRecord > 0)) {
              return [3, 8];
            }
            e = void 0;
            /** @type {number} */
            _a.label = 2;
          case 2:
            return _a.trys.push([2, 4, , 5]), tRecord--, field = {}, [4, upgrade()];
          case 3:
            return field.val = _a.sent(), field.hasError = false, e = field, [3, 5];
          case 4:
            return err = _a.sent(), e = {
              hasError : true,
              message : err && err.message || err || ""
            }, [3, 5];
          case 5:
            if (e.hasError) {
              v.push(e.message);
            } else {
              if (r(e.val)) {
                return [2, e.val];
              }
            }
            return tRecord > 0 ? [4, DragDropAction.SafePromise.delay(n)] : [3, 7];
          case 6:
            _a.sent();
            /** @type {number} */
            _a.label = 7;
          case 7:
            return [3, 1];
          case 8:
            throw new Error("Condition was not met after " + t + " retries. Errors: '" + v.join(";") + "'");
        }
      });
    });
  };
  var Lazy = function() {
    /**
     * @param {!Object} value
     * @return {undefined}
     */
    function set(value) {
      /** @type {!Object} */
      this._factory = value;
      /** @type {boolean} */
      this._hasValue = false;
    }
    return set.prototype.get = function() {
      return this._hasValue || (this._value = this._factory(), this._hasValue = true), this._value;
    }, set;
  }();
  /**
   * @param {?} fn
   * @return {?}
   */
  exports.lazy = function(fn) {
    return new Lazy(fn);
  };
  (function(canCreateDiscussions) {
    /**
     * @return {?}
     */
    function s4() {
      return (65536 * (1 + Math.random()) | 0).toString(16).substring(1);
    }
    /**
     * @return {?}
     */
    (exports.Guid || (exports.Guid = {})).create = function() {
      return s4() + s4() + "-" + s4() + "-" + s4() + "-" + s4() + "-" + s4() + s4() + s4();
    };
  })();
  exports.requestIdleCallback = void 0 !== window.requestIdleCallback ? window.requestIdleCallback : function(cb) {
    /** @type {number} */
    var MIN_BLOCK_DURATION = Date.now();
    return setTimeout(function() {
      cb({
        didTimeout : false,
        timeRemaining : function() {
          return Math.max(0, 50 - Date.now() + MIN_BLOCK_DURATION);
        }
      });
    }, 1);
  };
  /**
   * @param {undefined} source
   * @param {!Object} defaults
   * @return {?}
   */
  exports.withDefaults = function(source, defaults) {
    var ret = call({}, source);
    var prop;
    for (prop in defaults) {
      var val = defaults[prop];
      if (void 0 !== val) {
        ret[prop] = val;
      }
    }
    return ret;
  };
}, , function(canCreateDiscussions, exports, _interopRequireDefault) {
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var Logger = _interopRequireDefault(209);
  exports.SimpleLogger = Logger.SimpleLogger;
  exports.Logger = Logger.Logger;
  var _thirdapp2 = _interopRequireDefault(87);
  exports.FunctionLogWriter = _thirdapp2.FunctionLogWriter;
  var _browser2 = _interopRequireDefault(211);
  exports.FelogLogWriter = _browser2.FelogLogWriter;
  var _params2 = _interopRequireDefault(106);
  exports.logLevelFilter = _params2.logLevelFilter;
  var _aliapp2 = _interopRequireDefault(105);
  exports.LogConfig = _aliapp2.LogConfig;
}, function(canCreateDiscussions, self, require) {
  /**
   * @param {?} name
   * @param {string} b
   * @return {?}
   */
  function set(name, b) {
    var interval = set.items = set.items || {};
    var a = interval[name];
    if (a || b) {
      if (a && !b) {
        return clearTimeout(a), void delete interval[name];
      }
      !function() {
        /**
         * @return {undefined}
         */
        function update() {
          success();
          name();
        }
        /**
         * @return {undefined}
         */
        function success() {
          /** @type {number} */
          var i = setTimeout(update, b);
          /** @type {number} */
          interval[name] = i;
        }
        success();
      }();
    }
  }
  /**
   * @return {?}
   */
  function s4() {
    return (65536 * (1 + Math.random()) | 0).toString(16).substring(1);
  }
  /**
   * @return {undefined}
   */
  function undefined() {
  }
  /**
   * @param {number} s
   * @return {?}
   */
  function delay(s) {
    return new Promise(function(_nextEventFunc) {
      return setTimeout(_nextEventFunc, s);
    });
  }
  var gotoNewOfflinePage = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var updateDevicesAfterDelay = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var setArgsFromObj = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var a = this && this.__spread || function() {
    /** @type {!Array} */
    var args = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      args = args.concat(setArgsFromObj(arguments[i]));
    }
    return args;
  };
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var mainBowerFiles = require(140);
  var crypto = require(94);
  var platform = require(18);
  var utils = require(18);
  self.isTestsMode = utils.isTestsMode;
  self.getBrowser = utils.getBrowser;
  self.isBg = utils.isBg;
  self.isBgOrPopup = utils.isBgOrPopup;
  self.isChrome = utils.isChrome;
  self.isFF = utils.isFF;
  self.isPopup = utils.isPopup;
  self.isSafari = utils.isSafari;
  self.isEdge = utils.isEdge;
  self.isWindows = utils.isWindows;
  self.isSafariApp = utils.isSafariApp;
  /**
   * @return {?}
   */
  self.chromeBgError = function() {
    return window.chrome && window.chrome.runtime && window.chrome.runtime.lastError;
  };
  /**
   * @param {!Function} value
   * @return {?}
   */
  self.isFunction = function(value) {
    return !!(value && value.constructor && value.call && value.apply);
  };
  /** @type {function(?, string): ?} */
  self.interval = set;
  (set = self.interval || (self.interval = {})).items = {};
  /**
   * @param {?} manyArray
   * @return {undefined}
   */
  self.cancelInterval = function(manyArray) {
    set(manyArray);
  };
  /**
   * @return {?}
   */
  self.guid = function() {
    return s4() + s4() + "-" + s4() + "-" + s4() + "-" + s4() + "-" + s4() + s4() + s4();
  };
  /**
   * @param {string} bytes
   * @return {?}
   */
  self.bytes = function(bytes) {
    var firstIsCO;
    var j;
    /** @type {number} */
    var buffer = 0;
    var length = bytes.length;
    /** @type {number} */
    var i = 0;
    for (; i < length; i++) {
      if ((firstIsCO = bytes.charCodeAt(i)) >= 55296 && firstIsCO < 57344 && firstIsCO < 56320 && i + 1 < length && (j = bytes.charCodeAt(i + 1)) >= 56320 && j < 57344) {
        /** @type {number} */
        buffer = buffer + 4;
        i++;
      } else {
        /** @type {number} */
        buffer = buffer + (firstIsCO < 128 ? 1 : firstIsCO < 2048 ? 2 : 3);
      }
    }
    return buffer;
  };
  /**
   * @param {string} string
   * @param {number} count
   * @return {?}
   */
  self.chunks = function(string, count) {
    /** @type {number} */
    var i = count;
    /** @type {number} */
    var end = 0;
    /** @type {!Array} */
    var list = [];
    for (; string[i];) {
      if (" " === string[i++]) {
        list.push(string.substring(end, i));
        end = i;
        i = i + count;
      } else {
        var j = i;
        do {
          if (" " === string.substring(j - 1, j)) {
            list.push(string.substring(end, j));
            end = j;
            i = j + count;
            break;
          }
          j--;
        } while (j > end);
      }
    }
    return list.push(string.substr(end)), list;
  };
  /** @type {function(): undefined} */
  self._f = undefined;
  /**
   * @return {?}
   */
  self._F = function() {
    return true;
  };
  /**
   * @param {!Object} e
   * @return {?}
   */
  self.isGmail = function(e) {
    if (e.location) {
      /** @type {boolean} */
      var t = "mail.google.com" == e.location.host;
      var types = e.querySelector("iframe#js_frame") && e.querySelector("iframe#sound_frame");
      return t || types;
    }
  };
  /**
   * @param {?} val
   * @return {?}
   */
  self.isValidEmail = function(val) {
    return /^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+\.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$/.test(val);
  };
  /**
   * @param {string} pNumber
   * @return {?}
   */
  self.formatNumber = function(pNumber) {
    return pNumber.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  };
  /**
   * @param {number} count
   * @param {!Object} time
   * @return {?}
   */
  self.declension = function(count, time) {
    return time[1 == count ? 0 : 1];
  };
  /**
   * @param {?} globs
   * @return {?}
   */
  self.stub = function(globs) {
    return mainBowerFiles(globs, function(e, c) {
      return e[c] = undefined;
    });
  };
  /**
   * @param {!Function} source
   * @param {!Function} callback
   * @param {number} timeout
   * @return {?}
   */
  self.memoize = function(source, callback, timeout) {
    var hash = {};
    return function() {
      /** @type {string} */
      var key = "_memoize_" + (callback ? callback.apply(this, arguments) : arguments[0]);
      return window.hasOwnProperty.call(hash, key) ? hash[key] : (timeout && setTimeout(function() {
        delete hash[key];
      }, timeout), hash[key] = source.apply(this, arguments));
    };
  };
  /**
   * @param {?} p2
   * @param {undefined} fn
   * @return {?}
   */
  self.syncWait = function(p2, fn) {
    return Object.keys(fn).reduce(function(testItemData, operator) {
      var _a;
      return Object.assign({}, testItemData, ((_a = {})[operator] = function() {
        /** @type {!Array} */
        var n = [];
        /** @type {number} */
        var o = 0;
        for (; o < arguments.length; o++) {
          n[o] = arguments[o];
        }
        return p2.then(function() {
          return fn[operator].apply(fn, a(n));
        });
      }, _a));
    }, {});
  };
  /**
   * @param {?} func
   * @return {?}
   */
  self.promisify = function(func) {
    return new Promise(function(ldata) {
      return func(ldata);
    });
  };
  /**
   * @param {number} min
   * @param {number} max
   * @return {?}
   */
  self.getRandomIntInclusive = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  };
  /** @type {function(number): ?} */
  self.delay = delay;
  /** @type {!Array} */
  var asMonths = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
  /**
   * @param {?} value
   * @return {?}
   */
  self.formatDate = function(value) {
    if (value) {
      /** @type {!Date} */
      var d = new Date(value);
      if ("Invalid Date" !== d.toString()) {
        return asMonths[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear();
      }
    }
  };
  /**
   * @param {?} extend
   * @return {?}
   */
  self.createClass = function(extend) {
    /**
     * @return {undefined}
     */
    var $ = function() {
    };
    return $.prototype = extend(), $;
  };
  /**
   * @param {number} name
   * @param {number} text
   * @return {?}
   */
  self.versionComparator = function(name, text) {
    /**
     * @param {!Object} type
     * @return {?}
     */
    function fn(type) {
      return type.split(".").map(function(minWorkers) {
        return Number(minWorkers) || 0;
      });
    }
    if (void 0 === name) {
      /** @type {string} */
      name = "";
    }
    if (void 0 === text) {
      /** @type {string} */
      text = "";
    }
    var val = fn(name);
    var o = fn(text);
    /** @type {!IArrayLike<?>} */
    var row = Array(Math.abs(val.length - o.length)).fill(0);
    if (val.length > o.length ? o.push.apply(o, a(row)) : val.push.apply(val, a(row)), val.every(function(u, f) {
      return u === o[f];
    })) {
      return 0;
    }
    /** @type {number} */
    var i = 0;
    var newPartNum = val.length;
    for (; i < newPartNum; i++) {
      if (val[i] > o[i]) {
        return 1;
      }
      if (val[i] < o[i]) {
        return -1;
      }
    }
    return -1;
  };
  /**
   * @return {?}
   */
  self.isBgAlive = function() {
    return gotoNewOfflinePage(this, void 0, void 0, function() {
      return updateDevicesAfterDelay(this, function(_a) {
        switch(_a.label) {
          case 0:
            if (!platform.isChrome() && !platform.isFF()) {
              return [2, null];
            }
            /** @type {number} */
            _a.label = 1;
          case 1:
            return _a.trys.push([1, 3, , 4]), [4, Promise.race([new Promise(function(gifURL) {
              return window.chrome.runtime.sendMessage("ping", gifURL);
            }), delay(1E4).then(function(canCreateDiscussions) {
              return "timeouted";
            })])];
          case 2:
            return [2, _a.sent()];
          case 3:
            return _a.sent(), [2, "orphaned"];
          case 4:
            return [2];
        }
      });
    });
  };
  /**
   * @param {!Function} callback
   * @param {number} timeout
   * @return {undefined}
   */
  self.asyncCall = function(callback, timeout) {
    if (void 0 === timeout) {
      /** @type {number} */
      timeout = 10;
    }
    setTimeout(callback, timeout);
  };
  /**
   * @param {number} callback
   * @return {?}
   */
  self.createChannel = function(callback) {
    var b = (void 0 === callback ? {} : callback).buffered;
    var entity = void 0 === b || b;
    /** @type {!Array} */
    var e = [];
    /** @type {!Array} */
    var _sizeAnimateTimeStamps = [];
    return {
      take : function() {
        return e.length ? Promise.resolve(e.shift()) : new Promise(function(bone_in) {
          return _sizeAnimateTimeStamps.push(bone_in);
        });
      },
      put : function(type) {
        if (_sizeAnimateTimeStamps.length > 0) {
          _sizeAnimateTimeStamps.shift()(type);
        } else {
          if (entity) {
            e.push(type);
          } else {
            /** @type {!Object} */
            e[0] = type;
          }
        }
      }
    };
  };
  /**
   * @param {string} value
   * @param {number} len
   * @return {?}
   */
  self.normalizedHashCode = function(value, len) {
    if (void 0 === len && (len = 100), !value) {
      return NaN;
    }
    var ParsleyUtils = crypto.createHash("superfasthash");
    return parseInt(ParsleyUtils.hash(value), 16) % len;
  };
  /**
   * @param {!Object} event
   * @return {?}
   */
  self.keyCode = function(event) {
    return event.which || event.charCode || event.keyCode || 0;
  };
  /** @type {!RegExp} */
  self.NBSP_RE = new RegExp(String.fromCharCode(160), "g");
  /** @type {string} */
  var i = String.fromCharCode(160);
  /** @type {!RegExp} */
  var e = /\n/g;
  /** @type {!RegExp} */
  var c = /\s$/g;
  /** @type {!RegExp} */
  var regex_delimiters = new RegExp("\n" + String.fromCharCode(32), "g");
  /**
   * @param {string} n
   * @param {?} children
   * @return {?}
   */
  self.br = function(n, children) {
    return n = n.replace(regex_delimiters, "<br>" + i).replace(e, "<br>"), children && (n = n.replace(c, i)), n;
  };
  /**
   * @param {string} value
   * @return {?}
   */
  self.trimLeft = function(value) {
    return value.replace(/^\s+/, "");
  };
  /**
   * @param {string} string
   * @return {?}
   */
  self.trimRight = function(string) {
    return string.replace(/\s+$/, "");
  };
  /** @type {number} */
  self.SECOND = 1E3;
  /** @type {number} */
  self.MINUTE = 60 * self.SECOND;
  /** @type {number} */
  self.HOUR = 60 * self.MINUTE;
  /** @type {number} */
  self.DAY = 24 * self.HOUR;
  /** @type {number} */
  self.ESC_KEY = 27;
  /** @type {number} */
  self.ENTER_KEY = 13;
  /** @type {number} */
  self.BACKSPACE_KEY = 8;
  /** @type {number} */
  self.SPACE_KEY = 32;
  /**
   * @param {?} ms_since_1970
   * @return {?}
   */
  self.pastDays = function(ms_since_1970) {
    return Math.round(Math.abs(+new Date - +new Date(ms_since_1970)) / self.DAY);
  };
  /**
   * @return {?}
   */
  self.getNextPingDate = function() {
    /** @type {!Date} */
    var prevMonth = new Date;
    return prevMonth.getHours() > 2 && prevMonth.setDate(prevMonth.getDate() + 1), prevMonth.setHours(3), prevMonth.setMinutes(Math.floor(60 * Math.random())), prevMonth.getTime();
  };
  /**
   * @param {string} rexp
   * @return {?}
   */
  self.escapeRegExp = function(rexp) {
    return rexp.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
  };
}, , function(module, canCreateDiscussions) {
  /** @type {function(*): boolean} */
  var isArray = Array.isArray;
  /** @type {function(*): boolean} */
  module.exports = isArray;
}, , function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    /** @type {string} */
    var type = typeof obj;
    return null != obj && ("object" == type || "function" == type);
  };
}, function(canCreateDiscussions, Mediator, __webpack_require__) {
  var isUnist = this && this.__extends || function(obj, data) {
    /**
     * @return {undefined}
     */
    function BlobError() {
      this.constructor = obj;
    }
    var i;
    for (i in data) {
      if (data.hasOwnProperty(i)) {
        obj[i] = data[i];
      }
    }
    obj.prototype = null === data ? Object.create(data) : (BlobError.prototype = data.prototype, new BlobError);
  };
  var isFunction_1 = __webpack_require__(97);
  var Subscription_1 = __webpack_require__(30);
  var Observer_1 = __webpack_require__(154);
  var rxSubscriber_1 = __webpack_require__(109);
  var Subscriber = function(child) {
    /**
     * @param {!Object} destinationOrNext
     * @param {!Object} error
     * @param {!SQLResultSet} complete
     * @return {undefined}
     */
    function Subscriber(destinationOrNext, error, complete) {
      switch(child.call(this), this.syncErrorValue = null, this.syncErrorThrown = false, this.syncErrorThrowable = false, this.isStopped = false, arguments.length) {
        case 0:
          this.destination = Observer_1.empty;
          break;
        case 1:
          if (!destinationOrNext) {
            this.destination = Observer_1.empty;
            break;
          }
          if ("object" == typeof destinationOrNext) {
            if ((observerOrNext = destinationOrNext) instanceof Subscriber || "syncErrorThrowable" in observerOrNext && observerOrNext[rxSubscriber_1.rxSubscriber]) {
              var sink = destinationOrNext[rxSubscriber_1.rxSubscriber]();
              this.syncErrorThrowable = sink.syncErrorThrowable;
              this.destination = sink;
              sink.add(this);
            } else {
              /** @type {boolean} */
              this.syncErrorThrowable = true;
              this.destination = new SafeSubscriber(this, destinationOrNext);
            }
            break;
          }
        default:
          /** @type {boolean} */
          this.syncErrorThrowable = true;
          this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);
      }
      var observerOrNext;
    }
    return isUnist(Subscriber, child), Subscriber.prototype[rxSubscriber_1.rxSubscriber] = function() {
      return this;
    }, Subscriber.create = function(name, options, data) {
      var subscriber = new Subscriber(name, options, data);
      return subscriber.syncErrorThrowable = false, subscriber;
    }, Subscriber.prototype.next = function(data) {
      if (!this.isStopped) {
        this._next(data);
      }
    }, Subscriber.prototype.error = function(type) {
      if (!this.isStopped) {
        /** @type {boolean} */
        this.isStopped = true;
        this._error(type);
      }
    }, Subscriber.prototype.complete = function() {
      if (!this.isStopped) {
        /** @type {boolean} */
        this.isStopped = true;
        this._complete();
      }
    }, Subscriber.prototype.unsubscribe = function() {
      if (!this.closed) {
        /** @type {boolean} */
        this.isStopped = true;
        child.prototype.unsubscribe.call(this);
      }
    }, Subscriber.prototype._next = function(value) {
      this.destination.next(value);
    }, Subscriber.prototype._error = function(value) {
      this.destination.error(value);
      this.unsubscribe();
    }, Subscriber.prototype._complete = function() {
      this.destination.complete();
      this.unsubscribe();
    }, Subscriber.prototype._unsubscribeAndRecycle = function() {
      var parent = this._parent;
      var parents = this._parents;
      return this._parent = null, this._parents = null, this.unsubscribe(), this.closed = false, this.isStopped = false, this._parent = parent, this._parents = parents, this;
    }, Subscriber;
  }(Subscription_1.Subscription);
  Mediator.Subscriber = Subscriber;
  var SafeSubscriber = function(child) {
    /**
     * @param {string} category
     * @param {!Object} options
     * @param {!Error} callback
     * @param {!Function} complete
     * @return {undefined}
     */
    function update(category, options, callback, complete) {
      var next;
      child.call(this);
      /** @type {string} */
      this._parentSubscriber = category;
      var context = this;
      if (isFunction_1.isFunction(options)) {
        /** @type {!Object} */
        next = options;
      } else {
        if (options) {
          next = options.next;
          callback = options.error;
          complete = options.complete;
          if (options !== Observer_1.empty) {
            /** @type {!Object} */
            context = Object.create(options);
            if (isFunction_1.isFunction(context.unsubscribe)) {
              this.add(context.unsubscribe.bind(context));
            }
            context.unsubscribe = this.unsubscribe.bind(this);
          }
        }
      }
      this._context = context;
      this._next = next;
      /** @type {!Error} */
      this._error = callback;
      /** @type {!Function} */
      this._complete = complete;
    }
    return isUnist(update, child), update.prototype.next = function(value) {
      if (!this.isStopped && this._next) {
        var _parentSubscriber = this._parentSubscriber;
        if (_parentSubscriber.syncErrorThrowable) {
          if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {
            this.unsubscribe();
          }
        } else {
          this.__tryOrUnsub(this._next, value);
        }
      }
    }, update.prototype.error = function(value) {
      if (!this.isStopped) {
        var _parentSubscriber = this._parentSubscriber;
        if (this._error) {
          if (_parentSubscriber.syncErrorThrowable) {
            this.__tryOrSetError(_parentSubscriber, this._error, value);
            this.unsubscribe();
          } else {
            this.__tryOrUnsub(this._error, value);
            this.unsubscribe();
          }
        } else {
          if (!_parentSubscriber.syncErrorThrowable) {
            throw this.unsubscribe(), value;
          }
          /** @type {string} */
          _parentSubscriber.syncErrorValue = value;
          /** @type {boolean} */
          _parentSubscriber.syncErrorThrown = true;
          this.unsubscribe();
        }
      }
    }, update.prototype.complete = function() {
      var _this = this;
      if (!this.isStopped) {
        var _parentSubscriber = this._parentSubscriber;
        if (this._complete) {
          /**
           * @return {?}
           */
          var callback = function() {
            return _this._complete.call(_this._context);
          };
          if (_parentSubscriber.syncErrorThrowable) {
            this.__tryOrSetError(_parentSubscriber, callback);
            this.unsubscribe();
          } else {
            this.__tryOrUnsub(callback);
            this.unsubscribe();
          }
        } else {
          this.unsubscribe();
        }
      }
    }, update.prototype.__tryOrUnsub = function(fn, value) {
      try {
        fn.call(this._context, value);
      } catch (e) {
        throw this.unsubscribe(), e;
      }
    }, update.prototype.__tryOrSetError = function(parent, fn, value) {
      try {
        fn.call(this._context, value);
      } catch (err) {
        return parent.syncErrorValue = err, parent.syncErrorThrown = true, true;
      }
      return false;
    }, update.prototype._unsubscribe = function() {
      var _parentSubscriber = this._parentSubscriber;
      /** @type {null} */
      this._context = null;
      /** @type {null} */
      this._parentSubscriber = null;
      _parentSubscriber.unsubscribe();
    }, update;
  }(Subscriber);
}, function(canCreateDiscussions, global, require) {
  /**
   * @param {!Object} exports
   * @return {undefined}
   */
  function main(exports) {
    var name;
    for (name in exports) {
      if (!global.hasOwnProperty(name)) {
        global[name] = exports[name];
      }
    }
  }
  Object.defineProperty(global, "__esModule", {
    value : true
  });
  main(require(101));
  main(require(104));
  main(require(43));
  main(require(103));
  main(require(107));
  main(require(102));
  main(require(108));
  var IDriver = require(108);
  var detectors = require(43);
  var exports = require(1);
  var rule = require(3).Logger.create("config");
  var _ = new exports.Global(function() {
    rule.warn("Global config not initialized -- using fall back value.");
    var y = exports.assertNonNull(detectors.TargetBrowser.detect(window), "runtime-detected browser type");
    var a = IDriver.MainConfig.create(y, detectors.TargetContext.detect(window, y), IDriver.ProcessEnv.fromBrowserify());
    return window.GR_CFG = a, a;
  });
  /**
   * @return {?}
   */
  global.getGlobal = function() {
    return _.get();
  };
  /**
   * @param {!Object} type
   * @param {string} key
   * @param {?} callback
   * @param {string} name
   * @return {undefined}
   */
  global.initGlobal = function(type, key, callback, name) {
    _.init(IDriver.MainConfig.create(type, key, callback || IDriver.ProcessEnv.fromBrowserify(), name));
    window.GR_CFG = _.get();
  };
}, function(module, canCreateDiscussions, __webpack_require__) {
  var freeGlobal = __webpack_require__(113);
  /** @type {(Window|boolean)} */
  var freeSelf = "object" == typeof self && self && self.Object === Object && self;
  var storeMixin = freeGlobal || freeSelf || Function("return this")();
  module.exports = storeMixin;
}, , function(canCreateDiscussions, p, $) {
  (function(eslint) {
    /**
     * @return {?}
     */
    function create() {
      if (null != bundle) {
        return bundle;
      }
      var b = (eslint && eslint.env, (item.isBg() ? nonFormElement.getBackgoundPageExtensionApi() : nonFormElement.getContentScriptExtensionApi()).message);
      return bundle = b, b;
    }
    /**
     * @param {string} name
     * @param {!Function} n
     * @return {undefined}
     */
    function query(name, n) {
      if ("__bgerror" !== name) {
        var o = parsedAttrs[name] = parsedAttrs[name] || [];
        if (o.push(n), 1 === o.length) {
          try {
            create().listen(name, function() {
              var mockConsole;
              var item;
              /** @type {!Array} */
              var value = [];
              /** @type {number} */
              var i = 0;
              for (; i < arguments.length; i++) {
                value[i] = arguments[i];
              }
              try {
                var data = isUndefined(o);
                var items = data.next();
                for (; !items.done; items = data.next()) {
                  items.value.apply(void 0, compareFields(value));
                }
              } catch (Console_error) {
                mockConsole = {
                  error : Console_error
                };
              } finally {
                try {
                  if (items && !items.done && (item = data.return)) {
                    item.call(data);
                  }
                } finally {
                  if (mockConsole) {
                    throw mockConsole.error;
                  }
                }
              }
            });
          } catch (reason) {
            p.emitError(reason);
          }
        }
      } else {
        g.on("__bgerror", n);
      }
    }
    /**
     * @param {string} name
     * @param {!Function} n
     * @return {undefined}
     */
    function off(name, n) {
      if ("__bgerror" !== name) {
        var val = parsedAttrs[name];
        if (val) {
          var id = val.indexOf(n);
          if (-1 !== id) {
            val.splice(id, 1);
          }
          if (0 === val.length) {
            delete parsedAttrs[name];
          }
        }
      } else {
        g.off("__bgerror", n);
      }
    }
    var isUndefined = this && this.__values || function(value) {
      var func = "function" == typeof Symbol && value[Symbol.iterator];
      /** @type {number} */
      var pos = 0;
      return func ? func.call(value) : {
        next : function() {
          return value && pos >= value.length && (value = void 0), {
            value : value && value[pos++],
            done : !value
          };
        }
      };
    };
    var collectRefsFromPathitem = this && this.__read || function(obj, data) {
      var node = "function" == typeof Symbol && obj[Symbol.iterator];
      if (!node) {
        return obj;
      }
      var result;
      var mockConsole;
      var value = node.call(obj);
      /** @type {!Array} */
      var linksArr = [];
      try {
        for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
          linksArr.push(result.value);
        }
      } catch (Console_error) {
        mockConsole = {
          error : Console_error
        };
      } finally {
        try {
          if (result && !result.done && (node = value.return)) {
            node.call(value);
          }
        } finally {
          if (mockConsole) {
            throw mockConsole.error;
          }
        }
      }
      return linksArr;
    };
    var compareFields = this && this.__spread || function() {
      /** @type {!Array} */
      var followedKeys = [];
      /** @type {number} */
      var i = 0;
      for (; i < arguments.length; i++) {
        /** @type {!Array<?>} */
        followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
      }
      return followedKeys;
    };
    Object.defineProperty(p, "__esModule", {
      value : true
    });
    var bundle;
    var stats = $(288);
    var group = $(25);
    var item = $(4);
    var m = $(162);
    var nonFormElement = $(56);
    var me = $(1);
    var g = group({});
    var parsedAttrs = {};
    /**
     * @param {?} e
     * @return {undefined}
     */
    p.onBackgroundPortReconnect = function(e) {
      var s = create();
      if ("content-script-message-api" === s.kind && s.onBackgroundPortReconnect) {
        s.onBackgroundPortReconnect(e);
      }
    };
    p.emitError = stats(function(e) {
      return g.emit("__bgerror", e);
    }, 1E3);
    if (item.isBg()) {
      m.listen(document, "grammarly:offline", function() {
        return p.emitError("proxy dead");
      }, void 0);
    }
    /**
     * @param {string} type
     * @param {!Function} fn
     * @return {undefined}
     */
    p.one = function(type, fn) {
      query(type, function callback() {
        /** @type {!Array} */
        var a = [];
        /** @type {number} */
        var i = 0;
        for (; i < arguments.length; i++) {
          a[i] = arguments[i];
        }
        off(type, callback);
        fn.apply(this, a);
      });
    };
    /** @type {function(string, !Function): undefined} */
    p.on = query;
    /** @type {function(string, !Function): undefined} */
    p.off = off;
    /**
     * @param {!Object} name
     * @return {undefined}
     */
    p.emitTabs = function(name) {
      try {
        var s = create();
        switch(s.kind) {
          case "background-message-api":
            s.broadcast(name, {});
            break;
          default:
            throw new Error("emitTabs can be used only on background");
        }
      } catch (reason) {
        p.emitError(reason);
      }
    };
    /**
     * @param {string} group
     * @param {!Object} data
     * @param {number} value
     * @param {!Array} next
     * @param {!Array} callback
     * @param {undefined} eventName
     * @return {undefined}
     */
    p.emitTo = function(group, data, value, next, callback, eventName) {
      if (void 0 === value) {
        value = {};
      }
      if (void 0 === next) {
        next = me.noOp;
      }
      if (void 0 === callback) {
        callback = me.noOp;
      }
      try {
        if (!group) {
          throw TypeError("emitTo can't be used without destination point");
        }
        var self = create();
        switch(self.kind) {
          case "background-message-api":
            self.sendTo(group, data, value, next, callback, eventName);
            break;
          default:
            throw new Error("emitTo can be used only on background");
        }
      } catch (reason) {
        p.emitError(reason);
      }
    };
    /**
     * @param {string} e
     * @param {undefined} n
     * @return {undefined}
     */
    p.emitFocusedTab = function(e, n) {
      try {
        create().toFocused(e, n);
      } catch (reason) {
        p.emitError(reason);
      }
    };
    /**
     * @param {string} random
     * @param {?} data
     * @param {!Function} type
     * @param {?} result
     * @return {undefined}
     */
    p.emitBackground = function(random, data, type, result) {
      try {
        var self = create();
        switch(self.kind) {
          case "content-script-message-api":
            self.broadcastBackground(random, data, type, result);
            break;
          default:
            throw new Error("emitBackground can be used only in content script");
        }
      } catch (reason) {
        p.emitError(reason);
      }
    };
    /**
     * @param {string} type
     * @param {number} data
     * @param {number} r
     * @return {?}
     */
    p.promiseBackground = function(type, data, r) {
      if (void 0 === data) {
        data = {};
      }
      if (void 0 === r) {
        /** @type {number} */
        r = 1E4;
      }
      /** @type {!Promise} */
      var p1 = new Promise(function(shareLevelPassword, cb) {
        try {
          var server = create();
          switch(server.kind) {
            case "content-script-message-api":
              server.broadcastBackground(type, data, shareLevelPassword, cb);
              break;
            default:
              throw new Error("promiseBackground can be used only on client scripts");
          }
        } catch (line) {
          cb(line);
          p.emitError(line);
        }
      });
      return Promise.race([p1, item.delay(r).then(function() {
        throw new Error("Request to bg page (" + bundle + ") rejected by timeout");
      })]);
    };
  }).call(p, $(69));
}, function(canCreateDiscussions, req, require) {
  Object.defineProperty(req, "__esModule", {
    value : true
  });
  var request = require(127);
  req.call = request.call;
  req.getLog = request.getLog;
  req.logCall = request.logCall;
  var assertion = require(149);
  req.felog = assertion.felog;
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return null != obj && "object" == typeof obj;
  };
}, , function(canCreateDiscussions, $scope, require) {
  var r = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var getDaysInMonth = this && this.__spread || function() {
    /** @type {!Array} */
    var bytes = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      bytes = bytes.concat(r(arguments[i]));
    }
    return bytes;
  };
  Object.defineProperty($scope, "__esModule", {
    value : true
  });
  var storageService = require(10);
  var options = require(18);
  $scope.isTestsMode = options.isTestsMode;
  $scope.getVersion = options.getVersion;
  $scope.getUuid = options.getUuid;
  $scope.ENV = options.ENV;
  $scope.URLS = options.URLS;
  $scope.GRAMMARLY_DOMAIN = options.GRAMMARLY_DOMAIN;
  $scope.appName = options.appName;
  $scope.gnarAppName = options.gnarAppName;
  /** @type {string} */
  var sel_construtor_name = "data-enable-grammarly";
  $scope.GNAR = storageService.getGlobal().appConfig.gnar;
  /** @type {!Array} */
  $scope.news = ["The G logo gets out of the way when you're typing", "Switch between American, British, Australian, and Canadian English", "Quickly disable checking in certain types of text fields", "A fully redesigned and improved interface"];
  /** @type {!Array} */
  $scope.userFields = ["id", "email", "firstName", "anonymous", "type", "subscriptionFree", "experiments", "isTest", "premium", "settings", "registrationDate", "mimic", "groups", "extensionInstallDate", "fixed_errors"];
  $scope.userFields.push("token");
  /** @type {string} */
  $scope.nextVerClass = "gr_ver_2";
  /** @type {!Array} */
  $scope.grammarlyAttrs = ["data-gramm_editor", "data-gramm", "data-gramm_id", "gramm_editor"];
  $scope.restrictedAttrs = getDaysInMonth($scope.grammarlyAttrs, ["readonly", "disabled"]);
  /** @type {!Array} */
  $scope.customFieldsRestrictedAttrs = ["pm-container", ["class", "ProseMirror"], "data-synchrony", ["data-gramm", "false"], [sel_construtor_name, "false"], ["class", "redactor-layer"], ["class", "redactor-editor"], ["class", "ck-editor__editable"], ["class", "redactor_box"], ["aria-label", "Search Facebook"]];
  $scope.allRestrictedAttrs = getDaysInMonth($scope.restrictedAttrs, $scope.customFieldsRestrictedAttrs);
  $scope.forceEnableAttr = {
    name : sel_construtor_name,
    value : "true"
  };
  /** @type {string} */
  $scope.restrictedParentAttrs = "[data-reactid]";
  /** @type {!Array} */
  $scope.externalEvents = ["changed-user", "changed-plan", "changed-dialect", "cleanup", "editor-fix"];
}, function(canCreateDiscussions, $scope, saveNotifs) {
  /**
   * @return {?}
   */
  function init() {
    return "bg" === req.bundleInfo.context;
  }
  /**
   * @return {?}
   */
  function sendMessage() {
    return "popup" === req.bundleInfo.context;
  }
  Object.defineProperty($scope, "__esModule", {
    value : true
  });
  var req = saveNotifs(10).getGlobal();
  /**
   * @return {?}
   */
  $scope.isTestsMode = function() {
    return !!window.__extensionTestsMode;
  };
  /**
   * @return {?}
   */
  $scope.getUuid = function() {
    return req.appConfig.extensionId;
  };
  /**
   * @return {?}
   */
  $scope.isFF = function() {
    return "firefox" === req.bundleInfo.browser;
  };
  /**
   * @return {?}
   */
  $scope.isChrome = function() {
    return "chrome" === req.bundleInfo.browser;
  };
  /**
   * @return {?}
   */
  $scope.isSafari = function() {
    return "safari" === req.bundleInfo.browser;
  };
  /**
   * @return {?}
   */
  $scope.isSafariApp = function() {
    return "safariApp" === req.bundleInfo.bundleType;
  };
  /**
   * @return {?}
   */
  $scope.isLegacySafari = function() {
    return "safari" === req.bundleInfo.bundleType;
  };
  /**
   * @return {?}
   */
  $scope.isEdge = function() {
    return "edge" === req.bundleInfo.browser;
  };
  /**
   * @return {?}
   */
  $scope.isWindows = function() {
    return req.systemInfo.os.isWindows;
  };
  /** @type {function(): ?} */
  $scope.isBg = init;
  /** @type {function(): ?} */
  $scope.isPopup = sendMessage;
  /**
   * @return {?}
   */
  $scope.isBgOrPopup = function() {
    return init() || sendMessage();
  };
  /**
   * @return {?}
   */
  $scope.getBrowser = function() {
    return req.bundleInfo.browser;
  };
  /**
   * @return {?}
   */
  $scope.getVersion = function() {
    return req.buildInfo.version;
  };
  $scope.ENV = req.bundleInfo.env;
  $scope.URLS = req.appConfig.url;
  $scope.appName = req.appConfig.felog.appName;
  $scope.gnarAppName = req.appConfig.gnar.appName;
  $scope.GRAMMARLY_DOMAIN = req.appConfig.url.grammarlyDomain;
}, , , function(mixin, canCreateDiscussions, require) {
  var Symbol = require(34);
  var $ = require(217);
  var callback = require(218);
  /** @type {string} */
  var categories = "[object Null]";
  /** @type {string} */
  var tags = "[object Undefined]";
  var value = Symbol ? Symbol.toStringTag : void 0;
  /**
   * @param {?} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return null == key ? void 0 === key ? tags : categories : value && value in Object(key) ? $(key) : callback(key);
  };
}, , function(mixin, canCreateDiscussions, __webpack_require__) {
  var isObject = __webpack_require__(234);
  var next = __webpack_require__(237);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    var result = next(obj, name);
    return isObject(result) ? result : void 0;
  };
}, function(canCreateDiscussions, self, require) {
  /**
   * @param {!Object} elem
   * @return {?}
   */
  function get(elem) {
    var doc = elem && elem.ownerDocument || document;
    var result = doc.location || doc.defaultView.location;
    return result ? filter(result.hostname) : "";
  }
  /**
   * @param {!Object} elem
   * @return {?}
   */
  function url(elem) {
    var doc = elem && elem.ownerDocument || document;
    var node = doc.location || doc.defaultView.location;
    return node ? node.pathname + node.search : "";
  }
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var platform = require(4);
  var lane = require(135);
  var crypto = require(94);
  /**
   * @param {string} deviceId
   * @return {?}
   */
  var filter = function(deviceId) {
    return deviceId.replace("www.", "");
  };
  /** @type {function(!Object): ?} */
  self.getDomain = get;
  /**
   * @param {string} val
   * @return {?}
   */
  self.domainFromUrl = function(val) {
    if (platform.isFF() && /^about:/.test(val)) {
      return val;
    }
    /** @type {!Element} */
    var location = document.createElement("a");
    return location.href = val, filter(location.hostname);
  };
  /**
   * @return {?}
   */
  self.isFacebookSite = function() {
    return lane.FACEBOOK_SITES.includes(get());
  };
  /**
   * @return {?}
   */
  self.isGdocsSite = function() {
    return /\/document\//.test(url()) && "docs.google.com" === get();
  };
  /**
   * @return {?}
   */
  self.isGdocsDocument = function() {
    return /\/document\/d\/.*$/.test(url()) && "docs.google.com" === get();
  };
  /**
   * @return {?}
   */
  self.isJiraSite = function() {
    return /\.atlassian\.net/.test(get());
  };
  /**
   * @return {?}
   */
  self.isBlackboardSite = function() {
    return /\.blackboard\.com/.test(get());
  };
  /** @type {!RegExp} */
  var s = /d\/(.*?)\//;
  /**
   * @return {?}
   */
  self.getHashedGoogleDocId = function() {
    if (!document || !document.location) {
      return null;
    }
    if (s.test(document.location.href)) {
      /** @type {string} */
      var fill = document.location.href.match(s)[1];
      return crypto.createHash("superfasthash").hash(fill);
    }
    return null;
  };
  /** @type {function(!Object): ?} */
  self.getUrl = url;
  /**
   * @return {?}
   */
  self.getFavicon = function() {
    /** @type {!RegExp} */
    var ABSOLUTE_URL = new RegExp("^(?:[a-z]+:)?//", "i");
    /** @type {string} */
    var url = "";
    /** @type {!NodeList<Element>} */
    var params = document.getElementsByTagName("link");
    /** @type {number} */
    var i = 0;
    for (; i < params.length; i++) {
      /** @type {!Element} */
      var o = params[i];
      if (-1 !== ('"' + o.getAttribute("rel") + '"').search(/("icon )|( icon")|("icon")|( icon )/i)) {
        /** @type {string} */
        url = o.getAttribute("href");
      }
    }
    return url || (url = "favicon.ico"), ABSOLUTE_URL.test(url) ? url : "/" !== url[0] ? "//" + document.location.host + document.location.pathname + url : "//" + document.location.host + url;
  };
  /**
   * @return {?}
   */
  self.getPopupEditorBackLabel = function() {
    var item = get();
    return "Back to " + (item && {
      "mail.google.com" : "Gmail",
      "facebook.com" : "Facebook",
      "twitter.com" : "Twitter"
    }[item] || document.title);
  };
}, function(mixin, canCreateDiscussions, n) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    /**
     * @param {string} str
     * @return {?}
     */
    function $(str) {
      return "string" != typeof str ? str.join(" ") : str;
    }
    var data = {};
    var self = obj || {};
    return self.emit = function(name, n) {
      name = $(name);
      var o = data[name];
      if (o) {
        var s = o.concat();
        /** @type {number} */
        var t = 0;
        for (; t < s.length; t++) {
          s[t](n);
        }
      }
    }, self.emitArgs = function(player) {
      player = $(player);
      var color = data[player];
      /** @type {!Array<?>} */
      var o = [].slice.call(arguments, 1);
      if (color) {
        var t = color.concat();
        /** @type {number} */
        var k = 0;
        for (; k < t.length; k++) {
          t[k].apply(null, o);
        }
      }
    }, self.on = function(name, fn) {
      return name = $(name), data[name] = data[name] || [], data[name].push(fn), {
        un : function() {
          self.un(name, fn);
        }
      };
    }, self.off = self.un = function(e, cb) {
      e = $(e);
      var bucket = data[e];
      if (bucket) {
        var bb = bucket.indexOf(cb);
        if (bb > -1) {
          bucket.splice(bb, 1);
          if (!(bucket.length > 0)) {
            delete data[e];
          }
        }
      }
    }, self.one = function(type, fn) {
      var reader = self.on(type, function() {
        reader.un();
        fn.apply(null, arguments);
      });
    }, self.delegate = function(node, name, type) {
      name = $(name);
      self.on(name, function(n) {
        node.emit(type || name, n);
      });
    }, self;
  };
}, , , function(mixin, canCreateDiscussions, n) {
  var i = n(38);
  var a = n(72);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return null != obj && a(obj.length) && !i(obj);
  };
}, function(canCreateDiscussions, exports, moment) {
  (function(useDirectCollection) {
    /** @type {(Window|boolean)} */
    var useUpdate = "undefined" != typeof window && window;
    /** @type {(?|boolean)} */
    var freeSelf = "undefined" != typeof self && "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope && self;
    var element = useUpdate || void 0 !== useDirectCollection && useDirectCollection || freeSelf;
    exports.root = element;
    (function() {
      if (!element) {
        throw new Error("RxJS could not find any global context (window, self, global)");
      }
    })();
  }).call(exports, moment(33));
}, function(canCreateDiscussions, persistence, __webpack_require__) {
  /**
   * @param {!Object} errors
   * @return {?}
   */
  function flattenUnsubscriptionErrors(errors) {
    return errors.reduce(function(errors, err) {
      return errors.concat(err instanceof UnsubscriptionError_1.UnsubscriptionError ? err.errors : err);
    }, []);
  }
  var low = __webpack_require__(77);
  var ctx = __webpack_require__(212);
  var isFunction_1 = __webpack_require__(97);
  var _ = __webpack_require__(54);
  var errorObject_1 = __webpack_require__(37);
  var UnsubscriptionError_1 = __webpack_require__(311);
  var Subscription = function() {
    /**
     * @param {!Function} unsubscribe
     * @return {undefined}
     */
    function Subscription(unsubscribe) {
      /** @type {boolean} */
      this.closed = false;
      /** @type {null} */
      this._parent = null;
      /** @type {null} */
      this._parents = null;
      /** @type {null} */
      this._subscriptions = null;
      if (unsubscribe) {
        /** @type {!Function} */
        this._unsubscribe = unsubscribe;
      }
    }
    var sub;
    return Subscription.prototype.unsubscribe = function() {
      var errors;
      /** @type {boolean} */
      var t = false;
      if (!this.closed) {
        var parent = this._parent;
        var items = this._parents;
        var project = this._unsubscribe;
        var data = this._subscriptions;
        /** @type {boolean} */
        this.closed = true;
        /** @type {null} */
        this._parent = null;
        /** @type {null} */
        this._parents = null;
        /** @type {null} */
        this._subscriptions = null;
        /** @type {number} */
        var i = -1;
        var max = items ? items.length : 0;
        for (; parent;) {
          parent.remove(this);
          parent = ++i < max && items[i] || null;
        }
        if (isFunction_1.isFunction(project)) {
          if (_.tryCatch(project).call(this) === errorObject_1.errorObject) {
            /** @type {boolean} */
            t = true;
            errors = errors || (errorObject_1.errorObject.e instanceof UnsubscriptionError_1.UnsubscriptionError ? flattenUnsubscriptionErrors(errorObject_1.errorObject.e.errors) : [errorObject_1.errorObject.e]);
          }
        }
        if (low.isArray(data)) {
          /** @type {number} */
          i = -1;
          max = data.length;
          for (; ++i < max;) {
            var r = data[i];
            if (ctx.isObject(r)) {
              if (_.tryCatch(r.unsubscribe).call(r) === errorObject_1.errorObject) {
                /** @type {boolean} */
                t = true;
                errors = errors || [];
                var err = errorObject_1.errorObject.e;
                if (err instanceof UnsubscriptionError_1.UnsubscriptionError) {
                  errors = errors.concat(flattenUnsubscriptionErrors(err.errors));
                } else {
                  errors.push(err);
                }
              }
            }
          }
        }
        if (t) {
          throw new UnsubscriptionError_1.UnsubscriptionError(errors);
        }
      }
    }, Subscription.prototype.add = function(subscription) {
      if (!subscription || subscription === Subscription.EMPTY) {
        return Subscription.EMPTY;
      }
      if (subscription === this) {
        return this;
      }
      /** @type {!Object} */
      var sub = subscription;
      switch(typeof subscription) {
        case "function":
          sub = new Subscription(subscription);
        case "object":
          if (sub.closed || "function" != typeof sub.unsubscribe) {
            return sub;
          }
          if (this.closed) {
            return sub.unsubscribe(), sub;
          }
          if ("function" != typeof sub._addParent) {
            var tmp = sub;
            /** @type {!Array} */
            (sub = new Subscription)._subscriptions = [tmp];
          }
          break;
        default:
          throw new Error("unrecognized teardown " + subscription + " added to Subscription.");
      }
      return (this._subscriptions || (this._subscriptions = [])).push(sub), sub._addParent(this), sub;
    }, Subscription.prototype.remove = function(target) {
      var subscriptions = this._subscriptions;
      if (subscriptions) {
        var t = subscriptions.indexOf(target);
        if (-1 !== t) {
          subscriptions.splice(t, 1);
        }
      }
    }, Subscription.prototype._addParent = function(parent) {
      var style = this._parent;
      var parents = this._parents;
      if (style && style !== parent) {
        if (parents) {
          if (-1 === parents.indexOf(parent)) {
            parents.push(parent);
          }
        } else {
          /** @type {!Array} */
          this._parents = [parent];
        }
      } else {
        /** @type {string} */
        this._parent = parent;
      }
    }, Subscription.EMPTY = ((sub = new Subscription).closed = true, sub), Subscription;
  }();
  persistence.Subscription = Subscription;
}, , function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} value
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(value, type) {
    return value === type || value != value && type != type;
  };
}, function(module, canCreateDiscussions) {
  var g;
  g = function() {
    return this;
  }();
  try {
    g = g || Function("return this")() || (0, eval)("this");
  } catch (e) {
    if ("object" == typeof window) {
      /** @type {!Window} */
      g = window;
    }
  }
  module.exports = g;
}, function(module, canCreateDiscussions, __webpack_require__) {
  var Symbol = __webpack_require__(11).Symbol;
  module.exports = Symbol;
}, function(e, exports, cb) {
  (function(module) {
    var name = cb(11);
    var ret = cb(219);
    var freeExports = "object" == typeof exports && exports && !exports.nodeType && exports;
    var freeModule = freeExports && "object" == typeof module && module && !module.nodeType && module;
    var Buffer = freeModule && freeModule.exports === freeExports ? name.Buffer : void 0;
    var BinaryBundle = (Buffer ? Buffer.isBuffer : void 0) || ret;
    module.exports = BinaryBundle;
  }).call(exports, cb(44)(e));
}, , function(canCreateDiscussions, exports, n) {
  exports.errorObject = {
    e : {}
  };
}, function(mixin, canCreateDiscussions, n) {
  var next = n(21);
  var h = n(8);
  /** @type {string} */
  var manager_path = "[object AsyncFunction]";
  /** @type {string} */
  var a = "[object Function]";
  /** @type {string} */
  var b = "[object GeneratorFunction]";
  /** @type {string} */
  var defaultReader = "[object Proxy]";
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    if (!h(value)) {
      return false;
    }
    var url = next(value);
    return url == a || url == b || url == manager_path || url == defaultReader;
  };
}, function(mixin, canCreateDiscussions, require) {
  var flatten = require(112);
  var extend = require(169);
  var isArray = require(28);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return isArray(value) ? flatten(value) : extend(value);
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var tmp = __webpack_require__(220);
  var from_cache = __webpack_require__(114);
  var nodeUtil = __webpack_require__(141);
  var object = nodeUtil && nodeUtil.isTypedArray;
  var m = object ? from_cache(object) : tmp;
  mixin.exports = m;
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(50);
  /** @type {number} */
  var Infinity = 1 / 0;
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    if ("string" == typeof key || next(key)) {
      return key;
    }
    /** @type {string} */
    var keyString = key + "";
    return "0" == keyString && 1 / key == -Infinity ? "-0" : keyString;
  };
}, , function(canCreateDiscussions, BeautifulProperties, baseTemp) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var base = baseTemp(1);
  !function(klass) {
    /**
     * @param {!Function} name
     * @return {?}
     */
    klass.create = function(name) {
      return base.optionalStringUnion(["chrome", "safari", "firefox", "edge"], name);
    };
    /**
     * @param {!Object} context
     * @return {?}
     */
    klass.detect = function(context) {
      return context.chrome && /google/i.test(context.navigator.vendor) ? "chrome" : -1 !== context.navigator.userAgent.indexOf("Firefox") ? "firefox" : /^((?!chrome).)*safari/i.test(context.navigator.userAgent) ? "safari" : "Netscape" === context.navigator.appName && context.navigator.appVersion.indexOf("Edge") > -1 ? "edge" : void 0;
    };
  }(BeautifulProperties.TargetBrowser || (BeautifulProperties.TargetBrowser = {}));
  (function(canCreateDiscussions) {
    /**
     * @param {!Function} name
     * @return {?}
     */
    (BeautifulProperties.TargetEnv || (BeautifulProperties.TargetEnv = {})).create = function(name) {
      return base.optionalStringUnion(["dev", "prod", "qa"], name);
    };
  })();
  (function(klass) {
    /**
     * @param {!Function} name
     * @return {?}
     */
    klass.create = function(name) {
      return base.optionalStringUnion(["bg", "cs", "popup"], name);
    };
    /**
     * @param {!Object} object
     * @param {string} predicate
     * @return {?}
     */
    klass.detect = function(object, predicate) {
      /** @type {boolean} */
      var isBg = !!object.IS_BG;
      var is_desktop = "safari" === predicate ? function() {
        try {
          return object.safari.extension.globalPage.contentWindow !== object;
        } catch (e) {
          return false;
        }
      }() : !!object.IS_POPUP;
      return isBg ? "bg" : is_desktop ? "popup" : "cs";
    };
  })(BeautifulProperties.TargetContext || (BeautifulProperties.TargetContext = {}));
  (function(canCreateDiscussions) {
    /**
     * @param {!Object} name
     * @param {string} data
     * @param {string} key
     * @param {string} target
     * @return {?}
     */
    (BeautifulProperties.BundleInfo || (BeautifulProperties.BundleInfo = {})).create = function(name, data, key, target) {
      return {
        browser : name,
        bundleType : data,
        env : key,
        context : target
      };
    };
  })();
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return obj.webpackPolyfill || (obj.deprecate = function() {
    }, obj.paths = [], obj.children || (obj.children = []), Object.defineProperty(obj, "loaded", {
      enumerable : true,
      get : function() {
        return obj.l;
      }
    }), Object.defineProperty(obj, "id", {
      enumerable : true,
      get : function() {
        return obj.i;
      }
    }), obj.webpackPolyfill = 1), obj;
  };
}, function(module, canCreateDiscussions, __webpack_require__) {
  /**
   * @param {!Object} o
   * @return {undefined}
   */
  function s(o) {
    /** @type {number} */
    var j = -1;
    var r_len = null == o ? 0 : o.length;
    this.clear();
    for (; ++j < r_len;) {
      var a = o[j];
      this.set(a[0], a[1]);
    }
  }
  var listCacheClear = __webpack_require__(224);
  var method = __webpack_require__(225);
  var hashGet = __webpack_require__(226);
  var has = __webpack_require__(227);
  var cookie = __webpack_require__(228);
  s.prototype.clear = listCacheClear;
  s.prototype.delete = method;
  s.prototype.get = hashGet;
  s.prototype.has = has;
  s.prototype.set = cookie;
  /** @type {function(!Object): undefined} */
  module.exports = s;
}, function(mixin, canCreateDiscussions, saveNotifs) {
  var checkedSubscribe = saveNotifs(32);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    var i = obj.length;
    for (; i--;) {
      if (checkedSubscribe(obj[i][0], name)) {
        return i;
      }
    }
    return -1;
  };
}, function(module, canCreateDiscussions, saveNotifs) {
  var nativeCreate = saveNotifs(23)(Object, "create");
  module.exports = nativeCreate;
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var isKeyable = __webpack_require__(246);
  /**
   * @param {!Object} value
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(value, key) {
    var data = value.__data__;
    return isKeyable(key) ? data["string" == typeof key ? "string" : "hash"] : data.map;
  };
}, function(canCreateDiscussions, scope, $) {
  /**
   * @param {string} key
   * @param {string} val
   * @return {?}
   */
  function setTimeout(key, val) {
    return key + "=" + encodeURIComponent(val);
  }
  /**
   * @param {string} e
   * @param {string} d
   * @return {?}
   */
  function stop(e, d) {
    return setTimeout("utm_medium", "internal") + "&" + setTimeout("utm_source", e) + "&" + setTimeout("utm_campaign", d);
  }
  /**
   * @param {string} e
   * @return {?}
   */
  function submit(e) {
    return setTimeout("utm_medium", "internal") + "&" + setTimeout("utm_source", e);
  }
  Object.defineProperty(scope, "__esModule", {
    value : true
  });
  var self = $(18);
  var win = $(4);
  /** @type {string} */
  var s = "fromExtension=true";
  /**
   * @return {?}
   */
  scope.getEditorUrl = function() {
    return self.URLS.app + "?" + setTimeout("utm_medium", "internal");
  };
  /**
   * @param {string} app
   * @param {string} err
   * @return {?}
   */
  scope.getSignUpURL = function(app, err) {
    return self.URLS.signup + "?" + stop(app, err) + "&" + s;
  };
  /**
   * @return {?}
   */
  scope.getSignInURL = function() {
    return self.URLS.signin + "?" + submit("signinHook") + "&" + s;
  };
  /**
   * @return {?}
   */
  scope.getFbSigninURL = function() {
    return self.URLS.fbSignin + "&" + submit("signinHook");
  };
  /**
   * @return {?}
   */
  scope.getGoogleSigninURL = function() {
    return self.URLS.googleSignin + "&" + submit("signinHook");
  };
  /**
   * @param {string} value
   * @return {?}
   */
  scope.getFbSignupURL = function(value) {
    return self.URLS.fbSignup + "&" + submit(value);
  };
  /**
   * @param {string} value
   * @return {?}
   */
  scope.getGoogleSignupURL = function(value) {
    return self.URLS.googleSignup + "&" + submit(value);
  };
  /**
   * @return {?}
   */
  scope.getResetPasswordURL = function() {
    return self.URLS.resetPassword + "?" + setTimeout("utm_medium", "internal");
  };
  /**
   * @return {?}
   */
  scope.getTermsURL = function() {
    return self.URLS.terms + "?" + setTimeout("utm_medium", "internal");
  };
  /**
   * @return {?}
   */
  scope.getPrivatePolicyURL = function() {
    return self.URLS.policy + "?" + setTimeout("utm_medium", "internal");
  };
  /**
   * @return {?}
   */
  scope.getFirefoxPrivatePolicyURL = function() {
    return self.URLS.firefoxPrivatePolicy + "?" + setTimeout("utm_medium", "internal");
  };
  /**
   * @param {string} app
   * @param {string} err
   * @return {?}
   */
  scope.getUpgradeURL = function(app, err) {
    return self.URLS.upgrade + "?" + stop(app, err);
  };
  /**
   * @param {string} indexName
   * @return {?}
   */
  scope.getExtensionSuccessURL = function(indexName) {
    var ARByte = win.getBrowser();
    /** @type {string} */
    var index = indexName ? "navigation" : "store";
    return self.URLS.welcomeC + "?" + setTimeout("utm_medium", index) + "&" + setTimeout("utm_source", ARByte);
  };
  /**
   * @param {boolean} name
   * @return {?}
   */
  scope.getAfterInstallURL = function(name) {
    var ARByte = win.getBrowser();
    /** @type {string} */
    var lineCount = self.URLS.afterInstall + "/?extension_install=true";
    /** @type {string} */
    var index = name ? "navigation" : "store";
    /** @type {string} */
    var nameSuffix = name ? "" : "&" + setTimeout("utm_source", ARByte);
    return lineCount + "&" + setTimeout("utm_medium", index) + nameSuffix;
  };
  /**
   * @param {string} e
   * @return {?}
   */
  scope.getUninstallURL = function(e) {
    /** @type {string} */
    var B = setTimeout("utm_medium", "internal") + "&" + setTimeout("utm_campaign", "extensionUninstall");
    return e ? self.URLS.uninstall + "?domain=" + encodeURI(e) + "&" + B : self.URLS.uninstall + "?" + B;
  };
  /**
   * @param {string} url
   * @param {string} evt
   * @param {string} val
   * @return {?}
   */
  scope.addParamsToUpgradeURL = function(url, evt, val) {
    return url + "&" + setTimeout("browser", win.getBrowser()) + "&" + stop(evt, val);
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var eachTextNode = __webpack_require__(21);
  var isObject = __webpack_require__(15);
  /** @type {string} */
  var funcTag = "[object Symbol]";
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return "symbol" == typeof value || isObject(value) && eachTextNode(value) == funcTag;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return obj;
  };
}, , , function(canCreateDiscussions, trycatch, __webpack_require__) {
  /**
   * @return {?}
   */
  function tryCatcher() {
    try {
      return oldSetupComputes.apply(this, arguments);
    } catch (reason) {
      return errorObject_1.errorObject.e = reason, errorObject_1.errorObject;
    }
  }
  var oldSetupComputes;
  var errorObject_1 = __webpack_require__(37);
  /**
   * @param {string} args
   * @return {?}
   */
  trycatch.tryCatch = function(args) {
    return oldSetupComputes = args, tryCatcher;
  };
}, function(mixin, canCreateDiscussions, require) {
  var matrix = require(216);
  var isArrayLikeObject = require(15);
  var ObjProto = Object.prototype;
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = ObjProto.hasOwnProperty;
  /** @type {function(this:Object, string): boolean} */
  var propertyIsEnumerable = ObjProto.propertyIsEnumerable;
  var m = matrix(function() {
    return arguments;
  }()) ? matrix : function(value) {
    return isArrayLikeObject(value) && hasOwnProperty.call(value, "callee") && !propertyIsEnumerable.call(value, "callee");
  };
  mixin.exports = m;
}, function(canCreateDiscussions, err, require) {
  Object.defineProperty(err, "__esModule", {
    value : true
  });
  var BakedDoc = require(1);
  var LOGGER_STUB = require(3).Logger.create("extension-api");
  !function(options) {
    var prop;
    for (prop in options) {
      if (!err.hasOwnProperty(prop)) {
        err[prop] = options[prop];
      }
    }
  }(require(59));
  /**
   * @param {?} js
   * @return {undefined}
   */
  err.initBackgroundPageExtensionApi = function(js) {
    if (window.extenstionBackgroundPageApi) {
      LOGGER_STUB.warn("Background Page Extension Api init called more than once");
    }
    window.extenstionBackgroundPageApi = window.extenstionBackgroundPageApi || js;
  };
  /**
   * @param {?} THREE
   * @return {undefined}
   */
  err.initContentScriptExtensionApi = function(THREE) {
    if (window.extenstionContentScriptApi) {
      LOGGER_STUB.warn("Content Script Extension Api init called more than once");
    }
    window.extenstionContentScriptApi = window.extenstionContentScriptApi || THREE;
  };
  /**
   * @return {?}
   */
  err.getContentScriptExtensionApi = function() {
    return BakedDoc.assertNonNull(window.extenstionContentScriptApi, "content script extension api was not initialized");
  };
  /**
   * @return {?}
   */
  err.getBackgoundPageExtensionApi = function() {
    return BakedDoc.assertNonNull(window.extenstionBackgroundPageApi, "backgound page extension api was not initialized");
  };
}, function(mixin, canCreateDiscussions, require) {
  var flatten = require(112);
  var extend = require(280);
  var isArray = require(28);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return isArray(value) ? flatten(value, true) : extend(value);
  };
}, , function(canCreateDiscussions, result, n) {
  Object.defineProperty(result, "__esModule", {
    value : true
  });
  result.ports = {
    bridge : "bridge",
    background : "message:to-priv",
    broadcast : "message:to-non-priv"
  };
  var graphsParams;
  var slead = function() {
    return function(result) {
      var userId = result.userId;
      var persistedDto = result.isTestUser;
      var courseSections = result.isAnonymous;
      var containerId = result.containerId;
      this.userId = userId;
      this.isTestUser = persistedDto;
      this.isAnonymous = courseSections;
      this.containerId = containerId;
    };
  }();
  result.UserInfo = slead;
  /** @type {string} */
  (graphsParams = result.StorageMigrationResult || (result.StorageMigrationResult = {}))[graphsParams.success = 0] = "success";
  /** @type {string} */
  graphsParams[graphsParams.successWithEmpty = 1] = "successWithEmpty";
  /** @type {string} */
  graphsParams[graphsParams.alreadyMigrated = 2] = "alreadyMigrated";
}, function(module, canCreateDiscussions, factory) {
  module.exports = factory(333);
}, function(canCreateDiscussions, self, moment) {
  (function(eslint) {
    /**
     * @return {?}
     */
    function deferred() {
      var data = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
      /** @type {!Object} */
      var result = sort({}, data);
      /** @type {!Promise} */
      var source = new Promise(function(resolve, reject) {
        result.resolve = resolve;
        result.reject = reject;
      });
      return result.promise = source, result;
    }
    Object.defineProperty(self, "__esModule", {
      value : true
    });
    /** @type {function(!Object, ...(Object|null)): !Object} */
    var sort = Object.assign || function(obj) {
      /** @type {number} */
      var i = 1;
      for (; i < arguments.length; i++) {
        var a = arguments[i];
        var key;
        for (key in a) {
          if (Object.prototype.hasOwnProperty.call(a, key)) {
            obj[key] = a[key];
          }
        }
      }
      return obj;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    self.ident = function(value) {
      return value;
    };
    /**
     * @param {?} type
     * @param {?} test
     * @param {?} err
     * @return {undefined}
     */
    self.check = function(type, test, err) {
      if (!test(type)) {
        throw new Error(err);
      }
    };
    /**
     * @param {!Object} e
     * @param {!Function} dir
     * @return {undefined}
     */
    self.remove = function(e, dir) {
      var n = e.indexOf(dir);
      if (n >= 0) {
        e.splice(n, 1);
      }
    };
    /** @type {function(): ?} */
    self.deferred = deferred;
    /**
     * @param {number} length
     * @return {?}
     */
    self.arrayOfDeffered = function(length) {
      /** @type {!Array} */
      var arr = [];
      /** @type {number} */
      var i = 0;
      for (; i < length; i++) {
        arr.push(deferred());
      }
      return arr;
    };
    /**
     * @return {?}
     */
    self.autoInc = function() {
      var e = arguments.length <= 0 || void 0 === arguments[0] ? 0 : arguments[0];
      return function() {
        return ++e;
      };
    };
    /**
     * @param {?} callback
     * @return {?}
     */
    self.asap = function(callback) {
      return Promise.resolve(1).then(function() {
        return callback();
      });
    };
    /**
     * @param {!Array} name
     * @return {undefined}
     */
    self.warnDeprecated = function(name) {
      if (i) {
        console.warn("DEPRECATION WARNING", name);
      }
    };
    /** @type {function(string): ?} */
    var initDefaultFormat = self.sym = function(id) {
      return "@@redux-saga/" + id;
    };
    var stack = self.TASK = initDefaultFormat("TASK");
    /**
     * @return {?}
     */
    self.kTrue = function() {
      return true;
    };
    /**
     * @return {undefined}
     */
    self.noop = function() {
    };
    var i = self.isDev = void 0 !== eslint && eslint.env && false;
    var is = self.is = {
      undef : function(value) {
        return null == value;
      },
      notUndef : function(s) {
        return null != s;
      },
      func : function(name) {
        return "function" == typeof name;
      },
      array : Array.isArray,
      promise : function(value) {
        return value && is.func(value.then);
      },
      iterator : function(value) {
        return value && is.func(value.next) && is.func(value.throw);
      },
      task : function(e) {
        return e && e[stack];
      }
    };
  }).call(self, moment(69));
}, , , function(mixin, canCreateDiscussions) {
  /** @type {number} */
  var edit = 9007199254740991;
  /** @type {!RegExp} */
  var VALID_IDENTIFIER_EXPR = /^(?:0|[1-9]\d*)$/;
  /**
   * @param {!Object} key
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(key, name) {
    /** @type {string} */
    var type = typeof key;
    return !!(name = null == name ? edit : name) && ("number" == type || "symbol" != type && VALID_IDENTIFIER_EXPR.test(key)) && key > -1 && key % 1 == 0 && key < name;
  };
}, function(mixin, canCreateDiscussions) {
  var oproto = Object.prototype;
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    var method = obj && obj.constructor;
    return obj === ("function" == typeof method && method.prototype || oproto);
  };
}, function(module, canCreateDiscussions, __webpack_require__) {
  /**
   * @param {!Object} name
   * @return {undefined}
   */
  function Stack(name) {
    var data = this.__data__ = new ListCache(name);
    this.size = data.size;
  }
  var ListCache = __webpack_require__(45);
  var listCacheClear = __webpack_require__(229);
  var method = __webpack_require__(230);
  var hashGet = __webpack_require__(231);
  var has = __webpack_require__(232);
  var cookie = __webpack_require__(233);
  Stack.prototype.clear = listCacheClear;
  Stack.prototype.delete = method;
  Stack.prototype.get = hashGet;
  Stack.prototype.has = has;
  Stack.prototype.set = cookie;
  /** @type {function(!Object): undefined} */
  module.exports = Stack;
}, function(module, canCreateDiscussions, __webpack_require__) {
  var getPrototype = __webpack_require__(115)(Object.getPrototypeOf, Object);
  module.exports = getPrototype;
}, function(mixin, canCreateDiscussions, n) {
  var f = n(180);
  var h = n(76);
  /**
   * @param {!Object} x
   * @param {!Object} str
   * @param {string} data
   * @param {string} fn
   * @return {?}
   */
  mixin.exports = function(x, str, data, fn) {
    /** @type {boolean} */
    var offer = !data;
    if (!data) {
      data = {};
    }
    /** @type {number} */
    var j = -1;
    var i = str.length;
    for (; ++j < i;) {
      var i = str[j];
      var value = fn ? fn(data[i], x[i], i, data, x) : void 0;
      if (void 0 === value) {
        value = x[i];
      }
      if (offer) {
        h(data, i, value);
      } else {
        f(data, i, value);
      }
    }
    return data;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @return {?}
   */
  function defaultSetTimout() {
    throw new Error("setTimeout has not been defined");
  }
  /**
   * @return {?}
   */
  function defaultClearTimeout() {
    throw new Error("clearTimeout has not been defined");
  }
  /**
   * @param {!Array} method
   * @return {?}
   */
  function setTimeout(method) {
    if (cachedSetTimeout === setTimeout) {
      return setTimeout(method, 0);
    }
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
      return cachedSetTimeout = setTimeout, setTimeout(method, 0);
    }
    try {
      return cachedSetTimeout(method, 0);
    } catch (t) {
      try {
        return cachedSetTimeout.call(null, method, 0);
      } catch (f) {
        return cachedSetTimeout.call(this, method, 0);
      }
    }
  }
  /**
   * @return {undefined}
   */
  function next() {
    if (l && currentQueue) {
      /** @type {boolean} */
      l = false;
      if (currentQueue.length) {
        queue = currentQueue.concat(queue);
      } else {
        /** @type {number} */
        queueIndex = -1;
      }
      if (queue.length) {
        close();
      }
    }
  }
  /**
   * @return {undefined}
   */
  function close() {
    if (!l) {
      var timeout = setTimeout(next);
      /** @type {boolean} */
      l = true;
      var len = queue.length;
      for (; len;) {
        currentQueue = queue;
        /** @type {!Array} */
        queue = [];
        for (; ++queueIndex < len;) {
          if (currentQueue) {
            currentQueue[queueIndex].run();
          }
        }
        /** @type {number} */
        queueIndex = -1;
        /** @type {number} */
        len = queue.length;
      }
      /** @type {null} */
      currentQueue = null;
      /** @type {boolean} */
      l = false;
      (function(marker) {
        if (cachedClearTimeout === clearTimeout) {
          return clearTimeout(marker);
        }
        if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
          return cachedClearTimeout = clearTimeout, clearTimeout(marker);
        }
        try {
          cachedClearTimeout(marker);
        } catch (t) {
          try {
            return cachedClearTimeout.call(null, marker);
          } catch (t) {
            return cachedClearTimeout.call(this, marker);
          }
        }
      })(timeout);
    }
  }
  /**
   * @param {(Object|string)} fun
   * @param {!Object} array
   * @return {undefined}
   */
  function Item(fun, array) {
    /** @type {(Object|string)} */
    this.fun = fun;
    /** @type {!Object} */
    this.array = array;
  }
  /**
   * @return {undefined}
   */
  function noop() {
  }
  var cachedSetTimeout;
  var cachedClearTimeout;
  var process = mixin.exports = {};
  !function() {
    try {
      /** @type {!Function} */
      cachedSetTimeout = "function" == typeof setTimeout ? setTimeout : defaultSetTimout;
    } catch (e) {
      /** @type {function(): ?} */
      cachedSetTimeout = defaultSetTimout;
    }
    try {
      /** @type {!Function} */
      cachedClearTimeout = "function" == typeof clearTimeout ? clearTimeout : defaultClearTimeout;
    } catch (e) {
      /** @type {function(): ?} */
      cachedClearTimeout = defaultClearTimeout;
    }
  }();
  var currentQueue;
  /** @type {!Array} */
  var queue = [];
  /** @type {boolean} */
  var l = false;
  /** @type {number} */
  var queueIndex = -1;
  /**
   * @param {!Function} fun
   * @return {undefined}
   */
  process.nextTick = function(fun) {
    /** @type {!Array} */
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
      /** @type {number} */
      var i = 1;
      for (; i < arguments.length; i++) {
        args[i - 1] = arguments[i];
      }
    }
    queue.push(new Item(fun, args));
    if (!(1 !== queue.length || l)) {
      setTimeout(close);
    }
  };
  /**
   * @return {undefined}
   */
  Item.prototype.run = function() {
    this.fun.apply(null, this.array);
  };
  /** @type {string} */
  process.title = "browser";
  /** @type {boolean} */
  process.browser = true;
  process.env = {};
  /** @type {!Array} */
  process.argv = [];
  /** @type {string} */
  process.version = "";
  process.versions = {};
  /** @type {function(): undefined} */
  process.on = noop;
  /** @type {function(): undefined} */
  process.addListener = noop;
  /** @type {function(): undefined} */
  process.once = noop;
  /** @type {function(): undefined} */
  process.off = noop;
  /** @type {function(): undefined} */
  process.removeListener = noop;
  /** @type {function(): undefined} */
  process.removeAllListeners = noop;
  /** @type {function(): undefined} */
  process.emit = noop;
  /** @type {function(): undefined} */
  process.prependListener = noop;
  /** @type {function(): undefined} */
  process.prependOnceListener = noop;
  /**
   * @param {?} type
   * @return {?}
   */
  process.listeners = function(type) {
    return [];
  };
  /**
   * @param {string} name
   * @return {?}
   */
  process.binding = function(name) {
    throw new Error("process.binding is not supported");
  };
  /**
   * @return {?}
   */
  process.cwd = function() {
    return "/";
  };
  /**
   * @param {?} dir
   * @return {?}
   */
  process.chdir = function(dir) {
    throw new Error("process.chdir is not supported");
  };
  /**
   * @return {?}
   */
  process.umask = function() {
    return 0;
  };
}, , function(canCreateDiscussions, BeautifulProperties, n) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  (function(options) {
    /**
     * @param {!Function} name
     * @return {?}
     */
    function start(name) {
      return new Promise(name);
    }
    /** @type {function(!Function): ?} */
    options.create = start;
    /**
     * @return {?}
     */
    options.createCompletionSource = function() {
      var isExisty;
      var respond;
      return {
        promise : new Promise(function(trackInfoUrl, canCreateDiscussions) {
          isExisty = trackInfoUrl;
          respond = canCreateDiscussions;
        }),
        resolve : function(value) {
          isExisty(value);
        },
        reject : function(obj) {
          respond(obj);
        }
      };
    };
    /**
     * @param {!Function} resolveConflicts
     * @return {?}
     */
    options.sync = function(resolveConflicts) {
      return start(function(cb, n) {
        return cb(resolveConflicts());
      });
    };
    /**
     * @param {number} s
     * @return {?}
     */
    options.delay = function(s) {
      return options.create(function(saveNotifs) {
        setTimeout(function() {
          saveNotifs();
        }, s);
      });
    };
  })(BeautifulProperties.SafePromise || (BeautifulProperties.SafePromise = {}));
}, function(mixin, canCreateDiscussions) {
  /** @type {number} */
  var n = 9007199254740991;
  /**
   * @param {?} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return "number" == typeof obj && obj > -1 && obj % 1 == 0 && obj <= n;
  };
}, function(module, canCreateDiscussions, saveNotifs) {
  var Map = saveNotifs(23)(saveNotifs(11), "Map");
  module.exports = Map;
}, function(module, canCreateDiscussions, __webpack_require__) {
  /**
   * @param {!Object} o
   * @return {undefined}
   */
  function s(o) {
    /** @type {number} */
    var j = -1;
    var r_len = null == o ? 0 : o.length;
    this.clear();
    for (; ++j < r_len;) {
      var a = o[j];
      this.set(a[0], a[1]);
    }
  }
  var listCacheClear = __webpack_require__(238);
  var method = __webpack_require__(245);
  var hashGet = __webpack_require__(247);
  var has = __webpack_require__(248);
  var cookie = __webpack_require__(249);
  s.prototype.clear = listCacheClear;
  s.prototype.delete = method;
  s.prototype.get = hashGet;
  s.prototype.has = has;
  s.prototype.set = cookie;
  /** @type {function(!Object): undefined} */
  module.exports = s;
}, function(mixin, canCreateDiscussions, parse) {
  var output = parse(6);
  var h = parse(50);
  /** @type {!RegExp} */
  var trueRE = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/;
  /** @type {!RegExp} */
  var contribRegex = /^\w*$/;
  /**
   * @param {?} value
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(value, name) {
    if (output(value)) {
      return false;
    }
    /** @type {string} */
    var t = typeof value;
    return !("number" != t && "symbol" != t && "boolean" != t && null != value && !h(value)) || contribRegex.test(value) || !trueRE.test(value) || null != name && value in Object(name);
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var defineProperty = __webpack_require__(124);
  /**
   * @param {!Object} obj
   * @param {!Function} name
   * @param {string} type
   * @return {undefined}
   */
  mixin.exports = function(obj, name, type) {
    if ("__proto__" == name && defineProperty) {
      defineProperty(obj, name, {
        configurable : true,
        enumerable : true,
        value : type,
        writable : true
      });
    } else {
      /** @type {string} */
      obj[name] = type;
    }
  };
}, function(canCreateDiscussions, _schema, n) {
  /** @type {function(*): boolean} */
  _schema.isArray = Array.isArray || function(obj) {
    return obj && "number" == typeof obj.length;
  };
}, function(mixin, canCreateDiscussions, n) {
  var f = n(250);
  var next = n(15);
  /**
   * @param {!Object} key
   * @param {!Object} name
   * @param {string} type
   * @param {string} id
   * @param {!Function} path
   * @return {?}
   */
  mixin.exports = function start(key, name, type, id, path) {
    return key === name || (null == key || null == name || !next(key) && !next(name) ? key != key && name != name : f(key, name, type, id, start, path));
  };
}, , , function(canCreateDiscussions, BeautifulProperties, n) {
  var runFileSize = this && this.__assign || function() {
    return (runFileSize = Object.assign || function(obj) {
      var a;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var key;
        for (key in a = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(a, key)) {
            obj[key] = a[key];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /**
   * @param {?} head
   * @param {!Object} options
   * @return {?}
   */
  BeautifulProperties.createEventPayload = function(head, options) {
    return runFileSize({}, head, {
      application : options.application,
      version : options.version,
      env : options.env,
      sessionId : options.context && options.sessionId,
      userId : options.context && options.context.userId,
      containerId : options.context && options.context.containerId
    });
  };
  /**
   * @param {string} canCreateDiscussions
   * @return {?}
   */
  BeautifulProperties.felogLogEndpoint = function(canCreateDiscussions) {
    return canCreateDiscussions + "/logv2";
  };
  /**
   * @param {string} canCreateDiscussions
   * @return {?}
   */
  BeautifulProperties.felogCrashEndpoint = function(canCreateDiscussions) {
    return canCreateDiscussions + "/crashv2";
  };
  /**
   * @param {?} details
   * @param {string} url
   * @return {?}
   */
  BeautifulProperties.felogRequestUrl = function(details, url) {
    return url + "/log?json=" + encodeURIComponent(JSON.stringify(details));
  };
}, , , , , function(canCreateDiscussions, params, n) {
  Object.defineProperty(params, "__esModule", {
    value : true
  });
  /** @type {number} */
  params.second = 1E3;
  /** @type {number} */
  params.minute = 60 * params.second;
  /** @type {number} */
  params.hour = 60 * params.minute;
  /** @type {number} */
  params.day = 24 * params.hour;
  /** @type {number} */
  params.week = 7 * params.day;
  /**
   * @param {?} value
   * @return {?}
   */
  params.days = function(value) {
    return value * params.day;
  };
  /**
   * @param {?} value
   * @return {?}
   */
  params.seconds = function(value) {
    return value * params.second;
  };
  /**
   * @param {?} playbackRate
   * @return {?}
   */
  params.hertz = function(playbackRate) {
    return params.second / playbackRate;
  };
}, function(canCreateDiscussions, t, n) {
  var Priority;
  var LogLevel;
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var offsetFromCenter = function() {
    return function(n) {
      /** @type {!Function} */
      this.write = n;
    };
  }();
  t.FunctionLogWriter = offsetFromCenter;
  var startScaleIndexX = function() {
    /**
     * @param {number} jvmObject
     * @return {undefined}
     */
    function ALSModel(jvmObject) {
      if (void 0 === jvmObject) {
        /** @type {boolean} */
        jvmObject = true;
      }
      /** @type {number} */
      this._edgeCompat = jvmObject;
      /** @type {({DEBUG: function(...*): undefined, ERROR: function(...*): undefined, FATAL: function(...*): undefined, INFO: function(...*): undefined, TRACE: function(...*): undefined, WARN: function(...*): undefined}|{DEBUG: function(string, ?, ?): ?, ERROR: function(undefined, string, undefined): ?, FATAL: function(undefined, string, undefined): ?, INFO: function(string, boolean, string): ?, TRACE: function(string, ?, ?): ?, WARN: function(string, !Array, string): ?})} */
      this._writeFunc = this._edgeCompat ? ALSModel._edgeWriteFunc : ALSModel._commonWriteFunc;
    }
    return ALSModel.prototype.write = function(params) {
      try {
        /** @type {!Array} */
        var test = ["grm " + params.level + " \u3010" + params.loggerName + "\u3011\u2591\u2591 " + params.message];
        if (params.data) {
          test.push(params.data);
        }
        if (params.exception) {
          test.push(params.exception);
        }
        this._writeFunc[params.level].apply(null, test);
      } catch (e) {
      }
    }, ALSModel._commonWriteFunc = ((Priority = {}).TRACE = console.log.bind(console), Priority.DEBUG = console.log.bind(console), Priority.INFO = console.info.bind(console), Priority.WARN = console.warn.bind(console), Priority.ERROR = console.error.bind(console), Priority.FATAL = console.error.bind(console), Priority), ALSModel._edgeWriteFunc = ((LogLevel = {}).TRACE = function(op, text, n) {
      return console.log(op, text, n);
    }, LogLevel.DEBUG = function(x, text, y) {
      return console.log(x, text, y);
    }, LogLevel.INFO = function(text, f, msg) {
      return console.info(text, f, msg);
    }, LogLevel.WARN = function(msg, text, message) {
      return console.warn(msg, text, message);
    }, LogLevel.ERROR = function(err, state, changes) {
      return console.error(err, state, changes);
    }, LogLevel.FATAL = function(out, src, changes) {
      return console.error(out, src, changes);
    }, LogLevel), ALSModel;
  }();
  t.ConsoleLogWriter2 = startScaleIndexX;
}, , , function(mixin, canCreateDiscussions, require) {
  var getType = require(222);
  var _ = require(261);
  var hide = require(51);
  var is = require(6);
  var escape = require(270);
  /**
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(type) {
    return "function" == typeof type ? type : null == type ? hide : "object" == typeof type ? is(type) ? _(type[0], type[1]) : getType(type) : escape(type);
  };
}, function(module, canCreateDiscussions, require) {
  var img = require(257);
  var button = require(73);
  var base = require(258);
  var p = require(188);
  var c = require(259);
  var isString = require(21);
  var $ = require(116);
  /** @type {string} */
  var l = "[object Map]";
  /** @type {string} */
  var length = "[object Promise]";
  /** @type {string} */
  var undefined = "[object Set]";
  /** @type {string} */
  var containerA = "[object WeakMap]";
  /** @type {string} */
  var count = "[object DataView]";
  var tiles = $(img);
  var dismiss = $(button);
  var trigger = $(base);
  var $pElement = $(p);
  var mainCanvas = $(c);
  var getLength = isString;
  if (img && getLength(new img(new ArrayBuffer(1))) != count || button && getLength(new button) != l || base && getLength(base.resolve()) != length || p && getLength(new p) != undefined || c && getLength(new c) != containerA) {
    /**
     * @param {!Object} value
     * @return {?}
     */
    getLength = function(value) {
      var objectTag = isString(value);
      var body = "[object Object]" == objectTag ? value.constructor : void 0;
      var args = body ? $(body) : "";
      if (args) {
        switch(args) {
          case tiles:
            return count;
          case dismiss:
            return l;
          case trigger:
            return length;
          case $pElement:
            return undefined;
          case mainCanvas:
            return containerA;
        }
      }
      return objectTag;
    };
  }
  module.exports = getLength;
}, function(mixin, canCreateDiscussions, n) {
  var f = n(93);
  var isWhitespace = n(41);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    /** @type {number} */
    var i = 0;
    var l = (name = f(name, obj)).length;
    for (; null != obj && i < l;) {
      obj = obj[isWhitespace(name[i++])];
    }
    return i && i == l ? obj : void 0;
  };
}, function(mixin, canCreateDiscussions, require) {
  var isObject = require(6);
  var isArray = require(75);
  var extend = require(263);
  var inherit = require(174);
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(value, name) {
    return isObject(value) ? value : isArray(value, name) ? [value] : extend(inherit(value));
  };
}, function(mixin, canCreateDiscussions, saveNotifs) {
  saveNotifs(189);
  var deletedHashes = {
    superfasthash : saveNotifs(273),
    murmurhash3 : saveNotifs(274)
  };
  mixin.exports = {
    createHash : function(hash) {
      hash = hash.replace(/![a-zA-z0-9]/g, "").toLowerCase();
      try {
        return deletedHashes[hash];
      } catch (lastErrorOutput) {
        throw new Error(lastErrorOutput);
      }
    }
  };
}, , , function(canCreateDiscussions, baseGroup, n) {
  /**
   * @param {!Object} value
   * @return {?}
   */
  baseGroup.isFunction = function(value) {
    return "function" == typeof value;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(obj, type) {
    /** @type {number} */
    var p = -1;
    var q = null == obj ? 0 : obj.length;
    for (; ++p < q && false !== type(obj[p], p, obj);) {
    }
    return obj;
  };
}, function(mixin, canCreateDiscussions, bind) {
  var t = bind(8);
  var get = bind(329);
  var next = bind(313);
  /** @type {string} */
  var ERR_ACCESSORS_NOT_SUPPORTED = "Expected a function";
  /** @type {function(...?): number} */
  var max = Math.max;
  /** @type {function(...?): number} */
  var nativeMin = Math.min;
  /**
   * @param {!Object} o
   * @param {!Object} name
   * @param {!Object} options
   * @return {?}
   */
  mixin.exports = function(o, name, options) {
    /**
     * @param {number} c
     * @return {?}
     */
    function test(c) {
      var value = args;
      var key = thisArg;
      return args = thisArg = void 0, lastCalled = c, newTab = o.apply(key, value);
    }
    /**
     * @param {number} index
     * @return {?}
     */
    function resolve(index) {
      /** @type {number} */
      var end = index - context;
      return void 0 === context || end >= name || end < 0 || maxing && index - lastCalled >= maxWait;
    }
    /**
     * @return {?}
     */
    function tick() {
      var stamp;
      var result;
      var l = get();
      if (resolve(l)) {
        return fn(l);
      }
      /** @type {number} */
      timeoutId = setTimeout(tick, (result = name - ((stamp = l) - context), maxing ? nativeMin(result, maxWait - (stamp - lastCalled)) : result));
    }
    /**
     * @param {undefined} first
     * @return {?}
     */
    function fn(first) {
      return timeoutId = void 0, trailing && args ? test(first) : (args = thisArg = void 0, newTab);
    }
    /**
     * @return {?}
     */
    function onLoad() {
      var canvas;
      var ret = get();
      var key = resolve(ret);
      if (args = arguments, thisArg = this, context = ret, key) {
        if (void 0 === timeoutId) {
          return lastCalled = canvas = context, timeoutId = setTimeout(tick, name), skipPool ? test(canvas) : newTab;
        }
        if (maxing) {
          return timeoutId = setTimeout(tick, name), test(context);
        }
      }
      return void 0 === timeoutId && (timeoutId = setTimeout(tick, name)), newTab;
    }
    var args;
    var thisArg;
    var maxWait;
    var newTab;
    var timeoutId;
    var context;
    /** @type {number} */
    var lastCalled = 0;
    /** @type {boolean} */
    var skipPool = false;
    /** @type {boolean} */
    var maxing = false;
    /** @type {boolean} */
    var trailing = true;
    if ("function" != typeof o) {
      throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);
    }
    return name = next(name) || 0, t(options) && (skipPool = !!options.leading, maxWait = (maxing = "maxWait" in options) ? max(next(options.maxWait) || 0, name) : maxWait, trailing = "trailing" in options ? !!options.trailing : trailing), onLoad.cancel = function() {
      if (void 0 !== timeoutId) {
        clearTimeout(timeoutId);
      }
      /** @type {number} */
      lastCalled = 0;
      args = context = thisArg = timeoutId = void 0;
    }, onLoad.flush = function() {
      return void 0 === timeoutId ? newTab : fn(get());
    }, onLoad;
  };
}, , function(canCreateDiscussions, exports, unescape) {
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var label = unescape(1);
  var query = unescape(102);
  var s_utf8 = unescape(103);
  !function(EntityWrapper) {
    /** @type {string} */
    var extensionId = "87677a2c52b84ad3a151a4a72f5bd3c4";
    /** @type {string} */
    var value = "grammarly.com";
    /** @type {number} */
    var a = 0;
    /**
     * @param {!Function} name
     * @param {string} x
     * @param {string} obj
     * @param {string} i
     * @return {?}
     */
    EntityWrapper.create = function(name, x, obj, i) {
      /** @type {string} */
      var l = "https://127.0.0.1:8000";
      var item = "prod" === x ? "https://f-log-extension.grammarly.io" : "qa" === x || "dev" === x ? l : label.assertNever(x);
      var key = "prod" === x ? "https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV1OF-4ic11yqpre0casnyvs_ZoaCHciEYdRyBkrfwP6DMlsWt8tSVU76RPqgGvAGjXGQk_UNuxPx-pYbToJapM_Fr0CUcgKaA8_IVl-lhSr5Q==" : "qa" === x || "dev" === x ? l : label.assertNever(x);
      var v = "prod" === x ? value : "qa" === x || "dev" === x ? "qagr.io" : label.assertNever(x);
      return {
        url : query.UrlConfig.create(value, item, key, obj, i),
        gnar : s_utf8.GnarConfig.create(name, v),
        felog : s_utf8.FelogConfig.create(name, x),
        sumologic : s_utf8.SumoLogicConfig.create(name),
        capi : s_utf8.CapiConfig.create(),
        extensionId : extensionId,
        newsVersion : a
      };
    };
  }(exports.AppConfig || (exports.AppConfig = {}));
}, function(canCreateDiscussions, BeautifulProperties, n) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  (function(canCreateDiscussions) {
    /**
     * @param {!Function} name
     * @param {!Object} str
     * @param {!Object} s
     * @param {string} tag
     * @param {string} min
     * @return {?}
     */
    (BeautifulProperties.UrlConfig || (BeautifulProperties.UrlConfig = {})).create = function(name, str, s, tag, min) {
      /** @type {string} */
      var prefix = "https://www." + name;
      /** @type {string} */
      var modelRegName = "https://data." + name;
      /** @type {string} */
      var rootPath = "https://app." + name;
      /** @type {string} */
      var baseUrl = "https://auth." + name + "/v3";
      return {
        app : rootPath,
        appPersonalDictionary : rootPath + "/profile/dictionary",
        capi : "wss://capi." + name + "/freews",
        capiGDocs : "wss://capi." + name + "/gdocs",
        dapiMimic : modelRegName + "/api/mimic",
        dapiProps : modelRegName + "/api/props/v2",
        dapiFindProps : modelRegName + "/api/props/v2/find",
        editorDictionary : rootPath + "/profile/dictionary",
        dictionary : "https://capi." + name + "/api/defs",
        docs : rootPath + "/docs",
        docsApi : "https://dox." + name + "/documents",
        newDoc : rootPath + "/docs/new",
        userOrAnonymous : baseUrl + "/user/oranonymous",
        authSignin : baseUrl + "/api/login",
        authSignup : baseUrl + "/api/signup",
        authExchange : baseUrl + "/api/unified-login/code/exchange",
        authLogout : baseUrl + "/logout",
        signin : prefix + "/signin",
        signup : prefix + "/signup",
        fbSignin : prefix + "/signin?fromExtensionFb=true",
        fbSignup : prefix + "/signup?fromExtensionFb=true",
        googleSignin : prefix + "/signin?fromExtensionGoogle=true",
        googleSignup : prefix + "/signup?fromExtensionGoogle=true",
        gdocsSignin : prefix + "/signin?fromExtensionGdocs=true",
        gdocsSignup : prefix + "/signup?fromExtensionGdocs=true",
        resetPassword : prefix + "/resetpassword",
        newFelog : str,
        sumoLogic : s,
        welcomeC : prefix + "/extension-success",
        afterInstall : prefix + "/after_install_page",
        upgrade : prefix + "/upgrade",
        premium : prefix + "/business/plans/i",
        planComparison : prefix + "/plans/t",
        uninstall : prefix + "/extension-uninstall",
        terms : prefix + "/terms",
        policy : prefix + "/privacy-policy",
        firefoxPrivatePolicy : "https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/privacy/",
        dynamicConfigUrl : "https://d3cv4a9a9wh0bt.cloudfront.net/dynamicConfig.json",
        pageConfigUrl : "https://d3cv4a9a9wh0bt.cloudfront.net/browserplugin/config.json",
        edgePopupUrl : tag,
        emptyScriptUrl : min,
        grammarlyDomain : name,
        grammarlyProtocol : "https:",
        safariMigration : prefix + "/safari",
        safariMigrationBackupNotifFirst : prefix + "/safari?notif=1",
        safariMigrationBackupNotifSecond : prefix + "/safari?notif=2"
      };
    };
  })();
}, function(canCreateDiscussions, BeautifulProperties, speedTest) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var test = speedTest(1);
  !function(EntityWrapper) {
    var browser = {
      chrome : "chromeExt",
      firefox : "firefoxExt",
      safari : "safariExt",
      edge : "edgeExt"
    };
    /**
     * @param {!Function} name
     * @param {string} s
     * @return {?}
     */
    EntityWrapper.create = function(name, s) {
      return {
        appName : test.assertNonNull(browser[name], "gnar app name"),
        url : "https://gnar." + s,
        domain : "." + s,
        sendEmailInfoTracking : true,
        sendFluidExperimentData : false,
        googleAnalyticsId : "UA-6331378-16"
      };
    };
  }(BeautifulProperties.GnarConfig || (BeautifulProperties.GnarConfig = {}));
  (function(EntityWrapper) {
    var browser = {
      chrome : "extensionChrome",
      firefox : "extensionFirefox",
      safari : "extensionSafari",
      edge : "extensionEdge"
    };
    /** @type {number} */
    var maxDifference = .01;
    /**
     * @param {!Function} name
     * @param {string} expected
     * @return {?}
     */
    EntityWrapper.create = function(name, expected) {
      return {
        appName : test.assertNonNull(browser[name], "felog app name"),
        sendUsageMetrics : true,
        sendPerfMetrics : "dev" === expected || Math.random() <= maxDifference
      };
    };
  })(BeautifulProperties.FelogConfig || (BeautifulProperties.FelogConfig = {}));
  (function(EntityWrapper) {
    var browser = {
      chrome : "extensionChrome",
      firefox : "extensionFirefox",
      safari : "extensionSafari",
      edge : "extensionEdge"
    };
    /**
     * @param {!Function} name
     * @return {?}
     */
    EntityWrapper.create = function(name) {
      return {
        appName : test.assertNonNull(browser[name], "sumologic app name")
      };
    };
  })(BeautifulProperties.SumoLogicConfig || (BeautifulProperties.SumoLogicConfig = {}));
  (function(canCreateDiscussions) {
    /**
     * @return {?}
     */
    (BeautifulProperties.CapiConfig || (BeautifulProperties.CapiConfig = {})).create = function() {
      return {};
    };
  })();
}, function(canCreateDiscussions, BeautifulProperties, require) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var protocol = require(1);
  var Logger = require(3);
  var data = require(133);
  var a = Logger.Logger.create("config.build");
  !function(EntityWrapper) {
    /**
     * @param {!Function} name
     * @param {string} val
     * @param {string} key
     * @param {string} object
     * @param {string} data
     * @param {?} branch
     * @param {string} username
     * @return {?}
     */
    EntityWrapper.create = function(name, val, key, object, data, branch, username) {
      var type = void 0 !== branch && void 0 !== username ? branch : "UNVERSIONED";
      /** @type {string} */
      var str = name + "." + val + "." + key;
      return {
        version : str,
        fullVersion : str + "-" + [object, ["prod" !== data ? data : null, type !== object ? type : null].filter(function(canCreateDiscussions) {
          return !!canCreateDiscussions;
        }).join(".")].filter(function(value) {
          return "" !== value;
        }).join("/"),
        commitHash : username,
        gitBranch : branch
      };
    };
    /**
     * @param {string} browser
     * @param {string} value
     * @param {!Object} self
     * @return {?}
     */
    EntityWrapper.getManifestVersion = function(browser, value, self) {
      try {
        switch(browser) {
          case "safari":
            switch(value) {
              case "bg":
              case "popup":
                return self.safari.extension.displayVersion;
              default:
                return;
            }case "chrome":
            return self.chrome.runtime.getManifest().version;
          case "firefox":
            return data.firefox.runtime.getManifest().version;
          case "edge":
            return self.edge.runtime.getManifest().version;
          default:
            return protocol.assertNever(browser);
        }
      } catch (e) {
        return void a.error("Could not get extension version from manifest", e);
      }
    };
  }(BeautifulProperties.BuildInfo || (BeautifulProperties.BuildInfo = {}));
}, function(canCreateDiscussions, BeautifulProperties, require) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var DevToolsMessage = require(87);
  var log4js = require(106);
  !function(context) {
    /**
     * @param {!Object} query
     * @return {undefined}
     */
    function setStyling(query) {
      /** @type {!Object} */
      result = Object.assign({}, result, query);
    }
    context.defaultConfig = {
      writer : new DevToolsMessage.ConsoleLogWriter2,
      filterFn : function(index) {
        return true;
      }
    };
    var result = context.defaultConfig;
    /**
     * @return {?}
     */
    context.getGlobal = function() {
      return result;
    };
    /** @type {function(!Object): undefined} */
    context.updateGlobal = setStyling;
    /**
     * @param {!Object} e
     * @return {undefined}
     */
    context.configure = function(e) {
      setStyling({
        writer : new DevToolsMessage.ConsoleLogWriter2(e.edge),
        filterFn : e.prodCs ? log4js.logLevelFilter("ERROR") : function(hackerspace) {
          return true;
        }
      });
    };
  }(BeautifulProperties.LogConfig || (BeautifulProperties.LogConfig = {}));
}, function(canCreateDiscussions, BeautifulProperties, SHA384) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var test = SHA384(210);
  /**
   * @param {string} s
   * @return {?}
   */
  BeautifulProperties.logLevelFilter = function(s) {
    return function(results) {
      return test.getLogRank(results.level) >= test.getLogRank(s);
    };
  };
}, function(canCreateDiscussions, BeautifulProperties, floor) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var r;
  var directory_epub;
  var startYNew = floor(43);
  !function(canCreateDiscussions) {
    /**
     * @param {!Function} name
     * @return {?}
     */
    (r = BeautifulProperties.BrowserInfo || (BeautifulProperties.BrowserInfo = {})).create = function(name) {
      return {
        type : startYNew.TargetBrowser.detect(name) || "other"
      };
    };
  }();
  (function(canCreateDiscussions) {
    /**
     * @param {!Object} name
     * @return {?}
     */
    (directory_epub = BeautifulProperties.OsInfo || (BeautifulProperties.OsInfo = {})).create = function(name) {
      return {
        isWindows : -1 !== name.navigator.appVersion.indexOf("Win"),
        isMac : -1 !== name.navigator.appVersion.indexOf("Mac"),
        isChromeOS : -1 !== name.navigator.appVersion.indexOf("CrOS")
      };
    };
  })();
  (function(canCreateDiscussions) {
    /**
     * @param {!Function} name
     * @return {?}
     */
    (BeautifulProperties.SystemInfo || (BeautifulProperties.SystemInfo = {})).create = function(name) {
      return {
        browser : r.create(name),
        os : directory_epub.create(name)
      };
    };
  })();
}, function(canCreateDiscussions, BeautifulProperties, require) {
  var cloneObject = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var exports = require(101);
  var IDriver = require(104);
  var Tizen = require(107);
  var ThreadController = require(43);
  var _ = require(1);
  var LOGGER_STUB = require(3).Logger.create("config.mainConfig");
  !function(Handlebars) {
    /**
     * @param {!Object} name
     * @param {string} s
     * @param {string} target
     * @param {string} str
     * @param {string} namespace
     * @param {string} template
     * @param {string} view
     * @param {string} date
     * @return {?}
     */
    function create(name, s, target, str, namespace, template, view, date) {
      return {
        env : name,
        major_number : s,
        build_number : target,
        release_number : str,
        git_branch : namespace,
        git_commit : template,
        edge_popup_url : view,
        empty_script_url : date
      };
    }
    /** @type {function(!Object, string, string, string, string, string, string, string): ?} */
    Handlebars.create = create;
    /**
     * @return {?}
     */
    Handlebars.fromBrowserify = function() {
      return create("prod", "14", "924", "2437", "UNVERSIONED", "7225dc9cde142e3aa459dfda6b8763840b39982a", "", "");
    };
  }(BeautifulProperties.ProcessEnv || (BeautifulProperties.ProcessEnv = {}));
  (function(canCreateDiscussions) {
    /**
     * @param {!Function} name
     * @param {string} val
     * @param {!Object} data
     * @param {string} type
     * @return {?}
     */
    (BeautifulProperties.MainConfig || (BeautifulProperties.MainConfig = {})).create = function(name, val, data, type) {
      var S;
      if (data.env) {
        var SnapConstructor = ThreadController.TargetEnv.create(data.env);
        if (void 0 !== SnapConstructor) {
          S = SnapConstructor;
        } else {
          LOGGER_STUB.warn("*** process.env.ENV is invalid ('" + data.env + "'), assuming 'prod' env");
          /** @type {string} */
          S = "prod";
        }
      } else {
        LOGGER_STUB.warn("*** process.env.ENV is not defined, assuming 'prod' env");
        /** @type {string} */
        S = "prod";
      }
      var value;
      var r = _.assertNonNull(S, "ENV env var OR a fallback value");
      /** @type {!Array<?>} */
      var test = [data.major_number, data.build_number, data.release_number].map(_.optionalIntString);
      if (3 === test.length && test.every(function(canCreateDiscussions) {
        return void 0 !== canCreateDiscussions;
      })) {
        /** @type {!Array<?>} */
        value = test;
      } else {
        var values = (IDriver.BuildInfo.getManifestVersion(name, val, window) || "").split(".").map(_.optionalIntString);
        value = 3 === values.length && values.every(function(canCreateDiscussions) {
          return void 0 !== canCreateDiscussions;
        }) ? values : [0, 0, 0];
      }
      var arr = cloneObject(value, 3);
      var save = arr[0];
      var output = arr[1];
      var cont = arr[2];
      return {
        buildInfo : IDriver.BuildInfo.create(save, output, cont, name, r, data.git_branch, data.git_commit),
        bundleInfo : ThreadController.BundleInfo.create(name, type || name, r, val),
        appConfig : exports.AppConfig.create(name, r, data.edge_popup_url, data.empty_script_url),
        systemInfo : Tizen.SystemInfo.create(window)
      };
    };
  })();
}, function(canCreateDiscussions, exports, require) {
  var Symbol = require(29).root.Symbol;
  exports.rxSubscriber = "function" == typeof Symbol && "function" == typeof Symbol.for ? Symbol.for("rxSubscriber") : "@@rxSubscriber";
  exports.$$rxSubscriber = exports.rxSubscriber;
}, function(module, canCreateDiscussions, iter_f) {
  var next = iter_f(8);
  /** @type {function((Object|null), (Object|null)=): !Object} */
  var f = Object.create;
  var storeMixin = function() {
    /**
     * @return {undefined}
     */
    function $$utils$$F() {
    }
    return function(o) {
      if (!next(o)) {
        return {};
      }
      if (f) {
        return f(o);
      }
      /** @type {!Object} */
      $$utils$$F.prototype = o;
      var cMock = new $$utils$$F;
      return $$utils$$F.prototype = void 0, cMock;
    };
  }();
  module.exports = storeMixin;
}, function(module, canCreateDiscussions, saveNotifs) {
  var storeMixin = saveNotifs(214)();
  module.exports = storeMixin;
}, function(mixin, canCreateDiscussions, $) {
  var cb = $(215);
  var p = $(55);
  var i = $(6);
  var l = $(35);
  var next = $(64);
  var f = $(40);
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    var samePriority = i(obj);
    var lowerPriority = !samePriority && p(obj);
    var screenSmallerThanEditor = !samePriority && !lowerPriority && l(obj);
    var adjustHeight = !samePriority && !lowerPriority && !screenSmallerThanEditor && f(obj);
    var skipIndexes = samePriority || lowerPriority || screenSmallerThanEditor || adjustHeight;
    var result = skipIndexes ? cb(obj.length, String) : [];
    var args = result.length;
    var key;
    for (key in obj) {
      if (!(!name && !hasOwnProperty.call(obj, key) || skipIndexes && ("length" == key || screenSmallerThanEditor && ("offset" == key || "parent" == key) || adjustHeight && ("buffer" == key || "byteLength" == key || "byteOffset" == key) || next(key, args)))) {
        result.push(key);
      }
    }
    return result;
  };
}, function(module, t, moment) {
  (function(global) {
    var freeGlobal = "object" == typeof global && global && global.Object === Object && global;
    module.exports = freeGlobal;
  }).call(t, moment(33));
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return function(upOrLeft) {
      return key(upOrLeft);
    };
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} fn
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(fn, type) {
    return function(a) {
      return fn(type(a));
    };
  };
}, function(mixin, canCreateDiscussions) {
  /** @type {function(this:!Function): string} */
  var objectToString$2 = Function.prototype.toString;
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    if (null != value) {
      try {
        return objectToString$2.call(value);
      } catch (e) {
      }
      try {
        return value + "";
      } catch (e) {
      }
    }
    return "";
  };
}, function(mixin, canCreateDiscussions, n) {
  var p = n(157);
  var h = n(253);
  var f = n(158);
  /** @type {number} */
  var literals = 1;
  /** @type {number} */
  var flag = 2;
  /**
   * @param {!Object} key
   * @param {!Object} value
   * @param {string} type
   * @param {string} callback
   * @param {!Function} fn
   * @param {!Object} options
   * @return {?}
   */
  mixin.exports = function(key, value, type, callback, fn, options) {
    /** @type {number} */
    var useMetaobject = type & literals;
    var x = key.length;
    var y = value.length;
    if (x != y && !(useMetaobject && y > x)) {
      return false;
    }
    var info = options.get(key);
    if (info && options.get(value)) {
      return info == value;
    }
    /** @type {number} */
    var name = -1;
    /** @type {boolean} */
    var m = true;
    var doc = type & flag ? new p : void 0;
    options.set(key, value);
    options.set(value, key);
    for (; ++name < x;) {
      var target = key[name];
      var element = value[name];
      if (callback) {
        var br = useMetaobject ? callback(element, target, name, value, key, options) : callback(target, element, name, key, value, options);
      }
      if (void 0 !== br) {
        if (br) {
          continue;
        }
        /** @type {boolean} */
        m = false;
        break;
      }
      if (doc) {
        if (!h(value, function(d, b) {
          if (!f(doc, b) && (target === d || fn(target, d, type, callback, options))) {
            return doc.push(b);
          }
        })) {
          /** @type {boolean} */
          m = false;
          break;
        }
      } else {
        if (target !== element && !fn(target, element, type, callback, options)) {
          /** @type {boolean} */
          m = false;
          break;
        }
      }
    }
    return options.delete(key), options.delete(value), m;
  };
}, function(module, canCreateDiscussions, saveNotifs) {
  var Uint8Array = saveNotifs(11).Uint8Array;
  module.exports = Uint8Array;
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(8);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return obj == obj && !next(obj);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {?} key
   * @param {?} name
   * @return {?}
   */
  mixin.exports = function(key, name) {
    return function(fields) {
      return null != fields && fields[key] === name && (void 0 !== name || key in Object(fields));
    };
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(obj, type) {
    /** @type {number} */
    var key = -1;
    var len = null == obj ? 0 : obj.length;
    /** @type {!Array} */
    var result = Array(len);
    for (; ++key < len;) {
      result[key] = type(obj[key], key, obj);
    }
    return result;
  };
}, function(mixin, canCreateDiscussions) {
  mixin.exports = {
    toU8IntArray : function(e) {
      /** @type {!Array} */
      var listToFind = [];
      /** @type {!Array} */
      var already_migrated_files = [];
      /** @type {number} */
      var i = 0;
      for (; i < e.length; i++) {
        var returnVal;
        var result = e.charCodeAt(i);
        /** @type {number} */
        already_migrated_files.length = 0;
        for (; (returnVal = 255 & result) || result;) {
          already_migrated_files.push(returnVal);
          /** @type {number} */
          result = result >>> 8;
        }
        /** @type {!Array<?>} */
        listToFind = listToFind.concat(already_migrated_files.reverse());
      }
      return listToFind;
    },
    intToUnsignedHex : function(right) {
      var value;
      /** @type {!Array} */
      var bundleTrytes = [];
      for (; (value = 65535 & right) || right;) {
        /** @type {string} */
        value = value.toString(16);
        /** @type {string} */
        value = "0000".slice(value.length) + value;
        bundleTrytes.push(value);
        /** @type {number} */
        right = right >>> 16;
      }
      return bundleTrytes.reverse().join("");
    }
  };
}, function(mixin, canCreateDiscussions, n) {
  var f = n(76);
  var i = n(32);
  /**
   * @param {!Object} obj
   * @param {?} name
   * @param {?} type
   * @return {undefined}
   */
  mixin.exports = function(obj, name, type) {
    if (!((void 0 === type || i(obj[name], type)) && (void 0 !== type || name in obj))) {
      f(obj, name, type);
    }
  };
}, function(module, canCreateDiscussions, saveNotifs) {
  var $defineProperty = saveNotifs(23);
  var storeMixin = function() {
    try {
      var hasKey = $defineProperty(Object, "defineProperty");
      return hasKey({}, "", {}), hasKey;
    } catch (e) {
    }
  }();
  module.exports = storeMixin;
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {string} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    if ("__proto__" != name) {
      return obj[name];
    }
  };
}, function(mixin, canCreateDiscussions, require) {
  var sparqlQuery = require(136);
  var jshint = require(192);
  /**
   * @param {!Object} x
   * @return {?}
   */
  mixin.exports = function(x) {
    return sparqlQuery(function(e, arrays) {
      /** @type {number} */
      var i = -1;
      var length = arrays.length;
      var customizer = length > 1 ? arrays[length - 1] : void 0;
      var globalsToUse = length > 2 ? arrays[2] : void 0;
      /** @type {(!Function|undefined)} */
      customizer = x.length > 3 && "function" == typeof customizer ? (length--, customizer) : void 0;
      if (globalsToUse && jshint(arrays[0], arrays[1], globalsToUse)) {
        /** @type {(!Function|undefined)} */
        customizer = length < 3 ? void 0 : customizer;
        /** @type {number} */
        length = 1;
      }
      /** @type {!Object} */
      e = Object(e);
      for (; ++i < length;) {
        var b = arrays[i];
        if (b) {
          x(e, b, i, customizer);
        }
      }
      return e;
    });
  };
}, function(canCreateDiscussions, req, $) {
  /**
   * @param {?} value
   * @return {undefined}
   */
  function done(value) {
    /** @type {!Array} */
    var result = [];
    /** @type {number} */
    var i = 1;
    for (; i < arguments.length; i++) {
      result[i - 1] = arguments[i];
    }
    /**
     * @param {?} from
     * @return {undefined}
     */
    var log = function(from) {
      oSelf.warn("tracking call " + value + " failed, reason: ", from);
    };
    if (item.isBg()) {
      item.asyncCall(function() {
        var list;
        try {
          switch(callback(value, result), value) {
            case config.CALL_HANDLER_ID:
              var C = result[0];
              /** @type {!Array<?>} */
              var c = result.slice(1);
              (list = config.methods)[C].apply(list, fn(c));
              break;
            default:
              success(value, result);
          }
        } catch (e) {
          log(e);
        }
      }, 20);
    } else {
      var logIntervalId;
      /**
       * @return {?}
       */
      var next = function() {
        return clearInterval(logIntervalId);
      };
      logIntervalId = window.setTimeout(function() {
        return tmp = "timeout call through bg page", next(), void log(tmp);
        var tmp;
      }, 1E4);
      me.emitBackground("tracking-call", {
        msg : value,
        data : result
      }, next);
    }
  }
  /**
   * @param {!Object} json
   * @param {?} e
   * @return {undefined}
   */
  function success(json, e) {
    var data = parseInt(json.split("."), 2);
    var pkValue = data[0];
    var passid = data[1];
    if ("gnar" === pkValue) {
      if (main.tracker.gnar) {
        if ("track" === passid) {
          var match = parseInt(e, 2);
          var pseudoClass = match[0];
          var field = match[1];
          main.tracker.gnar.track(resolve({
            eventName : $scope.gnarAppName + "/" + pseudoClass
          }, field));
        } else {
          if ("pingMaybe" === passid) {
            main.tracker.gnar.pingMaybe();
          } else {
            if ("setUser" === passid) {
              main.tracker.gnar.setUser(e[0], e[1]);
            } else {
              oSelf.error("gnar client does not have method '" + passid + "' for '" + json + "' in runMessage");
            }
          }
        }
      } else {
        oSelf.error("gnar client not available for '" + json + "' in runMessage");
      }
    } else {
      oSelf.error("unrecognized '" + json + "' in runMessage");
    }
  }
  /**
   * @param {!Object} s
   * @param {?} out
   * @return {undefined}
   */
  function callback(s, out) {
    oSelf.info(s, out);
  }
  var resolve = this && this.__assign || function() {
    return (resolve = Object.assign || function(obj) {
      var props;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var prop;
        for (prop in props = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(props, prop)) {
            obj[prop] = props[prop];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  var parseInt = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var fn = this && this.__spread || function() {
    /** @type {!Array} */
    var curArr = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      curArr = curArr.concat(parseInt(arguments[i]));
    }
    return curArr;
  };
  Object.defineProperty(req, "__esModule", {
    value : true
  });
  var config;
  var currentInvocation;
  var c;
  var self;
  var response;
  var me = $(13);
  var item = $(4);
  var main = $(148);
  var log = $(289);
  var $scope = $(17);
  var vis = $(334);
  var nui = $(335);
  var oSelf = $(3).Logger.create("lib.tracking.call");
  c = config || (config = {});
  self = item.isBg() ? new vis.DefaultFelogClient($scope.URLS.newFelog, $scope.appName, $scope.getVersion(), $scope.ENV, window.fetch.bind(window)) : void 0;
  response = item.isBg() ? new nui.SumoLogicClient($scope.URLS.sumoLogic, $scope.appName, $scope.getVersion(), $scope.ENV, window.fetch.bind(window)) : void 0;
  /**
   * @param {!Function} capture
   * @param {string} options
   * @param {string} value
   * @param {!Object} count
   * @return {undefined}
   */
  (currentInvocation = c.methods || (c.methods = {})).sendFelog = function(capture, options, value, count) {
    if (!self) {
      throw Error("sendFelog unavailable");
    }
    self.sendEvent({
      logger : capture,
      message : options,
      level : value,
      extra : count
    }).catch(function(canCreateDiscussions) {
      return log.sendEventPixel(capture, options, value, count, self.getContext());
    });
  };
  /**
   * @param {?} name
   * @return {undefined}
   */
  currentInvocation.sendFelogEvent = function(name) {
    if (!self) {
      throw Error("felog unavailable");
    }
    self.sendEvent(name).catch(function(canCreateDiscussions) {
      return log.sendEventPixel2(name, self.getContext());
    });
  };
  /**
   * @param {!Function} capture
   * @param {string} options
   * @param {string} value
   * @param {!Object} count
   * @return {undefined}
   */
  currentInvocation.sendSumoLogic = function(capture, options, value, count) {
    if (!response) {
      throw Error("sumoLogicClient unavailable");
    }
    response.send({
      logger : capture,
      message : options,
      level : value,
      extra : count
    }).catch(function(canCreateDiscussions) {
      return log.sendEventPixel(capture, options, value, count, response.getContext());
    });
  };
  /**
   * @param {?} other
   * @return {undefined}
   */
  currentInvocation.sendFelogCrashLogs = function(other) {
    if (self) {
      self.sendCrashLog(other);
    }
  };
  /**
   * @param {!Function} err
   * @param {string} t
   * @param {string} response
   * @param {?} attempt
   * @return {undefined}
   */
  currentInvocation.sendFelogUsageEvent = function(err, t, response, attempt) {
    if (!self) {
      throw Error("felogClient unavailable");
    }
    self.sendUsageEvent(err, t, response, attempt).catch(function(canCreateDiscussions) {
      return log.sendEventPixel(err, t, response);
    });
  };
  /**
   * @param {string} id
   * @return {undefined}
   */
  currentInvocation.setUserId = function(id) {
    if (self) {
      self.setUserId(id);
    }
    if (response) {
      response.setUserId(id);
    }
  };
  /**
   * @param {string} id
   * @return {undefined}
   */
  currentInvocation.setContainerId = function(id) {
    if (self) {
      self.setContainerId(id);
    }
    if (response) {
      response.setContainerId(id);
    }
  };
  /** @type {string} */
  c.CALL_HANDLER_ID = "tracking/RPC";
  req.callBgPage = Object.keys(config.methods).reduce(function(options, single) {
    return options[single] = function() {
      /** @type {!Array} */
      var args = [];
      /** @type {number} */
      var i = 0;
      for (; i < arguments.length; i++) {
        args[i] = arguments[i];
      }
      return done.apply(void 0, fn([config.CALL_HANDLER_ID, single], args));
    }, options;
  }, {});
  /** @type {!Array} */
  var charListNotLatin = [];
  /** @type {function(?): undefined} */
  req.call = done;
  /** @type {function(!Object, ?): undefined} */
  req.runMessage = success;
  /** @type {function(!Object, ?): undefined} */
  req.logCall = callback;
  /**
   * @return {?}
   */
  req.getLog = function() {
    /** @type {!Array<?>} */
    var e = charListNotLatin.slice(0);
    return charListNotLatin.length = 0, e;
  };
}, function(canCreateDiscussions, t, require) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var Logger = require(3);
  var Tone = require(1);
  var offsetFromCenter = function() {
    /**
     * @param {!Object} idealPos
     * @return {undefined}
     */
    function Node(idealPos) {
      /** @type {!Object} */
      this._perf = idealPos;
      this._log = Logger.Logger.create("cs.telemetry.PerformanceMetricsImpl");
    }
    return Node.prototype.flushMeasures = function(name) {
      try {
        var check = this._perf.getEntriesByName(name, "measure");
        return this._perf.clearMeasures(name), check.map(function(bctrack) {
          return bctrack.duration;
        });
      } catch (endPoint) {
        return this._log.warn("failed to retrieve perf measurements", endPoint), [];
      }
    }, Node.prototype.startMeasure = function(name) {
      var self = this;
      /** @type {number} */
      var reqID = Math.random();
      /** @type {string} */
      var l = "__" + name + "_" + reqID + "-start";
      /** @type {string} */
      var markLabel = "__" + name + "_" + reqID + "-end";
      try {
        this._perf.mark(l);
      } catch (endPoint) {
        return this._log.warn("could not start measure \u2013 ignoring measurement", endPoint), {
          endMeasure : Tone.noOp
        };
      }
      /** @type {boolean} */
      var a = false;
      return {
        endMeasure : function() {
          if (!a) {
            /** @type {boolean} */
            a = true;
            try {
              self._perf.mark(markLabel);
              self._perf.measure(name, l, markLabel);
            } catch (experimentId) {
              self._log.warn("could not complete measure", experimentId);
            }
          }
        }
      };
    }, Node.prototype.measure = function(name, cb) {
      /** @type {string} */
      var l = "__" + name + "-start";
      /** @type {string} */
      var markLabel = "__" + name + "-end";
      try {
        this._perf.mark(l);
      } catch (err) {
        return this._log.warn("could not start measure \u2013 ignoring measurement", err), cb();
      }
      try {
        return cb();
      } finally {
        try {
          this._perf.mark(markLabel);
          this._perf.measure(name, l, markLabel);
        } catch (endPoint) {
          this._log.warn("could not complete measure", endPoint);
        }
      }
    }, Node;
  }();
  t.PerformanceMetricsImpl = offsetFromCenter;
  (function(exports) {
    exports.dummy = {
      flushMeasures : function(posProp) {
        return [];
      },
      measure : function(type, cb) {
        return cb();
      },
      startMeasure : function(msg) {
        return {
          endMeasure : function() {
          }
        };
      }
    };
    /**
     * @param {?} name
     * @return {?}
     */
    exports.create = function(name) {
      return void 0 !== name ? new offsetFromCenter(name) : exports.dummy;
    };
    /**
     * @param {!Array} data
     * @return {?}
     */
    exports.getStats = function(data) {
      if (0 === data.length) {
        return {
          ct : 0
        };
      }
      var min = data.reduce(function(maxKeepAliveCount, maxwavelength) {
        return Math.min(maxKeepAliveCount, maxwavelength);
      }, Number.MAX_VALUE);
      var max = data.reduce(function(maxKeepAliveCount, hatWidth) {
        return Math.max(maxKeepAliveCount, hatWidth);
      }, Number.MIN_VALUE);
      /** @type {(number|undefined)} */
      var avg = data.length >= 6 ? data.reduce(function(buckets, name) {
        return buckets + name;
      }, 0) / data.length : void 0;
      return {
        ct : data.length,
        min : min,
        max : max,
        range : max - min,
        avg : avg,
        stddev : void 0 !== avg && data.length > 1 ? Math.sqrt(data.reduce(function(canCreateDiscussions, nVal) {
          return canCreateDiscussions + Math.pow(nVal - avg, 2);
        }, 0) / (data.length - 1)) : void 0
      };
    };
  })(t.PerformanceMetrics || (t.PerformanceMetrics = {}));
}, , , , , function(canCreateDiscussions, o, $) {
  Object.defineProperty(o, "__esModule", {
    value : true
  });
  var _this = $(1);
  o.firefox = _this.try_(function() {
    return browser;
  }, function() {
    return window.browser;
  });
  window.edge = window.browser;
  window.chrome = window.chrome;
  o.default = void 0;
}, function(mixin, canCreateDiscussions, $) {
  var check = $(111);
  var callback = $(39);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return obj && check(obj, name, callback);
  };
}, function(canCreateDiscussions, component, ipCookie) {
  var config;
  var collectRefsFromPathitem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var setTimeout = this && this.__spread || function() {
    /** @type {!Array} */
    var followedKeys = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
    }
    return followedKeys;
  };
  Object.defineProperty(component, "__esModule", {
    value : true
  });
  var filterCustomHeaders = ipCookie(175);
  var settings = ipCookie(17);
  /** @type {string} */
  component.PROTOCOL_VERSION = "1.0";
  /** @type {!Array} */
  component.SITES_TO_RELOAD = ["inbox.google.com", "mail.google.com", "yahoo.com", "mail.live.com", "facebook.com", "tumblr.com", "stackoverflow.com", "wordpress.com", "wordpress.org", "blogspot.com"];
  /** @type {!Array} */
  component.FACEBOOK_SITES = ["facebook.com", "messenger.com", "work.fb.com", "business.facebook.com"];
  component.HTML_GHOST_SITES = setTimeout(["twitter.com"], component.FACEBOOK_SITES);
  component.CUSTOM_UNSUPPORTED_MESSAGES = {
    "drive.google.com" : {
      title : "Google Drive Not Supported",
      message : 'We hope to support Google Drive apps<br/> in the future, but for now please use your</br> <a class="openGrammarly" href="' + settings.URLS.app + '">Grammarly Editor</a>.'
    },
    "docs.google.com" : {
      title : "Google Drive Not Supported",
      message : 'We hope to support Google Drive apps<br/> in the future, but for now please use your</br> <a class="openGrammarly" href="' + settings.URLS.app + '">Grammarly Editor</a>.'
    },
    "chrome.google.com" : {
      title : "Web Store Not Supported"
    }
  };
  /** @type {number} */
  component.PAGE_CONFIG_DEFAULT_INTERVAL = 18E5;
  /** @type {!Array} */
  component.PAGE_CONFIG_UPDATE_INTERVALS = [6E5, component.PAGE_CONFIG_DEFAULT_INTERVAL, 36E5, 108E5, 432E5, 864E5, 31536E6];
  component.OVERRIDE_PAGE_CONFIG = {};
  component.PAGE_CONFIG_INTERNAL = ((config = {
    version : {
      enabled : false,
      servicePage : true
    },
    extensions : {
      enabled : false,
      servicePage : true
    },
    settings : {
      enabled : false,
      servicePage : true
    },
    "com.safari.grammarlyspellcheckergrammarchecker" : {
      enabled : false,
      matchInclusions : true,
      servicePage : true
    }
  })["app." + settings.GRAMMARLY_DOMAIN] = {
    enabled : false,
    grammarlyEditor : true
  }, config["linkedin.com"] = {
    pages : {
      "/messaging" : {
        afterReplaceEvents : ["input"]
      }
    }
  }, config["plus.google.com"] = {
    afterReplaceEvents : ["keyup"],
    minFieldHeight : 0,
    minFieldWidth : 0
  }, config["facebook.com"] = {
    minFieldHeight : 0,
    pages : {
      "/marketplace" : {
        afterReplaceEvents : ["input"]
      }
    }
  }, config["mail.google.com"] = {
    fields : [{
      name : "to"
    }, {
      name : "cc"
    }, {
      name : "bcc"
    }, {
      className : "vO"
    }],
    subframes : false
  }, config["drive.google.com"] = {
    track : true
  }, config["docs.google.com"] = {
    track : true
  }, config["app.asana.com"] = {
    fields : [{
      className : "task-row-text-input"
    }]
  }, config["tumblr.com"] = {
    fields : [{
      attr : ["aria-label", "Post title"]
    }, {
      attr : ["aria-label", "Type or paste a URL"]
    }]
  }, config["chrome.google.com"] = {
    dontShowDisabledBadge : true
  }, config);
  component.PAGE_CONFIG = {
    pageConfig : filterCustomHeaders({}, {
      "hootsuite.com" : {
        enabled : false
      },
      "chrome.google.com" : {
        enabled : false
      },
      "facebook.com" : {
        enabled : true,
        pages : {
          ".*/notes" : {
            enabled : false
          }
        }
      },
      "onedrive.live.com" : {
        enabled : false
      },
      "docs.com" : {
        enabled : false
      },
      "sp.docs.com" : {
        enabled : false
      },
      "docs.google.com" : {
        enabled : true,
        matchInclusions : false,
        matchSubdomains : false,
        disabledBrowsers : ["firefox", "safari", "edge"],
        pages : {
          ".*/document" : {
            matchPartOfUrl : true,
            minFieldHeight : 0,
            minFieldWidth : 0,
            enabled : true
          },
          ".*/spreadsheets" : {
            enabled : false
          },
          ".*/presentation" : {
            enabled : false
          }
        },
        track : true
      },
      "drive.google.com" : {
        enabled : false
      },
      "texteditor.nsspot.net" : {
        enabled : false
      },
      "jsbin.com" : {
        enabled : false
      },
      "jsfiddle.net" : {
        enabled : false
      },
      "quora.com" : {
        enabled : false
      },
      "paper.dropbox.com" : {
        enabled : false
      },
      "mail.live.com" : {
        enabled : false,
        matchInclusions : true
      },
      "imperavi.com" : {
        enabled : false
      },
      "usecanvas.com" : {
        enabled : false
      }
    }, component.PAGE_CONFIG_INTERNAL)
  };
}, function(mixin, canCreateDiscussions, $) {
  var err = $(51);
  var next = $(282);
  var cb = $(283);
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(value, name) {
    return cb(next(value, name, err), value + "");
  };
}, , , function(canCreateDiscussions, me, require) {
  /**
   * @param {?} spec
   * @return {?}
   */
  function init(spec) {
    if (!spec) {
      return false;
    }
    var end = storageService.getGlobal().bundleInfo.browser;
    var graphSet = "firefox" === end ? /^moz-extension:\/\/.*\/src\/popup.html$/ : "edge" === end ? /^ms-browser-extension:\/\/.*\/src\/popup.html$/ : "chrome" === end ? chrome && chrome.runtime && chrome.runtime.id ? new RegExp(chrome.runtime.id + "/src/popup.html") : void 0 : TagHourlyStat.assertNever(end);
    return void 0 !== graphSet && graphSet.test(spec);
  }
  Object.defineProperty(me, "__esModule", {
    value : true
  });
  var CheckDailyStat = require(156);
  var utils = require(4);
  var storageService = require(10);
  var TagHourlyStat = require(1);
  var self = require(59);
  var console = require(3).Logger.create("extension-api.message.bg");
  /** @type {string} */
  me.SETTINGS_TAB_ID = "popup";
  /**
   * @return {undefined}
   */
  me.bgPreload = function() {
    var e = (utils.isChrome() || utils.isFF()) && (!chrome.extension || !chrome.tabs || !chrome.runtime || !chrome.runtime.onConnect);
    var event = utils.isEdge() && (!edge.extension || !edge.tabs || !edge.runtime || !edge.runtime.onConnect);
    if (e || event) {
      /** @type {string} */
      var start = window.localStorage.getItem("bgInitFail") || "0";
      /** @type {number} */
      var firstLine = parseInt(start, 10);
      if (firstLine > 4) {
        console.error("too many bgInitFail " + firstLine);
      } else {
        window.localStorage.setItem("bgInitFail", (firstLine + 1).toString());
        document.location.reload();
      }
    }
  };
  var ADAPT = function() {
    /**
     * @param {?} view
     * @param {?} event
     * @param {?} name
     * @return {undefined}
     */
    function EventListeners(view, event, name) {
      var self = this;
      this._getActiveTab = event;
      this._getAllTabs = name;
      /** @type {string} */
      this.kind = "background-message-api";
      this._callbacks = {};
      this._tabPorts = {
        popup : []
      };
      this._messageHelper = new CheckDailyStat.MessageHelperImpl;
      /**
       * @param {?} type
       * @param {undefined} i
       * @return {undefined}
       */
      this._sendMessageToPorts = function(type, i) {
        var xys = self._tabPorts[type];
        if (xys) {
          xys.forEach(function(global) {
            return global.postMessage(i);
          });
        }
      };
      /**
       * @param {string} obj
       * @param {!Array} args
       * @return {?}
       */
      this.toFocused = function(obj, args) {
        return self._getActiveTab().then(function(token) {
          var i1 = token.id;
          var state = token.url;
          if (i1) {
            return init(state) ? console.warn("toFocussed not allowed for popup when it open like regular tab " + obj, args) : void self._sendMessageToPorts(i1.toString(), {
              type : obj,
              content : args,
              callid : utils.guid()
            });
          }
        });
      };
      /**
       * @param {!Object} n
       * @param {string} type
       * @return {undefined}
       */
      this.broadcast = function(n, type) {
        if (type) {
          /**
           * @param {!Object} s
           * @return {undefined}
           */
          var callback = function(s) {
            var f = s.id;
            var t = s.url;
            if (f && t && -1 === t.indexOf("chrome-extension:")) {
              self._sendMessageToPorts(f.toString(), {
                type : n,
                callid : utils.guid(),
                content : type
              });
            }
          };
          self._getAllTabs().then(function(e) {
            return e.forEach(callback);
          });
          if (self._tabPorts.popup && self._tabPorts.popup.length) {
            self._getActiveTab().then(function(inAppBrowserEvent) {
              var url = inAppBrowserEvent.url;
              callback({
                id : me.SETTINGS_TAB_ID,
                url : url
              });
            });
          }
        }
      };
      /**
       * @param {!Object} worker
       * @return {undefined}
       */
      this._initPortListener = function(worker) {
        if (worker.name === self.ports.bridge) {
          worker.onMessage(function(options) {
            if ("message.toFocussed" === options.method) {
              self.toFocused(options.params && options.params.type, options.params && options.params.content);
            }
          });
        } else {
          if (worker.name === self.ports.broadcast) {
            worker.onMessage(function(data) {
              return self.broadcast(data.type, data.content);
            });
          } else {
            if (worker.name === self.ports.background) {
              var s = worker.sender;
              if (s) {
                if (s.tab) {
                  var t = s.tab;
                  var type = t.id;
                  var url = t.url;
                  if (type) {
                    var actions = self._tabPorts[type];
                    if (void 0 === actions) {
                      /** @type {!Array} */
                      actions = self._tabPorts[type] = [];
                    }
                    actions.push(worker);
                  }
                  if (url && 0 === url.indexOf("http")) {
                    self._messageHelper.fire("tab-connected", {
                      tab : type,
                      url : url
                    });
                  }
                  worker.onDisconnect(function() {
                    if (type) {
                      var test = self._tabPorts[type];
                      if (test) {
                        test.splice(test.indexOf(worker), 1);
                      }
                    }
                  });
                }
                var spec = s.url ? s.url : s.tab ? s.tab.url : "";
                if (spec && init(spec)) {
                  var role = me.SETTINGS_TAB_ID;
                  self._tabPorts[role] = self._tabPorts[role] || [];
                  self._tabPorts[role].push(worker);
                  worker.onDisconnect(function() {
                    var workers = self._tabPorts[role];
                    workers.splice(workers.indexOf(worker), 1);
                  });
                }
              }
              worker.onMessage(function(data) {
                /**
                 * @param {!Object} data
                 * @return {undefined}
                 */
                var fetch = function(data) {
                  var i = data.callid;
                  var o = data.content;
                  var name = data.type;
                  if (self._callbacks[i]) {
                    self._callbacks[i](o);
                    delete self._callbacks[i];
                  }
                  self._messageHelper.fire(name, o, function(nirXml) {
                    return worker.postMessage({
                      content : nirXml,
                      callid : i
                    });
                  }, s && s.tab ? s.tab.id : -1);
                };
                if ("tab-connected" === data.type) {
                  self._getActiveTab().then(function(inAppBrowserEvent) {
                    var url = inAppBrowserEvent.url;
                    data.content = {
                      tab : me.SETTINGS_TAB_ID,
                      url : url
                    };
                    fetch(data);
                  });
                } else {
                  fetch(data);
                }
              });
            }
          }
        }
      };
      view(this._initPortListener);
    }
    return EventListeners.prototype.getPortExists = function(onStr) {
      return !!this._tabPorts[onStr];
    }, EventListeners.prototype.sendTo = function(user, index, message, callback, next, cb) {
      var clients = this._tabPorts[user];
      if (clients && clients.length) {
        var versions = cb ? clients.filter(function(event) {
          return cb(event.sender && event.sender.url);
        }) : clients;
        if (versions.length) {
          var data = {
            type : index,
            content : message
          };
          if (callback && "function" == typeof callback) {
            data.callid = utils.guid();
            /** @type {!Function} */
            this._callbacks[data.callid] = callback;
          }
          versions.forEach(function(session) {
            return session.postMessage(data);
          });
        } else {
          if (next) {
            next({
              message : "no ports on specified tabFilter"
            });
          }
        }
      } else {
        if (next) {
          next({
            message : "no ports on specified tabId"
          });
        }
      }
    }, EventListeners.prototype.listen = function(node, callback) {
      this._messageHelper.listen(node, callback);
    }, EventListeners;
  }();
  me.GenericBackgroundMessageApiImpl = ADAPT;
}, function(mixin, canCreateDiscussions, require) {
  var String = require(98);
  var assert = require(110);
  var jquery = require(134);
  var Type = require(90);
  var isNumber = require(67);
  var s = require(6);
  var $ = require(35);
  var isObject = require(38);
  var isArray = require(8);
  var _ = require(40);
  /**
   * @param {!Object} obj
   * @param {!Object} type
   * @param {string} value
   * @return {?}
   */
  mixin.exports = function(obj, type, value) {
    var info = s(obj);
    var noBackCompat = info || $(obj) || _(obj);
    if (type = Type(type, 4), null == value) {
      var key = obj && obj.constructor;
      value = noBackCompat ? info ? new key : [] : isArray(obj) && isObject(key) ? assert(isNumber(obj)) : {};
    }
    return (noBackCompat ? String : jquery)(obj, function(oldVal, updateQueue, dictionary) {
      return type(value, oldVal, updateQueue, dictionary);
    }), value;
  };
}, function(e, exports, cb) {
  (function(module) {
    var res = cb(113);
    var freeExports = "object" == typeof exports && exports && !exports.nodeType && exports;
    var m = freeExports && "object" == typeof module && module && !module.nodeType && module;
    var freeProcess = m && m.exports === freeExports && res.process;
    var BinaryBundle = function() {
      try {
        var e = m && m.require && m.require("util").types;
        return e || freeProcess && freeProcess.binding && freeProcess.binding("util");
      } catch (e) {
      }
    }();
    module.exports = BinaryBundle;
  }).call(exports, cb(44)(e));
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    /** @type {number} */
    var i = -1;
    var length = name.length;
    var col = obj.length;
    for (; ++i < length;) {
      obj[col + i] = name[i];
    }
    return obj;
  };
}, function(module, canCreateDiscussions, require) {
  var assign = require(187);
  var UrdfMaterial = require(173);
  /** @type {function(this:Object, string): boolean} */
  var propIsEnumerable = Object.prototype.propertyIsEnumerable;
  /** @type {function(!Object): !Array<?>} */
  var ownSymbols = Object.getOwnPropertySymbols;
  var storeMixin = ownSymbols ? function(obj) {
    return null == obj ? [] : (obj = Object(obj), assign(ownSymbols(obj), function(key) {
      return propIsEnumerable.call(obj, key);
    }));
  } : UrdfMaterial;
  module.exports = storeMixin;
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var Uint8Array = __webpack_require__(118);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    var lump = new value.constructor(value.byteLength);
    return (new Uint8Array(lump)).set(new Uint8Array(value)), lump;
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var isObject = __webpack_require__(28);
  var isArray = __webpack_require__(15);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return isArray(value) && isObject(value);
  };
}, , function(module, canCreateDiscussions, factory) {
  module.exports = factory(330);
}, function(canCreateDiscussions, data, n) {
  Object.defineProperty(data, "__esModule", {
    value : true
  });
  data.tracker = {};
}, function(canCreateDiscussions, BeautifulProperties, require) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var storageService = require(10);
  var kity = require(127);
  var global = require(290);
  var item = require(18);
  var subType2 = require(3).Logger.create("lib.tracking.logger");
  BeautifulProperties.felog = new global.Telemetry(kity.callBgPage.sendFelog.bind(kity.callBgPage), kity.callBgPage.sendFelogUsageEvent.bind(kity.callBgPage), kity.callBgPage.setUserId.bind(kity.callBgPage), kity.callBgPage.setContainerId.bind(kity.callBgPage), storageService.getGlobal().appConfig.felog.sendUsageMetrics, global.PerformanceMetrics.create(window.performance), storageService.getGlobal().appConfig.felog.sendPerfMetrics, kity.callBgPage.sendFelogEvent.bind(kity.callBgPage), kity.callBgPage.sendFelogCrashLogs.bind(kity.callBgPage));
  if (item.isBg()) {
    subType2.info("Installing unhandled error loggers...");
    window.addEventListener("error", function(throwValue) {
      return BeautifulProperties.felog.unhandledBgPageException(throwValue);
    });
    window.addEventListener("unhandledrejection", function(ezfbInitParams) {
      return BeautifulProperties.felog.unhandledBgPageRejection(ezfbInitParams);
    });
  }
}, , , , , function(canCreateDiscussions, exports, n) {
  exports.empty = {
    closed : true,
    next : function(data) {
    },
    error : function(obj) {
      throw obj;
    },
    complete : function() {
    }
  };
}, function(canCreateDiscussions, exports, __webpack_require__) {
  /**
   * @param {?} context
   * @return {?}
   */
  function getSymbolObservable(context) {
    var result;
    var Symbol = context.Symbol;
    return "function" == typeof Symbol ? Symbol.observable ? result = Symbol.observable : (result = Symbol("observable"), Symbol.observable = result) : result = "@@observable", result;
  }
  var root_1 = __webpack_require__(29);
  /** @type {function(?): ?} */
  exports.getSymbolObservable = getSymbolObservable;
  exports.observable = getSymbolObservable(root_1.root);
  exports.$$observable = exports.observable;
}, function(canCreateDiscussions, context, __M) {
  /**
   * @return {?}
   */
  function next() {
    return safari.application.activeBrowserWindow && safari.application.activeBrowserWindow.activeTab;
  }
  var r = this && this.__values || function(value) {
    var func = "function" == typeof Symbol && value[Symbol.iterator];
    /** @type {number} */
    var pos = 0;
    return func ? func.call(value) : {
      next : function() {
        return value && pos >= value.length && (value = void 0), {
          value : value && value[pos++],
          done : !value
        };
      }
    };
  };
  Object.defineProperty(context, "__esModule", {
    value : true
  });
  var b = __M(17);
  var processingResult = __M(3).Logger.create("extension-api.message");
  /**
   * @return {undefined}
   */
  var G__20648 = function() {
  };
  var nonRoutablePacket = function() {
    return function() {
      var _this = this;
      this._listeners = {};
      this._queue = {};
      /**
       * @param {string} i
       * @param {string} v
       * @param {!Function} r
       * @param {number} scope
       * @return {undefined}
       */
      this.fire = function(i, v, r, scope) {
        if (void 0 === r) {
          /** @type {function(): undefined} */
          r = G__20648;
        }
        var deprecatedStylingMethods = _this._listeners[i] || [];
        if (deprecatedStylingMethods.length) {
          deprecatedStylingMethods.forEach(function(callback) {
            return callback(v, r, scope);
          });
        } else {
          _this._queue[i] = _this._queue[i] || [];
          _this._queue[i].push({
            content : v,
            callback : r,
            sender : scope
          });
        }
      };
      /**
       * @param {!Object} name
       * @param {!Function} type
       * @return {undefined}
       */
      this.unlisten = function(name, type) {
        var r = _this._listeners[name] || [];
        var o = r.indexOf(type);
        if (-1 !== o) {
          if (1 === r.length) {
            delete _this._listeners[name];
          } else {
            r.splice(o, 1);
          }
        }
      };
      /**
       * @param {undefined} type
       * @param {?} handler
       * @return {undefined}
       */
      this.listenOnce = function(type, handler) {
        /**
         * @param {?} track
         * @param {?} evt
         * @param {?} args
         * @return {undefined}
         */
        var onReady = function(track, evt, args) {
          _this.unlisten(type, onReady);
          if (handler) {
            handler(track, evt, args);
          }
        };
        _this.listen(type, onReady);
      };
      /**
       * @param {!Object} event
       * @param {string} callback
       * @return {undefined}
       */
      this.listen = function(event, callback) {
        var mockConsole;
        var value;
        _this._listeners[event] = _this._listeners[event] || [];
        if (-1 === _this._listeners[event].indexOf(callback)) {
          _this._listeners[event].push(callback);
        }
        var events = _this._queue[event] || [];
        if (events.length) {
          try {
            var result = r(events);
            var vt = result.next();
            for (; !vt.done; vt = result.next()) {
              var data = vt.value;
              try {
                callback(data.content, data.callback, data.sender);
              } catch (text) {
                processingResult.error("exception during proccesing buffered messages", text);
              }
            }
          } catch (Console_error) {
            mockConsole = {
              error : Console_error
            };
          } finally {
            try {
              if (vt && !vt.done && (value = result.return)) {
                value.call(result);
              }
            } finally {
              if (mockConsole) {
                throw mockConsole.error;
              }
            }
          }
          delete _this._queue[event];
        }
      };
    };
  }();
  context.MessageHelperImpl = nonRoutablePacket;
  context.safariBridgeId = "forge-bridge" + b.getUuid();
  /** @type {function(): ?} */
  context.getSafariActiveTab = next;
  /**
   * @return {?}
   */
  context.getSafariActiveTabUrl = function() {
    var node = next();
    return node && node.url || "http://newtab";
  };
  /**
   * @return {?}
   */
  context.emitter = function() {
    var testResults = {};
    var definedStyles = {};
    return {
      emit : function(name, obj, item) {
        var arr = testResults[name];
        if (arr) {
          arr.forEach(function(fn) {
            return fn(obj, item);
          });
        } else {
          if (!definedStyles[name]) {
            /** @type {!Array} */
            definedStyles[name] = [];
          }
          definedStyles[name].push({
            data : obj,
            callback : item
          });
        }
      },
      on : function(name, callback) {
        if (!testResults[name]) {
          /** @type {!Array} */
          testResults[name] = [];
        }
        testResults[name].push(callback);
        if (definedStyles[name]) {
          definedStyles[name].forEach(function(params) {
            return callback(params.data, params.callback);
          });
        }
      }
    };
  };
}, function(module, canCreateDiscussions, __webpack_require__) {
  /**
   * @param {!Object} obj
   * @return {undefined}
   */
  function SetCache(obj) {
    /** @type {number} */
    var i = -1;
    var numPoistiveTicks = null == obj ? 0 : obj.length;
    this.__data__ = new MapCache;
    for (; ++i < numPoistiveTicks;) {
      this.add(obj[i]);
    }
  }
  var MapCache = __webpack_require__(74);
  var cachePush = __webpack_require__(251);
  var has = __webpack_require__(252);
  SetCache.prototype.add = SetCache.prototype.push = cachePush;
  SetCache.prototype.has = has;
  /** @type {function(!Object): undefined} */
  module.exports = SetCache;
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return obj.has(name);
  };
}, function(canCreateDiscussions, t, $) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var AvatarsIO = $(1);
  var strangth = $(156);
  var et = $(4);
  var node = $(59);
  var log = $(3).Logger.create("Messaging.extension-api.content");
  var offsetFromCenter = function() {
    /**
     * @param {?} $
     * @return {undefined}
     */
    function init($) {
      var self = this;
      /** @type {string} */
      this.kind = "content-script-message-api";
      this._callbacks = {};
      this._messageHelper = new strangth.MessageHelperImpl;
      this._proxyPortsStorage = {};
      /**
       * @return {?}
       */
      this.broadcastBackground = function() {
        /** @type {!Array} */
        var args = [];
        /** @type {number} */
        var i = 0;
        for (; i < arguments.length; i++) {
          args[i] = arguments[i];
        }
        return self._emit(self.backgroundPort, "bg").apply(null, args);
      };
      /**
       * @return {?}
       */
      this.broadcast = function() {
        /** @type {!Array} */
        var args = [];
        /** @type {number} */
        var i = 0;
        for (; i < arguments.length; i++) {
          args[i] = arguments[i];
        }
        return self._emit(self.broadcastPort, "tabs").apply(null, args);
      };
      /**
       * @param {!Function} message
       * @return {undefined}
       */
      this._onPortMessage = function(message) {
        log.trace("portMessage", message);
      };
      this._checkHealth = function() {
        /**
         * @return {undefined}
         */
        function close() {
          document.removeEventListener("grammarly:pong", onmove_touch);
          if (q) {
            clearTimeout(q);
            /** @type {null} */
            q = null;
          }
          if (logIntervalId) {
            clearInterval(logIntervalId);
            /** @type {null} */
            logIntervalId = null;
          }
        }
        /** @type {null} */
        var logIntervalId = null;
        /** @type {null} */
        var q = null;
        /**
         * @return {undefined}
         */
        var checkResume = function() {
          document.dispatchEvent(new CustomEvent("grammarly:ping"));
        };
        /**
         * @return {undefined}
         */
        var onmove_touch = function() {
          close();
        };
        /**
         * @return {undefined}
         */
        var test = function() {
          [self.port, self.backgroundPort, self.broadcastPort].forEach(function(hasData) {
            if (hasData && hasData.removeMessageListeners) {
              hasData.removeMessageListeners();
            }
          });
          /** @type {null} */
          self.port = self.backgroundPort = self.broadcastPort = null;
          close();
          document.addEventListener("grammarly:proxyports", self._onGrammarlyResetAfterTimeout);
          document.dispatchEvent(new CustomEvent("grammarly:offline"));
        };
        return function() {
          close();
          document.addEventListener("grammarly:pong", onmove_touch);
          logIntervalId = window.setInterval(checkResume, 500);
          q = window.setTimeout(test, 5E3);
        };
      }();
      /**
       * @return {undefined}
       */
      this._onGrammarlyResetAfterTimeout = function() {
        document.removeEventListener("grammarly:proxyports", self._onGrammarlyResetAfterTimeout);
        self.port = self._initProxyPort(node.ports.bridge, self._onPortMessage, self._checkHealth, true);
        self.backgroundPort = self._initProxyPort(node.ports.background, self._onBgPortMessage, self._checkHealth);
        self.broadcastPort = self._initProxyPort(node.ports.broadcast, null, self._checkHealth);
      };
      /**
       * @param {!Object} data
       * @return {undefined}
       */
      this._onBgPortMessage = function(data) {
        var i = data.callid;
        var result = data.content;
        var o = data.type;
        if (self._callbacks[i]) {
          self._callbacks[i](result);
          delete self._callbacks[i];
        } else {
          self._messageHelper.fire(o, result, function(nirXml) {
            if (!self.backgroundPort) {
              throw new Error("fail reply to bg page - connection lost");
            }
            self.backgroundPort.postMessage({
              content : nirXml,
              callid : i
            });
          });
        }
      };
      /**
       * @param {string} type
       * @param {!Function} data
       * @param {boolean} id
       * @param {number} highlightAssociated
       * @return {?}
       */
      this._initProxyPort = function(type, data, id, highlightAssociated) {
        if (void 0 === highlightAssociated) {
          /** @type {boolean} */
          highlightAssociated = false;
        }
        var port = self._proxyPort(type);
        return highlightAssociated && self._checkHealth(), data && port.onMessage(data), id && port.onDisconnect(id), port;
      };
      /**
       * @param {string} data
       * @param {string} x
       * @return {?}
       */
      this._emit = function(data, x) {
        return function(r, nirXml, callback, emitEvent) {
          var name = et.guid();
          if (callback && "function" == typeof callback) {
            /** @type {!Function} */
            self._callbacks[name] = callback;
          }
          try {
            if (!data) {
              throw new Error("lost connection to " + x + " port");
            }
            data.postMessage({
              type : r,
              callid : name,
              content : nirXml
            });
          } catch (save) {
            if (!emitEvent) {
              throw save;
            }
            emitEvent(save);
          }
        };
      };
      /**
       * @param {string} name
       * @return {?}
       */
      this._proxyPort = function(name) {
        self._proxyPortsStorage[name] = {};
        /**
         * @param {string} type
         * @param {!Object} event
         * @return {undefined}
         */
        var log = function(type, event) {
          var data = event.detail;
          if (data.name === name) {
            var check = self._proxyPortsStorage[name][type];
            if (check) {
              check(data.msg);
            }
          }
        };
        /**
         * @param {!Object} name
         * @return {?}
         */
        var o = function(name) {
          return log("success", name);
        };
        /**
         * @param {!Object} event
         * @return {?}
         */
        var changeCodemirrorHeight = function(event) {
          return log("error", event);
        };
        return document.addEventListener("grammarly:message", o), document.addEventListener("grammarly:error", changeCodemirrorHeight), {
          postMessage : function(data) {
            if (void 0 === data) {
              data = {};
            }
            var model = {
              data : data,
              name : name
            };
            return document.dispatchEvent(new CustomEvent("grammarly:action", {
              detail : model
            }));
          },
          onMessage : function(cb) {
            /** @type {!Function} */
            self._proxyPortsStorage[name].success = cb;
          },
          onDisconnect : function(e) {
            /** @type {!Function} */
            self._proxyPortsStorage[name].error = e;
          },
          removeMessageListeners : function() {
            document.removeEventListener("grammarly:message", o);
            document.removeEventListener("grammarly:error", changeCodemirrorHeight);
          }
        };
      };
      this.port = $(node.ports.bridge);
      this.port.onMessage(this._onPortMessage);
      this.port.onDisconnect(function() {
        /** @type {null} */
        self.port = null;
        self.port = self._initProxyPort(node.ports.bridge, self._onPortMessage, self._checkHealth, true);
      });
      this.backgroundPort = $(node.ports.background);
      this.backgroundPort.onMessage(this._onBgPortMessage);
      this.backgroundPort.onDisconnect(function() {
        /** @type {null} */
        self.backgroundPort = null;
        self.backgroundPort = self._initProxyPort(node.ports.background, self._onBgPortMessage, self._checkHealth);
      });
      this.broadcastPort = $(node.ports.broadcast);
      this.broadcastPort.onDisconnect(function() {
        /** @type {null} */
        self.broadcastPort = null;
        self.broadcastPort = self._initProxyPort(node.ports.broadcast, null, self._checkHealth);
      });
    }
    return init.prototype.onBackgroundPortReconnect = function(e) {
      if (this.backgroundPort && this.backgroundPort.onReconnect) {
        this.backgroundPort.onReconnect(e);
      }
    }, init.prototype.listen = function(node, callback) {
      this._messageHelper.listen(node, callback);
    }, init.prototype.toFocused = function(error, t) {
      var sharedWorker = this;
      return AvatarsIO.SafePromise.create(function(saveNotifs) {
        if (!sharedWorker.port) {
          throw new Error("lost connection to bg page");
        }
        sharedWorker.port.postMessage({
          method : "message.toFocussed",
          params : {
            type : error,
            content : t
          }
        });
        saveNotifs();
      });
    }, init;
  }();
  t.GenericContentScriptMessageApiImpl = offsetFromCenter;
  /**
   * @return {undefined}
   */
  t.runSettingsPopupCompatibilityFixes = function() {
    window.addEventListener("update-window-size-gr", function(options) {
      /** @type {!Element} */
      var t = document.createElement("div");
      if (t.style.height = "1px", options.detail && options.detail.force) {
        /** @type {number} */
        var chat_retry = setInterval(function() {
          document.body.appendChild(t);
          setTimeout(function() {
            if (t.parentNode) {
              t.parentNode.removeChild(t);
            }
          }, 10);
        }, 100);
        setTimeout(function() {
          return clearInterval(chat_retry);
        }, 405);
      }
    }, false);
    window.addEventListener("close-popup-gr", function() {
      window.close();
    }, false);
  };
}, function(canCreateDiscussions, BeautifulProperties, n) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /**
   * @param {!Function} resolve
   * @param {!Function} reject
   * @return {undefined}
   */
  BeautifulProperties.handleChromeError = function(resolve, reject) {
    if (chrome.runtime.lastError) {
      reject(chrome.runtime.lastError);
    } else {
      resolve();
    }
  };
}, , function(canCreateDiscussions, self, iter_f) {
  /**
   * @param {!Object} node
   * @param {string} name
   * @param {!Function} fn
   * @param {string} capture
   * @param {!Array} options
   * @return {?}
   */
  function listen(node, name, fn, capture, options) {
    if (void 0 === options && (options = false), null != node) {
      /** @type {!Object} */
      var target = node;
      if ("string" != typeof name) {
        return next(name, function(val, schedule) {
          listen(target, schedule, val, capture);
        });
      }
      if (fn) {
        var list = target[prop] || [];
        return target[prop] = list, capture ? (target[prop] = list.filter(function(listener) {
          return !(listener.event === name && listener.cb === fn);
        }), target.removeEventListener(name, fn, options)) : (list.push({
          event : name,
          cb : fn
        }), target.addEventListener(name, fn, options)), {
          el : target,
          event : name,
          cb : fn,
          bubble : options
        };
      }
    }
  }
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var next = iter_f(147);
  var ax5 = (iter_f(60), iter_f(4));
  var prop = ax5.guid();
  /** @type {function(!Object, string, !Function, string, !Array): ?} */
  self.listen = listen;
  /**
   * @param {!Object} target
   * @param {string} event
   * @param {!Function} options
   * @param {!Array} scope
   * @return {undefined}
   */
  self.unlisten = function callback(target, event, options, scope) {
    /** @type {!Object} */
    var el = target;
    if (event || null == el[prop]) {
      listen(el, event, options, true, scope);
    } else {
      el[prop].forEach(function(data) {
        return callback(el, data.event, data.cb, data.bubble);
      });
    }
  };
}, function(canCreateDiscussions, self, reviver) {
  /**
   * @param {!Object} obj
   * @param {string} key
   * @param {!Function} value
   * @return {?}
   */
  function f(obj, key, value) {
    return key in obj ? Object.defineProperty(obj, key, {
      value : value,
      enumerable : true,
      configurable : true,
      writable : true
    }) : obj[key] = value, obj;
  }
  /**
   * @param {!Object} fn
   * @param {!Array} data
   * @return {?}
   */
  function update(fn, data) {
    (0, context.check)(fn, context.is.notUndef, artistTrack);
    /** @type {null} */
    var i = null;
    if (context.is.array(fn)) {
      var obj = check(fn, 2);
      i = obj[0];
      fn = obj[1];
    } else {
      if (fn.fn) {
        /** @type {!Object} */
        var filter = fn;
        i = filter.context;
        fn = filter.fn;
      }
    }
    return (0, context.check)(fn, context.is.func, artistTrack), {
      context : i,
      fn : fn,
      args : data
    };
  }
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  self.asEffect = self.SELECT_ARG_ERROR = self.INVALID_PATTERN = self.CANCEL_ARG_ERROR = self.JOIN_ARG_ERROR = self.FORK_ARG_ERROR = self.CALL_FUNCTION_ARG_ERROR = void 0;
  var check = function() {
    return function(arr, chunksOrSource) {
      if (Array.isArray(arr)) {
        return arr;
      }
      if (Symbol.iterator in Object(arr)) {
        return function(set, object) {
          /** @type {!Array} */
          var _arr = [];
          /** @type {boolean} */
          var _iteratorNormalCompletion3 = true;
          /** @type {boolean} */
          var o = false;
          var i = void 0;
          try {
            var _s;
            var _iterator3 = set[Symbol.iterator]();
            for (; !(_iteratorNormalCompletion3 = (_s = _iterator3.next()).done) && (_arr.push(_s.value), !object || _arr.length !== object); _iteratorNormalCompletion3 = true) {
            }
          } catch (contactCapacity) {
            /** @type {boolean} */
            o = true;
            i = contactCapacity;
          } finally {
            try {
              if (!_iteratorNormalCompletion3 && _iterator3.return) {
                _iterator3.return();
              }
            } finally {
              if (o) {
                throw i;
              }
            }
          }
          return _arr;
        }(arr, chunksOrSource);
      }
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    };
  }();
  /**
   * @param {undefined} pattern
   * @return {?}
   */
  self.matcher = function(pattern) {
    return ("*" === pattern ? matchers.wildcard : context.is.array(pattern) ? matchers.array : context.is.func(pattern) ? matchers.predicate : matchers.default)(pattern);
  };
  /**
   * @param {!Object} value
   * @return {?}
   */
  self.take = function(value) {
    if (arguments.length > 0 && context.is.undef(value)) {
      throw new Error(lastErrorOutput);
    }
    return callback(room_id, context.is.undef(value) ? "*" : value);
  };
  /**
   * @param {!Object} url
   * @return {?}
   */
  self.put = function(url) {
    return callback(type, url);
  };
  /**
   * @param {!Object} array
   * @return {?}
   */
  self.race = function(array) {
    return callback(name, array);
  };
  /**
   * @param {!Object} obj
   * @return {?}
   */
  self.call = function(obj) {
    /** @type {number} */
    var length = arguments.length;
    /** @type {!Array} */
    var args = Array(length > 1 ? length - 1 : 0);
    /** @type {number} */
    var i = 1;
    for (; i < length; i++) {
      args[i - 1] = arguments[i];
    }
    return callback(prop, update(obj, args));
  };
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  self.apply = function(obj, name) {
    var args = arguments.length <= 2 || void 0 === arguments[2] ? [] : arguments[2];
    return callback(prop, update({
      context : obj,
      fn : name
    }, args));
  };
  /**
   * @param {!Object} e
   * @return {?}
   */
  self.cps = function(e) {
    /** @type {number} */
    var length = arguments.length;
    /** @type {!Array} */
    var args = Array(length > 1 ? length - 1 : 0);
    /** @type {number} */
    var i = 1;
    for (; i < length; i++) {
      args[i - 1] = arguments[i];
    }
    return callback(property, update(e, args));
  };
  /**
   * @param {!Object} name
   * @return {?}
   */
  self.fork = function(name) {
    /** @type {number} */
    var length = arguments.length;
    /** @type {!Array} */
    var args = Array(length > 1 ? length - 1 : 0);
    /** @type {number} */
    var i = 1;
    for (; i < length; i++) {
      args[i - 1] = arguments[i];
    }
    return callback(field, update(name, args));
  };
  /**
   * @param {string} data
   * @return {?}
   */
  self.join = function(data) {
    if (!register(data)) {
      throw new Error(FULFILLED_ERROR_MESSAGE);
    }
    return callback(location, data);
  };
  /**
   * @param {!Object} e
   * @return {?}
   */
  self.cancel = function(e) {
    if (!register(e)) {
      throw new Error(paramErrors);
    }
    return callback(method, e);
  };
  /**
   * @param {string} key
   * @return {?}
   */
  self.select = function(key) {
    /** @type {number} */
    var _len = arguments.length;
    /** @type {!Array} */
    var args = Array(_len > 1 ? _len - 1 : 0);
    /** @type {number} */
    var _key = 1;
    for (; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (0 === arguments.length) {
      key = context.ident;
    } else {
      (0, context.check)(key, context.is.func, GET_AUTH_URL_TIMEOUT);
    }
    return callback(mode, {
      selector : key,
      args : args
    });
  };
  var context = reviver(61);
  /** @type {string} */
  var artistTrack = self.CALL_FUNCTION_ARG_ERROR = "call/cps/fork first argument must be a function, an array [context, function] or an object {context, fn}";
  /** @type {string} */
  var FULFILLED_ERROR_MESSAGE = (self.FORK_ARG_ERROR = "fork first argument must be a generator function or an iterator", self.JOIN_ARG_ERROR = "join argument must be a valid task (a result of a fork)");
  /** @type {string} */
  var paramErrors = self.CANCEL_ARG_ERROR = "cancel argument must be a valid task (a result of a fork)";
  /** @type {string} */
  var lastErrorOutput = self.INVALID_PATTERN = "Invalid pattern passed to `take` (HINT: check if you didn't mispell a constant)";
  /** @type {string} */
  var GET_AUTH_URL_TIMEOUT = self.SELECT_ARG_ERROR = "select first argument must be a function";
  var i = (0, context.sym)("IO");
  /** @type {string} */
  var room_id = "TAKE";
  /** @type {string} */
  var type = "PUT";
  /** @type {string} */
  var name = "RACE";
  /** @type {string} */
  var prop = "CALL";
  /** @type {string} */
  var property = "CPS";
  /** @type {string} */
  var field = "FORK";
  /** @type {string} */
  var location = "JOIN";
  /** @type {string} */
  var method = "CANCEL";
  /** @type {string} */
  var mode = "SELECT";
  /**
   * @param {string} value
   * @param {!Object} type
   * @return {?}
   */
  var callback = function(value, type) {
    var d;
    return f(d = {}, i, true), f(d, value, type), d;
  };
  var matchers = {
    wildcard : function() {
      return context.kTrue;
    },
    default : function(type) {
      return function(listenerDetails) {
        return listenerDetails.type === type;
      };
    },
    array : function(obj) {
      return function(t) {
        return obj.some(function(type) {
          return type === t.type;
        });
      };
    },
    predicate : function(value) {
      return function(custBidObj) {
        return value(custBidObj);
      };
    }
  };
  /**
   * @param {!Object} task
   * @return {?}
   */
  var register = function(task) {
    return task[context.TASK];
  };
  self.asEffect = {
    take : function(items) {
      return items && items[i] && items[room_id];
    },
    put : function(obj) {
      return obj && obj[i] && obj[type];
    },
    race : function(obj) {
      return obj && obj[i] && obj[name];
    },
    call : function(obj) {
      return obj && obj[i] && obj[prop];
    },
    cps : function(styles) {
      return styles && styles[i] && styles[property];
    },
    fork : function(obj) {
      return obj && obj[i] && obj[field];
    },
    join : function(data) {
      return data && data[i] && data[location];
    },
    cancel : function(obj) {
      return obj && obj[i] && obj[method];
    },
    select : function(data) {
      return data && data[i] && data[mode];
    }
  };
}, function(canCreateDiscussions, res, n) {
  /**
   * @param {!Object} type
   * @param {!Object} name
   * @param {string} data
   * @return {undefined}
   */
  function r(type, name, data) {
    /** @type {string} */
    var message = "SagaCancellationException; type: " + type + ", saga: " + name + ", origin: " + data;
    /** @type {string} */
    this.name = "SagaCancellationException";
    /** @type {string} */
    this.message = message;
    /** @type {!Object} */
    this.type = type;
    /** @type {!Object} */
    this.saga = name;
    /** @type {string} */
    this.origin = data;
    /** @type {string} */
    this.stack = (new Error).stack;
  }
  Object.defineProperty(res, "__esModule", {
    value : true
  });
  /** @type {function(!Object, !Object, string): undefined} */
  res.default = r;
  /** @type {!Object} */
  r.prototype = Object.create(Error.prototype);
  /** @type {function(!Object, !Object, string): undefined} */
  r.prototype.constructor = r;
}, function(canCreateDiscussions, self, createElement) {
  /**
   * @param {string} type
   * @return {?}
   */
  function connect(type) {
    /** @type {!Array} */
    var f = [];
    /** @type {number} */
    var i = 1;
    for (; i < arguments.length; i++) {
      f[i - 1] = arguments[i];
    }
    if (!a.on[type]) {
      return env.error("No handler specified for message: " + type);
    }
    value.asyncCall(function() {
      return a.on[type].apply(a.on, error(f));
    }, 20);
  }
  var r = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var error = this && this.__spread || function() {
    /** @type {!Array} */
    var bytes = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      bytes = bytes.concat(r(arguments[i]));
    }
    return bytes;
  };
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var $progressBar = createElement(13);
  var value = createElement(4);
  var outer = createElement(14);
  var $$Log = createElement(3);
  var errorMsgElement = createElement(71);
  var s = createElement(338);
  var a = createElement(509);
  var env = $$Log.Logger.create("lib.tracking");
  self.gnarSpecInstance = errorMsgElement.SafePromise.createCompletionSource();
  self.gnar = new Proxy({}, {
    get : function(key, m) {
      return function() {
        /** @type {!Array} */
        var message = [];
        /** @type {number} */
        var i = 0;
        for (; i < arguments.length; i++) {
          message[i] = arguments[i];
        }
        return self.gnarSpecInstance.promise.then(function(component) {
          var name;
          outer.logCall("gnar", error([m], message));
          (name = component)[m].apply(name, error(message));
        }).catch(function(e) {
          env.error(e);
        });
      };
    }
  });
  /**
   * @param {undefined} e
   * @return {undefined}
   */
  self.initBg = function(e) {
    s.init(e).then(function(e) {
      if (e) {
        self.gnarSpecInstance.resolve(e);
      } else {
        outer.felog.bgTrackingInitFail();
        self.gnarSpecInstance.reject("failed to send tracking event: gnarSpec init failed");
      }
    }).catch(function(canCreateDiscussions) {
      outer.felog.bgTrackingInitFail();
      self.gnarSpecInstance.reject("failed to send tracking event: tracking init failed");
    });
    $progressBar.on("gnar-track", function(message) {
      var n;
      var data = message.props;
      var method = message.method;
      return (n = self.gnar)[method].apply(n, error(data));
    });
    $progressBar.on("tracking-fire", function(result) {
      var msg = result.msg;
      var names = result.data;
      return connect.apply(void 0, error([msg], names));
    });
    $progressBar.on("tracking-call", function(result, entry) {
      var msg = result.msg;
      var names = result.data;
      if (void 0 === entry) {
        entry = value._f;
      }
      outer.call.apply(void 0, error([msg], names));
      entry();
    });
  };
  /** @type {function(string): ?} */
  self.fire = connect;
}, , , , function(mixin, canCreateDiscussions, n) {
  var a = n(65);
  var next = n(221);
  /** @type {function(this:Object, *): boolean} */
  var hasOwn = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} o
   * @return {?}
   */
  mixin.exports = function(o) {
    if (!a(o)) {
      return next(o);
    }
    /** @type {!Array} */
    var t = [];
    var k;
    for (k in Object(o)) {
      if (hasOwn.call(o, k) && "constructor" != k) {
        t.push(k);
      }
    }
    return t;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    /** @type {number} */
    var callbackCount = -1;
    /** @type {!Array} */
    var defaultDates = Array(obj.size);
    return obj.forEach(function(i) {
      defaultDates[++callbackCount] = i;
    }), defaultDates;
  };
}, function(mixin, canCreateDiscussions, n) {
  var next = n(172);
  var end = n(143);
  var i = n(39);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return next(obj, i, end);
  };
}, function(mixin, canCreateDiscussions, require) {
  var extend = require(142);
  var isArray = require(6);
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @param {string} type
   * @return {?}
   */
  mixin.exports = function(value, name, type) {
    var result = name(value);
    return isArray(value) ? result : extend(result, type(value));
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @return {?}
   */
  mixin.exports = function() {
    return [];
  };
}, function(mixin, canCreateDiscussions, new_val_func) {
  var h = new_val_func(266);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return null == value ? "" : h(value);
  };
}, function(module, canCreateDiscussions, opt_function) {
  var googleImageSize = opt_function(277);
  var storeMixin = opt_function(126)(function(input, size, deprecatedHeight) {
    googleImageSize(input, size, deprecatedHeight);
  });
  module.exports = storeMixin;
}, function(e, exports, cb) {
  (function(module) {
    var name = cb(11);
    var freeExports = "object" == typeof exports && exports && !exports.nodeType && exports;
    var freeModule = freeExports && "object" == typeof module && module && !module.nodeType && module;
    var Buffer = freeModule && freeModule.exports === freeExports ? name.Buffer : void 0;
    var filter = Buffer ? Buffer.allocUnsafe : void 0;
    /**
     * @param {!Object} key
     * @param {!Object} name
     * @return {?}
     */
    module.exports = function(key, name) {
      if (name) {
        return key.slice();
      }
      var i = key.length;
      var value = filter ? filter(i) : new key.constructor(i);
      return key.copy(value), value;
    };
  }).call(exports, cb(44)(e));
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var isArray = __webpack_require__(144);
  /**
   * @param {!Object} obj
   * @param {!Object} str
   * @return {?}
   */
  mixin.exports = function(obj, str) {
    var value = str ? isArray(obj.buffer) : obj.buffer;
    return new obj.constructor(value, obj.byteOffset, obj.length);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(obj, key) {
    /** @type {number} */
    var i = -1;
    var length = obj.length;
    if (!key) {
      /** @type {!Array} */
      key = Array(length);
    }
    for (; ++i < length;) {
      key[i] = obj[i];
    }
    return key;
  };
}, function(mixin, canCreateDiscussions, require) {
  var extend = require(110);
  var inherit = require(67);
  var i = require(65);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return "function" != typeof value.constructor || i(value) ? {} : extend(inherit(value));
  };
}, function(mixin, canCreateDiscussions, create) {
  var cb = create(76);
  var init = create(32);
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} value
   * @param {?} name
   * @param {?} type
   * @return {undefined}
   */
  mixin.exports = function(value, name, type) {
    var element = value[name];
    if (!(hasOwnProperty.call(value, name) && init(element, type) && (void 0 !== type || name in value))) {
      cb(value, name, type);
    }
  };
}, , , , , , function(canCreateDiscussions, fn, n) {
  /**
   * @return {undefined}
   */
  fn.noop = function() {
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} o
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(o, type) {
    /** @type {number} */
    var q = -1;
    var dashes = null == o ? 0 : o.length;
    /** @type {number} */
    var j = 0;
    /** @type {!Array} */
    var vec = [];
    for (; ++q < dashes;) {
      var val = o[q];
      if (type(val, q, o)) {
        vec[j++] = val;
      }
    }
    return vec;
  };
}, function(module, canCreateDiscussions, saveNotifs) {
  var Set = saveNotifs(23)(saveNotifs(11), "Set");
  module.exports = Set;
}, function(canCreateDiscussions, exports, moment) {
  (function(extra) {
    /**
     * @param {!Array} parts
     * @param {boolean} allowAboveRoot
     * @return {?}
     */
    function normalizeArray(parts, allowAboveRoot) {
      /** @type {number} */
      var n = 0;
      /** @type {number} */
      var i = parts.length - 1;
      for (; i >= 0; i--) {
        var c_elem = parts[i];
        if ("." === c_elem) {
          parts.splice(i, 1);
        } else {
          if (".." === c_elem) {
            parts.splice(i, 1);
            n++;
          } else {
            if (n) {
              parts.splice(i, 1);
              n--;
            }
          }
        }
      }
      if (allowAboveRoot) {
        for (; n--; n) {
          parts.unshift("..");
        }
      }
      return parts;
    }
    /**
     * @param {!Array} array
     * @param {!Function} fn
     * @return {?}
     */
    function filter(array, fn) {
      if (array.filter) {
        return array.filter(fn);
      }
      /** @type {!Array} */
      var ret = [];
      /** @type {number} */
      var i = 0;
      for (; i < array.length; i++) {
        if (fn(array[i], i, array)) {
          ret.push(array[i]);
        }
      }
      return ret;
    }
    /** @type {!RegExp} */
    var testFileRegex = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
    /**
     * @param {?} filename
     * @return {?}
     */
    var splitPath = function(filename) {
      return testFileRegex.exec(filename).slice(1);
    };
    /**
     * @return {?}
     */
    exports.resolve = function() {
      /** @type {string} */
      var b = "";
      /** @type {boolean} */
      var resolvedAbsolute = false;
      /** @type {number} */
      var i = arguments.length - 1;
      for (; i >= -1 && !resolvedAbsolute; i--) {
        var a = i >= 0 ? arguments[i] : extra.cwd();
        if ("string" != typeof a) {
          throw new TypeError("Arguments to path.resolve must be strings");
        }
        if (a) {
          /** @type {string} */
          b = a + "/" + b;
          /** @type {boolean} */
          resolvedAbsolute = "/" === a.charAt(0);
        }
      }
      return (resolvedAbsolute ? "/" : "") + (b = normalizeArray(filter(b.split("/"), function(canCreateDiscussions) {
        return !!canCreateDiscussions;
      }), !resolvedAbsolute).join("/")) || ".";
    };
    /**
     * @param {string} name
     * @return {?}
     */
    exports.normalize = function(name) {
      var i = exports.isAbsolute(name);
      /** @type {boolean} */
      var type = "/" === getCacheName(name, -1);
      return (name = normalizeArray(filter(name.split("/"), function(canCreateDiscussions) {
        return !!canCreateDiscussions;
      }), !i).join("/")) || i || (name = "."), name && type && (name = name + "/"), (i ? "/" : "") + name;
    };
    /**
     * @param {string} name
     * @return {?}
     */
    exports.isAbsolute = function(name) {
      return "/" === name.charAt(0);
    };
    /**
     * @return {?}
     */
    exports.join = function() {
      /** @type {!Array<?>} */
      var field = Array.prototype.slice.call(arguments, 0);
      return exports.normalize(filter(field, function(v, canCreateDiscussions) {
        if ("string" != typeof v) {
          throw new TypeError("Arguments to path.join must be strings");
        }
        return v;
      }).join("/"));
    };
    /**
     * @param {!Object} e
     * @param {!Object} parent
     * @return {?}
     */
    exports.relative = function(e, parent) {
      /**
       * @param {!Array} s
       * @return {?}
       */
      function trim(s) {
        /** @type {number} */
        var i = 0;
        for (; i < s.length && "" === s[i]; i++) {
        }
        /** @type {number} */
        var k = s.length - 1;
        for (; k >= 0 && "" === s[k]; k--) {
        }
        return i > k ? [] : s.slice(i, k - i + 1);
      }
      e = exports.resolve(e).substr(1);
      parent = exports.resolve(parent).substr(1);
      var fromParts = trim(e.split("/"));
      var toParts = trim(parent.split("/"));
      /** @type {number} */
      var length = Math.min(fromParts.length, toParts.length);
      /** @type {number} */
      var samePartsLength = length;
      /** @type {number} */
      var i = 0;
      for (; i < length; i++) {
        if (fromParts[i] !== toParts[i]) {
          /** @type {number} */
          samePartsLength = i;
          break;
        }
      }
      /** @type {!Array} */
      var outputParts = [];
      /** @type {number} */
      i = samePartsLength;
      for (; i < fromParts.length; i++) {
        outputParts.push("..");
      }
      return (outputParts = outputParts.concat(toParts.slice(samePartsLength))).join("/");
    };
    /** @type {string} */
    exports.sep = "/";
    /** @type {string} */
    exports.delimiter = ":";
    /**
     * @param {?} path
     * @return {?}
     */
    exports.dirname = function(path) {
      var result = splitPath(path);
      var type = result[0];
      var i = result[1];
      return type || i ? (i && (i = i.substr(0, i.length - 1)), type + i) : ".";
    };
    /**
     * @param {?} path
     * @param {string} ext
     * @return {?}
     */
    exports.basename = function(path, ext) {
      var font = splitPath(path)[2];
      return ext && font.substr(-1 * ext.length) === ext && (font = font.substr(0, font.length - ext.length)), font;
    };
    /**
     * @param {?} path
     * @return {?}
     */
    exports.extname = function(path) {
      return splitPath(path)[3];
    };
    /** @type {function(string, number, ?): ?} */
    var getCacheName = "b" === "ab".substr(-1) ? function(e, t, d) {
      return e.substr(t, d);
    } : function(e, i, d) {
      return i < 0 && (i = e.length + i), e.substr(i, d);
    };
  }).call(exports, moment(69));
}, function(mixin, canCreateDiscussions, n) {
  var next = n(21);
  var getPrototypeOf = n(67);
  var h = n(15);
  /** @type {string} */
  var expected = "[object Object]";
  var funcProto = Function.prototype;
  var ObjProto = Object.prototype;
  /** @type {function(this:!Function): string} */
  var funcToString = funcProto.toString;
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = ObjProto.hasOwnProperty;
  /** @type {string} */
  var events = funcToString.call(Object);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    if (!h(value) || next(value) != expected) {
      return false;
    }
    var proto = getPrototypeOf(value);
    if (null === proto) {
      return true;
    }
    var fn = hasOwnProperty.call(proto, "constructor") && proto.constructor;
    return "function" == typeof fn && fn instanceof fn && funcToString.call(fn) == events;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} object
   * @param {!Object} name
   * @param {?} data
   * @return {?}
   */
  mixin.exports = function(object, name, data) {
    switch(data.length) {
      case 0:
        return object.call(name);
      case 1:
        return object.call(name, data[0]);
      case 2:
        return object.call(name, data[0], data[1]);
      case 3:
        return object.call(name, data[0], data[1], data[2]);
    }
    return object.apply(name, data);
  };
}, function(mixin, canCreateDiscussions, n) {
  var a = n(32);
  var h = n(28);
  var next = n(64);
  var f = n(8);
  /**
   * @param {!Object} obj
   * @param {?} name
   * @param {?} data
   * @return {?}
   */
  mixin.exports = function(obj, name, data) {
    if (!f(data)) {
      return false;
    }
    /** @type {string} */
    var undefined = typeof name;
    return !!("number" == undefined ? h(data) && next(name, data.length) : "string" == undefined && name in data) && a(data[name], obj);
  };
}, function(mixin, canCreateDiscussions, require) {
  var r = require(134);
  var m = require(331)(r);
  mixin.exports = m;
}, function(canCreateDiscussions, me, n) {
  Object.defineProperty(me, "__esModule", {
    value : true
  });
  me.t = {
    UPDATE_CONNECTION : "connection/UPDATE_CONNECTION",
    ONLINE_STATE : "connection/ONLINE_STATE",
    ACTIVATE_DATA_CONTROL : "connection/ACTIVATE_DATA_CONTROL",
    ACCEPT_DATA_CONTROL : "connection/ACCEPT_DATA_CONTROL",
    DISABLE_DATA_CONTROL : "connection/DISABLE_DATA_CONTROL",
    UNINSTALL_EXTENSION : "connection/UNINSTALL_EXTENSION"
  };
  /**
   * @param {!Object} data
   * @return {?}
   */
  me.updateConnection = function(data) {
    return {
      type : me.t.UPDATE_CONNECTION,
      data : data
    };
  };
  /**
   * @param {boolean} newValue
   * @return {?}
   */
  me.onlineConnection = function(newValue) {
    return {
      type : me.t.ONLINE_STATE,
      online : newValue
    };
  };
  /**
   * @return {?}
   */
  me.activateDataControl = function() {
    return {
      type : me.t.ACTIVATE_DATA_CONTROL
    };
  };
  /**
   * @return {?}
   */
  me.acceptDataControl = function() {
    return {
      type : me.t.ACCEPT_DATA_CONTROL
    };
  };
  /**
   * @return {?}
   */
  me.disableDataControl = function() {
    return {
      type : me.t.DISABLE_DATA_CONTROL
    };
  };
  /**
   * @return {?}
   */
  me.uninstallExtension = function() {
    return {
      type : me.t.UNINSTALL_EXTENSION
    };
  };
}, function(canCreateDiscussions, BeautifulProperties, n) {
  var conflictItem;
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /** @type {string} */
  (conflictItem = BeautifulProperties.SiteCategory || (BeautifulProperties.SiteCategory = {})).gdocs = "gdocs";
  /** @type {string} */
  conflictItem.other = "other";
}, , , , , function(canCreateDiscussions, BeautifulProperties, n) {
  var r;
  var self;
  var i;
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /** @type {string} */
  (r = BeautifulProperties.PopupEditorIFrameMessages || (BeautifulProperties.PopupEditorIFrameMessages = {})).popupEditorIFrame = "popupEditorIFrame";
  /** @type {string} */
  r.bgPopupEditorIFrameToPopupEditor = "bg-PopupEditorIFrame-toPopupEditor";
  /** @type {string} */
  r.bgPopupEditorIFrameFromPopupEditor = "bg-PopupEditorIFrame-fromPopupEditor";
  /** @type {string} */
  (self = BeautifulProperties.PopupEditorIFrameMessageType || (BeautifulProperties.PopupEditorIFrameMessageType = {})).openPopup = "open-popup";
  /** @type {string} */
  self.closePopup = "close-popup";
  /** @type {string} */
  self.loaded = "iframe-cs-loaded";
  /** @type {string} */
  self.popupClosing = "iframe-cs-popup-closing-state";
  /** @type {string} */
  self.changeUser = "change-user-popup";
  /** @type {string} */
  self.fullyLoaded = "denali-editor-loaded";
  /** @type {string} */
  (i = BeautifulProperties.SignInIframeMessages || (BeautifulProperties.SignInIframeMessages = {})).signInIFrame = "signInIFrame";
  /** @type {string} */
  i.bgSignInIFrame = "bg-bgSignInIFrame";
  (function(canCreateDiscussions) {
    /**
     * @return {?}
     */
    (BeautifulProperties.SignInIframeReady || (BeautifulProperties.SignInIframeReady = {})).create = function() {
      return {
        _tag : "iframeReady"
      };
    };
  })();
  (function(canCreateDiscussions) {
    /**
     * @return {?}
     */
    (BeautifulProperties.SignInClose || (BeautifulProperties.SignInClose = {})).create = function() {
      return {
        _tag : "close"
      };
    };
  })();
  (function(canCreateDiscussions) {
    /**
     * @param {!Object} name
     * @param {string} val
     * @param {string} n
     * @param {string} target
     * @return {?}
     */
    (BeautifulProperties.ShowSignInDialog || (BeautifulProperties.ShowSignInDialog = {})).create = function(name, val, n, target) {
      return {
        _tag : "showSigninDialog",
        user : name,
        placement : val,
        totalErrors : n,
        shouldOpenLoginView : target
      };
    };
  })();
  (function(canCreateDiscussions) {
    /**
     * @param {!Function} name
     * @return {?}
     */
    (BeautifulProperties.ShowSignInOnboarding || (BeautifulProperties.ShowSignInOnboarding = {})).create = function(name) {
      return {
        _tag : "showSigninOnboarding",
        experiments : name
      };
    };
  })();
  (function(canCreateDiscussions) {
    /**
     * @param {!Object} name
     * @return {?}
     */
    (BeautifulProperties.SignInOnboardingResult || (BeautifulProperties.SignInOnboardingResult = {})).create = function(name) {
      return {
        _tag : "signinOnboardingResult",
        result : name
      };
    };
  })();
}, , , , function(canCreateDiscussions, exports, n) {
  var f;
  var i = this && this.__extends || (f = function(shape, t) {
    return (f = Object.setPrototypeOf || {
      __proto__ : []
    } instanceof Array && function(record, l) {
      /** @type {!Object} */
      record.__proto__ = l;
    } || function(scope, args) {
      var key;
      for (key in args) {
        if (args.hasOwnProperty(key)) {
          scope[key] = args[key];
        }
      }
    })(shape, t);
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    f(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var AssertionError = function(e) {
    /**
     * @param {string} a
     * @return {?}
     */
    function t(a) {
      return e.call(this, "Assertion failed: " + (a ? "string" == typeof a ? a : a() : "(unnamed)")) || this;
    }
    return i(t, e), t;
  }(Error);
  exports.AssertionError = AssertionError;
  /**
   * @param {boolean} done
   * @param {string} assertion
   * @return {undefined}
   */
  exports.assert = function(done, assertion) {
    if (!done) {
      throw new AssertionError(assertion);
    }
  };
  /**
   * @param {!Object} Constructor
   * @param {string} obj
   * @return {?}
   */
  exports.assertNonNull = function(Constructor, obj) {
    if (null == Constructor) {
      throw new AssertionError(function() {
        return obj ? "Expected " + obj + " to be non-null" : "Expected non-null";
      });
    }
    return Constructor;
  };
}, function(canCreateDiscussions, module, n) {
  Object.defineProperty(module, "__esModule", {
    value : true
  });
  var CircularBuffer = function() {
    /**
     * @param {number} capacity
     * @return {undefined}
     */
    function Queue(capacity) {
      if (this.capacity = capacity, this._start = 0, this._end = 0, this._isFull = false, capacity <= 0) {
        throw new Error("Invalid capacity " + capacity);
      }
      /** @type {!Array} */
      this._buffer = new Array(capacity);
    }
    return Object.defineProperty(Queue.prototype, "size", {
      get : function() {
        return this._isFull ? this._buffer.length : (this._end - this._start + this._buffer.length) % this._buffer.length;
      },
      enumerable : true,
      configurable : true
    }), Object.defineProperty(Queue.prototype, "isEmpty", {
      get : function() {
        return 0 === this.size;
      },
      enumerable : true,
      configurable : true
    }), Object.defineProperty(Queue.prototype, "isFull", {
      get : function() {
        return this._isFull;
      },
      enumerable : true,
      configurable : true
    }), Object.defineProperty(Queue.prototype, "head", {
      get : function() {
        return this.isEmpty ? null : this._buffer[this._start];
      },
      enumerable : true,
      configurable : true
    }), Object.defineProperty(Queue.prototype, "tail", {
      get : function() {
        return this.isEmpty ? null : this._buffer[0 === this._end ? this.capacity - 1 : this._end - 1];
      },
      enumerable : true,
      configurable : true
    }), Queue.prototype.enqueue = function(obj) {
      /** @type {null} */
      var type = null;
      return this.isFull && (type = this._buffer[this._start], this._startInc()), this._buffer[this._end] = obj, this._endInc(), this._start === this._end && (this._isFull = true), type;
    }, Queue.prototype.dequeue = function() {
      if (this.isEmpty) {
        return null;
      }
      var bits = this._buffer[this._start];
      return this._buffer[this._start] = null, this._startInc(), this._isFull = false, bits;
    }, Queue.prototype.delete = function(value) {
      var t = this._buffer.indexOf(value);
      if (t >= 0) {
        if (t < this._end) {
          var i = t;
          for (; i < this._end - 1; i++) {
            this._buffer[i] = this._buffer[i + 1];
          }
          /** @type {null} */
          this._buffer[--this._end] = null;
        } else {
          i = this._start;
          for (; i < t; i++) {
            this._buffer[i + 1] = this._buffer[i];
          }
          /** @type {null} */
          this._buffer[this._start] = null;
          this._startInc();
        }
        return this._isFull = false, true;
      }
      return false;
    }, Queue.prototype._startInc = function() {
      this._start++;
      if (this._start === this.capacity) {
        /** @type {number} */
        this._start = 0;
      }
    }, Queue.prototype._endInc = function() {
      this._end++;
      if (this._end === this.capacity) {
        /** @type {number} */
        this._end = 0;
      }
    }, Queue.prototype.clear = function() {
      /** @type {!Array} */
      this._buffer = new Array(this.capacity);
      /** @type {number} */
      this._start = this._end = 0;
      /** @type {boolean} */
      this._isFull = false;
    }, Queue.prototype.toArray = function() {
      var buffer;
      if (this.isEmpty) {
        /** @type {!Array} */
        buffer = [];
      } else {
        if (this._start < this._end) {
          buffer = this._buffer.slice(this._start, this._end);
        } else {
          /** @type {!Array} */
          buffer = new Array(this.size);
          /** @type {number} */
          var i = 0;
          var j = this._start;
          for (; j < this.capacity; ++j, ++i) {
            buffer[i] = this._buffer[j];
          }
          /** @type {number} */
          j = 0;
          for (; j < this._end; ++j, ++i) {
            buffer[i] = this._buffer[j];
          }
        }
      }
      return buffer;
    }, Queue;
  }();
  module.CircularBuffer = CircularBuffer;
}, function(canCreateDiscussions, data, n) {
  var r = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var flatten = this && this.__spread || function() {
    /** @type {!Array} */
    var bytes = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      bytes = bytes.concat(r(arguments[i]));
    }
    return bytes;
  };
  Object.defineProperty(data, "__esModule", {
    value : true
  });
  /**
   * @param {!Function} context
   * @param {?} selector
   * @return {?}
   */
  data.flatMap = function(context, selector) {
    var n;
    return (n = []).concat.apply(n, flatten(selector.map(context)));
  };
  /**
   * @param {?} items
   * @return {?}
   */
  data.flatten = function(items) {
    var t;
    return (t = []).concat.apply(t, flatten(items));
  };
  /**
   * @param {?} array
   * @return {?}
   */
  data.distinct = function(array) {
    return flatten(new Set(array));
  };
  /**
   * @param {?} keySelector
   * @param {!Array} comparer
   * @return {?}
   */
  data.distinctBy = function(keySelector, comparer) {
    /** @type {!Set} */
    var triggerLookup = new Set;
    return comparer.filter(function(value) {
      var name = keySelector(value);
      /** @type {boolean} */
      var method = !triggerLookup.has(name);
      return triggerLookup.add(name), method;
    });
  };
  /**
   * @param {?} cb
   * @param {?} filename
   * @param {!NodeList} filters
   * @return {?}
   */
  data.scan = function(cb, filename, filters) {
    /** @type {!Array} */
    var path = [filename];
    var ret = filename;
    /** @type {number} */
    var j = 0;
    for (; j < filters.length; j++) {
      ret = cb(ret, filters[j]);
      path.push(ret);
    }
    return path;
  };
  /**
   * @param {!Object} data
   * @return {?}
   */
  data.maximum = function(data) {
    return data.reduce(function(max, diff) {
      return diff > max ? diff : max;
    }, data[0]);
  };
  /**
   * @param {!Object} entry
   * @param {?} moment
   * @return {?}
   */
  data.maximumBy = function(entry, moment) {
    return 0 === entry.length ? void 0 : entry.reduce(function(lastTimeStamp, startTime) {
      var endTime = moment(startTime);
      return endTime > lastTimeStamp[1] ? [startTime, endTime] : lastTimeStamp;
    }, [entry[0], moment(entry[0])])[0];
  };
  /**
   * @param {string} s
   * @return {?}
   */
  data.reverse = function(s) {
    return s.slice().reverse();
  };
  /**
   * @param {?} comp
   * @param {!NodeList} obj
   * @return {?}
   */
  data.partition = function(comp, obj) {
    /** @type {!Array} */
    var removed = [];
    /** @type {!Array} */
    var r = [];
    /** @type {number} */
    var j = 0;
    /** @type {number} */
    var u = 0;
    /** @type {number} */
    var i = 0;
    for (; i < obj.length; i++) {
      if (comp(obj[i])) {
        removed[j++] = obj[i];
      } else {
        r[u++] = obj[i];
      }
    }
    return [removed, r];
  };
  /**
   * @param {number} texPerChild
   * @param {string} bitmaps
   * @return {?}
   */
  data.chunkBySize = function(texPerChild, bitmaps) {
    if (texPerChild < 1) {
      throw new Error("Invalid chunk size, expected > 0");
    }
    if (0 === bitmaps.length) {
      return [[]];
    }
    /** @type {!Array} */
    var newNodeLists = [];
    /** @type {number} */
    var i = 0;
    for (; i < Math.ceil(bitmaps.length / texPerChild); i++) {
      newNodeLists.push(bitmaps.slice(i * texPerChild, (i + 1) * texPerChild));
    }
    return newNodeLists;
  };
  /**
   * @param {?} condition
   * @param {?} f
   * @return {?}
   */
  data.unfold = function(condition, f) {
    /** @type {!Array} */
    var result = [];
    var match = condition(f);
    for (; void 0 !== match;) {
      result.push(match[0]);
      match = condition(match[1]);
    }
    return result;
  };
  /**
   * @param {number} length
   * @param {number} end
   * @return {?}
   */
  data.range = function(length, end) {
    return void 0 !== end ? Array.from(Array(end - length), function(canCreateDiscussions, contentBegin) {
      return contentBegin + length;
    }) : Array.from(Array(length), function(canCreateDiscussions, i) {
      return i;
    });
  };
  /**
   * @param {!Array} array
   * @param {?} group
   * @return {?}
   */
  data.groupBy = function(array, group) {
    if (void 0 === group && (group = function(key, val) {
      return key === val;
    }), 0 === array.length) {
      return [];
    }
    /** @type {!Array} */
    var result = [[array[0]]];
    /** @type {number} */
    var i = 1;
    for (; i < array.length; i = i + 1) {
      var crossfilter_null = result[result.length - 1][0];
      var value = array[i];
      if (group(crossfilter_null, value)) {
        result[result.length - 1].push(value);
      } else {
        result.push([value]);
      }
    }
    return result;
  };
}, function(canCreateDiscussions, exports, n) {
  var extend = this && this.__values || function(value) {
    var func = "function" == typeof Symbol && value[Symbol.iterator];
    /** @type {number} */
    var pos = 0;
    return func ? func.call(value) : {
      next : function() {
        return value && pos >= value.length && (value = void 0), {
          value : value && value[pos++],
          done : !value
        };
      }
    };
  };
  var get = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  /**
   * @param {!Function} fn
   * @param {undefined} v
   * @return {?}
   */
  exports.map = function(fn, v) {
    var out = {};
    return Object.keys(v).forEach(function(k) {
      return out[k] = fn(k, v[k]);
    }), out;
  };
  /**
   * @param {!Function} callback
   * @param {undefined} obj
   * @return {?}
   */
  exports.filter = function(callback, obj) {
    var _props = {};
    return Object.keys(obj).forEach(function(k) {
      if (callback(k, obj[k])) {
        _props[k] = obj[k];
      }
    }), _props;
  };
  /**
   * @param {undefined} obj
   * @return {?}
   */
  exports.values = function(obj) {
    return Object.keys(obj).map(function(sourcePropKey) {
      return obj[sourcePropKey];
    });
  };
  /**
   * @param {undefined} obj
   * @return {?}
   */
  exports.pairs = function(obj) {
    return Object.keys(obj).map(function(sourcePropKey) {
      return [sourcePropKey, obj[sourcePropKey]];
    });
  };
  /**
   * @param {!Function} name
   * @return {?}
   */
  exports.create = function(name) {
    var mockConsole;
    var item;
    var reverseLookup = {};
    try {
      var data = extend(name);
      var items = data.next();
      for (; !items.done; items = data.next()) {
        var a = get(items.value, 2);
        var visibleHeader = a[0];
        var i = a[1];
        reverseLookup[visibleHeader] = i;
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (items && !items.done && (item = data.return)) {
          item.call(data);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return reverseLookup;
  };
  /**
   * @param {!NodeList} obj
   * @param {!Array} prop
   * @return {?}
   */
  exports.pluck = function(obj, prop) {
    return prop.map(function(sourcePropKey) {
      return obj[sourcePropKey];
    });
  };
}, function(canCreateDiscussions, t, n) {
  var keysToSnakeCaseShallow = this && this.__values || function(value) {
    var func = "function" == typeof Symbol && value[Symbol.iterator];
    /** @type {number} */
    var pos = 0;
    return func ? func.call(value) : {
      next : function() {
        return value && pos >= value.length && (value = void 0), {
          value : value && value[pos++],
          done : !value
        };
      }
    };
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  /**
   * @param {string} cond
   * @param {?} cb
   * @return {?}
   */
  t.find = function(cond, cb) {
    var mockConsole;
    var a;
    try {
      var value = keysToSnakeCaseShallow(cond.values());
      var item = value.next();
      for (; !item.done; item = value.next()) {
        var value = item.value;
        if (cb(value)) {
          return value;
        }
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (item && !item.done && (a = value.return)) {
          a.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return null;
  };
}, function(canCreateDiscussions, exports, require) {
  var f;
  var add = this && this.__extends || (f = function(shape, t) {
    return (f = Object.setPrototypeOf || {
      __proto__ : []
    } instanceof Array && function(json, b) {
      /** @type {!Object} */
      json.__proto__ = b;
    } || function(scope, args) {
      var key;
      for (key in args) {
        if (args.hasOwnProperty(key)) {
          scope[key] = args[key];
        }
      }
    })(shape, t);
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    f(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  var sprintf = this && this.__assign || function() {
    return (sprintf = Object.assign || function(obj) {
      var props;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var prop;
        for (prop in props = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(props, prop)) {
            obj[prop] = props[prop];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var electron = require(105);
  var Error = function(menu) {
    /**
     * @param {undefined} input
     * @param {!Object} id
     * @return {?}
     */
    function t(input, id) {
      var o = menu.call(this, input) || this;
      return o._config = id, o;
    }
    return add(t, menu), t.prototype.handleEvent = function(name) {
      if (this._config.filterFn(name)) {
        this._config.writer.write(name);
      }
    }, t;
  }(function() {
    /**
     * @param {string} name
     * @return {undefined}
     */
    function Logger(name) {
      /** @type {string} */
      this.name = name;
      /**
       * @param {string} value
       * @return {?}
       */
      this._isError = function(value) {
        /** @type {string} */
        var o = value;
        return o && (void 0 !== o.message && void 0 !== o.name || void 0 !== o.stack);
      };
    }
    return Logger.prototype.trace = function(message, type, data) {
      this._logMessage("TRACE", message, type, data);
    }, Logger.prototype.debug = function(t, err, logObject) {
      this._logMessage("DEBUG", t, err, logObject);
    }, Logger.prototype.info = function(val, msg, file) {
      this._logMessage("INFO", val, msg, file);
    }, Logger.prototype.warn = function(c, target, data) {
      this._logMessage("WARN", c, target, data);
    }, Logger.prototype.error = function(obj, data, fn) {
      this._logMessage("ERROR", obj, data, fn);
    }, Logger.prototype.fatal = function(msg, text, e) {
      this._logMessage("FATAL", msg, text, e);
    }, Logger.prototype._logMessage = function(level, text, error, data) {
      var options = {
        level : level,
        loggerName : this.name,
        message : text,
        timestamp : new Date
      };
      if (error) {
        if (this._isError(error)) {
          /** @type {string} */
          options.exception = error;
        } else {
          /** @type {string} */
          options.data = error;
        }
      }
      options.data = options.data || data;
      this.handleEvent(options);
    }, Logger;
  }());
  exports.SimpleLogger = Error;
  (function(canCreateDiscussions) {
    /**
     * @param {!Function} name
     * @param {string} t
     * @return {?}
     */
    (exports.Logger || (exports.Logger = {})).create = function(name, t) {
      return new Error(name, sprintf({}, electron.LogConfig.getGlobal(), t || {}));
    };
  })();
}, function(canCreateDiscussions, BeautifulProperties, n) {
  var Priority;
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var hooksByComponent = ((Priority = {}).TRACE = 1, Priority.DEBUG = 2, Priority.INFO = 3, Priority.WARN = 4, Priority.ERROR = 5, Priority.FATAL = 6, Priority);
  /**
   * @param {string} component
   * @return {?}
   */
  BeautifulProperties.getLogRank = function(component) {
    return hooksByComponent[component] || 0;
  };
}, function(canCreateDiscussions, global, n) {
  /**
   * @param {string} lineNumber
   * @return {?}
   */
  function log(lineNumber) {
    return "INFO" === lineNumber || "TRACE" === lineNumber ? "INFO" : "WARN" === lineNumber ? "WARN" : "FATAL" === lineNumber || "ERROR" === lineNumber ? "ERROR" : "INFO";
  }
  /**
   * @param {!Object} options
   * @return {?}
   */
  function process(options) {
    /** @type {string} */
    var finalGcm = "";
    try {
      /** @type {string} */
      finalGcm = JSON.stringify(options.data);
    } catch (e) {
    }
    return {
      logger : options.loggerName,
      level : log(options.level),
      timestamp : +options.timestamp,
      message : options.message,
      extra : {
        json : finalGcm
      }
    };
  }
  Object.defineProperty(global, "__esModule", {
    value : true
  });
  /** @type {function(string): ?} */
  global.logLevelToFelogLogLevel = log;
  /** @type {function(!Object): ?} */
  global.logEventToFelogLogEvent = process;
  /** @type {number} */
  var logEntries = 5E3;
  var storageFake = function() {
    return function(_config) {
      var self = this;
      /** @type {!Object} */
      this._config = _config;
      /** @type {!Array} */
      this._events = [];
      /**
       * @param {!Object} e
       * @return {undefined}
       */
      this.write = function(e) {
        if ("DEBUG" !== e.level) {
          self._events.push(e);
          if (self._events.length > logEntries) {
            self._events.splice(0, self._events.length - logEntries);
          }
        }
      };
      /**
       * @return {undefined}
       */
      this.send = function() {
        if (0 !== self._events.length) {
          self._config.felog.sendCrashLogs("crash logs", self._events.map(process));
          /** @type {!Array} */
          self._events = [];
        }
      };
    };
  }();
  global.FelogLogWriter = storageFake;
}, function(canCreateDiscussions, _schema, n) {
  /**
   * @param {?} obj
   * @return {?}
   */
  _schema.isObject = function(obj) {
    return null != obj && "object" == typeof obj;
  };
}, function(canCreateDiscussions, App, removeCallback) {
  /**
   * @param {!Array} e
   * @return {?}
   */
  function next(e) {
    return e ? 1 === e.length ? e[0] : function(obj) {
      return e.reduce(function(e, enterEventHandler) {
        return enterEventHandler(e);
      }, obj);
    } : removed.noop;
  }
  var removed = removeCallback(186);
  /**
   * @return {?}
   */
  App.pipe = function() {
    /** @type {!Array} */
    var e = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      e[i - 0] = arguments[i];
    }
    return next(e);
  };
  /** @type {function(!Array): ?} */
  App.pipeFromArray = next;
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return function(template, predicate, createIsSearchQueryChangedFunction) {
      /** @type {number} */
      var n = -1;
      /** @type {!Object} */
      var obj = Object(template);
      var result = createIsSearchQueryChangedFunction(template);
      var y = result.length;
      for (; y--;) {
        var index = result[key ? y : ++n];
        if (false === predicate(obj[index], index, obj)) {
          break;
        }
      }
      return template;
    };
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(obj, type) {
    /** @type {number} */
    var key = -1;
    /** @type {!Array} */
    var result = Array(obj);
    for (; ++key < obj;) {
      result[key] = type(key);
    }
    return result;
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var eachTextNode = __webpack_require__(21);
  var isObject = __webpack_require__(15);
  /** @type {string} */
  var funcTag = "[object Arguments]";
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return isObject(value) && eachTextNode(value) == funcTag;
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var Symbol = __webpack_require__(34);
  var ObjProto = Object.prototype;
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = ObjProto.hasOwnProperty;
  /** @type {function(this:*): string} */
  var toString = ObjProto.toString;
  var name = Symbol ? Symbol.toStringTag : void 0;
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    /** @type {boolean} */
    var existingKeys = hasOwnProperty.call(obj, name);
    var fn = obj[name];
    try {
      obj[name] = void 0;
      /** @type {boolean} */
      var e = true;
    } catch (e) {
    }
    /** @type {string} */
    var t = toString.call(obj);
    return e && (existingKeys ? obj[name] = fn : delete obj[name]), t;
  };
}, function(mixin, canCreateDiscussions) {
  /** @type {function(this:*): string} */
  var objectToString$2 = Object.prototype.toString;
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return objectToString$2.call(value);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @return {?}
   */
  mixin.exports = function() {
    return false;
  };
}, function(mixin, canCreateDiscussions, require) {
  var getType = require(21);
  var isNumber = require(72);
  var isArray = require(15);
  var typeEditors = {};
  /** @type {boolean} */
  typeEditors["[object Float32Array]"] = typeEditors["[object Float64Array]"] = typeEditors["[object Int8Array]"] = typeEditors["[object Int16Array]"] = typeEditors["[object Int32Array]"] = typeEditors["[object Uint8Array]"] = typeEditors["[object Uint8ClampedArray]"] = typeEditors["[object Uint16Array]"] = typeEditors["[object Uint32Array]"] = true;
  /** @type {boolean} */
  typeEditors["[object Arguments]"] = typeEditors["[object Array]"] = typeEditors["[object ArrayBuffer]"] = typeEditors["[object Boolean]"] = typeEditors["[object DataView]"] = typeEditors["[object Date]"] = typeEditors["[object Error]"] = typeEditors["[object Function]"] = typeEditors["[object Map]"] = typeEditors["[object Number]"] = typeEditors["[object Object]"] = typeEditors["[object RegExp]"] = typeEditors["[object Set]"] = typeEditors["[object String]"] = typeEditors["[object WeakMap]"] = 
  false;
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return isArray(value) && isNumber(value.length) && !!typeEditors[getType(value)];
  };
}, function(module, canCreateDiscussions, __webpack_require__) {
  var getPrototype = __webpack_require__(115)(Object.keys, Object);
  module.exports = getPrototype;
}, function(mixin, canCreateDiscussions, n) {
  var h = n(223);
  var i = n(260);
  var next = n(120);
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    var d = i(key);
    return 1 == d.length && d[0][2] ? next(d[0][0], d[0][1]) : function(value) {
      return value === key || h(value, key, d);
    };
  };
}, function(mixin, canCreateDiscussions, require) {
  var User = require(66);
  var debug = require(78);
  /** @type {number} */
  var i = 1;
  /** @type {number} */
  var BLOWFISH_NUM_ROUNDS = 2;
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @param {?} data
   * @param {string} value
   * @return {?}
   */
  mixin.exports = function(obj, name, data, value) {
    var i = data.length;
    var olen = i;
    /** @type {boolean} */
    var updateValueOnFirstWatch = !value;
    if (null == obj) {
      return !olen;
    }
    /** @type {!Object} */
    obj = Object(obj);
    for (; i--;) {
      var array = data[i];
      if (updateValueOnFirstWatch && array[2] ? array[1] !== obj[array[0]] : !(array[0] in obj)) {
        return false;
      }
    }
    for (; ++i < olen;) {
      var idx = (array = data[i])[0];
      var el = obj[idx];
      var key = array[1];
      if (updateValueOnFirstWatch && array[2]) {
        if (void 0 === el && !(idx in obj)) {
          return false;
        }
      } else {
        var val = new User;
        if (value) {
          var result = value(el, key, idx, obj, name, val);
        }
        if (!(void 0 === result ? debug(key, el, i | BLOWFISH_NUM_ROUNDS, value, val) : result)) {
          return false;
        }
      }
    }
    return true;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @return {undefined}
   */
  mixin.exports = function() {
    /** @type {!Array} */
    this.__data__ = [];
    /** @type {number} */
    this.size = 0;
  };
}, function(mixin, canCreateDiscussions, pointFromEvent) {
  var p = pointFromEvent(46);
  /** @type {function(this:IArrayLike<T>, *=, *=, ...T): !Array<T>} */
  var splice = Array.prototype.splice;
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    var data = this.__data__;
    var i = p(data, key);
    return !(i < 0 || (i == data.length - 1 ? data.pop() : splice.call(data, i, 1), --this.size, 0));
  };
}, function(mixin, canCreateDiscussions, n) {
  var f = n(46);
  /**
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(type) {
    var data = this.__data__;
    var message = f(data, type);
    return message < 0 ? void 0 : data[message][1];
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var assocIndexOf = __webpack_require__(46);
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return assocIndexOf(this.__data__, key) > -1;
  };
}, function(mixin, canCreateDiscussions, dselect) {
  var a = dselect(46);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    var s = this.__data__;
    var i = a(s, obj);
    return i < 0 ? (++this.size, s.push([obj, name])) : s[i][1] = name, this;
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var ListCache = __webpack_require__(45);
  /**
   * @return {undefined}
   */
  mixin.exports = function() {
    this.__data__ = new ListCache;
    /** @type {number} */
    this.size = 0;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    var data = this.__data__;
    var encodedKeyOrRange = data.delete(key);
    return this.size = data.size, encodedKeyOrRange;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return this.__data__.get(value);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return this.__data__.has(value);
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var ListCache = __webpack_require__(45);
  var _classlist = __webpack_require__(73);
  var MapCache = __webpack_require__(74);
  /** @type {number} */
  var LARGE_ARRAY_SIZE = 200;
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(value, name) {
    var data = this.__data__;
    if (data instanceof ListCache) {
      var pairs = data.__data__;
      if (!_classlist || pairs.length < LARGE_ARRAY_SIZE - 1) {
        return pairs.push([value, name]), this.size = ++data.size, this;
      }
      data = this.__data__ = new MapCache(pairs);
    }
    return data.set(value, name), this.size = data.size, this;
  };
}, function(mixin, canCreateDiscussions, require) {
  var isFunction = require(38);
  var sphereKnn = require(235);
  var i = require(8);
  var trim = require(116);
  /** @type {!RegExp} */
  var undefined = /^\[object .+?Constructor\]$/;
  var funcProto = Function.prototype;
  var parent = Object.prototype;
  /** @type {function(this:!Function): string} */
  var funcToString = funcProto.toString;
  /** @type {function(this:Object, *): boolean} */
  var func = parent.hasOwnProperty;
  /** @type {!RegExp} */
  var regex = RegExp("^" + funcToString.call(func).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return !(!i(key) || sphereKnn(key)) && (isFunction(key) ? regex : undefined).test(trim(key));
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var data;
  var coreJsData = __webpack_require__(236);
  /** @type {string} */
  var alpha = (data = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "")) ? "Symbol(src)_1." + data : "";
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return !!alpha && alpha in obj;
  };
}, function(module, canCreateDiscussions, saveNotifs) {
  var coreJsData = saveNotifs(11)["__core-js_shared__"];
  module.exports = coreJsData;
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return null == obj ? void 0 : obj[name];
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var Hash = __webpack_require__(239);
  var Handlebars = __webpack_require__(45);
  var OtherHandlebars = __webpack_require__(73);
  /**
   * @return {undefined}
   */
  mixin.exports = function() {
    /** @type {number} */
    this.size = 0;
    this.__data__ = {
      hash : new Hash,
      map : new (OtherHandlebars || Handlebars),
      string : new Hash
    };
  };
}, function(module, canCreateDiscussions, __webpack_require__) {
  /**
   * @param {!Object} o
   * @return {undefined}
   */
  function s(o) {
    /** @type {number} */
    var j = -1;
    var r_len = null == o ? 0 : o.length;
    this.clear();
    for (; ++j < r_len;) {
      var a = o[j];
      this.set(a[0], a[1]);
    }
  }
  var listCacheClear = __webpack_require__(240);
  var method = __webpack_require__(241);
  var hashGet = __webpack_require__(242);
  var has = __webpack_require__(243);
  var cookie = __webpack_require__(244);
  s.prototype.clear = listCacheClear;
  s.prototype.delete = method;
  s.prototype.get = hashGet;
  s.prototype.has = has;
  s.prototype.set = cookie;
  /** @type {function(!Object): undefined} */
  module.exports = s;
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var nativeCreate = __webpack_require__(47);
  /**
   * @return {undefined}
   */
  mixin.exports = function() {
    this.__data__ = nativeCreate ? nativeCreate(null) : {};
    /** @type {number} */
    this.size = 0;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(name) {
    var result = this.has(name) && delete this.__data__[name];
    return this.size -= result ? 1 : 0, result;
  };
}, function(mixin, canCreateDiscussions, floor) {
  var startYNew = floor(47);
  /** @type {string} */
  var HASH_UNDEFINED = "__lodash_hash_undefined__";
  /** @type {function(this:Object, *): boolean} */
  var has = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    var data = this.__data__;
    if (startYNew) {
      var result = data[value];
      return result === HASH_UNDEFINED ? void 0 : result;
    }
    return has.call(data, value) ? data[value] : void 0;
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var nativeCreate = __webpack_require__(47);
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    var data = this.__data__;
    return nativeCreate ? void 0 !== data[key] : hasOwnProperty.call(data, key);
  };
}, function(mixin, canCreateDiscussions, _$$mdAnimate_) {
  var hasMultipleBodyParts = _$$mdAnimate_(47);
  /** @type {string} */
  var content = "__lodash_hash_undefined__";
  /**
   * @param {!Object} key
   * @param {?} name
   * @return {?}
   */
  mixin.exports = function(key, name) {
    var viewAttributes = this.__data__;
    return this.size += this.has(key) ? 0 : 1, viewAttributes[key] = hasMultipleBodyParts && void 0 === name ? content : name, this;
  };
}, function(mixin, canCreateDiscussions, require) {
  var $ = require(48);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    var result = $(this, obj).delete(obj);
    return this.size -= result ? 1 : 0, result;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    /** @type {string} */
    var type = typeof obj;
    return "string" == type || "number" == type || "symbol" == type || "boolean" == type ? "__proto__" !== obj : null === obj;
  };
}, function(mixin, canCreateDiscussions, dselect) {
  var a = dselect(48);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return a(this, value).get(value);
  };
}, function(mixin, canCreateDiscussions, require) {
  var flag = require(48);
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return flag(this, key).has(key);
  };
}, function(mixin, canCreateDiscussions, uninterpolate) {
  var u = uninterpolate(48);
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(value, name) {
    var list = u(this, value);
    var len = list.size;
    return list.set(value, name), this.size += list.size == len ? 0 : 1, this;
  };
}, function(mixin, canCreateDiscussions, require) {
  var Buffer = require(66);
  var debug = require(117);
  var log = require(254);
  var callback = require(256);
  var $ = require(91);
  var createElement = require(6);
  var isBlank = require(35);
  var query = require(40);
  /** @type {number} */
  var mask = 1;
  /** @type {string} */
  var N = "[object Arguments]";
  /** @type {string} */
  var none = "[object Array]";
  /** @type {string} */
  var undefined = "[object Object]";
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} key
   * @param {!Object} type
   * @param {string} name
   * @param {string} data
   * @param {!Function} f
   * @param {!Array} path
   * @return {?}
   */
  mixin.exports = function(key, type, name, data, f, path) {
    var el = createElement(key);
    var value = createElement(type);
    var val = el ? none : $(key);
    var a = value ? none : $(type);
    /** @type {boolean} */
    var bool = (val = val == N ? undefined : val) == undefined;
    /** @type {boolean} */
    var node = (a = a == N ? undefined : a) == undefined;
    /** @type {boolean} */
    var hasReferenceDefs = val == a;
    if (hasReferenceDefs && isBlank(key)) {
      if (!isBlank(type)) {
        return false;
      }
      /** @type {boolean} */
      el = true;
      /** @type {boolean} */
      bool = false;
    }
    if (hasReferenceDefs && !bool) {
      return path || (path = new Buffer), el || query(key) ? debug(key, type, name, data, f, path) : log(key, type, val, name, data, f, path);
    }
    if (!(name & mask)) {
      /** @type {boolean} */
      var elKey = bool && hasOwnProperty.call(key, "__wrapped__");
      /** @type {boolean} */
      var to = node && hasOwnProperty.call(type, "__wrapped__");
      if (elKey || to) {
        var newElKey = elKey ? key.value() : key;
        var self = to ? type.value() : type;
        return path || (path = new Buffer), f(newElKey, self, name, data, path);
      }
    }
    return !!hasReferenceDefs && (path || (path = new Buffer), callback(key, type, name, data, f, path));
  };
}, function(mixin, canCreateDiscussions) {
  /** @type {string} */
  var n = "__lodash_hash_undefined__";
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return this.__data__.set(value, n), this;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return this.__data__.has(value);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(obj, type) {
    /** @type {number} */
    var p = -1;
    var q = null == obj ? 0 : obj.length;
    for (; ++p < q;) {
      if (type(obj[p], p, obj)) {
        return true;
      }
    }
    return false;
  };
}, function(mixin, canCreateDiscussions, require) {
  var Symbol = require(34);
  var Resource = require(118);
  var sparqlQuery = require(32);
  var assert = require(117);
  var opt_exclude = require(255);
  var identity = require(170);
  /** @type {number} */
  var bitmask = 1;
  /** @type {number} */
  var fromGlobal = 2;
  /** @type {string} */
  var ANIM_EXPLOSION_01 = "[object Boolean]";
  /** @type {string} */
  var ENEMY_DRONE = "[object Date]";
  /** @type {string} */
  var d = "[object Error]";
  /** @type {string} */
  var h = "[object Map]";
  /** @type {string} */
  var CONSOLE_ERROR = "[object Number]";
  /** @type {string} */
  var CONSOLE_DIR = "[object RegExp]";
  /** @type {string} */
  var SONG_PLAYING_START = "[object Set]";
  /** @type {string} */
  var CONSOLE_DIRXML = "[object String]";
  /** @type {string} */
  var GET_HATCHED_EGGS = "[object Symbol]";
  /** @type {string} */
  var POWERUP_ENERGY = "[object ArrayBuffer]";
  /** @type {string} */
  var ledgerclose = "[object DataView]";
  var symbolProto$1 = Symbol ? Symbol.prototype : void 0;
  var symbolValueOf = symbolProto$1 ? symbolProto$1.valueOf : void 0;
  /**
   * @param {!Object} object
   * @param {!Object} value
   * @param {string} type
   * @param {number} val
   * @param {!Function} name
   * @param {!Object} callback
   * @param {!Object} fn
   * @return {?}
   */
  mixin.exports = function(object, value, type, val, name, callback, fn) {
    switch(type) {
      case ledgerclose:
        if (object.byteLength != value.byteLength || object.byteOffset != value.byteOffset) {
          return false;
        }
        object = object.buffer;
        value = value.buffer;
      case POWERUP_ENERGY:
        return !(object.byteLength != value.byteLength || !callback(new Resource(object), new Resource(value)));
      case ANIM_EXPLOSION_01:
      case ENEMY_DRONE:
      case CONSOLE_ERROR:
        return sparqlQuery(+object, +value);
      case d:
        return object.name == value.name && object.message == value.message;
      case CONSOLE_DIR:
      case CONSOLE_DIRXML:
        return object == value + "";
      case h:
        var predicate = opt_exclude;
      case SONG_PLAYING_START:
        /** @type {number} */
        var hold = val & bitmask;
        if (predicate || (predicate = identity), object.size != value.size && !hold) {
          return false;
        }
        var prop = fn.get(object);
        if (prop) {
          return prop == value;
        }
        /** @type {number} */
        val = val | fromGlobal;
        fn.set(object, value);
        var result = assert(predicate(object), predicate(value), val, name, callback, fn);
        return fn.delete(object), result;
      case GET_HATCHED_EGGS:
        if (symbolValueOf) {
          return symbolValueOf.call(object) == symbolValueOf.call(value);
        }
    }
    return false;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    /** @type {number} */
    var callbackCount = -1;
    /** @type {!Array} */
    var windowSizeArray = Array(obj.size);
    return obj.forEach(function(height, width) {
      /** @type {!Array} */
      windowSizeArray[++callbackCount] = [width, height];
    }), windowSizeArray;
  };
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(171);
  /** @type {number} */
  var mask = 1;
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} obj
   * @param {!Object} value
   * @param {string} name
   * @param {string} callback
   * @param {!Function} fn
   * @param {!Object} options
   * @return {?}
   */
  mixin.exports = function(obj, value, name, callback, fn, options) {
    /** @type {number} */
    var err = name & mask;
    var list__1 = next(obj);
    var values_length = list__1.length;
    if (values_length != next(value).length && !err) {
      return false;
    }
    var prop__inx = values_length;
    for (; prop__inx--;) {
      var prop = list__1[prop__inx];
      if (!(err ? prop in value : hasOwnProperty.call(value, prop))) {
        return false;
      }
    }
    var info = options.get(obj);
    if (info && options.get(value)) {
      return info == value;
    }
    /** @type {boolean} */
    var selfCompletionActive = true;
    options.set(obj, value);
    options.set(value, obj);
    /** @type {number} */
    var alreadyMarked = err;
    for (; ++prop__inx < values_length;) {
      var val = obj[prop = list__1[prop__inx]];
      var type = value[prop];
      if (callback) {
        var severity = err ? callback(type, val, prop, value, obj, options) : callback(val, type, prop, obj, value, options);
      }
      if (!(void 0 === severity ? val === type || fn(val, type, name, callback, options) : severity)) {
        /** @type {boolean} */
        selfCompletionActive = false;
        break;
      }
      if (!alreadyMarked) {
        /** @type {boolean} */
        alreadyMarked = "constructor" == prop;
      }
    }
    if (selfCompletionActive && !alreadyMarked) {
      var constructor = obj.constructor;
      var ctor = value.constructor;
      if (constructor != ctor && "constructor" in obj && "constructor" in value && !("function" == typeof constructor && constructor instanceof constructor && "function" == typeof ctor && ctor instanceof ctor)) {
        /** @type {boolean} */
        selfCompletionActive = false;
      }
    }
    return options.delete(obj), options.delete(value), selfCompletionActive;
  };
}, function(module, canCreateDiscussions, saveNotifs) {
  var DataView = saveNotifs(23)(saveNotifs(11), "DataView");
  module.exports = DataView;
}, function(module, canCreateDiscussions, require) {
  var Promise = require(23)(require(11), "Promise");
  module.exports = Promise;
}, function(module, canCreateDiscussions, saveNotifs) {
  var WeakMap = saveNotifs(23)(saveNotifs(11), "WeakMap");
  module.exports = WeakMap;
}, function(mixin, canCreateDiscussions, coerce) {
  var sum = coerce(119);
  var h = coerce(39);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    var params = h(value);
    var i = params.length;
    for (; i--;) {
      var name = params[i];
      var v = value[name];
      /** @type {!Array} */
      params[i] = [name, v, sum(v)];
    }
    return params;
  };
}, function(mixin, canCreateDiscussions, require) {
  var $ = require(78);
  var toInteger = require(262);
  var next = require(267);
  var isString = require(75);
  var isObject = require(119);
  var resolve = require(120);
  var h = require(41);
  /** @type {number} */
  var this_bool = 1;
  /** @type {number} */
  var other_bool = 2;
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(value, name) {
    return isString(value) && isObject(name) ? resolve(h(value), name) : function(x) {
      var i = toInteger(x, value);
      return void 0 === i && i === name ? next(x, value) : $(name, i, this_bool | other_bool);
    };
  };
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(92);
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(value, name, type) {
    var object = null == value ? void 0 : next(value, name);
    return void 0 === object ? type : object;
  };
}, function(mixin, canCreateDiscussions, $parse) {
  var mainCheck = $parse(264);
  /** @type {!RegExp} */
  var image_re = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
  /** @type {!RegExp} */
  var rcamelCase = /\\(\\)?/g;
  var m = mainCheck(function(e) {
    /** @type {!Array} */
    var buf = [];
    return 46 === e.charCodeAt(0) && buf.push(""), e.replace(image_re, function(msg, method, val, termUri) {
      buf.push(val ? termUri.replace(rcamelCase, "$1") : method || msg);
    }), buf;
  });
  mixin.exports = m;
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(265);
  /** @type {number} */
  var MAX_MEMOIZE_SIZE = 500;
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    var result = next(obj, function(canCreateDiscussions) {
      return cache.size === MAX_MEMOIZE_SIZE && cache.clear(), canCreateDiscussions;
    });
    var cache = result.cache;
    return result;
  };
}, function(module, canCreateDiscussions, __webpack_require__) {
  /**
   * @param {!Object} value
   * @param {!Object} type
   * @return {?}
   */
  function memoize(value, type) {
    if ("function" != typeof value || null != type && "function" != typeof type) {
      throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);
    }
    /**
     * @return {?}
     */
    var memoized = function() {
      /** @type {!Arguments} */
      var data = arguments;
      var key = type ? type.apply(this, data) : data[0];
      var cache = memoized.cache;
      if (cache.has(key)) {
        return cache.get(key);
      }
      var result = value.apply(this, data);
      return memoized.cache = cache.set(key, result) || cache, result;
    };
    return memoized.cache = new (memoize.Cache || MapCache), memoized;
  }
  var MapCache = __webpack_require__(74);
  /** @type {string} */
  var ERR_ACCESSORS_NOT_SUPPORTED = "Expected a function";
  memoize.Cache = MapCache;
  /** @type {function(!Object, !Object): ?} */
  module.exports = memoize;
}, function(mixin, canCreateDiscussions, require) {
  var Symbol = require(34);
  var toString = require(121);
  var getScaledFormat = require(6);
  var write = require(50);
  /** @type {number} */
  var INFINITY = 1 / 0;
  var symbolProto = Symbol ? Symbol.prototype : void 0;
  var symbolToString = symbolProto ? symbolProto.toString : void 0;
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function format(value) {
    if ("string" == typeof value) {
      return value;
    }
    if (getScaledFormat(value)) {
      return toString(value, format) + "";
    }
    if (write(value)) {
      return symbolToString ? symbolToString.call(value) : "";
    }
    /** @type {string} */
    var port = value + "";
    return "0" == port && 1 / value == -INFINITY ? "-0" : port;
  };
}, function(mixin, canCreateDiscussions, n) {
  var end = n(268);
  var next = n(269);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return null != obj && next(obj, name, end);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {?} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return null != obj && name in Object(obj);
  };
}, function(mixin, canCreateDiscussions, n) {
  var f = n(93);
  var isFilePathMetadataKey = n(55);
  var isFilePathKey = n(6);
  var h = n(64);
  var next = n(72);
  var resolve = n(41);
  /**
   * @param {!Object} key
   * @param {!Object} name
   * @param {string} type
   * @return {?}
   */
  mixin.exports = function(key, name, type) {
    /** @type {number} */
    var i = -1;
    var num = (name = f(name, key)).length;
    /** @type {boolean} */
    var alwaysFlip = false;
    for (; ++i < num;) {
      var value = resolve(name[i]);
      if (!(alwaysFlip = null != key && type(key, value))) {
        break;
      }
      key = key[value];
    }
    return alwaysFlip || ++i != num ? alwaysFlip : !!(num = null == key ? 0 : key.length) && next(num) && h(value, num) && (isFilePathKey(key) || isFilePathMetadataKey(key));
  };
}, function(mixin, canCreateDiscussions, require) {
  var fn = require(271);
  var extend = require(272);
  var isArray = require(75);
  var type = require(41);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return isArray(obj) ? fn(type(obj)) : extend(obj);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return function(array) {
      return null == array ? void 0 : array[key];
    };
  };
}, function(mixin, canCreateDiscussions, new_val_func) {
  var h = new_val_func(92);
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return function(write_byte) {
      return h(write_byte, value);
    };
  };
}, function(module, canCreateDiscussions, NFA) {
  /**
   * @param {!NodeList} json
   * @param {number} key
   * @return {?}
   */
  function update(json, key) {
    return json[key] << 8 | json[key + 1];
  }
  var m = NFA(122);
  module.exports = {
    hash : function(a) {
      var t;
      var value = m.toU8IntArray(a + "");
      /** @type {number} */
      var result = 0;
      if (!a) {
        return result.toString(16);
      }
      var e = value.length;
      /** @type {number} */
      var i = 0;
      /** @type {number} */
      t = 3 & e;
      /** @type {number} */
      e = e >>> 2;
      /** @type {number} */
      var at = 0;
      for (; at < e; at++) {
        /** @type {number} */
        result = (result = result + update(value, i)) << 16 ^ update(value, i + 2) << 11 ^ result;
        /** @type {number} */
        i = i + 4;
        /** @type {number} */
        result = result + (result >> 11);
      }
      switch(t) {
        case 3:
          result = result + update(value, i);
          /** @type {number} */
          result = result ^ result << 16;
          /** @type {number} */
          result = result ^ value[i + 2] << 18;
          result = result + (result >> 11);
          break;
        case 2:
          result = result + update(value, i);
          /** @type {number} */
          result = result ^ result << 11;
          result = result + (result >> 17);
          break;
        case 1:
          result = result + value[i];
          /** @type {number} */
          result = result ^ result << 10;
          result = result + (result >> 1);
      }
      return result = result ^ result << 3, result = result + (result >> 5), result = result ^ result << 4, result = result + (result >> 17), result = result ^ result << 25, result = result + (result >> 6), m.intToUnsignedHex(result);
    }
  };
}, function(mixin, canCreateDiscussions, round) {
  /**
   * @param {number} obj
   * @param {number} value
   * @return {?}
   */
  function isNaN(obj, value) {
    return (65535 & obj) * value + (((obj >>> 16) * value & 65535) << 16);
  }
  /**
   * @param {number} v
   * @param {number} n
   * @return {?}
   */
  function parseInt(v, n) {
    return v << n | v >>> 32 - n;
  }
  /**
   * @param {number} t
   * @return {?}
   */
  function walk(t) {
    return t = isNaN(t = t ^ t >>> 16, 2246822507), t = isNaN(t = t ^ t >>> 13, 3266489909), t = t ^ t >>> 16;
  }
  /**
   * @param {!Array} y
   * @param {!Array} x
   * @return {?}
   */
  function setTimeout(y, x) {
    /** @type {!Array} */
    y = [y[0] >>> 16, 65535 & y[0], y[1] >>> 16, 65535 & y[1]];
    /** @type {!Array} */
    x = [x[0] >>> 16, 65535 & x[0], x[1] >>> 16, 65535 & x[1]];
    /** @type {!Array} */
    var n = [0, 0, 0, 0];
    return n[3] += y[3] + x[3], n[2] += n[3] >>> 16, n[3] &= 65535, n[2] += y[2] + x[2], n[1] += n[2] >>> 16, n[2] &= 65535, n[1] += y[1] + x[1], n[0] += n[1] >>> 16, n[1] &= 65535, n[0] += y[0] + x[0], n[0] &= 65535, [n[0] << 16 | n[1], n[2] << 16 | n[3]];
  }
  /**
   * @param {!Array} a
   * @param {!Array} b
   * @return {?}
   */
  function f(a, b) {
    /** @type {!Array} */
    a = [a[0] >>> 16, 65535 & a[0], a[1] >>> 16, 65535 & a[1]];
    /** @type {!Array} */
    b = [b[0] >>> 16, 65535 & b[0], b[1] >>> 16, 65535 & b[1]];
    /** @type {!Array} */
    var n = [0, 0, 0, 0];
    return n[3] += a[3] * b[3], n[2] += n[3] >>> 16, n[3] &= 65535, n[2] += a[2] * b[3], n[1] += n[2] >>> 16, n[2] &= 65535, n[2] += a[3] * b[2], n[1] += n[2] >>> 16, n[2] &= 65535, n[1] += a[1] * b[3], n[0] += n[1] >>> 16, n[1] &= 65535, n[1] += a[2] * b[2], n[0] += n[1] >>> 16, n[1] &= 65535, n[1] += a[3] * b[1], n[0] += n[1] >>> 16, n[1] &= 65535, n[0] += a[0] * b[3] + a[1] * b[2] + a[2] * b[1] + a[3] * b[0], n[0] &= 65535, [n[0] << 16 | n[1], n[2] << 16 | n[3]];
  }
  /**
   * @param {!Object} m
   * @param {number} n
   * @return {?}
   */
  function normalize(m, n) {
    return 32 === (n = n % 64) ? [m[1], m[0]] : n < 32 ? [m[0] << n | m[1] >>> 32 - n, m[1] << n | m[0] >>> 32 - n] : (n = n - 32, [m[1] << n | m[0] >>> 32 - n, m[0] << n | m[1] >>> 32 - n]);
  }
  /**
   * @param {?} m
   * @param {number} n
   * @return {?}
   */
  function prettyPrint(m, n) {
    return 0 === (n = n % 64) ? m : n < 32 ? [m[0] << n | m[1] >>> 32 - n, m[1] << n] : [m[1] << n - 32, 0];
  }
  /**
   * @param {!Object} e
   * @param {!Array} context
   * @return {?}
   */
  function get(e, context) {
    return [e[0] ^ context[0], e[1] ^ context[1]];
  }
  /**
   * @param {!Object} value
   * @return {?}
   */
  function m(value) {
    return value = get(value = f(value = get(value = f(value = get(value, [0, value[0] >>> 1]), [4283543511, 3981806797]), [0, value[0] >>> 1]), [3301882366, 444984403]), [0, value[0] >>> 1]);
  }
  var hours = round(122);
  /**
   * @param {string} data
   * @param {string} name
   * @return {?}
   */
  var type = function(data, name) {
    /** @type {string} */
    data = "" + data || "";
    var n = hours.toU8IntArray(data);
    name = name || 0;
    /** @type {number} */
    var offset = (data = {
      charCodeAt : function(i) {
        return n[i];
      },
      length : n.length
    }).length % 16;
    /** @type {number} */
    var _lastOffset = data.length - offset;
    /** @type {!Array} */
    var a = [0, name];
    /** @type {!Array} */
    var b = [0, name];
    /** @type {!Array} */
    var value = [0, 0];
    /** @type {!Array} */
    var result = [0, 0];
    /** @type {!Array} */
    var height = [2277735313, 289559509];
    /** @type {!Array} */
    var def = [1291169091, 658871167];
    /** @type {number} */
    var i = 0;
    for (; i < _lastOffset; i = i + 16) {
      /** @type {!Array} */
      value = [255 & data.charCodeAt(i + 4) | (255 & data.charCodeAt(i + 5)) << 8 | (255 & data.charCodeAt(i + 6)) << 16 | (255 & data.charCodeAt(i + 7)) << 24, 255 & data.charCodeAt(i) | (255 & data.charCodeAt(i + 1)) << 8 | (255 & data.charCodeAt(i + 2)) << 16 | (255 & data.charCodeAt(i + 3)) << 24];
      /** @type {!Array} */
      result = [255 & data.charCodeAt(i + 12) | (255 & data.charCodeAt(i + 13)) << 8 | (255 & data.charCodeAt(i + 14)) << 16 | (255 & data.charCodeAt(i + 15)) << 24, 255 & data.charCodeAt(i + 8) | (255 & data.charCodeAt(i + 9)) << 8 | (255 & data.charCodeAt(i + 10)) << 16 | (255 & data.charCodeAt(i + 11)) << 24];
      a = setTimeout(f(a = setTimeout(a = normalize(a = get(a, value = f(value = normalize(value = f(value, height), 31), def)), 27), b), [0, 5]), [0, 1390208809]);
      b = setTimeout(f(b = setTimeout(b = normalize(b = get(b, result = f(result = normalize(result = f(result, def), 33), height)), 31), a), [0, 5]), [0, 944331445]);
    }
    switch(value = [0, 0], result = [0, 0], offset) {
      case 15:
        result = get(result, prettyPrint([0, data.charCodeAt(i + 14)], 48));
      case 14:
        result = get(result, prettyPrint([0, data.charCodeAt(i + 13)], 40));
      case 13:
        result = get(result, prettyPrint([0, data.charCodeAt(i + 12)], 32));
      case 12:
        result = get(result, prettyPrint([0, data.charCodeAt(i + 11)], 24));
      case 11:
        result = get(result, prettyPrint([0, data.charCodeAt(i + 10)], 16));
      case 10:
        result = get(result, prettyPrint([0, data.charCodeAt(i + 9)], 8));
      case 9:
        b = get(b, result = f(result = normalize(result = f(result = get(result, [0, data.charCodeAt(i + 8)]), def), 33), height));
      case 8:
        value = get(value, prettyPrint([0, data.charCodeAt(i + 7)], 56));
      case 7:
        value = get(value, prettyPrint([0, data.charCodeAt(i + 6)], 48));
      case 6:
        value = get(value, prettyPrint([0, data.charCodeAt(i + 5)], 40));
      case 5:
        value = get(value, prettyPrint([0, data.charCodeAt(i + 4)], 32));
      case 4:
        value = get(value, prettyPrint([0, data.charCodeAt(i + 3)], 24));
      case 3:
        value = get(value, prettyPrint([0, data.charCodeAt(i + 2)], 16));
      case 2:
        value = get(value, prettyPrint([0, data.charCodeAt(i + 1)], 8));
      case 1:
        a = get(a, value = f(value = normalize(value = f(value = get(value, [0, data.charCodeAt(i)]), height), 31), def));
    }
    return a = get(a, [0, data.length]), b = setTimeout(b = get(b, [0, data.length]), a = setTimeout(a, b)), a = m(a), b = setTimeout(b = m(b), a = setTimeout(a, b)), ("00000000" + (a[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (a[1] >>> 0).toString(16)).slice(-8) + ("00000000" + (b[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (b[1] >>> 0).toString(16)).slice(-8);
  };
  mixin.exports = {
    x86Hash32 : function(data, header) {
      /** @type {string} */
      data = "" + data || "";
      var c = hours.toU8IntArray(data);
      header = header || 0;
      /** @type {number} */
      var offset = (data = {
        charCodeAt : function(i) {
          return c[i];
        },
        length : c.length
      }).length % 4;
      /** @type {number} */
      var _lastOffset = data.length - offset;
      /** @type {number} */
      var val = header;
      /** @type {number} */
      var n = 0;
      /** @type {number} */
      var i = 0;
      for (; i < _lastOffset; i = i + 4) {
        val = isNaN(val = parseInt(val = val ^ (n = isNaN(n = parseInt(n = isNaN(n = 255 & data.charCodeAt(i) | (255 & data.charCodeAt(i + 1)) << 8 | (255 & data.charCodeAt(i + 2)) << 16 | (255 & data.charCodeAt(i + 3)) << 24, 3432918353), 15), 461845907)), 13), 5) + 3864292196;
      }
      switch(n = 0, offset) {
        case 3:
          /** @type {number} */
          n = n ^ (255 & data.charCodeAt(i + 2)) << 16;
        case 2:
          /** @type {number} */
          n = n ^ (255 & data.charCodeAt(i + 1)) << 8;
        case 1:
          /** @type {number} */
          val = val ^ (n = isNaN(n = parseInt(n = isNaN(n = n ^ 255 & data.charCodeAt(i), 3432918353), 15), 461845907));
      }
      return ((val = walk(val = val ^ data.length)) >>> 0).toString(16);
    },
    x86Hash128 : function(data, value) {
      /** @type {string} */
      data = "" + data || "";
      var p = hours.toU8IntArray(data);
      value = value || 0;
      /** @type {number} */
      var remainingCircle = (data = {
        charCodeAt : function(i) {
          return p[i];
        },
        length : p.length
      }).length % 16;
      /** @type {number} */
      var NUMBER_OF_FOLLOWERS = data.length - remainingCircle;
      /** @type {number} */
      var c = value;
      /** @type {number} */
      var n = value;
      /** @type {number} */
      var r = value;
      /** @type {number} */
      var e = value;
      /** @type {number} */
      var max = 0;
      /** @type {number} */
      var min = 0;
      /** @type {number} */
      var x = 0;
      /** @type {number} */
      var val = 0;
      /** @type {number} */
      var values = 597399067;
      /** @type {number} */
      var elapsedTime = 2869860233;
      /** @type {number} */
      var width = 951274213;
      /** @type {number} */
      var repl = 2716044179;
      /** @type {number} */
      var i = 0;
      for (; i < NUMBER_OF_FOLLOWERS; i = i + 16) {
        /** @type {number} */
        max = 255 & data.charCodeAt(i) | (255 & data.charCodeAt(i + 1)) << 8 | (255 & data.charCodeAt(i + 2)) << 16 | (255 & data.charCodeAt(i + 3)) << 24;
        /** @type {number} */
        min = 255 & data.charCodeAt(i + 4) | (255 & data.charCodeAt(i + 5)) << 8 | (255 & data.charCodeAt(i + 6)) << 16 | (255 & data.charCodeAt(i + 7)) << 24;
        /** @type {number} */
        x = 255 & data.charCodeAt(i + 8) | (255 & data.charCodeAt(i + 9)) << 8 | (255 & data.charCodeAt(i + 10)) << 16 | (255 & data.charCodeAt(i + 11)) << 24;
        /** @type {number} */
        val = 255 & data.charCodeAt(i + 12) | (255 & data.charCodeAt(i + 13)) << 8 | (255 & data.charCodeAt(i + 14)) << 16 | (255 & data.charCodeAt(i + 15)) << 24;
        c = parseInt(c = c ^ (max = isNaN(max = parseInt(max = isNaN(max, values), 15), elapsedTime)), 19);
        c = isNaN(c = c + n, 5) + 1444728091;
        n = parseInt(n = n ^ (min = isNaN(min = parseInt(min = isNaN(min, elapsedTime), 16), width)), 17);
        n = isNaN(n = n + r, 5) + 197830471;
        r = parseInt(r = r ^ (x = isNaN(x = parseInt(x = isNaN(x, width), 17), repl)), 15);
        r = isNaN(r = r + e, 5) + 2530024501;
        e = parseInt(e = e ^ (val = isNaN(val = parseInt(val = isNaN(val, repl), 18), values)), 13);
        e = isNaN(e = e + c, 5) + 850148119;
      }
      switch(max = 0, min = 0, x = 0, val = 0, remainingCircle) {
        case 15:
          /** @type {number} */
          val = val ^ data.charCodeAt(i + 14) << 16;
        case 14:
          /** @type {number} */
          val = val ^ data.charCodeAt(i + 13) << 8;
        case 13:
          /** @type {number} */
          e = e ^ (val = isNaN(val = parseInt(val = isNaN(val = val ^ data.charCodeAt(i + 12), repl), 18), values));
        case 12:
          /** @type {number} */
          x = x ^ data.charCodeAt(i + 11) << 24;
        case 11:
          /** @type {number} */
          x = x ^ data.charCodeAt(i + 10) << 16;
        case 10:
          /** @type {number} */
          x = x ^ data.charCodeAt(i + 9) << 8;
        case 9:
          /** @type {number} */
          r = r ^ (x = isNaN(x = parseInt(x = isNaN(x = x ^ data.charCodeAt(i + 8), width), 17), repl));
        case 8:
          /** @type {number} */
          min = min ^ data.charCodeAt(i + 7) << 24;
        case 7:
          /** @type {number} */
          min = min ^ data.charCodeAt(i + 6) << 16;
        case 6:
          /** @type {number} */
          min = min ^ data.charCodeAt(i + 5) << 8;
        case 5:
          /** @type {number} */
          n = n ^ (min = isNaN(min = parseInt(min = isNaN(min = min ^ data.charCodeAt(i + 4), elapsedTime), 16), width));
        case 4:
          /** @type {number} */
          max = max ^ data.charCodeAt(i + 3) << 24;
        case 3:
          /** @type {number} */
          max = max ^ data.charCodeAt(i + 2) << 16;
        case 2:
          /** @type {number} */
          max = max ^ data.charCodeAt(i + 1) << 8;
        case 1:
          /** @type {number} */
          c = c ^ (max = isNaN(max = parseInt(max = isNaN(max = max ^ data.charCodeAt(i), values), 15), elapsedTime));
      }
      return c = c ^ data.length, c = c + (n = n ^ data.length), c = c + (r = r ^ data.length), n = n + (c = c + (e = e ^ data.length)), r = r + c, e = e + c, c = walk(c), c = c + (n = walk(n)), c = c + (r = walk(r)), n = n + (c = c + (e = walk(e))), r = r + c, e = e + c, ("00000000" + (c >>> 0).toString(16)).slice(-8) + ("00000000" + (n >>> 0).toString(16)).slice(-8) + ("00000000" + (r >>> 0).toString(16)).slice(-8) + ("00000000" + (e >>> 0).toString(16)).slice(-8);
    },
    x64Hash64 : function(value, start) {
      return type(value, start).slice(8);
    },
    x64Hash128 : type,
    hash : function(obj, args) {
      return type(obj, args);
    }
  };
}, function(canCreateDiscussions, e, parseInt) {
  var callback = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var respond = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var collectRefsFromPathitem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var add_prefix = this && this.__spread || function() {
    /** @type {!Array} */
    var followedKeys = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
    }
    return followedKeys;
  };
  Object.defineProperty(e, "__esModule", {
    value : true
  });
  var test = parseInt(1);
  var commaMiles = parseInt(323);
  var series = parseInt(159);
  e.runSettingsPopupCompatibilityFixes = series.runSettingsPopupCompatibilityFixes;
  var de = parseInt(139);
  e.bgPreload = de.bgPreload;
  (function(exports) {
    exports.windowLocalStorage = {
      get : function(key) {
        return test.SafePromise.sync(function() {
          return window.localStorage.getItem(key);
        });
      },
      set : function(name, value) {
        return test.SafePromise.sync(function() {
          return window.localStorage.setItem(name, value);
        });
      },
      getAll : function() {
        return test.SafePromise.sync(function() {
          var proxy = {};
          return Object.keys(window.localStorage).forEach(function(key) {
            /** @type {(null|string)} */
            proxy[key] = window.localStorage.getItem(key);
          }), proxy;
        });
      },
      remove : function(object) {
        return test.SafePromise.sync(function() {
          return window.localStorage.removeItem(object);
        });
      },
      removeAll : function() {
        return test.SafePromise.sync(function() {
          return window.localStorage.clear();
        });
      }
    };
    var ReactMeteorData = function() {
      /**
       * @param {!Object} flightPhase
       * @return {undefined}
       */
      function init(flightPhase) {
        var module = this;
        /** @type {!Object} */
        this._firefox = flightPhase;
        /** @type {!Promise<boolean>} */
        this._migrationCompleted = Promise.resolve(false);
        /** @type {boolean} */
        this._ensureMigrationCompletedCalled = false;
        this.get = this._getMigrationAwareMethod("get");
        this.set = this._getMigrationAwareMethod("set");
        this.getAll = this._getMigrationAwareMethod("getAll");
        this.remove = this._getMigrationAwareMethod("remove");
        this.removeAll = this._getMigrationAwareMethod("removeAll");
        this.browserStorageLocal = {
          get : function(key) {
            return callback(module, void 0, void 0, function() {
              var objectToObserve;
              return respond(this, function(_context) {
                switch(_context.label) {
                  case 0:
                    return [4, this._firefox.storage.local.get(key)];
                  case 1:
                    return [2, (objectToObserve = _context.sent()).hasOwnProperty(key) ? objectToObserve[key] : null];
                }
              });
            });
          },
          set : function(name, val) {
            var _a;
            return module._firefox.storage.local.set(((_a = {})[name] = val, _a));
          },
          getAll : function() {
            return module._firefox.storage.local.get(null);
          },
          remove : function(fn) {
            return module._firefox.storage.local.remove(fn);
          },
          removeAll : function() {
            return callback(module, void 0, void 0, function() {
              return respond(this, function(_context) {
                switch(_context.label) {
                  case 0:
                    return [4, this._firefox.storage.local.clear()];
                  case 1:
                    return _context.sent(), [2];
                }
              });
            });
          }
        };
        this._migration = new commaMiles.StorageMigration("firefoxLocalStorageToExtApi", exports.windowLocalStorage, this.browserStorageLocal, ["version"]);
      }
      return init.prototype.ensureMigrationCompleted = function() {
        /** @type {boolean} */
        this._ensureMigrationCompletedCalled = true;
        var ioDeferred = test.SafePromise.createCompletionSource();
        return this._migrationCompleted = ioDeferred.promise, this._migration.ensureMigrationCompleted().then(function(t) {
          return ioDeferred.resolve(true), Promise.resolve(t);
        }, function(val) {
          return ioDeferred.resolve(false), Promise.reject(val);
        });
      }, init.prototype._getMigrationAwareMethod = function(name) {
        var hmacPromise = this;
        return function() {
          /** @type {!Array} */
          var m = [];
          /** @type {number} */
          var i = 0;
          for (; i < arguments.length; i++) {
            m[i] = arguments[i];
          }
          return test.assert(true === hmacPromise._ensureMigrationCompletedCalled, "supposed to run data migration before accessing prefs with web-extensions API"), hmacPromise._migrationCompleted.then(function(isForArray) {
            var result = isForArray ? hmacPromise._migration.migrationAwareDestination : exports.windowLocalStorage;
            return result[name].apply(result, add_prefix(m));
          });
        };
      }, init;
    }();
    exports.MigrationAwarePreferencesApiImpl = ReactMeteorData;
  })(e.preferencesApi || (e.preferencesApi = {}));
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(78);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return next(obj, name);
  };
}, function($module, canCreateDiscussions, n) {
  var RegExp = n(66);
  var next = n(123);
  var c = n(111);
  var f = n(278);
  var end = n(8);
  var m = n(57);
  var mixin = n(125);
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @param {string} id
   * @param {string} callback
   * @param {!Function} path
   * @return {undefined}
   */
  $module.exports = function init(value, name, id, callback, path) {
    if (value !== name) {
      c(name, function(output, data) {
        if (end(output)) {
          if (!path) {
            path = new RegExp;
          }
          f(value, name, data, id, init, callback, path);
        } else {
          var result = callback ? callback(mixin(value, data), output, data + "", value, name, path) : void 0;
          if (void 0 === result) {
            /** @type {!Object} */
            result = output;
          }
          next(value, data, result);
        }
      }, m);
    }
  };
}, function(mixin, canCreateDiscussions, $) {
  var add = $(123);
  var p = $(176);
  var c = $(177);
  var a = $(178);
  var o = $(179);
  var isObject = $(55);
  var next = $(6);
  var l = $(145);
  var match = $(35);
  var end = $(38);
  var name = $(8);
  var isArray = $(190);
  var h = $(40);
  var f = $(125);
  var i = $(279);
  /**
   * @param {!Object} o
   * @param {!Object} name
   * @param {string} type
   * @param {string} fn
   * @param {!Function} test
   * @param {string} f
   * @param {!Object} target
   * @return {undefined}
   */
  mixin.exports = function(o, name, type, fn, test, f, target) {
    var e = f(o, type);
    var value = f(name, type);
    var option = target.get(value);
    if (option) {
      add(o, type, option);
    } else {
      var d = f ? f(e, value, type + "", o, name, target) : void 0;
      /** @type {boolean} */
      var isdeinit = void 0 === d;
      if (isdeinit) {
        var result = next(value);
        var isWhere = !result && match(value);
        var exports = !result && !isWhere && h(value);
        d = value;
        if (result || isWhere || exports) {
          if (next(e)) {
            d = e;
          } else {
            if (l(e)) {
              d = a(e);
            } else {
              if (isWhere) {
                /** @type {boolean} */
                isdeinit = false;
                d = p(value, true);
              } else {
                if (exports) {
                  /** @type {boolean} */
                  isdeinit = false;
                  d = c(value, true);
                } else {
                  /** @type {!Array} */
                  d = [];
                }
              }
            }
          }
        } else {
          if (isArray(value) || isObject(value)) {
            d = e;
            if (isObject(e)) {
              d = i(e);
            } else {
              if (!(name(e) && !end(e))) {
                d = o(value);
              }
            }
          } else {
            /** @type {boolean} */
            isdeinit = false;
          }
        }
      }
      if (isdeinit) {
        target.set(value, d);
        test(d, value, fn, f, target);
        target.delete(value);
      }
      add(o, type, d);
    }
  };
}, function(mixin, canCreateDiscussions, assign) {
  var next = assign(68);
  var send = assign(57);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return next(obj, send(obj));
  };
}, function(mixin, canCreateDiscussions, random) {
  var entry = random(8);
  var type = random(65);
  var next = random(281);
  /** @type {function(this:Object, *): boolean} */
  var has = Object.prototype.hasOwnProperty;
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    if (!entry(key)) {
      return next(key);
    }
    var inv = type(key);
    /** @type {!Array} */
    var n = [];
    var i;
    for (i in key) {
      if ("constructor" != i || !inv && has.call(key, i)) {
        n.push(i);
      }
    }
    return n;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} o
   * @return {?}
   */
  mixin.exports = function(o) {
    /** @type {!Array} */
    var t = [];
    if (null != o) {
      var k;
      for (k in Object(o)) {
        t.push(k);
      }
    }
    return t;
  };
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(191);
  /** @type {function(...?): number} */
  var max = Math.max;
  /**
   * @param {!Object} obj
   * @param {?} name
   * @param {string} callback
   * @return {?}
   */
  mixin.exports = function(obj, name, callback) {
    return name = max(void 0 === name ? obj.length - 1 : name, 0), function() {
      /** @type {!Arguments} */
      var params = arguments;
      /** @type {number} */
      var i = -1;
      /** @type {number} */
      var length = max(params.length - name, 0);
      /** @type {!Array} */
      var result = Array(length);
      for (; ++i < length;) {
        result[i] = params[name + i];
      }
      /** @type {number} */
      i = -1;
      /** @type {!Array} */
      var results = Array(name + 1);
      for (; ++i < name;) {
        results[i] = params[i];
      }
      return results[name] = callback(result), next(obj, this, results);
    };
  };
}, function(mixin, canCreateDiscussions, require) {
  var r = require(284);
  var m = require(286)(r);
  mixin.exports = m;
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var makeNodeId = __webpack_require__(285);
  var defineProperty = __webpack_require__(124);
  var tmp = __webpack_require__(51);
  var m = defineProperty ? function(obj, name) {
    return defineProperty(obj, "toString", {
      configurable : true,
      enumerable : false,
      value : makeNodeId(name),
      writable : true
    });
  } : tmp;
  mixin.exports = m;
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return function() {
      return obj;
    };
  };
}, function(mixin, canCreateDiscussions) {
  /** @type {number} */
  var n = 800;
  /** @type {number} */
  var groupsize = 16;
  /** @type {function(): number} */
  var d = Date.now;
  /**
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(type) {
    /** @type {number} */
    var count = 0;
    /** @type {number} */
    var concurency = 0;
    return function() {
      /** @type {number} */
      var connectNumber = d();
      /** @type {number} */
      var dragstocreate = groupsize - (connectNumber - concurency);
      if (concurency = connectNumber, dragstocreate > 0) {
        if (++count >= n) {
          return arguments[0];
        }
      } else {
        /** @type {number} */
        count = 0;
      }
      return type.apply(void 0, arguments);
    };
  };
}, , function(mixin, canCreateDiscussions, require) {
  var debounce = require(99);
  var sphereKnn = require(8);
  /** @type {string} */
  var ERR_ACCESSORS_NOT_SUPPORTED = "Expected a function";
  /**
   * @param {!Object} type
   * @param {number} name
   * @param {!Object} options
   * @return {?}
   */
  mixin.exports = function(type, name, options) {
    /** @type {boolean} */
    var leading = true;
    /** @type {boolean} */
    var trailing = true;
    if ("function" != typeof type) {
      throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);
    }
    return sphereKnn(options) && (leading = "leading" in options ? !!options.leading : leading, trailing = "trailing" in options ? !!options.trailing : trailing), debounce(type, name, {
      leading : leading,
      maxWait : name,
      trailing : trailing
    });
  };
}, function(canCreateDiscussions, inst, require) {
  /**
   * @param {?} data
   * @param {!Object} host
   * @return {?}
   */
  function run(data, host) {
    /** @type {!Element} */
    var object = document.createElement("img");
    var url = _.createEventPayload(data, {
      application : config.appName,
      version : config.getVersion(),
      env : config.ENV,
      context : host
    });
    return object.src = _.felogRequestUrl(url, config.URLS.newFelog), Promise.resolve();
  }
  Object.defineProperty(inst, "__esModule", {
    value : true
  });
  var config = require(18);
  var _ = require(81);
  /** @type {function(?, !Object): ?} */
  inst.sendEventPixel2 = run;
  /**
   * @param {!Function} handler
   * @param {string} value
   * @param {string} result
   * @param {!Object} info
   * @param {!Object} done
   * @return {?}
   */
  inst.sendEventPixel = function(handler, value, result, info, done) {
    return run({
      logger : handler,
      level : result,
      message : value,
      extra : info
    }, done);
  };
}, function(canCreateDiscussions, exports, declare) {
  var r = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var fixupModule = this && this.__spread || function() {
    /** @type {!Array} */
    var bytes = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      bytes = bytes.concat(r(arguments[i]));
    }
    return bytes;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var application = declare(10);
  var Track = declare(128);
  var message = declare(291);
  var self = declare(1);
  var secondarySheetClass = declare(24);
  var $$Log = declare(3);
  var _aliapp2 = declare(128);
  exports.PerformanceMetrics = _aliapp2.PerformanceMetrics;
  var console = $$Log.Logger.create("lib.tracking.telemetry");
  /** @type {number} */
  var cropVal = .1;
  /** @type {number} */
  var h = .05;
  /** @type {number} */
  var g = .1;
  /** @type {number} */
  var command = .01;
  /** @type {number} */
  var m = .01;
  var Telemetry = function() {
    /**
     * @param {number} rfb
     * @param {number} state
     * @param {number} format
     * @param {number} r
     * @param {!Array} update
     * @param {number} callback
     * @param {!Array} secret
     * @param {number} size
     * @param {number} axis
     * @param {?} test
     * @param {number} render
     * @return {undefined}
     */
    function init(rfb, state, format, r, update, callback, secret, size, axis, test, render) {
      if (void 0 === rfb) {
        rfb = self.noOp;
      }
      if (void 0 === state) {
        state = self.noOp;
      }
      if (void 0 === format) {
        format = self.noOp;
      }
      if (void 0 === r) {
        r = self.noOp;
      }
      if (void 0 === update) {
        /** @type {boolean} */
        update = false;
      }
      if (void 0 === callback) {
        callback = Track.PerformanceMetrics.dummy;
      }
      if (void 0 === secret) {
        /** @type {boolean} */
        secret = false;
      }
      if (void 0 === size) {
        size = self.noOp;
      }
      if (void 0 === axis) {
        axis = self.noOp;
      }
      if (void 0 === test) {
        /**
         * @param {?} clientCipher
         * @return {?}
         */
        test = function(clientCipher) {
          return command;
        };
      }
      if (void 0 === render) {
        /** @type {boolean} */
        render = "firefox" !== application.getGlobal().bundleInfo.browser;
      }
      var $ = this;
      /** @type {number} */
      this._sendFelog = rfb;
      /** @type {number} */
      this._sendFelogUsage = state;
      /** @type {number} */
      this._setUserId = format;
      /** @type {number} */
      this._setContainerId = r;
      /** @type {!Array} */
      this._sendUsageMetrics = update;
      /** @type {number} */
      this._perfMetrics = callback;
      /** @type {!Array} */
      this._sendPerfMetrics = secret;
      /** @type {number} */
      this._sendFelogEvent = size;
      /** @type {number} */
      this._sendFelogCrashLogs = axis;
      this._getUsageMetricsRate = test;
      /** @type {number} */
      this._shouldSendEvents = render;
      /** @type {number} */
      this._perfMetricsThrottleTimeMs = 6E4;
      /**
       * @param {?} t
       * @param {?} data
       * @return {?}
       */
      this._prepareDataString = function(t, data) {
        var n;
        try {
          /** @type {string} */
          n = JSON.stringify(data);
        } catch (errResponse) {
          /** @type {string} */
          n = "stringify fail: '" + errResponse + "', '" + (errResponse && errResponse.message) + "'";
          console.warn(n, t);
        }
        return n;
      };
      this._sendUsageMetricsSamplingRatio = this._getUsageMetricsRate(application.getGlobal().bundleInfo.browser);
      /**
       * @param {?} canCreateDiscussions
       * @return {undefined}
       */
      this.restoredBgConnection = function(canCreateDiscussions) {
        $._send("cs.connection.bg.restored", "INFO", {
          timeWithoutConnection : canCreateDiscussions
        });
      };
      /**
       * @return {undefined}
       */
      this.initWithoutBgConnection = function() {
        $._send("cs.connection.bg.disconnected", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.fetchDefinitionsFail = function() {
        $._send("cs.connection.api.definition.failed", "WARN");
      };
      /**
       * @param {string} startVal
       * @return {undefined}
       */
      this.infinityCheckResetFail = function(startVal) {
        $._send("cs.connection.infiniteCheck.failed", "ERROR", {
          delay : startVal
        });
      };
      /**
       * @param {?} leafletId
       * @return {undefined}
       */
      this.tooLongPageConfigInit = function(leafletId) {
        $._send("cs.pageConfig.init.exceeded", "WARN", {
          initTime : leafletId
        });
      };
      /**
       * @param {?} time
       * @return {undefined}
       */
      this.tooLongUserUpdateTime = function(time) {
        $._send("bg.state.user.update.exceeded", "WARN", {
          updateTime : time
        });
      };
      /**
       * @return {undefined}
       */
      this.lostBgPageConnection = function() {
        $._send("cs.gbutton.bg\u0421onnection.lost", "INFO");
      };
      /**
       * @param {number} epochTime
       * @return {undefined}
       */
      this.restoreBgPageConnection = function(epochTime) {
        $._send("cs.gbutton.bg\u0421onnection.restored", "INFO", {
          time : epochTime
        });
      };
      /**
       * @return {undefined}
       */
      this.badCursorPosition = function() {
        $._send("cs.editor.badCursorPosition", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.cursorJump = function() {
        $._send("cs.editor.cursorJump", "WARN");
      };
      /**
       * @return {undefined}
       */
      this.signinOpen = function() {
        $._send("cs.signin.open", "INFO");
      };
      /**
       * @param {?} timeRaffleOpen
       * @return {undefined}
       */
      this.signinClose = function(timeRaffleOpen) {
        $._send("cs.signin.close", "INFO", {
          openTime : timeRaffleOpen
        });
      };
      /**
       * @return {undefined}
       */
      this.tabReloadClick = function() {
        $._send("cs.gbutton.reload.click", "WARN");
      };
      /**
       * @param {string} error
       * @param {string} t
       * @return {undefined}
       */
      this.popupLoadError = function(error, t) {
        $._send("cs.popup.load.error", "ERROR", {
          message : error,
          name : t
        });
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.loginNoBgPageConnection = function(notMessage) {
        $._send("debug.cs.connection.signin.bg.timeout", "INFO", {
          message : notMessage
        });
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.dynamicConfigLoadFromPrefsError = function(notMessage) {
        $._sendSampled(m, "bg.dynamicConfig.prefs.load.error", "ERROR", {
          message : notMessage
        });
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.dynamicConfigSaveToPrefsError = function(notMessage) {
        $._sendSampled(m, "bg.dynamicConfig.prefs.save.error", "ERROR", {
          message : notMessage
        });
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.dynamicConfigLoadFromServerError = function(notMessage) {
        $._sendSampled(m, "bg.dynamicConfig.server.load.error", "ERROR", {
          message : notMessage
        });
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.pageConfigCDNError = function(notMessage) {
        $._send("cs.pageConfig.cdn.error", "ERROR", {
          message : notMessage
        });
      };
      /**
       * @param {string} error
       * @param {string} t
       * @return {undefined}
       */
      this.pageConfigLocalStorageError = function(error, t) {
        $._send("cs.pageConfig.localStorage.error", "INFO", {
          message : error,
          name : t
        });
      };
      /**
       * @param {number} name
       * @param {!Object} version
       * @return {undefined}
       */
      this.pageConfigUpdated = function(name, version) {
        $._send("cs.pageConfig.updated", "INFO", {
          oldVersion : name,
          newVersion : version
        });
      };
      /**
       * @return {undefined}
       */
      this.settingsPopupTimeout = function() {
        $._send("settings.popup.init.timeout", "WARN");
      };
      /**
       * @param {?} canCreateDiscussions
       * @return {undefined}
       */
      this.settingsUsupportedShow = function(canCreateDiscussions) {
        $._send("settings.popup.state.unsupported.show", "INFO", {
          popupType : canCreateDiscussions
        });
      };
      /**
       * @return {undefined}
       */
      this.socketBgError = function() {
        $._send("bg.socket.error", "WARN");
      };
      /**
       * @param {boolean} isSlidingUp
       * @param {boolean} $cont
       * @return {undefined}
       */
      this.capiNotAuthorizedLoop = function(isSlidingUp, $cont) {
        $._send("debug.socket.notAuthorizedLoop", "INFO", {
          authDegradation : isSlidingUp,
          cookiesDisabled : $cont
        });
      };
      /**
       * @return {undefined}
       */
      this.socketDisabledCookie = function() {
        $._send("debug.socket.disabledCookies", "INFO");
      };
      /**
       * @param {?} isSlidingUp
       * @return {undefined}
       */
      this.socketBgRestored = function(isSlidingUp) {
        $._send("debug.bg.socket.restored", "INFO", {
          tryCount : isSlidingUp
        });
      };
      /**
       * @param {string} bracket
       * @param {?} position
       * @return {undefined}
       */
      this.socketBgReconnectFail = function(bracket, position) {
        $._send("bg.socket.reconnect.fail", "WARN", {
          token : bracket,
          tryCount : position
        });
      };
      /**
       * @return {undefined}
       */
      this.socketCsError = function() {
        $._send("cs.socket.error", "WARN");
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.soketCsErrorMsg = function(notMessage) {
        $._send("cs.socket.errorMsg", "WARN", {
          message : notMessage
        });
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.gnarClientInitFail = function(notMessage) {
        $._send("gnar.bg.tracking.gnar.init.fail", "WARN", {
          message : notMessage
        });
      };
      /**
       * @return {undefined}
       */
      this.bgTrackingInitFail = function() {
        $._send("debug.tracking.init.fail", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.gnarSpecUndefinedInit = function() {
        $._send("debug.tracking.gnar.spec.init.fail", "INFO");
      };
      /**
       * @param {?} val
       * @return {undefined}
       */
      this.userUpgradeClick = function(val) {
        $._send("cs.ui.action.upgradeClick", "INFO", {
          placement : val
        });
      };
      /**
       * @return {undefined}
       */
      this.gButtonClick = function() {
        $._send("cs.ui.gbutton.click", "INFO");
      };
      /**
       * @param {!Object} show_delay
       * @return {undefined}
       */
      this.checkingToggledInField = function(show_delay) {
        $._send("cs.ui.gbutton.toggleInField", "INFO", {
          enabled : show_delay
        });
      };
      /**
       * @param {?} callback
       * @return {undefined}
       */
      this.unexpectedAnonymous = function(callback) {
        $._send("debug.bg.session.unexpectedAnonymous", "INFO", callback);
      };
      /**
       * @param {number} status
       * @return {undefined}
       */
      this.getDapiPropError = function(status) {
        $._send("bg.connection.dapi.getProp.error", "WARN", {
          statusCode : status
        });
      };
      /**
       * @param {number} status
       * @return {undefined}
       */
      this.setDapiPropError = function(status) {
        $._send("bg.connection.dapi.setProp.error", "WARN", {
          statusCode : status
        });
      };
      /**
       * @param {!Object} show_delay
       * @return {undefined}
       */
      this.toggleExtensionDefs = function(show_delay) {
        $._send("bg.settings.definitions.toggle", "INFO", {
          enabled : show_delay
        });
      };
      /**
       * @param {!Object} enable
       * @param {?} name
       * @return {undefined}
       */
      this.toggleExtension = function(enable, name) {
        $._send("bg.settings.extension.toggle", "INFO", {
          enabled : enable,
          placement : name
        });
      };
      /**
       * @return {undefined}
       */
      this.disableUntilNextVisit = function() {
        $._send("cs.gbutton.disableUntilNextVisit", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.disableButtonClick = function() {
        $._send("cs.gbutton.disableButtonClick", "INFO");
      };
      /**
       * @param {number} e
       * @param {?} islongclick
       * @return {undefined}
       */
      this.cookieOverflow = function(e, islongclick) {
        $._send("debug.bg.state.cookie.overflow", "INFO", {
          size : e,
          biggestCookie : islongclick
        });
      };
      /**
       * @return {undefined}
       */
      this.externalChangePlan = function() {
        $._send("bg.api.external.changePlan", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.externalChangeDialect = function() {
        $._send("bg.api.external.changeDialect", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.externalChangeUser = function() {
        $._send("bg.api.external.changeUsed", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.externalLogout = function() {
        $._send("bg.api.external.logout", "INFO");
      };
      /**
       * @param {string} serverid
       * @param {!Object} name
       * @return {undefined}
       */
      this.bgPageStartFail = function(serverid, name) {
        $._send("bg.start.fail", "ERROR", {
          message : serverid,
          stack : name
        });
      };
      /**
       * @return {undefined}
       */
      this.acceptDataControl = function() {
        $._send("bg.dataControl.accepted", "INFO");
      };
      /**
       * @param {?} isSlidingUp
       * @return {undefined}
       */
      this.bgPageInitTimeout = function(isSlidingUp) {
        $._send("bg.state.start.timeout", "WARN", {
          initTime : isSlidingUp
        });
      };
      /**
       * @param {?} isSlidingUp
       * @return {undefined}
       */
      this.bgPageInitFail = function(isSlidingUp) {
        $._send("bg.state.init.fail", "ERROR", {
          initAttempts : isSlidingUp
        });
      };
      /**
       * @param {?} value
       * @param {?} type
       * @return {undefined}
       */
      this.extensionUpdated = function(value, type) {
        $._send("bg.state.updated", "INFO", {
          currentVersion : value,
          previousVersion : type
        });
      };
      /**
       * @param {?} events_url
       * @return {undefined}
       */
      this.extensionUpdateFail = function(events_url) {
        $._send("bg.state.update.fail", "INFO", {
          previousVersion : events_url
        });
      };
      /**
       * @return {undefined}
       */
      this.cannotGetInstallSource = function() {
        $._send("bg.getSource.fail", "WARN");
      };
      /**
       * @param {!Object} img
       * @return {undefined}
       */
      this.extensionInstall = function(img) {
        $._send("bg.state.install", "INFO", {
          source : img
        });
      };
      /**
       * @param {!Object} localVersion
       * @return {undefined}
       */
      this.chromeForcedToUpdate = function(localVersion) {
        $._send("bg.chrome.forcedToUpdate", "INFO", {
          newVersion : localVersion
        });
      };
      /**
       * @param {string} p
       * @param {string} record
       * @return {undefined}
       */
      this.chromeContentScriptLoadError = function(p, record) {
        $._send("bg.chrome.cs.load.error", "WARN", {
          message : p,
          type : record
        });
      };
      /**
       * @return {undefined}
       */
      this.reloadNotificationShow = function() {
        $._send("bg.ui.notification.tabsReload.show", "WARN");
      };
      /**
       * @return {undefined}
       */
      this.reloadNotificationClick = function() {
        $._send("bg.ui.notification.tabsReload.click", "INFO");
      };
      /**
       * @param {string} value
       * @param {!Array} resp
       * @param {string} status
       * @return {undefined}
       */
      this.fetchUserFail = function(value, resp, status) {
        $._send("bg.user.fetch.fail", "WARN", {
          body : resp,
          statusCode : status,
          reason : value
        });
      };
      /**
       * @param {!Array} e
       * @param {number} value
       * @return {undefined}
       */
      this.fetchMimicFail = function(e, value) {
        $._send("bg.user.mimic.fail", "WARN", {
          body : e,
          statusCode : value
        });
      };
      /**
       * @param {!Array} e
       * @param {number} value
       * @return {undefined}
       */
      this.fetchStatsFail = function(e, value) {
        $._send("bg.user.dapi.prop.stats.fail", "WARN", {
          body : e,
          statusCode : value
        });
      };
      /**
       * @return {undefined}
       */
      this.fetchCookieFail = function() {
        $._send("bg.cookie.fail", "WARN");
      };
      /**
       * @param {!Array} e
       * @param {number} value
       * @return {undefined}
       */
      this.fetchSettingsFail = function(e, value) {
        $._send("bg.user.settings.fail", "WARN", {
          body : e,
          statusCode : value
        });
      };
      /**
       * @param {boolean} canceled
       * @return {undefined}
       */
      this.frequentCookieChanges = function(canceled) {
        $._send("debug.cookie.onChange.error", "INFO", {
          canceled : canceled
        });
      };
      /**
       * @param {string} newPrinter
       * @return {undefined}
       */
      this.initializePropFromDapi = function(newPrinter) {
        $._send("bg.state.dapi.prop.initialize", "INFO", {
          name : newPrinter
        });
      };
      /**
       * @return {undefined}
       */
      this.onboardingPopupShow = function() {
        $._send("cs.onboarding.popup.show", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.onboardingPopupCancel = function() {
        $._send("cs.onboarding.popup.cancel", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.onboardingTutorialShow = function() {
        $._send("cs.onboarding.tutorial.show", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.onboardingVideoLoaded = function() {
        $._send("cs.onboarding.tutorial.video.loaded", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.incognitoInit = function() {
        $._send("bg.incognito.init", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.disabledCookiesInit = function() {
        $._send("bg.cookie.disabled", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.loginReminderPopupShow = function() {
        $._send("cs.gbutton.popup.loginReminder.show", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.delightfulMessagePopupShow = function() {
        $._send("cs.gbutton.popup.delightfulMessage.show", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.loginReminderBadgeShow = function() {
        $._send("bg.state.user.loginReminder.enable", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.proxyInit = function() {
        $._sendSampled(h, "proxy.init", "INFO");
      };
      /**
       * @param {number} oscPortIn
       * @param {!Error} oscPortOut
       * @return {undefined}
       */
      this.proxyPortDisconnected = function(oscPortIn, oscPortOut) {
        $._sendSampled(h, "proxy.disconnect", "INFO", {
          port : oscPortIn,
          error : oscPortOut
        });
      };
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      this.unhandledBgPageException = function(error) {
        $._sendSampled(g, "bg.unhandledException", "ERROR", {
          message : error.error ? error.error.message : error.message
        });
      };
      /**
       * @param {!Event} params
       * @return {undefined}
       */
      this.unhandledBgPageRejection = function(params) {
        $._sendSampled(g, "bg.unhandledRejection", "ERROR", {
          message : null != params.reason ? "string" == typeof params.reason ? params.reason : params.reason.message : void 0
        });
      };
      /**
       * @return {undefined}
       */
      this.storageMigrationSucceeded = function() {
        $._send("bg.storageMigration.success", "INFO", {});
      };
      /**
       * @param {string} err
       * @return {undefined}
       */
      this.storageMigrationFailed = function(err) {
        $._send("bg.storageMigration.failure", "ERROR", {
          message : err && err.message
        });
      };
      /**
       * @return {undefined}
       */
      this.cardShowAction = function() {
        $._sendSampled(cropVal, "cs.editor.card.show", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.cardHideAction = function() {
        $._sendSampled(cropVal, "cs.editor.card.hide", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.cardReplacementAction = function() {
        $._sendSampled(cropVal, "cs.editor.card.replacement", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.cardAddToDictAction = function() {
        $._sendSampled(cropVal, "cs.editor.card.addToDict", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.cardIgnoreAction = function() {
        $._sendSampled(cropVal, "cs.editor.card.ignore", "INFO");
      };
      /**
       * @param {?} canCreateDiscussions
       * @return {undefined}
       */
      this.synonymCardShowAction = function(canCreateDiscussions) {
        $._sendSampled(cropVal, "cs.editor.synonym.show", "INFO", {
          notFoundCard : canCreateDiscussions
        });
      };
      /**
       * @param {?} canCreateDiscussions
       * @return {undefined}
       */
      this.synonymCardHideAction = function(canCreateDiscussions) {
        $._sendSampled(cropVal, "cs.editor.synonym.hide", "INFO", {
          notFoundCard : canCreateDiscussions
        });
      };
      /**
       * @return {undefined}
       */
      this.synonymReplacementAction = function() {
        $._sendSampled(cropVal, "cs.editor.synonym.replacement", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.dictCardShowAction = function() {
        $._sendSampled(cropVal, "cs.editor.dict.show", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.dictCardHideAction = function() {
        $._sendSampled(cropVal, "cs.editor.dict.hide", "INFO");
      };
      /**
       * @return {undefined}
       */
      this.errorBySendEmailData = function() {
        $._send("cs.editor.emailData.send.error", "WARN");
      };
      /**
       * @param {?} formatters
       * @param {?} customFormatters
       * @return {undefined}
       */
      this.couldNotParseTransform = function(formatters, customFormatters) {
        $._send("cs.cards.transforms.parse.error", "WARN", {
          transformHTML : formatters,
          fallbackParseSuccessful : customFormatters
        });
      };
      /**
       * @param {string} provider
       * @return {undefined}
       */
      this.disabledTabLoad = function(provider) {
        $._sendUsage("usage.loadOnDisabledTab", "INFO", {
          accountType : provider
        });
      };
      /**
       * @param {string} provider
       * @return {undefined}
       */
      this.disabledTabByUserLoad = function(provider) {
        $._sendUsage("usage.loadOnDisabledByUserTab", "INFO", {
          accountType : provider
        });
      };
      /**
       * @param {string} caps
       * @param {string} ourSignedKey
       * @param {number} theirIdentityPubKey
       * @param {?} theirEphemeralPubKey
       * @param {?} theirSignedPubKey
       * @return {undefined}
       */
      this.initSession = function(caps, ourSignedKey, theirIdentityPubKey, theirEphemeralPubKey, theirSignedPubKey) {
        $._sendUsage("usage.session.init", "INFO", {
          isTopSite : message.isTopSite(caps),
          accountType : ourSignedKey,
          fieldType : theirIdentityPubKey,
          fieldSupported : theirEphemeralPubKey,
          integrationType : theirSignedPubKey
        });
      };
      /**
       * @param {string} provider
       * @param {number} type
       * @return {undefined}
       */
      this.cardFirstInteraction = function(provider, type) {
        $._sendUsage("usage.card.interaction", "INFO", {
          accountType : provider,
          fieldType : type
        });
      };
      this.fluidGdocs = {
        getFullTextFailed : self.callOnce(function(e) {
          return $._send("cs.gdocs.fluid.getFullTextFailed", "INFO", {
            type : e
          });
        }),
        pageToTextMapFail : self.callOnce(function() {
          return $._send("cs.gdocs.fluid.pageToTextMapFail", "INFO");
        }),
        textFragmentMapFail : self.callOnce(function() {
          return $._send("cs.gdocs.fluid.textFragmentMapFail", "INFO");
        }),
        init : function() {
          return $._send("cs.gdocs.fluid.init", "INFO");
        }
      };
      this.gdocs = {
        initialGdocsDisable : function() {
          return $._send("cs.gdocs.initialDisableSet", "INFO");
        },
        getInitialDocumentStateFailed : function(notMessage) {
          return $._send("cs.gdocs.state.getInitialFailed", "INFO", {
            message : notMessage
          });
        },
        localStateSwappedWithRemote : function() {
          return $._send("cs.gdocs.state.localStateSwapped", "INFO");
        },
        revisionSwitched : function() {
          return $._send("cs.gdocs.revisionsSwitched", "INFO");
        },
        noMatchForUnderline : function() {
          return $._send("cs.gdocs.orphantUnderline.noMatchFoundByUnderine", "INFO");
        },
        noMatchFoundForId : function() {
          return $._send("cs.gdocs.orphantUnderline.noMatchFoundById", "INFO");
        },
        replacementFailed : function() {
          return $._send("cs.gdocs.replacementFailed", "INFO");
        },
        editingDisabledNotification : function(settings) {
          return $._send("cs.gdocs.notifications.editingDisabledBloodyBar", "INFO", settings && Object.assign({
            hashedDocId : secondarySheetClass.getHashedGoogleDocId()
          }, settings));
        },
        somethingWentWrongNotification : function(settings) {
          return $._send("cs.gdocs.notifications.somethingWentWrongButterBar", "INFO", settings && Object.assign({
            hashedDocId : secondarySheetClass.getHashedGoogleDocId()
          }, settings));
        },
        misplacedUnderlines : function(params) {
          var username = params.collaborators;
          var n = params.count;
          return $._send("cs.gdocs.notifications.misplacedUnderlines", "INFO", {
            collaborators : username,
            count : n,
            hashedDocId : secondarySheetClass.getHashedGoogleDocId()
          });
        },
        documentOpen : function(language) {
          var str = language.grammarlyEnabled;
          $._send("cs.gdocs.notifications.documentOpen", "INFO", {
            hashedDocId : secondarySheetClass.getHashedGoogleDocId(),
            grammarlyEnabled : str
          });
        },
        injectedSciptRollback : function(not_uploaded) {
          return $._send("cs.gdocs.injectedScriptsRollback", "INFO", {
            reason : not_uploaded
          });
        },
        emptyResponseCrash : function() {
          return $._send("cs.gdocs.emptyResponseCrash", "INFO");
        }
      };
      this.performance = {
        processInput : this._createPerfLogger("cs.fluid.processInput", 100),
        processAlerts : this._createPerfLogger("cs.fluid.processAlerts", 10),
        csInitialized : function(eta, lmbda, n) {
          if ($._sendPerfMetrics) {
            $._sendEvent({
              logger : "cs.initialized",
              level : "INFO",
              ex_csInitPerf : {
                loadTime : eta,
                initTime : lmbda,
                error : n
              }
            });
          }
        }
      };
      /**
       * @param {string} notMessage
       * @return {undefined}
       */
      this.oauthExchangeError = function(notMessage) {
        $._send("bg.oauth.exchange.error", "ERROR", {
          message : notMessage
        });
      };
    }
    return init.prototype._send = function(data, type, callback) {
      if (false !== this._shouldSendEvents) {
        var r = this._prepareDataString(data, callback);
        try {
          this._sendFelog(data, void 0, type, null != callback ? {
            json : r
          } : void 0);
        } catch (w) {
          console.warn("Failed to send felog for " + data + ": '" + (w && w.message) + "'", w);
        }
      }
    }, init.prototype._sendEvent = function(data) {
      if (false !== this._shouldSendEvents) {
        try {
          this._sendFelogEvent(data);
        } catch (experimentId) {
          console.warn("Failed to send felog for " + JSON.stringify(data), experimentId);
        }
      }
    }, init.prototype._sendUsage = function(insetY, type, causeParams) {
      if (this._sendUsageMetrics && this._sendUsageMetricsSamplingRatio > Math.random()) {
        try {
          this._sendFelogUsage(insetY, "", type, causeParams);
        } catch (w) {
          console.warn("Failed to send usage felog for " + insetY + ": '" + (w && w.message) + "'", w);
        }
      }
    }, init.prototype._sendSampled = function(c, data, event, callback) {
      if (c > Math.random()) {
        this._send(data, event, callback);
      }
    }, init.prototype._createPerfLogger = function(x, len) {
      var data = this;
      if (void 0 === len && (len = 0), this._sendPerfMetrics) {
        /** @type {!Array} */
        var arg = [];
        var fn = self.throttle(this._perfMetricsThrottleTimeMs, function() {
          if (arg.push.apply(arg, fixupModule(data._perfMetrics.flushMeasures(x))), arg.length >= len) {
            var args = Track.PerformanceMetrics.getStats(arg);
            /** @type {!Array} */
            arg = [];
            console.info("sending perf stats for " + x, args);
            data._sendEvent({
              logger : x,
              level : "INFO",
              ex_perfstats : args
            });
          }
        });
        return {
          dummy : false,
          startMeasure : function() {
            var p = data._perfMetrics.startMeasure(x);
            return {
              endMeasure : function() {
                p.endMeasure();
                self.requestIdleCallback(function() {
                  return fn();
                }, {
                  timeout : 1E3
                });
              }
            };
          },
          measure : function(text) {
            var res = data._perfMetrics.measure(x, text);
            return fn(), res;
          }
        };
      }
      return {
        dummy : true,
        startMeasure : function() {
          return {
            endMeasure : self.noOp
          };
        },
        measure : function(callback) {
          return callback();
        }
      };
    }, init.prototype.sendCrashLogs = function(mmCoreLogEnabledDefault, mmCoreLogEnabledConfigName) {
      if (false !== this._shouldSendEvents) {
        try {
          this._sendFelogCrashLogs(mmCoreLogEnabledConfigName);
        } catch (w) {
          console.warn("Failed to send crash data data for " + mmCoreLogEnabledDefault + ": '" + (w && w.message) + "'", w);
        }
      }
    }, init.prototype.setUserId = function(userId) {
      this._setUserId(userId);
    }, init.prototype.setContainerId = function(containerId) {
      this._setContainerId(containerId);
    }, init.prototype.enableEventsSending = function() {
      /** @type {boolean} */
      this._shouldSendEvents = true;
    }, init.prototype.disableEventsSending = function() {
      /** @type {boolean} */
      this._shouldSendEvents = false;
    }, init.prototype.notificationShown = function(e) {
      this._send("cs.notification.show", "INFO", {
        type : e
      });
    }, init.prototype.notificationHide = function(e) {
      this._send("cs.notification.hide", "INFO", {
        type : e
      });
    }, init;
  }();
  exports.Telemetry = Telemetry;
}, function(canCreateDiscussions, BeautifulProperties, n) {
  var coreLikelySubtags = this && this.__values || function(value) {
    var func = "function" == typeof Symbol && value[Symbol.iterator];
    /** @type {number} */
    var pos = 0;
    return func ? func.call(value) : {
      next : function() {
        return value && pos >= value.length && (value = void 0), {
          value : value && value[pos++],
          done : !value
        };
      }
    };
  };
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /**
   * @param {string} value
   * @return {?}
   */
  BeautifulProperties.isTopSite = function(value) {
    return onejsparser.includes(value);
  };
  var OneJSParser = function() {
    /**
     * @param {?} e
     * @return {undefined}
     */
    function init(e) {
      /**
       * @param {string} text
       * @return {?}
       */
      function template(text) {
        return 'Invalid pattern "' + text + '": "*" is allowed only at start and/or end position';
      }
      var mockConsole;
      var value;
      /** @type {!Set} */
      this._equal = new Set;
      /** @type {!Array} */
      this._prefix = [];
      /** @type {!Array} */
      this._suffix = [];
      /** @type {!Array} */
      this._infix = [];
      try {
        var result = coreLikelySubtags(e);
        var vt = result.next();
        for (; !vt.done; vt = result.next()) {
          var data = vt.value;
          var length = data.indexOf("*");
          if (-1 === length) {
            this._equal.add(data);
          } else {
            if (length === data.length - 1) {
              this._prefix.push(data.substring(0, length));
            } else {
              if (0 !== length) {
                throw new Error(template(data));
              }
              var index = data.indexOf("*", 1);
              if (-1 === index) {
                this._suffix.push(data.substring(1));
              } else {
                if (index !== data.length - 1) {
                  throw new Error(template(data));
                }
                this._infix.push(data.substring(1, index));
              }
            }
          }
        }
      } catch (Console_error) {
        mockConsole = {
          error : Console_error
        };
      } finally {
        try {
          if (vt && !vt.done && (value = result.return)) {
            value.call(result);
          }
        } finally {
          if (mockConsole) {
            throw mockConsole.error;
          }
        }
      }
    }
    return init.prototype.includes = function(key) {
      return this._equal.has(key) || this._prefix.some(function(partialTag) {
        return key.startsWith(partialTag);
      }) || this._suffix.some(function(wordEnding) {
        return key.endsWith(wordEnding);
      }) || this._infix.some(function(t) {
        return key.includes(t);
      });
    }, init;
  }();
  BeautifulProperties.TopSites = OneJSParser;
  var onejsparser = new OneJSParser(["mail.google.com", "translate.google.*", "docs.google.com", "web.whatsapp.com", "facebook.com", "outlook.*", "linkedin.com", "zendesk.*", "youtube.com", "twitter.com", "messenger.com", "*.slack.*", "*canvas*", "*instructure*", "trello.com", "editor.wix.com", "quizlet.com", "mail.yahoo.com", "*.force.*", "keep.google.com", "vk.com", "fanyi.baidu.com", "app.bullhornstaffing.com", "app.qa-world.com", "calendar.google.com", "papago.naver.com", "wordcounter.net", "blogger.*", 
  "wattpad.com", "wordpress.com", "amazon.*", "smallseotools.com", "create.kahoot.it", "apps.rackspace.com", "basecamp.com", "varsitytutors.com", "canva.com", "fanyi.youdao.com", "reverso.net", "message.alibaba.com", "*schoology*", "*.blackboard.*", "classroom.google.com", "*upwork*", "business.facebook.com", "medium.com", "mail.aol.com", "workhub.transcribeme.com", "github.com"]);
}, function(canCreateDiscussions, exports, $) {
  /**
   * @param {!Object} arr
   * @return {?}
   */
  function _toConsumableArray(arr) {
    if (Array.isArray(arr)) {
      /** @type {number} */
      var i = 0;
      /** @type {!Array} */
      var arr2 = Array(arr.length);
      for (; i < arr.length; i++) {
        arr2[i] = arr[i];
      }
      return arr2;
    } else {
      return Array.from(arr);
    }
  }
  /**
   * @param {!Object} obj
   * @param {string} key
   * @param {!Function} value
   * @return {?}
   */
  function callback(obj, key, value) {
    return key in obj ? Object.defineProperty(obj, key, {
      value : value,
      enumerable : true,
      configurable : true,
      writable : true
    }) : obj[key] = value, obj;
  }
  /**
   * @param {?} iterator
   * @return {?}
   */
  function init(iterator) {
    /**
     * @param {string} type
     * @param {!Object} s
     * @param {string} callback
     * @return {undefined}
     */
    function wrap(type, s, callback) {
      if (typeof window === "undefined") {
        console.log("redux-saga " + type + ": " + s + "\n" + callback.stack);
      } else {
        console[type].call(console, s, callback);
      }
    }
    /**
     * @param {!Object} err
     * @param {!Object} response
     * @return {undefined}
     */
    function next(err, response) {
      if (!iterator._isRunning) {
        throw new Error("Trying to resume an already finished generator");
      }
      try {
        var result = err ? iterator.throw(err) : iterator.next(response);
        if (!result.done) {
          runEffect(result.value, element, "", next);
        } else {
          done(result.value);
        }
      } catch (val) {
        done(val, true);
        if (val instanceof window.default) {
          if (self.isDev) {
            wrap("warn", cb + ": uncaught", val);
          }
        } else {
          wrap("error", cb + ": uncaught", val);
        }
      }
    }
    /**
     * @param {!Object} result
     * @param {boolean} err
     * @return {undefined}
     */
    function done(result, err) {
      /** @type {boolean} */
      iterator._isRunning = false;
      if (!err) {
        /** @type {!Object} */
        iterator._result = result;
        masterQ.resolve(result);
      } else {
        /** @type {!Object} */
        iterator._error = result;
        masterQ.reject(result);
      }
      r();
    }
    /**
     * @param {!Object} value
     * @param {boolean} id
     * @return {?}
     */
    function runEffect(value, id) {
      /**
       * @param {!Function} params
       * @param {!Object} res
       * @return {undefined}
       */
      function currCb(params, res) {
        if (scopeThis) {
          return;
        }
        /** @type {boolean} */
        scopeThis = true;
        next.cancel = self.noop;
        if (params) {
          dispatch(console.effectRejected(effectId, params));
        } else {
          dispatch(console.effectResolved(effectId, res));
        }
        next(params, res);
      }
      var username = arguments.length <= 2 || arguments[2] === undefined ? "" : arguments[2];
      var next = arguments[3];
      var effectId = uid();
      dispatch(console.effectTriggered(effectId, id, username, value));
      var scopeThis = undefined;
      currCb.cancel = self.noop;
      /**
       * @param {!Object} e
       * @return {undefined}
       */
      next.cancel = function(e) {
        if (scopeThis) {
          return;
        }
        /** @type {boolean} */
        scopeThis = true;
        try {
          currCb.cancel(e);
        } catch (e) {
          void 0;
        }
        currCb.cancel = self.noop;
        next(e);
        dispatch(console.effectRejected(effectId, e));
      };
      var data = undefined;
      return self.is.promise(value) ? resolvePromise(value, currCb) : self.is.iterator(value) ? resolveIterator(value, effectId, cb, currCb) : self.is.array(value) ? runParallelEffect(value, effectId, currCb) : self.is.notUndef(data = options.asEffect.take(value)) ? runJoinEffect(data, currCb) : self.is.notUndef(data = options.asEffect.put(value)) ? runPutEffect(data, currCb) : self.is.notUndef(data = options.asEffect.race(value)) ? runRaceEffect(data, effectId, currCb) : self.is.notUndef(data = 
      options.asEffect.call(value)) ? runCallEffect(data, effectId, currCb) : self.is.notUndef(data = options.asEffect.cps(value)) ? runCPSEffect(data, currCb) : self.is.notUndef(data = options.asEffect.fork(value)) ? register(data, effectId, currCb) : self.is.notUndef(data = options.asEffect.join(value)) ? runCancelEffect(data, currCb) : self.is.notUndef(data = options.asEffect.cancel(value)) ? select(data, currCb) : self.is.notUndef(data = options.asEffect.select(value)) ? runSelectEffect(data, 
      currCb) : currCb(null, value);
    }
    /**
     * @param {!Object} data
     * @param {!Object} cb
     * @return {undefined}
     */
    function resolvePromise(data, cb) {
      var val = data[i];
      if (typeof val === "function") {
        /** @type {!Function} */
        cb.cancel = val;
      }
      data.then(function(formattedSections) {
        return cb(null, formattedSections);
      }, function(fallbackReleases) {
        return cb(fallbackReleases);
      });
    }
    /**
     * @param {(Object|string)} name
     * @param {?} res
     * @param {?} callback
     * @param {string} cb
     * @return {undefined}
     */
    function resolveIterator(name, res, callback, cb) {
      resolvePromise(init(name, values, db, text, dispatch, res, callback).done, cb);
    }
    /**
     * @param {string} t
     * @param {!Object} cb
     * @return {undefined}
     */
    function runJoinEffect(t, cb) {
      var data = {
        match : (0, options.matcher)(t),
        pattern : t,
        resolve : function findAround(value) {
          return cb(null, value);
        }
      };
      m_points.push(data);
      /**
       * @return {?}
       */
      cb.cancel = function() {
        return (0, self.remove)(m_points, data);
      };
    }
    /**
     * @param {!Object} params
     * @param {!Function} cb
     * @return {undefined}
     */
    function runPutEffect(params, cb) {
      (0, self.asap)(function() {
        return cb(null, db(params));
      });
    }
    /**
     * @param {!Object} _ref4
     * @param {?} effectId
     * @param {string} cb
     * @return {?}
     */
    function runCallEffect(_ref4, effectId, cb) {
      var data = _ref4.context;
      var fn = _ref4.fn;
      var message = _ref4.args;
      var result = undefined;
      try {
        result = fn.apply(data, message);
      } catch (mutationsMap) {
        return cb(mutationsMap);
      }
      return self.is.promise(result) ? resolvePromise(result, cb) : self.is.iterator(result) ? resolveIterator(result, effectId, fn.name, cb) : cb(null, result);
    }
    /**
     * @param {!Object} _ref5
     * @param {!Function} cb
     * @return {?}
     */
    function runCPSEffect(_ref5, cb) {
      var data = _ref5.context;
      var fn = _ref5.fn;
      var args = _ref5.args;
      try {
        fn.apply(data, args.concat(cb));
      } catch (mutationsMap) {
        return cb(mutationsMap);
      }
    }
    /**
     * @param {!Object} item
     * @param {?} channel
     * @param {!Function} cb
     * @return {undefined}
     */
    function register(item, channel, cb) {
      var a = item.context;
      var tmp = item.fn;
      var p = item.args;
      var node = undefined;
      var port = undefined;
      var context = undefined;
      try {
        node = tmp.apply(a, p);
      } catch (e) {
        port = port;
      }
      if (self.is.iterator(node)) {
        context = node;
      } else {
        context = (port ? regeneratorRuntime.mark(function _callee4() {
          return regeneratorRuntime.wrap(function _callee4$(_context4) {
            for (; 1;) {
              switch(_context4.prev = _context4.next) {
                case 0:
                  throw port;
                case 1:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }) : regeneratorRuntime.mark(function _callee4() {
          return regeneratorRuntime.wrap(function _callee4$(_context4) {
            for (; 1;) {
              switch(_context4.prev = _context4.next) {
                case 0:
                  /** @type {number} */
                  _context4.next = 2;
                  return node;
                case 2:
                  return _context4.abrupt("return", _context4.sent);
                case 3:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }))();
      }
      cb(null, init(context, values, db, text, dispatch, channel, tmp.name, true));
    }
    /**
     * @param {!Object} task
     * @param {string} cb
     * @return {undefined}
     */
    function runCancelEffect(task, cb) {
      resolvePromise(task.done, cb);
    }
    /**
     * @param {!Object} response
     * @param {!Function} f
     * @return {undefined}
     */
    function select(response, f) {
      response.done[i](new window.default(type, cb, cb));
      f();
    }
    /**
     * @param {!Object} effects
     * @param {boolean} effectId
     * @param {!Object} self
     * @return {undefined}
     */
    function runParallelEffect(effects, effectId, self) {
      /**
       * @return {undefined}
       */
      function cancel() {
        if (l === ret.length) {
          /** @type {boolean} */
          scopeThis = true;
          self(null, ret);
        }
      }
      if (!effects.length) {
        self(null, []);
        return;
      }
      /** @type {number} */
      var l = 0;
      var scopeThis = undefined;
      /** @type {!Array} */
      var ret = Array(effects.length);
      var childCbs = effects.map(function(canCreateDiscussions, jurisdiction) {
        /**
         * @param {?} time
         * @param {?} res
         * @return {undefined}
         */
        var chCbAtIdx = function set(time, res) {
          if (scopeThis) {
            return;
          }
          if (time) {
            try {
              self.cancel(new window.default(url, cb, cb));
            } catch (o) {
              void 0;
            }
            self(time);
          } else {
            ret[jurisdiction] = res;
            l++;
            cancel();
          }
        };
        chCbAtIdx.cancel = self.noop;
        return chCbAtIdx;
      });
      /**
       * @param {!Object} e
       * @return {undefined}
       */
      self.cancel = function(e) {
        if (!scopeThis) {
          /** @type {boolean} */
          scopeThis = true;
          childCbs.forEach(function(t) {
            return t.cancel(e);
          });
        }
      };
      effects.forEach(function(effect, idx) {
        return runEffect(effect, effectId, idx, childCbs[idx]);
      });
    }
    /**
     * @param {string} e
     * @param {boolean} id
     * @param {!Object} expect
     * @return {undefined}
     */
    function runRaceEffect(e, id, expect) {
      var scopeThis = undefined;
      /** @type {!Array<string>} */
      var i = Object.keys(e);
      var childCbs = {};
      i.forEach(function(key) {
        /**
         * @param {!Function} user
         * @param {!Function} group
         * @return {undefined}
         */
        var context = function userToGroup(user, group) {
          if (scopeThis) {
            return;
          }
          if (user) {
            try {
              expect.cancel(new window.default(resolve, cb, cb));
            } catch (o) {
              void 0;
            }
            expect(callback({}, key, user));
          } else {
            try {
              expect.cancel(new window.default(resolve, cb, cb));
            } catch (o) {
              void 0;
            }
            /** @type {boolean} */
            scopeThis = true;
            expect(null, callback({}, key, group));
          }
        };
        context.cancel = self.noop;
        /** @type {function(!Function, !Function): undefined} */
        childCbs[key] = context;
      });
      /**
       * @param {!Object} e
       * @return {undefined}
       */
      expect.cancel = function(e) {
        if (!scopeThis) {
          /** @type {boolean} */
          scopeThis = true;
          i.forEach(function(key) {
            return childCbs[key].cancel(e);
          });
        }
      };
      i.forEach(function(key) {
        return runEffect(e[key], id, key, childCbs[key]);
      });
    }
    /**
     * @param {!Object} _ref7
     * @param {!Function} cb
     * @return {undefined}
     */
    function runSelectEffect(_ref7, cb) {
      var selector = _ref7.selector;
      var args = _ref7.args;
      try {
        var DEFAULT_RESULT = selector.apply(undefined, [text()].concat(_toConsumableArray(args)));
        cb(null, DEFAULT_RESULT);
      } catch (mutationsMap) {
        cb(mutationsMap);
      }
    }
    /**
     * @param {!Function} e
     * @param {!Function} args
     * @param {!Request} iterator
     * @param {!Function} data
     * @param {!Function} selector
     * @return {?}
     */
    function load(e, args, iterator, data, selector) {
      var error;
      return callback(error = {}, self.TASK, true), callback(error, "id", e), callback(error, "name", args), callback(error, "done", data), callback(error, "forked", selector), callback(error, "cancel", function convertEvent(event) {
        if (!(event instanceof window.default)) {
          event = new window.default(type, args, event);
        }
        data[i](event);
      }), callback(error, "isRunning", function isRunning() {
        return iterator._isRunning;
      }), callback(error, "result", function resolve() {
        return iterator._result;
      }), callback(error, "error", function error() {
        return iterator._error;
      }), error;
    }
    var values = arguments.length <= 1 || arguments[1] === undefined ? function() {
      return self.noop;
    } : arguments[1];
    var db = arguments.length <= 2 || arguments[2] === undefined ? self.noop : arguments[2];
    var text = arguments.length <= 3 || arguments[3] === undefined ? self.noop : arguments[3];
    var dispatch = arguments.length <= 4 || arguments[4] === undefined ? self.noop : arguments[4];
    var element = arguments.length <= 5 || arguments[5] === undefined ? 0 : arguments[5];
    var cb = arguments.length <= 6 || arguments[6] === undefined ? "anonymous" : arguments[6];
    var context = arguments[7];
    (0, self.check)(iterator, self.is.iterator, artistTrack);
    var interval = pick(cb);
    /** @type {!Array} */
    var m_points = [];
    var masterQ = (0, self.deferred)();
    var r = values(function(e) {
      if (e === undefined) {
        throw interval;
      }
      /** @type {number} */
      var i = 0;
      for (; i < m_points.length; i++) {
        var point = m_points[i];
        if (point.match(e)) {
          /** @type {!Array} */
          m_points = [];
          point.resolve(e);
        }
      }
    });
    next.cancel = self.noop;
    var result = load(element, cb, iterator, masterQ.promise, context);
    /**
     * @param {!Object} event
     * @return {undefined}
     */
    result.done[i] = function(event) {
      var url = event.type;
      var original = event.origin;
      next.cancel(new window.default(url, cb, original));
    };
    /** @type {boolean} */
    iterator._isRunning = true;
    next();
    return result;
  }
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  exports.MANUAL_CANCEL = exports.RACE_AUTO_CANCEL = exports.PARALLEL_AUTO_CANCEL = exports.CANCEL = exports.undefindInputError = exports.NOT_ITERATOR_ERROR = void 0;
  /**
   * @param {!Object} obj
   * @return {?}
   */
  exports.default = function init(obj) {
    /**
     * @param {string} name
     * @param {!Object} type
     * @param {string} content
     * @return {undefined}
     */
    function logger(name, type, content) {
      if ("undefined" == typeof window) {
        console.log("redux-saga " + name + ": " + type + "\n" + content.stack);
      } else {
        console[name].call(console, type, content);
      }
    }
    /**
     * @param {!Object} e
     * @param {!Object} data
     * @return {undefined}
     */
    function next(e, data) {
      if (!obj._isRunning) {
        throw new Error("Trying to resume an already finished generator");
      }
      try {
        var self = e ? obj.throw(e) : obj.next(data);
        if (self.done) {
          end(self.value);
        } else {
          init(self.value, duration, "", next);
        }
      } catch (p) {
        end(p, true);
        if (p instanceof window.default) {
          if (self.isDev) {
            logger("warn", cb + ": uncaught", p);
          }
        } else {
          logger("error", cb + ": uncaught", p);
        }
      }
    }
    /**
     * @param {string} result
     * @param {boolean} passed
     * @return {undefined}
     */
    function end(result, passed) {
      /** @type {boolean} */
      obj._isRunning = false;
      if (passed) {
        /** @type {string} */
        obj._error = result;
        action.reject(result);
      } else {
        /** @type {string} */
        obj._result = result;
        action.resolve(result);
      }
      middleware();
    }
    /**
     * @param {!Object} value
     * @param {!Object} name
     * @return {?}
     */
    function init(value, name) {
      /**
       * @param {!Object} error
       * @param {!Object} res
       * @return {undefined}
       */
      function next(error, res) {
        if (!effectId) {
          /** @type {boolean} */
          effectId = true;
          data.cancel = self.noop;
          expect(error ? console.effectRejected(key, error) : console.effectResolved(key, res));
          data(error, res);
        }
      }
      var p = arguments.length <= 2 || void 0 === arguments[2] ? "" : arguments[2];
      var data = arguments[3];
      var key = uid();
      expect(console.effectTriggered(key, name, p, value));
      var effectId = void 0;
      next.cancel = self.noop;
      /**
       * @param {!Object} val
       * @return {undefined}
       */
      data.cancel = function(val) {
        if (!effectId) {
          /** @type {boolean} */
          effectId = true;
          try {
            next.cancel(val);
          } catch (e) {
          }
          next.cancel = self.noop;
          data(val);
          expect(console.effectRejected(key, val));
        }
      };
      var reducer;
      var done;
      var last;
      var locale;
      var it;
      var x;
      var chars;
      var values;
      var target;
      var resolve;
      var path;
      var op;
      var result;
      var test = void 0;
      return self.is.promise(value) ? wrap(value, next) : self.is.iterator(value) ? update(value, key, cb, next) : self.is.array(value) ? function(params, exports, next) {
        if (!params.length) {
          return void next(null, []);
        }
        /** @type {number} */
        var doneCount = 0;
        var i = void 0;
        /** @type {!Array} */
        var options = Array(params.length);
        var hooks = params.map(function(canCreateDiscussions, interval) {
          /**
           * @param {!Object} res
           * @param {?} id
           * @return {undefined}
           */
          var value = function(res, id) {
            if (!i) {
              if (res) {
                try {
                  next.cancel(new window.default(url, cb, cb));
                } catch (e) {
                }
                next(res);
              } else {
                options[interval] = id;
                if (++doneCount === options.length) {
                  /** @type {boolean} */
                  i = true;
                  next(null, options);
                }
              }
            }
          };
          return value.cancel = self.noop, value;
        });
        /**
         * @param {!Object} e
         * @return {undefined}
         */
        next.cancel = function(e) {
          if (!i) {
            /** @type {boolean} */
            i = true;
            hooks.forEach(function(t) {
              return t.cancel(e);
            });
          }
        };
        params.forEach(function(initValues, id) {
          return init(initValues, exports, id, hooks[id]);
        });
      }(value, key, next) : self.is.notUndef(test = options.asEffect.take(value)) ? (path = test, op = next, result = {
        match : (0, options.matcher)(path),
        pattern : path,
        resolve : function(value) {
          return op(null, value);
        }
      }, notifications.push(result), void(op.cancel = function() {
        return (0, self.remove)(notifications, result);
      })) : self.is.notUndef(test = options.asEffect.put(value)) ? (target = test, resolve = next, void(0, self.asap)(function() {
        return resolve(null, opts(target));
      })) : self.is.notUndef(test = options.asEffect.race(value)) ? (last = test, locale = key, it = next, x = void 0, chars = Object.keys(last), values = {}, chars.forEach(function(key) {
        /**
         * @param {!Function} file
         * @param {!Function} type
         * @return {undefined}
         */
        var next = function(file, type) {
          if (!x) {
            if (file) {
              try {
                it.cancel(new window.default(resolve, cb, cb));
              } catch (t) {
              }
              it(callback({}, key, file));
            } else {
              try {
                it.cancel(new window.default(resolve, cb, cb));
              } catch (t) {
              }
              /** @type {boolean} */
              x = true;
              it(null, callback({}, key, type));
            }
          }
        };
        next.cancel = self.noop;
        /** @type {function(!Function, !Function): undefined} */
        values[key] = next;
      }), it.cancel = function(e) {
        if (!x) {
          /** @type {boolean} */
          x = true;
          chars.forEach(function(i) {
            return values[i].cancel(e);
          });
        }
      }, void chars.forEach(function(id) {
        return init(last[id], locale, id, values[id]);
      })) : self.is.notUndef(test = options.asEffect.call(value)) ? function(_ref, next, cb) {
        var data = _ref.context;
        var fn = _ref.fn;
        var a = _ref.args;
        var result = void 0;
        try {
          result = fn.apply(data, a);
        } catch (cont_content) {
          return cb(cont_content);
        }
        return self.is.promise(result) ? wrap(result, cb) : self.is.iterator(result) ? update(result, next, fn.name, cb) : cb(null, result);
      }(test, key, next) : self.is.notUndef(test = options.asEffect.cps(value)) ? function(_ref, done) {
        var a = _ref.context;
        var fn = _ref.fn;
        var args = _ref.args;
        try {
          fn.apply(a, args.concat(done));
        } catch (e) {
          return done(e);
        }
      }(test, next) : self.is.notUndef(test = options.asEffect.fork(value)) ? function(ctx, callback, cb) {
        var a = ctx.context;
        var params = ctx.fn;
        var n = ctx.args;
        var result = void 0;
        var nb = void 0;
        var value = void 0;
        try {
          result = params.apply(a, n);
        } catch (e) {
          nb = nb;
        }
        value = self.is.iterator(result) ? result : (nb ? regeneratorRuntime.mark(function next() {
          return regeneratorRuntime.wrap(function(context$5$0) {
            for (;;) {
              switch(context$5$0.prev = context$5$0.next) {
                case 0:
                  throw nb;
                case 1:
                case "end":
                  return context$5$0.stop();
              }
            }
          }, next, this);
        }) : regeneratorRuntime.mark(function next() {
          return regeneratorRuntime.wrap(function(_context) {
            for (;;) {
              switch(_context.prev = _context.next) {
                case 0:
                  return _context.next = 2, result;
                case 2:
                  return _context.abrupt("return", _context.sent);
                case 3:
                case "end":
                  return _context.stop();
              }
            }
          }, next, this);
        }))();
        cb(null, init(value, url, opts, data, expect, callback, params.name, true));
      }(test, key, next) : self.is.notUndef(test = options.asEffect.join(value)) ? (done = next, void wrap(test.done, done)) : self.is.notUndef(test = options.asEffect.cancel(value)) ? (reducer = next, test.done[i](new window.default(type, cb, cb)), void reducer()) : self.is.notUndef(test = options.asEffect.select(value)) ? function(item, cb) {
        var select = item.selector;
        var text = item.args;
        try {
          var o = select.apply(void 0, [data()].concat(function(data) {
            {
              if (Array.isArray(data)) {
                /** @type {number} */
                var i = 0;
                /** @type {!Array} */
                var intArray = Array(data.length);
                for (; i < data.length; i++) {
                  intArray[i] = data[i];
                }
                return intArray;
              }
              return Array.from(data);
            }
          }(text)));
          cb(null, o);
        } catch (e) {
          cb(e);
        }
      }(test, next) : next(null, value);
    }
    /**
     * @param {!Object} result
     * @param {!Object} cb
     * @return {undefined}
     */
    function wrap(result, cb) {
      var e = result[i];
      if ("function" == typeof e) {
        /** @type {!Function} */
        cb.cancel = e;
      }
      result.then(function(formattedSections) {
        return cb(null, formattedSections);
      }, function(fallbackReleases) {
        return cb(fallbackReleases);
      });
    }
    /**
     * @param {!Object} t
     * @param {!Array} options
     * @param {!Object} callback
     * @param {string} next
     * @return {undefined}
     */
    function update(t, options, callback, next) {
      wrap(init(t, url, opts, data, expect, options, callback).done, next);
    }
    var url = arguments.length <= 1 || void 0 === arguments[1] ? function() {
      return self.noop;
    } : arguments[1];
    var opts = arguments.length <= 2 || void 0 === arguments[2] ? self.noop : arguments[2];
    var data = arguments.length <= 3 || void 0 === arguments[3] ? self.noop : arguments[3];
    var expect = arguments.length <= 4 || void 0 === arguments[4] ? self.noop : arguments[4];
    var duration = arguments.length <= 5 || void 0 === arguments[5] ? 0 : arguments[5];
    var cb = arguments.length <= 6 || void 0 === arguments[6] ? "anonymous" : arguments[6];
    var matched_check = arguments[7];
    (0, self.check)(obj, self.is.iterator, artistTrack);
    var interval = pick(cb);
    /** @type {!Array} */
    var notifications = [];
    var action = (0, self.deferred)();
    var middleware = url(function(e) {
      if (void 0 === e) {
        throw interval;
      }
      /** @type {number} */
      var i = 0;
      for (; i < notifications.length; i++) {
        var n = notifications[i];
        if (n.match(e)) {
          /** @type {!Array} */
          notifications = [];
          n.resolve(e);
        }
      }
    });
    next.cancel = self.noop;
    var state = (key = duration, options = cb, request = obj, collection = action.promise, productInfo = matched_check, callback(error = {}, self.TASK, true), callback(error, "id", key), callback(error, "name", options), callback(error, "done", collection), callback(error, "forked", productInfo), callback(error, "cancel", function(data) {
      if (!(data instanceof window.default)) {
        data = new window.default(type, options, data);
      }
      collection[i](data);
    }), callback(error, "isRunning", function() {
      return request._isRunning;
    }), callback(error, "result", function() {
      return request._result;
    }), callback(error, "error", function() {
      return request._error;
    }), error);
    var key;
    var options;
    var request;
    var collection;
    var productInfo;
    var error;
    /**
     * @param {!Object} event
     * @return {undefined}
     */
    state.done[i] = function(event) {
      var url = event.type;
      var original = event.origin;
      next.cancel(new window.default(url, cb, original));
    };
    /** @type {boolean} */
    obj._isRunning = true;
    next();
    return state;
  };
  var $1;
  var self = $(61);
  var options = $(163);
  var console = function(e) {
    {
      if (e && e.__esModule) {
        return e;
      }
      var t = {};
      if (null != e) {
        var key;
        for (key in e) {
          if (Object.prototype.hasOwnProperty.call(e, key)) {
            t[key] = e[key];
          }
        }
      }
      return t.default = e, t;
    }
  }($(293));
  var event = $(164);
  var window = ($1 = event) && $1.__esModule ? $1 : {
    default : $1
  };
  /** @type {string} */
  var artistTrack = exports.NOT_ITERATOR_ERROR = "proc first argument (Saga function result) must be an iterator";
  /** @type {function(string): ?} */
  var pick = exports.undefindInputError = function(promote) {
    return "\n  " + promote + " saga was provided with an undefined input action\n  Hints :\n  - check that your Action Creator returns a non undefined value\n  - if the Saga was started using runSaga, check that your subscribe source provides the action to its listeners\n";
  };
  var i = exports.CANCEL = (0, self.sym)("@@redux-saga/cancelPromise");
  /** @type {string} */
  var url = exports.PARALLEL_AUTO_CANCEL = "PARALLEL_AUTO_CANCEL";
  /** @type {string} */
  var resolve = exports.RACE_AUTO_CANCEL = "RACE_AUTO_CANCEL";
  /** @type {string} */
  var type = exports.MANUAL_CANCEL = "MANUAL_CANCEL";
  var uid = (0, self.autoInc)();
}, function(canCreateDiscussions, actions, n) {
  /**
   * @param {!Object} obj
   * @param {string} key
   * @param {string} value
   * @return {?}
   */
  function log(obj, key, value) {
    return key in obj ? Object.defineProperty(obj, key, {
      value : value,
      enumerable : true,
      configurable : true,
      writable : true
    }) : obj[key] = value, obj;
  }
  Object.defineProperty(actions, "__esModule", {
    value : true
  });
  /**
   * @param {string} id
   * @param {boolean} n
   * @param {string} type
   * @param {!Function} description
   * @return {?}
   */
  actions.effectTriggered = function(id, n, type, description) {
    var e;
    return log(e = {}, base, true), log(e, "type", textures), log(e, "effectId", id), log(e, "parentEffectId", n), log(e, "label", type), log(e, "effect", description), e;
  };
  /**
   * @param {string} res
   * @param {!Function} result
   * @return {?}
   */
  actions.effectResolved = function(res, result) {
    var e;
    return log(e = {}, base, true), log(e, "type", type), log(e, "effectId", res), log(e, "result", result), e;
  };
  /**
   * @param {string} id
   * @param {!Function} error
   * @return {?}
   */
  actions.effectRejected = function(id, error) {
    var e;
    return log(e = {}, base, true), log(e, "type", maxAge), log(e, "effectId", id), log(e, "error", error), e;
  };
  /** @type {string} */
  var base = actions.MONITOR_ACTION = "MONITOR_ACTION";
  /** @type {string} */
  var textures = actions.EFFECT_TRIGGERED = "EFFECT_TRIGGERED";
  /** @type {string} */
  var type = actions.EFFECT_RESOLVED = "EFFECT_RESOLVED";
  /** @type {string} */
  var maxAge = actions.EFFECT_REJECTED = "EFFECT_REJECTED";
}, function(canCreateDiscussions, $scope, n) {
  Object.defineProperty($scope, "__esModule", {
    value : true
  });
  $scope.t = {
    SETTINGS_INITIAL : "settings/SETTINGS_INITIAL",
    TOGGLE_DEFS : "settings/TOGGLE_DEFS",
    TOGGLE_SITE : "settings/TOGGLE_SITE",
    TOGGLE_FIELD : "settings/TOGGLE_FIELD",
    DISABLE_ON_TAB : "settings/DISABLE_ON_TAB",
    DISABLE_REMINDER_NOTIFICATION : "settings/DISABLE_REMINDER_NOTIFICATION",
    SHOW_DISABLE_REMINDER : "settings/SHOW_DISABLE_REMINDER",
    DISABLE_EMAIL_SUMMARIZATION : "settings/DISABLE_EMAIL_SUMMARIZATION",
    SHOW_NEWS : "settings/SHOW_NEWS",
    SEEN_NEWS : "settings/SEEN_NEWS",
    SEEN_GDOCS_OPT_IN : "settings/SEEN_GDOCS_OPT_IN",
    SEEN_GDOCS_LARGE_DOCUMENT_WARNING : "settings/SEEN_GDOCS_LARGE_DOCUMENT_WARNING",
    SET_GDOCS_INITIAL_DISABLE : "setting/SET_GDOCS_INITIAL_DISABLE",
    HIDE_GDOCS_SIGNIN_POPUP : "settings/HIDE_GDOCS_SIGNIN_POPUP",
    CLICK_GDOCS_AUTHENTICATION : "settings/CLICK_GDOCS_AUTHENTICATION",
    SET_GDOCS_ENABLED_SETTING : "settings/SET_GDOCS_ENABLED_SETTING",
    SHOW_ONBOARDING : "settings/SHOW_ONBOARDING",
    SEEN_ONBOARDING : "settings/SEEN_ONBOARDING",
    SEEN_ADVANCED_INLINE_CARDS_ONBOARDING : "settings/SEEN_ADVANCED_INLINE_CARDS_ONBOARDING",
    SEEN_DELIGHTFUL_MESSAGE : "settings/SEEN_DELIGHTFUL_MESSAGE",
    SHOW_LOGIN_REMINDER : "settings/SHOW_LOGIN_REMINDER",
    HIDE_LOGIN_REMINDER : "settings/HIDE_LOGIN_REMINDER",
    DISABLE_LOGIN_REMINDER : "settings/DISABLE_LOGIN_REMINDER",
    SET_DAPI_PROP : "settings/SET_DAPI_PROP",
    CHANGE_WEAK_DIALECT : "settings/CHANGE_WEAK_DIALECT",
    CHANGE_STRONG_DIALECT : "settings/CHANGE_STRONG_DIALECT",
    SAVE_ANONYMOUS_PROPERTIES : "settings/SAVE_ANONYMOUS_PROPERTIES",
    EDGE_POPUP_FROM_GBUTTON : "settings/EDGE_POPUP_FROM_GBUTTON",
    SAVE_EMAIL_CONNECTEDNESS_DATA : "settings/SAVE_EMAIL_CONNECTEDNESS_DATA",
    SHOW_DATA_CONTROL_POPUP : "settings/SHOW_DATA_CONTROL_POPUP",
    HIDE_EMOTIONS_PROMPT : "settings/HIDE_EMOTIONS_PROMPT",
    SET_EMOTIONS_EMOJI_STATE : "settings/SET_EMOTIONS_EMOJI_STATE",
    CHANGE_EMOTIONS_FEATURE : "settings/CHANGE_EMOTIONS_FEATURE",
    HIDE_EMOJI_BUTTON : "settings/HIDE_EMOJI_BUTTON",
    SHOW_EMOJI_BUTTON : "settings/SHOW_EMOJI_BUTTON",
    SEEN_CLARITY_NOTIFICATION : "settings/SEEN_CLARITY_NOTIFICATION",
    SET_SAFARI_MIGRATION_POPUP_SHOWN_TIMESTAMP : "settings/SET_SAFARI_MIGRATION_POPUP_SHOWN_TIMESTAMP",
    SET_SAFARI_MIGRATION_BACKUP_NOTIFY_FIRST_TIMESTAMP : "settings/SET_SAFARI_MIGRATION_BACKUP_NOTIFY_FIRST_TIMESTAMP",
    SET_SAFARI_MIGRATION_BACKUP_NOTIFY_SECOND_TIMESTAMP : "settings/SET_SAFARI_MIGRATION_BACKUP_NOTIFY_SECOND_TIMESTAMP",
    SHOW_GMAIL_SEND_EMAIL_PREMIUM_POPUP : "setting/SHOW_GMAIL_SEND_EMAIL_PREMIUM_POPUP"
  };
  /** @type {!Array} */
  $scope.DAPI_ACTIONS = [$scope.t.CHANGE_WEAK_DIALECT, $scope.t.CHANGE_STRONG_DIALECT, $scope.t.CHANGE_EMOTIONS_FEATURE, $scope.t.SET_EMOTIONS_EMOJI_STATE];
  /** @type {!Array} */
  $scope.CACHED_ACTIONS = [$scope.t.TOGGLE_DEFS, $scope.t.TOGGLE_SITE, $scope.t.TOGGLE_FIELD, $scope.t.SEEN_NEWS, $scope.t.SEEN_GDOCS_OPT_IN, $scope.t.SEEN_GDOCS_LARGE_DOCUMENT_WARNING, $scope.t.SET_GDOCS_INITIAL_DISABLE, $scope.t.HIDE_GDOCS_SIGNIN_POPUP, $scope.t.CLICK_GDOCS_AUTHENTICATION, $scope.t.SET_GDOCS_ENABLED_SETTING, $scope.t.SHOW_ONBOARDING, $scope.t.SEEN_ONBOARDING, $scope.t.SEEN_ADVANCED_INLINE_CARDS_ONBOARDING, $scope.t.SEEN_DELIGHTFUL_MESSAGE, $scope.t.SHOW_LOGIN_REMINDER, $scope.t.HIDE_LOGIN_REMINDER, 
  $scope.t.DISABLE_LOGIN_REMINDER, $scope.t.SHOW_DISABLE_REMINDER, $scope.t.DISABLE_REMINDER_NOTIFICATION, $scope.t.DISABLE_EMAIL_SUMMARIZATION, $scope.t.EDGE_POPUP_FROM_GBUTTON, $scope.t.SHOW_DATA_CONTROL_POPUP, $scope.t.HIDE_EMOTIONS_PROMPT, $scope.t.SEEN_CLARITY_NOTIFICATION, $scope.t.SET_SAFARI_MIGRATION_POPUP_SHOWN_TIMESTAMP, $scope.t.SET_SAFARI_MIGRATION_BACKUP_NOTIFY_FIRST_TIMESTAMP, $scope.t.SET_SAFARI_MIGRATION_BACKUP_NOTIFY_SECOND_TIMESTAMP, $scope.t.SHOW_GMAIL_SEND_EMAIL_PREMIUM_POPUP];
  /**
   * @param {!Object} propKey
   * @param {!Object} index
   * @return {?}
   */
  $scope.setDapiProp = function(propKey, index) {
    return {
      type : $scope.t.SET_DAPI_PROP,
      propKey : propKey,
      data : index
    };
  };
  /**
   * @param {!Object} instancesTypes
   * @return {?}
   */
  $scope.changeWeakDialect = function(instancesTypes) {
    return {
      type : $scope.t.CHANGE_WEAK_DIALECT,
      data : instancesTypes
    };
  };
  /**
   * @param {!Object} instancesTypes
   * @return {?}
   */
  $scope.changeStrongDialect = function(instancesTypes) {
    return {
      type : $scope.t.CHANGE_STRONG_DIALECT,
      data : instancesTypes
    };
  };
  /**
   * @param {!Object} compiled
   * @return {?}
   */
  $scope.initialSettings = function(compiled) {
    return {
      type : $scope.t.SETTINGS_INITIAL,
      data : compiled
    };
  };
  /**
   * @param {?} canCreateDiscussions
   * @return {?}
   */
  $scope.toggleDefs = function(canCreateDiscussions) {
    return {
      type : $scope.t.TOGGLE_DEFS,
      enabledDefs : canCreateDiscussions
    };
  };
  /**
   * @param {!Object} url
   * @param {string} domain
   * @return {?}
   */
  $scope.toggleSite = function(url, domain) {
    return {
      type : $scope.t.TOGGLE_SITE,
      domain : domain,
      enabled : url
    };
  };
  /**
   * @param {!Object} index
   * @param {string} bool
   * @return {?}
   */
  $scope.toggleField = function(index, bool) {
    return {
      type : $scope.t.TOGGLE_FIELD,
      domain : bool,
      data : index
    };
  };
  /**
   * @return {?}
   */
  $scope.seenNews = function() {
    return {
      type : $scope.t.SEEN_NEWS
    };
  };
  /**
   * @return {?}
   */
  $scope.gdocsDisabledInitially = function() {
    return {
      type : $scope.t.SET_GDOCS_INITIAL_DISABLE
    };
  };
  /**
   * @return {?}
   */
  $scope.seenGdocsOptIn = function() {
    return {
      type : $scope.t.SEEN_GDOCS_OPT_IN
    };
  };
  /**
   * @return {?}
   */
  $scope.seenGdocsLargeDocumentWarning = function() {
    return {
      type : $scope.t.SEEN_GDOCS_LARGE_DOCUMENT_WARNING
    };
  };
  /**
   * @return {?}
   */
  $scope.hideGdocsSigninPopup = function() {
    return {
      type : $scope.t.HIDE_GDOCS_SIGNIN_POPUP
    };
  };
  /**
   * @return {?}
   */
  $scope.clickGdocsAuthentication = function() {
    return {
      type : $scope.t.CLICK_GDOCS_AUTHENTICATION
    };
  };
  /**
   * @return {?}
   */
  $scope.setGdocsEnabledSetting = function() {
    return {
      type : $scope.t.SET_GDOCS_ENABLED_SETTING
    };
  };
  /**
   * @return {?}
   */
  $scope.showOnboarding = function() {
    return {
      type : $scope.t.SHOW_ONBOARDING
    };
  };
  /**
   * @return {?}
   */
  $scope.seenOnboarding = function() {
    return {
      type : $scope.t.SEEN_ONBOARDING
    };
  };
  /**
   * @return {?}
   */
  $scope.setSeenAdvancedInlineCardsOnboarding = function() {
    return {
      type : $scope.t.SEEN_ADVANCED_INLINE_CARDS_ONBOARDING
    };
  };
  /**
   * @param {?} canCreateDiscussions
   * @return {?}
   */
  $scope.seenDelightfulMessage = function(canCreateDiscussions) {
    return {
      type : $scope.t.SEEN_DELIGHTFUL_MESSAGE,
      delightfulMessageId : canCreateDiscussions
    };
  };
  /**
   * @param {string} fbPageId
   * @return {?}
   */
  $scope.showNews = function(fbPageId) {
    return {
      type : $scope.t.SHOW_NEWS,
      showNews : fbPageId
    };
  };
  /**
   * @param {!Object} respTodo
   * @return {?}
   */
  $scope.saveAnonymousProps = function(respTodo) {
    return {
      type : $scope.t.SAVE_ANONYMOUS_PROPERTIES,
      props : respTodo
    };
  };
  /**
   * @return {?}
   */
  $scope.disableOnTab = function() {
    return {
      type : $scope.t.DISABLE_ON_TAB
    };
  };
  /**
   * @param {string} appDomain
   * @return {?}
   */
  $scope.showDisableReminder = function(appDomain) {
    return {
      type : $scope.t.SHOW_DISABLE_REMINDER,
      domain : appDomain
    };
  };
  /**
   * @param {string} appDomain
   * @return {?}
   */
  $scope.disableReminder = function(appDomain) {
    return {
      type : $scope.t.DISABLE_REMINDER_NOTIFICATION,
      domain : appDomain
    };
  };
  /**
   * @return {?}
   */
  $scope.showEdgePopupFromGButton = function() {
    return {
      type : $scope.t.EDGE_POPUP_FROM_GBUTTON
    };
  };
  /**
   * @param {?} canCreateDiscussions
   * @return {?}
   */
  $scope.showLoginReminder = function(canCreateDiscussions) {
    return {
      type : $scope.t.SHOW_LOGIN_REMINDER,
      loginReminderType : canCreateDiscussions
    };
  };
  /**
   * @return {?}
   */
  $scope.hideLoginReminder = function() {
    return {
      type : $scope.t.HIDE_LOGIN_REMINDER
    };
  };
  /**
   * @return {?}
   */
  $scope.disableLoginReminder = function() {
    return {
      type : $scope.t.DISABLE_LOGIN_REMINDER
    };
  };
  /**
   * @return {?}
   */
  $scope.disableEmailSummarization = function() {
    return {
      type : $scope.t.DISABLE_EMAIL_SUMMARIZATION
    };
  };
  /**
   * @param {!Object} canCreateDiscussions
   * @return {?}
   */
  $scope.saveEmailConnectednessData = function(canCreateDiscussions) {
    return {
      type : $scope.t.SAVE_EMAIL_CONNECTEDNESS_DATA,
      emailConnectednessData : canCreateDiscussions
    };
  };
  /**
   * @return {?}
   */
  $scope.hideEmotionsPrompt = function() {
    return {
      type : $scope.t.HIDE_EMOTIONS_PROMPT
    };
  };
  /**
   * @param {!Object} instancesTypes
   * @return {?}
   */
  $scope.changeEmotionsFeature = function(instancesTypes) {
    return {
      type : $scope.t.CHANGE_EMOTIONS_FEATURE,
      data : instancesTypes
    };
  };
  /**
   * @param {!Object} instancesTypes
   * @return {?}
   */
  $scope.setEmotionsEmojiState = function(instancesTypes) {
    return {
      type : $scope.t.SET_EMOTIONS_EMOJI_STATE,
      data : instancesTypes
    };
  };
  /**
   * @return {?}
   */
  $scope.seenClarityNotification = function() {
    return {
      type : $scope.t.SEEN_CLARITY_NOTIFICATION
    };
  };
  /**
   * @return {?}
   */
  $scope.setSafariMigrationPopupShownTimestamp = function() {
    return {
      type : $scope.t.SET_SAFARI_MIGRATION_POPUP_SHOWN_TIMESTAMP
    };
  };
  /**
   * @return {?}
   */
  $scope.setSafariMigrationBackupNotifFirstTimestamp = function() {
    return {
      type : $scope.t.SET_SAFARI_MIGRATION_BACKUP_NOTIFY_FIRST_TIMESTAMP
    };
  };
  /**
   * @return {?}
   */
  $scope.setSafariMigrationBackupNotifSecondTimestamp = function() {
    return {
      type : $scope.t.SET_SAFARI_MIGRATION_BACKUP_NOTIFY_FIRST_TIMESTAMP
    };
  };
  /**
   * @return {?}
   */
  $scope.showGmailSendEmailPremiumPopup = function() {
    return {
      type : $scope.t.SHOW_GMAIL_SEND_EMAIL_PREMIUM_POPUP
    };
  };
}, function(module, canCreateDiscussions, factory) {
  module.exports = factory(366);
}, , , , function(canCreateDiscussions, exports, n) {
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var $_constraints = {};
  exports.timers = {
    start : function(object) {
      /** @type {number} */
      $_constraints[object] = Date.now();
    },
    stop : function(object) {
      var keydownSignal = this.passed(object);
      return delete $_constraints[object], keydownSignal;
    },
    passed : function(symbol) {
      return symbol && $_constraints[symbol] ? Date.now() - $_constraints[symbol] : 0;
    }
  };
}, , , , , , , , , , , , function(canCreateDiscussions, exports, n) {
  var i = this && this.__extends || function(obj, data) {
    /**
     * @return {undefined}
     */
    function BlobError() {
      this.constructor = obj;
    }
    var i;
    for (i in data) {
      if (data.hasOwnProperty(i)) {
        obj[i] = data[i];
      }
    }
    obj.prototype = null === data ? Object.create(data) : (BlobError.prototype = data.prototype, new BlobError);
  };
  var UnsubscriptionError = function(e) {
    /**
     * @param {!Object} errors
     * @return {undefined}
     */
    function t(errors) {
      e.call(this);
      /** @type {!Object} */
      this.errors = errors;
      var err = Error.call(this, errors ? errors.length + " errors occurred during unsubscription:\n  " + errors.map(function(pingErr, canCreateDiscussions) {
        return canCreateDiscussions + 1 + ") " + pingErr.toString();
      }).join("\n  ") : "");
      /** @type {string} */
      this.name = err.name = "UnsubscriptionError";
      this.stack = err.stack;
      this.message = err.message;
    }
    return i(t, e), t;
  }(Error);
  exports.UnsubscriptionError = UnsubscriptionError;
}, , function(mixin, canCreateDiscussions, __webpack_require__) {
  var isObject = __webpack_require__(8);
  var eachTextNode = __webpack_require__(50);
  /** @type {number} */
  var NAN = NaN;
  /** @type {!RegExp} */
  var a = /^\s+|\s+$/g;
  /** @type {!RegExp} */
  var c = /^[-+]0x[0-9a-f]+$/i;
  /** @type {!RegExp} */
  var s = /^0b[01]+$/i;
  /** @type {!RegExp} */
  var trueRE = /^0o[0-7]+$/i;
  /** @type {function(*, (number|undefined)): number} */
  var freeParseInt = parseInt;
  /**
   * @param {?} value
   * @return {?}
   */
  mixin.exports = function(value) {
    if ("number" == typeof value) {
      return value;
    }
    if (eachTextNode(value)) {
      return NAN;
    }
    if (isObject(value)) {
      var other = "function" == typeof value.valueOf ? value.valueOf() : value;
      value = isObject(other) ? other + "" : other;
    }
    if ("string" != typeof value) {
      return 0 === value ? value : +value;
    }
    /** @type {string} */
    value = value.replace(a, "");
    /** @type {boolean} */
    var isBinary = s.test(value);
    return isBinary || trueRE.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : c.test(value) ? NAN : +value;
  };
}, , , , , function(canCreateDiscussions, api, $) {
  Object.defineProperty(api, "__esModule", {
    value : true
  });
  var root = $(0);
  var relativeUrlImg = $(139);
  var $existing_results = $(159);
  var $music = $(320);
  var relativeUrlWithSlashImg = $(321);
  var self = $(160);
  var $realtime = $(275);
  var et = $(4);
  var sandbox = $(10);
  var _this = $(1);
  var $gBCRBottom = $(324);
  var ReactiveLoop = function() {
    /**
     * @param {string} from
     * @return {undefined}
     */
    function Connection(from) {
      this.port = chrome.runtime.connect({
        name : from
      });
    }
    return Connection.prototype.onMessage = function(key) {
      this.port.onMessage.addListener(key);
    }, Connection.prototype.onDisconnect = function(message) {
      this.port.onDisconnect.addListener(message);
    }, Connection.prototype.postMessage = function(data) {
      this.port.postMessage(data);
    }, Connection;
  }();
  var Date = function() {
    /**
     * @param {!Object} data
     * @return {undefined}
     */
    function Editor(data) {
      /** @type {!Object} */
      this._port = data;
      this.sender = {};
      var s = data.sender;
      var pkg = data.name;
      this.name = pkg;
      if (s) {
        this.sender.url = s.url;
        if (s.tab && s.tab.url && s.tab.id) {
          this.sender.tab = {
            url : s.tab.url,
            id : s.tab.id
          };
        }
      }
    }
    return Editor.prototype.onMessage = function(key) {
      this._port.onMessage.addListener(key);
    }, Editor.prototype.onDisconnect = function(message) {
      this._port.onDisconnect.addListener(message);
    }, Editor.prototype.postMessage = function(data) {
      this._port.postMessage(data);
    }, Editor;
  }();
  var Api = function() {
    return function() {
      var me = this;
      this.alarms = new relativeUrlWithSlashImg.ChromeAlarmsApiImpl;
      this.tabs = new $music.ChromeTabsApiImpl;
      this.notification = {
        kind : "web-extension",
        create : function(name) {
          return _this.SafePromise.create(function(button, onRejected) {
            var chromeNotifications = chrome.notifications;
            var string = et.guid();
            chromeNotifications.create(string, Object.assign({
              type : "basic"
            }, name), function() {
              self.handleChromeError(function() {
                var toggleRewards = new root.Observable(function(e) {
                  /**
                   * @param {undefined} type
                   * @return {?}
                   */
                  var t = function(type) {
                    return type === string && e.next(type);
                  };
                  return chromeNotifications.onClicked.addListener(t), function() {
                    return chromeNotifications.onClicked.removeListener(t);
                  };
                });
                var tableButtonClick = new root.Observable(function(q) {
                  /**
                   * @param {string} t
                   * @param {?} scale
                   * @return {?}
                   */
                  var t = function(t, scale) {
                    return t === string && q.next({
                      id : t,
                      buttonIndex : scale
                    });
                  };
                  return chromeNotifications.onButtonClicked.addListener(t), function() {
                    return chromeNotifications.onButtonClicked.removeListener(t);
                  };
                });
                var removePopovers = new root.Observable(function(m) {
                  /**
                   * @param {string} type
                   * @param {boolean} spy
                   * @return {?}
                   */
                  var wrap = function(type, spy) {
                    return type === string && m.next({
                      id : type,
                      byUser : spy
                    });
                  };
                  return chromeNotifications.onClosed.addListener(wrap), function() {
                    return chromeNotifications.onClosed.removeListener(wrap);
                  };
                });
                button({
                  id : string,
                  click : toggleRewards,
                  buttonClick : tableButtonClick,
                  close : removePopovers
                });
              }, onRejected);
            });
          });
        },
        clear : function(array) {
          return _this.SafePromise.create(function(saveNotifs, onRejected) {
            chrome.notifications.clear(array, function(notifications) {
              self.handleChromeError(function() {
                return saveNotifs(notifications);
              }, onRejected);
            });
          });
        }
      };
      this.cookies = {
        kind : "web-extension",
        get : function(key) {
          return _this.SafePromise.create(function(saveNotifs, onRejected) {
            return chrome.cookies.get(key, function(notifications) {
              return self.handleChromeError(function() {
                return saveNotifs(notifications);
              }, onRejected);
            });
          });
        },
        remove : function(fn) {
          return new Promise(function(saveNotifs, onRejected) {
            return chrome.cookies.remove(fn, function() {
              return self.handleChromeError(function() {
                return saveNotifs(null);
              }, onRejected);
            });
          });
        },
        getAll : function(ids) {
          return _this.SafePromise.create(function(saveNotifs, onRejected) {
            return chrome.cookies.getAll(ids, function(notifications) {
              return self.handleChromeError(function() {
                return saveNotifs(notifications);
              }, onRejected);
            });
          });
        },
        set : function(name) {
          return _this.SafePromise.create(function(saveNotifs, onRejected) {
            return chrome.cookies.set(name, function(notifications) {
              return self.handleChromeError(function() {
                return saveNotifs(notifications);
              }, onRejected);
            });
          });
        },
        watch : function(data, cb) {
          chrome.cookies.onChanged.addListener(function(result) {
            var item = result.cookie;
            var err = result.cause;
            if (!(!item || !item.name || data.path && data.path !== item.path || data.name !== item.name || data.domain && -1 === item.domain.indexOf(data.domain))) {
              if ("explicit" === err) {
                cb(item);
              }
              if ("expired_overwrite" === err) {
                cb();
              }
            }
          });
        }
      };
      this.preferences = $realtime.preferencesApi.windowLocalStorage;
      this.button = {
        kind : "web-extension",
        setBadge : function(color) {
          chrome.browserAction.setBadgeText({
            text : color
          });
        },
        setIconByName : function(name) {
          /** @type {string} */
          var instanceName = "./src/icon/icon";
          /** @type {string} */
          var nameSuffix = name ? "-" + name : "";
          chrome.browserAction.setIcon({
            path : {
              16 : instanceName + "16" + nameSuffix + ".png",
              32 : instanceName + "32" + nameSuffix + ".png"
            }
          });
        },
        setBadgeBackgroundColor : function(color) {
          chrome.browserAction.setBadgeBackgroundColor({
            color : color
          });
        }
      };
      this.management = {
        uninstallSelf : function() {
          chrome.management.uninstallSelf();
        }
      };
      this.message = "bg" === sandbox.getGlobal().bundleInfo.context ? new relativeUrlImg.GenericBackgroundMessageApiImpl(function(prettyDateFilter) {
        return chrome.runtime.onConnect.addListener(function(since) {
          return prettyDateFilter(new Date(since));
        });
      }, this.tabs.getActiveTab.bind(this.tabs), this.tabs.getAllTabs.bind(this.tabs)) : new $existing_results.GenericContentScriptMessageApiImpl(function(a) {
        return new ReactiveLoop(a);
      });
      this._baseUrl = _this.try_(function() {
        return chrome.extension.getURL("");
      }, function(canCreateDiscussions) {
        return null;
      });
      /**
       * @return {?}
       */
      this.fetchBlacklistConfig = function() {
        return $gBCRBottom.fetchBlacklist();
      };
      /**
       * @param {!Object} name
       * @return {?}
       */
      this.getUrl = function(name) {
        return me._baseUrl ? me._baseUrl + name : chrome.extension.getURL(name);
      };
      /**
       * @param {string} event
       * @return {?}
       */
      this.openUrl = function(event) {
        return me.tabs.open(event, true);
      };
      /**
       * @param {!Object} t
       * @param {string} name
       * @return {?}
       */
      this.isExtensionUrl = function(t, name) {
        return me.getUrl(t) === name;
      };
      /**
       * @return {?}
       */
      this.reload = function() {
        return chrome.runtime.reload();
      };
    };
  }();
  /**
   * @return {?}
   */
  api.createApi = function() {
    return new Api;
  };
}, function(canCreateDiscussions, exports, __webpack_require__) {
  var Subscriber_1 = __webpack_require__(9);
  var rxSubscriber_1 = __webpack_require__(109);
  var Observer_1 = __webpack_require__(154);
  /**
   * @param {!Function} nextOrObserver
   * @param {!Function} error
   * @param {!Function} complete
   * @return {?}
   */
  exports.toSubscriber = function(nextOrObserver, error, complete) {
    if (nextOrObserver) {
      if (nextOrObserver instanceof Subscriber_1.Subscriber) {
        return nextOrObserver;
      }
      if (nextOrObserver[rxSubscriber_1.rxSubscriber]) {
        return nextOrObserver[rxSubscriber_1.rxSubscriber]();
      }
    }
    return nextOrObserver || error || complete ? new Subscriber_1.Subscriber(nextOrObserver, error, complete) : new Subscriber_1.Subscriber(Observer_1.empty);
  };
}, function(canCreateDiscussions, t, n) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var end = n(0);
  var p = n(160);
  var m = n(1);
  var offsetFromCenter = function() {
    /**
     * @return {undefined}
     */
    function w() {
      /** @type {string} */
      this.kind = "web-extension";
    }
    return w.prototype.open = function(source, index) {
      return m.SafePromise.create(function(saveNotifs, onRejected) {
        chrome.tabs.create({
          url : source,
          active : index
        }, function(notifications) {
          p.handleChromeError(function() {
            return saveNotifs(notifications);
          }, onRejected);
        });
      });
    }, w.prototype.updateCurrent = function(to) {
      return m.SafePromise.create(function(saveNotifs, onRejected) {
        chrome.tabs.update({
          url : to
        }, function(notifications) {
          p.handleChromeError(function() {
            return saveNotifs(notifications);
          }, onRejected);
        });
      });
    }, w.prototype.getActiveTab = function() {
      return m.SafePromise.create(function(e, onRejected) {
        var chromeTabs = chrome.tabs;
        chromeTabs.query({
          active : true,
          lastFocusedWindow : true
        }, function(b) {
          p.handleChromeError(function() {
            if (b && b.length) {
              e(b[0]);
            } else {
              chromeTabs.query({
                active : true
              }, function(value) {
                p.handleChromeError(function() {
                  e(value[0]);
                }, onRejected);
              });
            }
          }, onRejected);
        });
      });
    }, w.prototype.getAllTabs = function() {
      return m.SafePromise.create(function(saveNotifs, onRejected) {
        return chrome.tabs.query({}, function(notifications) {
          return p.handleChromeError(function() {
            return saveNotifs(notifications);
          }, onRejected);
        });
      });
    }, w.prototype.getActiveTabUrl = function() {
      var tabPanel = this;
      return m.SafePromise.create(function(lambda, onRejected) {
        return tabPanel.getActiveTab().then(function(data) {
          return p.handleChromeError(function() {
            return lambda(data && data.url);
          }, onRejected);
        });
      });
    }, w.prototype.onActiveTabChange = function(compare, fn) {
      var tabPanel = this;
      /**
       * @param {?} fileData
       * @return {undefined}
       */
      var getFileJSON = function(fileData) {
        p.handleChromeError(function() {
          if (fileData) {
            compare(fileData);
          }
        }, fn);
      };
      chrome.tabs.onActivated.addListener(function(active_info) {
        return chrome.tabs.get(active_info.tabId, function(fileData) {
          return getFileJSON(fileData);
        });
      });
      chrome.tabs.onUpdated.addListener(function(x, tab) {
        tabPanel.getActiveTab().then(function(data) {
          if (data && data.id === x && (tab.url || tab.favIconUrl || "complete" === tab.status)) {
            chrome.tabs.get(x, function(fileData) {
              return getFileJSON(fileData);
            });
          }
        });
      });
      chrome.windows.onFocusChanged.addListener(function(senderWindowId) {
        return chrome.tabs.query({
          active : true,
          windowId : senderWindowId,
          lastFocusedWindow : true
        }, function(canCreateDiscussions) {
          return getFileJSON(canCreateDiscussions[0]);
        });
      });
      this.getActiveTab().then(function(fileData) {
        return getFileJSON(fileData);
      });
    }, w.prototype.tabUrlChange = function() {
      return new end.Observable(function(serverApiService) {
        /**
         * @param {string} category
         * @param {!Object} action
         * @param {!Object} params
         * @return {undefined}
         */
        var t = function(category, action, params) {
          if ("complete" === action.status) {
            serverApiService.next({
              id : category,
              url : params.url
            });
          }
        };
        return chrome.tabs.onUpdated.addListener(t), function() {
          return chrome.tabs.onUpdated.removeListener(t);
        };
      });
    }, w.prototype.reload = function(rel) {
      return m.SafePromise.create(function(mw, onRejected) {
        /**
         * @return {?}
         */
        var next = function() {
          return p.handleChromeError(function() {
            return mw();
          }, onRejected);
        };
        if (rel) {
          chrome.tabs.reload(rel, {}, next);
        } else {
          chrome.tabs.reload(next);
        }
      });
    }, w;
  }();
  t.ChromeTabsApiImpl = offsetFromCenter;
}, function(canCreateDiscussions, t, saveNotifs) {
  var f;
  var interpolateBar = this && this.__extends || (f = function(shape, t) {
    return (f = Object.setPrototypeOf || {
      __proto__ : []
    } instanceof Array && function(json, b) {
      /** @type {!Object} */
      json.__proto__ = b;
    } || function(scope, args) {
      var key;
      for (key in args) {
        if (args.hasOwnProperty(key)) {
          scope[key] = args[key];
        }
      }
    })(shape, t);
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    f(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var offsetFromCenter = function(testItemData) {
    /**
     * @return {?}
     */
    function t() {
      return null !== testItemData && testItemData.apply(this, arguments) || this;
    }
    return interpolateBar(t, testItemData), t.prototype.create = function(name, data) {
      /** @type {null} */
      var n = null;
      /** @type {number} */
      var autoResumeTimer = setTimeout(function() {
        if (data.period) {
          /** @type {number} */
          n = setInterval(name, data.period);
        }
        name();
      }, data.delay);
      return {
        dispose : function() {
          clearTimeout(autoResumeTimer);
          if (null !== n) {
            clearInterval(n);
          }
        }
      };
    }, t;
  }(saveNotifs(322).StubAlarmsApiImpl);
  t.ChromeAlarmsApiImpl = offsetFromCenter;
}, function(canCreateDiscussions, t, require) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var zrUtil = require(1);
  var Logger = require(3);
  var offsetFromCenter = function() {
    /**
     * @return {undefined}
     */
    function Server() {
      this._log = Logger.Logger.create("extension-api.alarms.stub");
      /** @type {string} */
      this._warning = "Method is not implemented";
    }
    return Server.prototype.create = function(name, s) {
      return this._log.warn(this._warning), {
        dispose : zrUtil.noOp
      };
    }, Server;
  }();
  t.StubAlarmsApiImpl = offsetFromCenter;
}, function(canCreateDiscussions, ctx, normalize) {
  /**
   * @param {!Object} p
   * @param {!Function} f
   * @return {?}
   */
  function init(p, f) {
    return {
      get : p.get.bind(p),
      set : p.set.bind(p),
      getAll : p.getAll.bind(p),
      remove : p.remove.bind(p),
      removeAll : function() {
        return RejectPromise(this, void 0, void 0, function() {
          var result;
          return respond(this, function(_context) {
            switch(_context.label) {
              case 0:
                return [4, p.getAll()];
              case 1:
                return result = _context.sent(), [4, p.removeAll()];
              case 2:
                return _context.sent(), [4, Promise.all(Object.keys(result).filter(f).map(function(i) {
                  return p.set(i, result[i]);
                }))];
              case 3:
                return _context.sent(), [2];
            }
          });
        });
      }
    };
  }
  var RejectPromise = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var respond = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(ctx, "__esModule", {
    value : true
  });
  var b;
  var bundled;
  var o = normalize(59);
  var base = normalize(1);
  var path = normalize(276);
  /** @type {string} */
  (bundled = b || (b = {}))[bundled.nonEmptyMigration = 0] = "nonEmptyMigration";
  /** @type {string} */
  bundled[bundled.emptyMigration = 1] = "emptyMigration";
  /** @type {function(!Object, !Function): ?} */
  ctx.createMigrationAwareApi = init;
  var grLineWidth = function() {
    /**
     * @param {string} name
     * @param {!Object} value
     * @param {!Object} str
     * @param {number} _
     * @return {undefined}
     */
    function next(name, value, str, _) {
      if (void 0 === _) {
        /** @type {!Array} */
        _ = [];
      }
      var o = this;
      /** @type {string} */
      this._name = name;
      /** @type {!Object} */
      this._source = value;
      /** @type {!Object} */
      this._destination = str;
      /** @type {number} */
      this._destValuesToKeep = _;
      /** @type {string} */
      this._migrationFlagSuccessfulValue = "ok";
      /** @type {string} */
      this._migrationFlagUniqueKey = "104ccd8c-9919-9ae4-931f-782fb197486c";
      /** @type {string} */
      this._migrationFlagKey = "__migration-" + this._migrationFlagUniqueKey + ":(" + this._name + ")";
      /** @type {boolean} */
      this._migrationInProgress = false;
      this.migrationAwareDestination = init(this._destination, function(index) {
        return index === o._migrationFlagKey;
      });
    }
    return next.prototype._getMigrated = function() {
      var data = this;
      return this._destination.get(this._migrationFlagKey).then(function(withPlayer) {
        return withPlayer === data._migrationFlagSuccessfulValue;
      });
    }, next.prototype._setMigrated = function() {
      return RejectPromise(this, void 0, void 0, function() {
        var to3;
        return respond(this, function(_context) {
          switch(_context.label) {
            case 0:
              return [4, this._destination.set(this._migrationFlagKey, this._migrationFlagSuccessfulValue)];
            case 1:
              return _context.sent(), [4, this._destination.get(this._migrationFlagKey)];
            case 2:
              if ((to3 = _context.sent()) !== this._migrationFlagSuccessfulValue) {
                throw new Error("Could not verify status write, actual value: " + to3);
              }
              return [2];
          }
        });
      });
    }, next.prototype._runMigration = function() {
      return RejectPromise(this, void 0, void 0, function() {
        var x;
        var isVertical;
        var func;
        var ret;
        var a;
        var that = this;
        return respond(this, function(_a) {
          switch(_a.label) {
            case 0:
              base.assert(!this._migrationInProgress, "migration already in progress");
              /** @type {boolean} */
              this._migrationInProgress = true;
              /** @type {number} */
              _a.label = 1;
            case 1:
              return _a.trys.push([1, 7, , 8]), [4, this._source.getAll()];
            case 2:
              return x = _a.sent(), isVertical = 0 === Object.keys(x).length, [4, Promise.all(this._destValuesToKeep.map(function(j) {
                return that._destination.get(j).then(function(len) {
                  if (null != len) {
                    x[j] = len;
                  }
                });
              }))];
            case 3:
              return _a.sent(), [4, this._destination.removeAll()];
            case 4:
              return _a.sent(), [4, Promise.all(Object.keys(x).filter(function(propertyTo) {
                return null != x[propertyTo];
              }).map(function(type) {
                return that._destination.set(type, x[type]);
              }))];
            case 5:
              return _a.sent(), func = path, ret = [x], [4, this._destination.getAll()];
            case 6:
              if (!func.apply(void 0, ret.concat([_a.sent()]))) {
                throw new Error("Could not verify write");
              }
              return this._migrationInProgress = false, [2, isVertical ? b.emptyMigration : b.nonEmptyMigration];
            case 7:
              throw a = _a.sent(), this._migrationInProgress = false, a;
            case 8:
              return [2];
          }
        });
      });
    }, next.prototype.ensureMigrationCompleted = function() {
      return RejectPromise(this, void 0, void 0, function() {
        var to3;
        return respond(this, function(_context) {
          switch(_context.label) {
            case 0:
              return [4, this._getMigrated()];
            case 1:
              return _context.sent() ? [2, o.StorageMigrationResult.alreadyMigrated] : [3, 2];
            case 2:
              return [4, this._runMigration()];
            case 3:
              return to3 = _context.sent(), [4, this._setMigrated()];
            case 4:
              switch(_context.sent(), to3) {
                case b.nonEmptyMigration:
                  return [2, o.StorageMigrationResult.success];
                case b.emptyMigration:
                  return [2, o.StorageMigrationResult.successWithEmpty];
                default:
                  throw to3, new Error("Match not exhaustive: " + to3);
              }/** @type {number} */
              _context.label = 5;
            case 5:
              return [2];
          }
        });
      });
    }, next;
  }();
  ctx.StorageMigration = grLineWidth;
}, function(canCreateDiscussions, BeautifulProperties, SmartHttpRemote) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var remote = SmartHttpRemote(10);
  /**
   * @return {?}
   */
  BeautifulProperties.fetchBlacklist = function() {
    return fetch(remote.getGlobal().appConfig.url.pageConfigUrl, {
      credentials : "include"
    }).then(function(res) {
      return res.ok ? res.json() : res.text().then(function(successDesc) {
        throw {
          name : "RequestError",
          body : successDesc,
          statusCode : res.status,
          message : res.statusText
        };
      });
    }).then(function(options) {
      if ("string" != typeof options && options && options.error) {
        throw new Error(options.error);
      }
      return options;
    });
  };
}, , , , , function(mixin, canCreateDiscussions, saveNotifs) {
  var shimDefs = saveNotifs(11);
  /**
   * @return {?}
   */
  mixin.exports = function() {
    return shimDefs.Date.now();
  };
}, function(mixin, canCreateDiscussions, require) {
  var Database = require(98);
  var v = require(193);
  var normalize = require(332);
  var isNumber = require(6);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return (isNumber(obj) ? Database : v)(obj, normalize(name));
  };
}, function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(28);
  /**
   * @param {!Object} key
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(key, name) {
    return function(e, predicate) {
      if (null == e) {
        return e;
      }
      if (!next(e)) {
        return key(e, predicate);
      }
      var index = e.length;
      var i = name ? index : -1;
      /** @type {!Object} */
      var obj = Object(e);
      for (; (name ? i-- : ++i < index) && false !== predicate(obj[i], i, obj);) {
      }
      return e;
    };
  };
}, function(mixin, canCreateDiscussions, exprFn) {
  var arg = exprFn(51);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return "function" == typeof obj ? obj : arg;
  };
}, function(mixin, canCreateDiscussions, require) {
  var extend = require(68);
  var balanced = require(126);
  var defaults = require(57);
  var m = balanced(function(ListApi, params) {
    extend(params, defaults(params), ListApi);
  });
  mixin.exports = m;
}, function(canCreateDiscussions, t, String) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var res = String(81);
  var which = String(4);
  var offsetFromCenter = function() {
    /**
     * @param {string} app
     * @param {string} appName
     * @param {?} adminAngularName
     * @param {string} adminFolderName
     * @param {?} adminFileName
     * @return {undefined}
     */
    function set(app, appName, adminAngularName, adminFolderName, adminFileName) {
      /** @type {string} */
      this._baseUrl = app;
      /** @type {string} */
      this._appName = appName;
      this._appVersion = adminAngularName;
      /** @type {string} */
      this._env = adminFolderName;
      this._fetch = adminFileName;
      this._context = {
        userId : void 0,
        containerId : void 0
      };
      this._sessionId = which.guid();
      this._logEndpoint = res.felogLogEndpoint(this._baseUrl);
      this._crashEndpoint = res.felogCrashEndpoint(this._baseUrl);
    }
    return set.prototype.setUserId = function(id) {
      /** @type {!Object} */
      this._context = Object.assign({}, this._context, {
        userId : id
      });
    }, set.prototype.setContainerId = function(id) {
      /** @type {!Object} */
      this._context = Object.assign({}, this._context, {
        containerId : id
      });
    }, set.prototype.getContext = function() {
      return this._context;
    }, set.prototype._sendRaw = function(arg, message) {
      return this._fetch(arg, {
        mode : "cors",
        headers : {
          "Content-Type" : "application/json"
        },
        method : "post",
        cache : "no-cache",
        body : JSON.stringify(message)
      }).then(function(canCreateDiscussions) {
      }, function(canCreateDiscussions) {
      });
    }, set.prototype.sendEvent = function(callback) {
      var cb = res.createEventPayload(callback, {
        application : this._appName,
        version : this._appVersion,
        env : this._env,
        context : this.getContext()
      });
      return this._sendRaw(this._logEndpoint, cb);
    }, set.prototype.sendCrashLog = function(array) {
      var self = this;
      var cb = array.map(function(data) {
        return res.createEventPayload(data, {
          application : self._appName,
          version : self._appVersion,
          sessionId : self._sessionId,
          env : self._env,
          context : self.getContext()
        });
      });
      return this._sendRaw(this._crashEndpoint, cb);
    }, set.prototype.sendUsageEvent = function(log, result, value, position) {
      var cb = res.createEventPayload({
        logger : log,
        message : result,
        level : value,
        extra_usage : position
      }, {
        application : this._appName,
        version : this._appVersion,
        env : this._env
      });
      return this._sendRaw(this._logEndpoint, cb);
    }, set;
  }();
  t.DefaultFelogClient = offsetFromCenter;
}, function(canCreateDiscussions, t, speedTest) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var test = speedTest(81);
  var offsetFromCenter = function() {
    /**
     * @param {string} app
     * @param {string} appName
     * @param {?} adminAngularName
     * @param {string} adminFolderName
     * @param {?} adminFileName
     * @return {undefined}
     */
    function Session(app, appName, adminAngularName, adminFolderName, adminFileName) {
      /** @type {string} */
      this._baseUrl = app;
      /** @type {string} */
      this._appName = appName;
      this._appVersion = adminAngularName;
      /** @type {string} */
      this._env = adminFolderName;
      this._fetch = adminFileName;
      this._context = {
        userId : void 0,
        containerId : void 0
      };
    }
    return Session.prototype.setUserId = function(id) {
      /** @type {!Object} */
      this._context = Object.assign({}, this._context, {
        userId : id
      });
    }, Session.prototype.setContainerId = function(id) {
      /** @type {!Object} */
      this._context = Object.assign({}, this._context, {
        containerId : id
      });
    }, Session.prototype.getContext = function() {
      return this._context;
    }, Session.prototype.send = function(name) {
      var setting = test.createEventPayload(name, {
        application : this._appName,
        version : this._appVersion,
        env : this._env,
        context : this.getContext()
      });
      return this._fetch(this._baseUrl, {
        mode : "no-cors",
        method : "post",
        headers : {
          "Content-Type" : "application/json"
        },
        cache : "no-cache",
        body : JSON.stringify(setting)
      });
    }, Session;
  }();
  t.SumoLogicClient = offsetFromCenter;
}, function(canCreateDiscussions, defaultTagAttributes, $) {
  var self = $(482);
  var e = $(487);
  var schema = $(489);
  /** @type {string} */
  var type = "[object Object]";
  var funcProto = Function.prototype;
  var ObjProto = Object.prototype;
  /** @type {function(this:!Function): string} */
  var funcToString = funcProto.toString;
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = ObjProto.hasOwnProperty;
  /** @type {string} */
  var val = funcToString.call(Object);
  /**
   * @param {!Object} obj
   * @return {?}
   */
  defaultTagAttributes.a = function(obj) {
    if (!Object(schema.a)(obj) || Object(self.a)(obj) != type) {
      return false;
    }
    var proto = Object(e.a)(obj);
    if (null === proto) {
      return true;
    }
    var value = hasOwnProperty.call(proto, "constructor") && proto.constructor;
    return "function" == typeof value && value instanceof value && funcToString.call(value) == val;
  };
}, function(canCreateDiscussions, $scope, n) {
  Object.defineProperty($scope, "__esModule", {
    value : true
  });
  $scope.t = {
    SET_USER : "user/SET_USER",
    SET_GROUPS : "user/SET_GROUPS",
    SET_SETTINGS : "user/SET_SETTINGS",
    SESSION_INVALIDATE : "user/SESSION_INVALIDATE",
    INC_FIXED : "user/INC_FIXED",
    UPDATE_GROUPS : "user/UPDATE_GROUPS"
  };
  /**
   * @param {!Object} login
   * @return {?}
   */
  $scope.setUser = function(login) {
    return {
      type : $scope.t.SET_USER,
      data : login
    };
  };
  /**
   * @param {!Object} scope
   * @return {?}
   */
  $scope.setGroups = function(scope) {
    return {
      type : $scope.t.SET_GROUPS,
      data : scope
    };
  };
  /**
   * @param {!Object} setting
   * @return {?}
   */
  $scope.setSettings = function(setting) {
    return {
      type : $scope.t.SET_SETTINGS,
      data : setting
    };
  };
  /**
   * @param {string} type
   * @return {?}
   */
  $scope.sessionInvalidate = function(type) {
    return {
      type : $scope.t.SESSION_INVALIDATE,
      reason : type
    };
  };
  /**
   * @return {?}
   */
  $scope.incFixed = function() {
    return {
      type : $scope.t.INC_FIXED
    };
  };
  /**
   * @return {?}
   */
  $scope.updateGroups = function() {
    return {
      type : $scope.t.UPDATE_GROUPS
    };
  };
}, function(canCreateDiscussions, t, require) {
  var print = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var barScaleSmall = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var center = this;
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var storageService = require(10);
  var advertisement = require(148);
  var TagHourlyStat = require(149);
  var WebInspector = require(506);
  var Minder = require(1);
  /**
   * @param {!Object} fn
   * @return {?}
   */
  t.init = function(fn) {
    return print(this, void 0, void 0, function() {
      var w;
      var errResponse;
      return barScaleSmall(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 2, , 3]), [4, function(options) {
              return print(this, void 0, void 0, function() {
                var record;
                var right;
                var info;
                var data;
                var layer;
                var node;
                var i;
                var s;
                var numvarnames;
                var yourInvestment;
                return barScaleSmall(this, function(_context) {
                  switch(_context.label) {
                    case 0:
                      return record = window.fetch.bind(window), right = options.bundleInfo.browser, info = options.appConfig.gnar, data = "safariApp" === options.bundleInfo.bundleType ? new WebInspector.CookieStorage(".grammarly.com") : "chrome" === right ? new WebInspector.ChromeCookieStorage(info.url, info.domain) : "firefox" === right ? new WebInspector.ReadonlyWebExtensionsCookieStorage(info.url, info.domain) : "edge" === right || "safari" === right ? new WebInspector.BackendStorage(record, 
                      info.url) : Minder.assertNever(right), layer = "firefox" === right || "safariApp" === options.bundleInfo.bundleType ? [] : [new WebInspector.CookieStorage(info.domain), new WebInspector.LocalStorage, new WebInspector.MemoryStorage], node = new WebInspector.ContainerIdManager(data, layer, null, "chrome" === right ? 1E3 : 5E3), "safariApp" !== options.bundleInfo.bundleType ? [3, 3] : (i = node.key(), s = window.bgInitArgs, numvarnames = s && s.companionContainerId, [4, data.safeGetValue(i)]);
                    case 1:
                      return null != _context.sent() ? [3, 3] : (yourInvestment = null == numvarnames ? node.generateContainerId() : numvarnames, [4, data.safeSetValue(i, yourInvestment)]);
                    case 2:
                      _context.sent();
                      /** @type {number} */
                      _context.label = 3;
                    case 3:
                      return [2, {
                        ga : "firefox" !== right ? new WebInspector.GoogleAnalyticsClient(info.googleAnalyticsId, new WebInspector.GAClientIdManager(data, layer, null, "chrome" === right ? 1E3 : 5E3), false) : null,
                        gnar : new WebInspector.GnarClientImpl(info.url, info.appName, options.buildInfo.version, record, node, null, true)
                      }];
                  }
                });
              });
            }(storageService.getGlobal())];
          case 1:
            return w = _a.sent(), advertisement.tracker.gnar = w.gnar, advertisement.tracker.ga = w.ga || void 0, [2, new fn(w.gnar)];
          case 2:
            return errResponse = _a.sent(), TagHourlyStat.felog.gnarClientInitFail(errResponse && errResponse.message), [2, void 0];
          case 3:
            return [2];
        }
      });
    });
  };
  /**
   * @return {?}
   */
  t.getContainerIdOrUndefined = function() {
    return print(center, void 0, void 0, function() {
      var e;
      return barScaleSmall(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 4, , 5]), advertisement.tracker.gnar ? [4, advertisement.tracker.gnar.getContainerId()] : [3, 2];
          case 1:
            return e = _a.sent(), [3, 3];
          case 2:
            e = void 0;
            /** @type {number} */
            _a.label = 3;
          case 3:
            return [2, e];
          case 4:
            return _a.sent(), [2, void 0];
          case 5:
            return [2];
        }
      });
    });
  };
}, , , , , , , , , , , , , , , , , , , , function(canCreateDiscussions, self, n) {
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  /** @type {function(string, number): ?} */
  var repeat = self.repeat = function(f, times) {
    return (new Array(times + 1)).join(f);
  };
  /** @type {function(string, number): ?} */
  var addZeorn = self.pad = function(value, i) {
    return repeat("0", i - value.toString().length) + value;
  };
  /**
   * @param {!Date} value
   * @return {?}
   */
  self.formatTime = function(value) {
    return addZeorn(value.getHours(), 2) + ":" + addZeorn(value.getMinutes(), 2) + ":" + addZeorn(value.getSeconds(), 2) + "." + addZeorn(value.getMilliseconds(), 3);
  };
  /** @type {(Performance|function(new:Date, ?=, ?=, ?=, ?=, ?=, ?=, ?=): string)} */
  self.timer = "undefined" != typeof performance && null !== performance && "function" == typeof performance.now ? performance : Date;
}, function(canCreateDiscussions, err, __webpack_require__) {
  Object.defineProperty(err, "__esModule", {
    value : true
  });
  var clonedI = __webpack_require__(360);
  var __WEBPACK_LABELED_MODULE__3 = __webpack_require__(493);
  var _UiIcon = __webpack_require__(494);
  var a = __webpack_require__(495);
  var c = __webpack_require__(363);
  __webpack_require__(362);
  __webpack_require__.d(err, "createStore", function() {
    return clonedI.b;
  });
  __webpack_require__.d(err, "combineReducers", function() {
    return __WEBPACK_LABELED_MODULE__3.a;
  });
  __webpack_require__.d(err, "bindActionCreators", function() {
    return _UiIcon.a;
  });
  __webpack_require__.d(err, "applyMiddleware", function() {
    return a.a;
  });
  __webpack_require__.d(err, "compose", function() {
    return c.a;
  });
}, function(canCreateDiscussions, value, $) {
  $.d(value, "a", function() {
    return ActionTypes;
  });
  /**
   * @param {(Array|boolean|string)} reducer
   * @param {!Array} preloadedState
   * @param {?} enhancer
   * @return {?}
   */
  value.b = function createStore(reducer, preloadedState, enhancer) {
    /**
     * @return {undefined}
     */
    function publish() {
      if (a === c) {
        a = c.slice();
      }
    }
    /**
     * @return {?}
     */
    function getState() {
      return currentState;
    }
    /**
     * @param {!Function} e
     * @return {?}
     */
    function subscribe(e) {
      if ("function" != typeof e) {
        throw new Error("Expected listener to be a function.");
      }
      /** @type {boolean} */
      var t = true;
      return publish(), a.push(e), function() {
        if (t) {
          /** @type {boolean} */
          t = false;
          publish();
          var n = a.indexOf(e);
          a.splice(n, 1);
        }
      };
    }
    /**
     * @param {string} action
     * @return {?}
     */
    function dispatch(action) {
      if (!Object(self.a)(action)) {
        throw new Error("Actions must be plain objects. Use custom middleware for async actions.");
      }
      if (void 0 === action.type) {
        throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');
      }
      if (p) {
        throw new Error("Reducers may not dispatch actions.");
      }
      try {
        /** @type {boolean} */
        p = true;
        currentState = currentReducer(currentState, action);
      } finally {
        /** @type {boolean} */
        p = false;
      }
      var t = c = a;
      /** @type {number} */
      var k = 0;
      for (; k < t.length; k++) {
        var f = t[k];
        f();
      }
      return action;
    }
    var _ref2;
    if ("function" == typeof preloadedState && void 0 === enhancer) {
      /** @type {!Array} */
      enhancer = preloadedState;
      preloadedState = void 0;
    }
    if (void 0 !== enhancer) {
      if ("function" != typeof enhancer) {
        throw new Error("Expected the enhancer to be a function.");
      }
      return enhancer(createStore)(reducer, preloadedState);
    }
    if ("function" != typeof reducer) {
      throw new Error("Expected the reducer to be a function.");
    }
    /** @type {(Array|boolean|string)} */
    var currentReducer = reducer;
    /** @type {!Array} */
    var currentState = preloadedState;
    /** @type {!Array} */
    var c = [];
    var a = c;
    /** @type {boolean} */
    var p = false;
    dispatch({
      type : ActionTypes.INIT
    });
    return _ref2 = {
      dispatch : dispatch,
      subscribe : subscribe,
      getState : getState,
      replaceReducer : function(nextReducer) {
        if ("function" != typeof nextReducer) {
          throw new Error("Expected the nextReducer to be a function.");
        }
        /** @type {!Function} */
        currentReducer = nextReducer;
        dispatch({
          type : ActionTypes.INIT
        });
      }
    }, _ref2[msg.a] = function() {
      var _ref;
      /** @type {function(!Function): ?} */
      var outerSubscribe = subscribe;
      return (_ref = {
        subscribe : function(args) {
          /**
           * @return {undefined}
           */
          function update() {
            if (args.next) {
              args.next(getState());
            }
          }
          if ("object" != typeof args) {
            throw new TypeError("Expected the observer to be an object.");
          }
          update();
          var unsubscribe = outerSubscribe(update);
          return {
            unsubscribe : unsubscribe
          };
        }
      })[msg.a] = function() {
        return this;
      }, _ref;
    }, _ref2;
  };
  var self = $(336);
  var msg = $(490);
  var ActionTypes = {
    INIT : "@@redux/INIT"
  };
}, function(canCreateDiscussions, global, materialOpts) {
  var Symbol = materialOpts(483).a.Symbol;
  global.a = Symbol;
}, function(canCreateDiscussions, isSlidingUp, n) {
}, function(canCreateDiscussions, defaultTagAttributes, n) {
  /**
   * @return {?}
   */
  defaultTagAttributes.a = function() {
    /** @type {number} */
    var _len8 = arguments.length;
    /** @type {!Array} */
    var args = Array(_len8);
    /** @type {number} */
    var _key8 = 0;
    for (; _key8 < _len8; _key8++) {
      args[_key8] = arguments[_key8];
    }
    if (0 === args.length) {
      return function(x) {
        return x;
      };
    }
    if (1 === args.length) {
      return args[0];
    }
    return args.reduce(function(gstime, CropAreaRectangle) {
      return function() {
        return gstime(CropAreaRectangle.apply(void 0, arguments));
      };
    });
  };
}, function(canCreateDiscussions, exports, require) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  function _interopRequireWildcard(obj) {
    if (obj && obj.__esModule) {
      return obj;
    }
    var res = {};
    if (null != obj) {
      var name;
      for (name in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, name)) {
          res[name] = obj[name];
        }
      }
    }
    return res.default = obj, res;
  }
  /**
   * @param {!Object} obj
   * @return {?}
   */
  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
      default : obj
    };
  }
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  exports.utils = exports.effects = exports.takeLatest = exports.takeEvery = exports.storeIO = exports.runSaga = exports.isCancelError = exports.SagaCancellationException = void 0;
  var store = require(497);
  Object.defineProperty(exports, "runSaga", {
    enumerable : true,
    get : function() {
      return store.runSaga;
    }
  });
  Object.defineProperty(exports, "storeIO", {
    enumerable : true,
    get : function() {
      return store.storeIO;
    }
  });
  var col = require(498);
  Object.defineProperty(exports, "takeEvery", {
    enumerable : true,
    get : function() {
      return col.takeEvery;
    }
  });
  Object.defineProperty(exports, "takeLatest", {
    enumerable : true,
    get : function() {
      return col.takeLatest;
    }
  });
  var _Levels2 = _interopRequireDefault(require(499));
  var _aliapp2 = _interopRequireDefault(require(164));
  var preact = _interopRequireWildcard(require(366));
  var utils = _interopRequireWildcard(require(500));
  exports.default = _Levels2.default;
  var V = exports.SagaCancellationException = _aliapp2.default;
  /**
   * @param {?} object
   * @return {?}
   */
  exports.isCancelError = function(object) {
    return object instanceof V;
  };
  exports.effects = preact;
  exports.utils = utils;
}, function(canCreateDiscussions, t, require) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  /**
   * @return {?}
   */
  t.default = function() {
    /** @type {!Array} */
    var e = [];
    return {
      subscribe : function(name) {
        return e.push(name), function() {
          return (0, reductio_count.remove)(e, name);
        };
      },
      emit : function(name) {
        e.slice().forEach(function(next) {
          return next(name);
        });
      }
    };
  };
  var reductio_count = require(61);
}, function(canCreateDiscussions, exports, cloneDict) {
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  exports.select = exports.cancel = exports.join = exports.fork = exports.cps = exports.apply = exports.call = exports.race = exports.put = exports.take = void 0;
  var options = cloneDict(163);
  exports.take = options.take;
  exports.put = options.put;
  exports.race = options.race;
  exports.call = options.call;
  exports.apply = options.apply;
  exports.cps = options.cps;
  exports.fork = options.fork;
  exports.join = options.join;
  exports.cancel = options.cancel;
  exports.select = options.select;
}, function(canCreateDiscussions, self, createElement) {
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var response = createElement(337);
  var value = createElement(294);
  var data = response;
  var p = createElement(194);
  var array = value;
  /** @type {!Object} */
  self.pureActions = Object.assign({}, data, p, array);
}, function(canCreateDiscussions, BeautifulProperties, n) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /** @type {string} */
  var src = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  /**
   * @param {number} n
   * @param {?} padding
   * @return {?}
   */
  BeautifulProperties.alphanumeric = function pad(n, padding) {
    if (void 0 === padding && (padding = ""), n <= 0) {
      return padding;
    }
    /** @type {number} */
    var ind = Math.floor(Math.random() * (src.length - 1));
    return pad(n - 1, padding + src.charAt(ind));
  };
  /**
   * @return {?}
   */
  BeautifulProperties.getNextPingDate = function() {
    /** @type {!Date} */
    var prevMonth = new Date;
    return prevMonth.getHours() > 2 && prevMonth.setDate(prevMonth.getDate() + 1), prevMonth.setHours(3), prevMonth.setMinutes(Math.floor(60 * Math.random())), prevMonth.getTime();
  };
}, function(canCreateDiscussions, self, n) {
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var leafsHeaders = function() {
    /**
     * @param {!Object} _logger
     * @param {?} _pendingUpdatePath
     * @return {undefined}
     */
    function UserMessageProcessor(_logger, _pendingUpdatePath) {
      /** @type {!Object} */
      this._logger = _logger;
      this._metric = _pendingUpdatePath;
    }
    return UserMessageProcessor.prototype.getValueStart = function(prop) {
      var data = this;
      var boardCtrl = this._metric.getTimer("doGet" + prop + ".timer").start();
      return {
        getValueSuccess : function() {
          boardCtrl.stop();
          data._metric.getCounter("doGet" + prop + ".success").increment();
        },
        getValueFailure : function(obj) {
          boardCtrl.stop();
          data._metric.getCounter("doGet" + prop + ".failure").increment();
          data._logger.warn("doGet" + prop + ".failed", obj);
        }
      };
    }, UserMessageProcessor.prototype.valueGenerated = function() {
      this._metric.getCounter("generated").increment();
    }, UserMessageProcessor.prototype.valueRecovered = function() {
      this._metric.getCounter("recovered").increment();
    }, UserMessageProcessor;
  }();
  self.TelemetryValueManagerLogger = leafsHeaders;
  var uiInfos = function() {
    /**
     * @param {!Object} statusPort
     * @param {?} statusSecret
     * @return {undefined}
     */
    function Server(statusPort, statusSecret) {
      /** @type {!Object} */
      this._logger = statusPort;
      this._metric = statusSecret;
    }
    return Server.prototype.nextPingDateReadError = function(obj) {
      this._metric.getCounter("nextPingDate.read.failure").increment();
      this._logger.warn("nextPingDate.read.failed", obj);
    }, Server.prototype.nextPingDateWriteError = function(obj) {
      this._metric.getCounter("nextPingDate.write.failure").increment();
      this._logger.warn("nextPingDate.write.failed", obj);
    }, Server.prototype.sendError = function(name) {
      this._metric.getCounter("send.failure").increment();
      this._logger.warn("send.failed", name);
    }, Server;
  }();
  self.TelemetryGnarClientImplLogger = uiInfos;
  /**
   * @param {!Function} replace
   * @return {?}
   */
  self.guard = function(replace) {
    try {
      return replace();
    } catch (e) {
      return;
    }
  };
}, , , , , , , , , , , , function(module, exports, $) {
  /**
   * @return {?}
   */
  function add() {
    var context = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
    /** @type {!Object} */
    var args = merge({}, self.default, context);
    var log = args.logger;
    var resourceTypeTransformer = args.transformer;
    var stateTransformer = args.stateTransformer;
    var errorTransformer = args.errorTransformer;
    var fn = args.predicate;
    var logErrors = args.logErrors;
    var callback = args.diffPredicate;
    if (void 0 === log) {
      return function() {
        return function(saveNotifs) {
          return function(notifications) {
            return saveNotifs(notifications);
          };
        };
      };
    }
    if (resourceTypeTransformer && console.error("Option 'transformer' is deprecated, use 'stateTransformer' instead!"), context.getState && context.dispatch) {
      return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n\n\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\n\nconst logger = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"), 
      function() {
        return function(saveNotifs) {
          return function(notifications) {
            return saveNotifs(notifications);
          };
        };
      };
    }
    /** @type {!Array} */
    var stack = [];
    return function(foo) {
      var bar = foo.getState;
      return function(handler) {
        return function(action) {
          if ("function" == typeof fn && !fn(bar, action)) {
            return handler(action);
          }
          var logEntry = {};
          stack.push(logEntry);
          logEntry.started = timer.timer.now();
          /** @type {!Date} */
          logEntry.startedTime = new Date;
          logEntry.prevState = stateTransformer(bar());
          /** @type {!Object} */
          logEntry.action = action;
          var node = void 0;
          if (logErrors) {
            try {
              node = handler(action);
            } catch (e) {
              logEntry.error = errorTransformer(e);
            }
          } else {
            node = handler(action);
          }
          /** @type {number} */
          logEntry.took = timer.timer.now() - logEntry.started;
          logEntry.nextState = stateTransformer(bar());
          var lendiff = args.diff && "function" == typeof callback ? callback(bar, action) : args.diff;
          if ((0, host.printBuffer)(stack, merge({}, args, {
            diff : lendiff
          })), stack.length = 0, logEntry.error) {
            throw logEntry.error;
          }
          return node;
        };
      };
    };
  }
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  exports.logger = exports.defaults = void 0;
  var obj;
  /** @type {function(!Object, ...(Object|null)): !Object} */
  var merge = Object.assign || function(obj) {
    /** @type {number} */
    var i = 1;
    for (; i < arguments.length; i++) {
      var a = arguments[i];
      var key;
      for (key in a) {
        if (Object.prototype.hasOwnProperty.call(a, key)) {
          obj[key] = a[key];
        }
      }
    }
    return obj;
  };
  var host = $(478);
  var timer = $(358);
  var body = $(481);
  var self = (obj = body) && obj.__esModule ? obj : {
    default : obj
  };
  var result = add();
  exports.defaults = self.default;
  exports.logger = result;
  /** @type {function(): ?} */
  exports.default = add;
  /** @type {function(): ?} */
  module.exports = exports.default;
}, function(canCreateDiscussions, t, context) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var that = context(432);
  var o = function() {
    /**
     * @param {?} n
     * @return {undefined}
     */
    function c(n) {
      var val = n.legacyStopWorkingDate;
      var reqType = n.updateRequestType;
      this.legacyStopWorkingDate = val;
      this.updateRequestType = reqType;
    }
    return c.parse = function(e) {
      return that.mapResult(that.parseObject(c.name, {
        legacyStopWorkingDate : that.parseMaybeUndefined(that.parseDate),
        updateRequestType : that.parseMaybeUndefined(that.mapResult(that.parseOneOf(["warning", "critical", "disabled"]), function(nonemptyvalue) {
          return nonemptyvalue;
        }))
      }), function(count) {
        return new c(count);
      })(e);
    }, c.prototype.encode = function() {
      var e = {};
      return this.legacyStopWorkingDate && (e.legacyStopWorkingDate = this.legacyStopWorkingDate.toISOString()), null != this.updateRequestType && (e.updateRequestType = this.updateRequestType), e;
    }, c;
  }();
  t.SafariAppExtensionMigration = o;
  var offsetFromCenter = function() {
    /**
     * @param {!Object} data
     * @param {!Object} options
     * @return {undefined}
     */
    function self(data, options) {
      /** @type {!Object} */
      this.source = data;
      if (options) {
        this.version = options.version;
        this.safariAppExtensionMigration = options.safariAppExtensionMigration;
      } else {
        /** @type {string} */
        this.version = "";
      }
    }
    return self.parse = function(d) {
      return function(n) {
        return that.mapResult(that.parseObject(self.name, {
          version : that.parseString,
          safariAppExtensionMigration : that.field(self.safariAppExtensionMigrationFieldName, that.parseMaybeUndefined(o.parse))
        }), function(options) {
          return new self(d, options);
        })(n);
      };
    }, self.prototype.encode = function() {
      var TinyCore = {
        version : this.version
      };
      return this.safariAppExtensionMigration && (TinyCore[self.safariAppExtensionMigrationFieldName] = this.safariAppExtensionMigration.encode()), TinyCore;
    }, self.empty = new self("empty"), self.safariAppExtensionMigrationFieldName = "safariAppExtensionMigration_1558396627629", self;
  }();
  t.DynamicConfig = offsetFromCenter;
}, function(canCreateDiscussions, self, getFilename) {
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var label = getFilename(337);
  self.defaultUser = {
    anonymous : true,
    premium : false
  };
  /**
   * @param {?} state
   * @param {!Object} action
   * @return {?}
   */
  self.userReducer = function(state, action) {
    if (void 0 === state) {
      state = self.defaultUser;
    }
    var param2 = action.type;
    var value = action.data;
    var data = void 0 === value ? {} : value;
    switch(param2) {
      case label.t.SET_USER:
        return data;
      case label.t.SET_SETTINGS:
        return Object.assign({}, state, {
          settings : data
        });
      case label.t.SET_GROUPS:
        return Object.assign({}, state, {
          mimic : data.mimic,
          experiments : data.experiments
        });
      case label.t.INC_FIXED:
        var c = state.fixed_errors + 1;
        return Object.assign({}, state, {
          fixed_errors : c
        });
      default:
        return state;
    }
  };
}, function(canCreateDiscussions, exports, n) {
  /**
   * @param {!Object} o
   * @return {?}
   */
  function callback(o) {
    try {
      return encodeURIComponent(o);
    } catch (e) {
      return null;
    }
  }
  /**
   * @param {?} token
   * @return {?}
   */
  function key(token) {
    try {
      return decodeURIComponent(token);
    } catch (e) {
      return null;
    }
  }
  /** @type {boolean} */
  exports.__esModule = true;
  /**
   * @param {!Object} key
   * @param {!Object} name
   * @param {string} type
   * @return {?}
   */
  exports.default = function(key, name, type) {
    if (arguments.length < 2) {
      return prop = key, result = function(clusterShardData) {
        var ConfigureLocalization = {};
        /** @type {!Array<string>} */
        var marketplaceorders = clusterShardData.split(/ *; */);
        if (!marketplaceorders[0]) {
          return ConfigureLocalization;
        }
        /** @type {!Array<string>} */
        var path = marketplaceorders;
        /** @type {boolean} */
        var isAbsolute = Array.isArray(path);
        /** @type {number} */
        var i = 0;
        path = isAbsolute ? path : path[Symbol.iterator]();
        for (;;) {
          var _ref;
          if (isAbsolute) {
            if (i >= path.length) {
              break;
            }
            _ref = path[i++];
          } else {
            if ((i = path.next()).done) {
              break;
            }
            _ref = i.value;
          }
          var path = _ref;
          path = path.split("=");
          ConfigureLocalization[key(path[0])] = key(path[1]);
        }
        return ConfigureLocalization;
      }(document.cookie), prop ? result[prop] : result;
    }
    var prop;
    var result;
    !function(e, t) {
      var cookie = arguments.length <= 2 || void 0 === arguments[2] ? {} : arguments[2];
      /** @type {string} */
      var cookie_string = callback(e) + "=" + callback(t);
      if (null == t) {
        /** @type {number} */
        cookie.maxage = -1;
      }
      if (cookie.maxage) {
        /** @type {!Date} */
        cookie.expires = new Date(+new Date + cookie.maxage);
      }
      if (cookie.path) {
        /** @type {string} */
        cookie_string = cookie_string + ("; path=" + cookie.path);
      }
      if (cookie.domain) {
        /** @type {string} */
        cookie_string = cookie_string + ("; domain=" + cookie.domain);
      }
      if (cookie.expires) {
        /** @type {string} */
        cookie_string = cookie_string + ("; expires=" + cookie.expires.toUTCString());
      }
      if (cookie.secure) {
        /** @type {string} */
        cookie_string = cookie_string + "; secure";
      }
      /** @type {string} */
      document.cookie = cookie_string;
    }(key, name, type);
  };
}, , , , , , , , , , , , , function(canCreateDiscussions, config, n) {
  Object.defineProperty(config, "__esModule", {
    value : true
  });
  config.MessageTypes = {
    server : "socket-server",
    client : "socket-client",
    serverIframe : "socket-server-iframe",
    iframeMode : "iframe-mode"
  };
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(canCreateDiscussions, exports, n) {
  var f;
  var i = this && this.__extends || (f = function(shape, t) {
    return (f = Object.setPrototypeOf || {
      __proto__ : []
    } instanceof Array && function(json, b) {
      /** @type {!Object} */
      json.__proto__ = b;
    } || function(scope, args) {
      var key;
      for (key in args) {
        if (args.hasOwnProperty(key)) {
          scope[key] = args[key];
        }
      }
    })(shape, t);
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    f(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  var cyNodeData = this && this.__values || function(value) {
    var func = "function" == typeof Symbol && value[Symbol.iterator];
    /** @type {number} */
    var pos = 0;
    return func ? func.call(value) : {
      next : function() {
        return value && pos >= value.length && (value = void 0), {
          value : value && value[pos++],
          done : !value
        };
      }
    };
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var uboard = function() {
    return function(canCreateDiscussions) {
      /** @type {string} */
      this.expectedType = canCreateDiscussions;
    };
  }();
  exports.ParseError = uboard;
  var Error = function(e) {
    /**
     * @param {undefined} y
     * @param {!Object} a
     * @return {?}
     */
    function t(y, a) {
      var m = e.call(this, y) || this;
      return m.value = a, m;
    }
    return i(t, e), t;
  }(uboard);
  exports.ParseValueError = Error;
  var TemplateBinding = function() {
    return function(name, error) {
      /** @type {string} */
      this.fieldName = name;
      /** @type {!Error} */
      this.error = error;
    };
  }();
  exports.ParseFieldError = TemplateBinding;
  var ValidationError = function(e) {
    /**
     * @param {undefined} y
     * @param {?} a
     * @return {?}
     */
    function t(y, a) {
      var m = e.call(this, y) || this;
      return m.fieldErrors = a, m;
    }
    return i(t, e), t;
  }(uboard);
  exports.ParseObjectError = ValidationError;
  /**
   * @param {string} val
   * @return {?}
   */
  exports.parseString = function(val) {
    return "string" == typeof val ? {
      result : val
    } : {
      error : new Error("string", val)
    };
  };
  /**
   * @param {?} node
   * @return {?}
   */
  exports.parseOneOf = function(node) {
    return function(result) {
      var mockConsole;
      var msg;
      try {
        var data = cyNodeData(node);
        var request = data.next();
        for (; !request.done; request = data.next()) {
          if (request.value === result) {
            return {
              result : result
            };
          }
        }
      } catch (Console_error) {
        mockConsole = {
          error : Console_error
        };
      } finally {
        try {
          if (request && !request.done && (msg = data.return)) {
            msg.call(data);
          }
        } finally {
          if (mockConsole) {
            throw mockConsole.error;
          }
        }
      }
      return {
        error : new Error("one of " + JSON.stringify(node), result)
      };
    };
  };
  /**
   * @param {!Object} val
   * @return {?}
   */
  exports.parseDate = function(val) {
    if ("string" == typeof val) {
      var ret = void 0;
      try {
        /** @type {!Date} */
        ret = new Date(val);
      } catch (t) {
        return {
          error : new Error("ISO date", val)
        };
      }
      return {
        result : ret
      };
    }
    return {
      error : new Error("ISO date", val)
    };
  };
  /**
   * @param {?} removeUnchanged
   * @return {?}
   */
  exports.parseMaybeUndefined = function(removeUnchanged) {
    return function(caretContainer) {
      return void 0 === caretContainer ? {
        result : void 0
      } : removeUnchanged(caretContainer);
    };
  };
  /**
   * @param {string} error
   * @param {undefined} config
   * @return {?}
   */
  exports.parseObject = function(error, config) {
    return function(value) {
      if ("object" != typeof value || null == value) {
        return {
          error : new Error(error, value)
        };
      }
      var settings = {};
      /** @type {!Array} */
      var bindings = [];
      return Object.keys(config).forEach(function(key) {
        var r = config[key](value[key], value, key);
        if ("error" in r) {
          bindings.push(new TemplateBinding(key, r.error));
        } else {
          settings[key] = r.result;
        }
      }), bindings.length > 0 ? {
        error : new ValidationError(error, bindings)
      } : {
        result : settings
      };
    };
  };
  /**
   * @param {?} growl
   * @param {!Function} gettext
   * @return {?}
   */
  exports.mapResult = function(growl, gettext) {
    return function(message) {
      var response = growl(message);
      return "error" in response ? response : {
        result : gettext(response.result)
      };
    };
  };
  /**
   * @param {!Object} fn
   * @return {?}
   */
  exports.parse = function(fn) {
    return function(jpath) {
      var r = fn(jpath);
      if ("error" in r) {
        throw new Error("Parse error: " + JSON.stringify(r.error));
      }
      return r.result;
    };
  };
  /**
   * @param {string} name
   * @param {?} callback
   * @return {?}
   */
  exports.field = function(name, callback) {
    return function(n, fileCache) {
      return callback(fileCache[name]);
    };
  };
}, function(canCreateDiscussions, styleData, n) {
  Object.defineProperty(styleData, "__esModule", {
    value : true
  });
  styleData.t = {
    DYNAMIC_CONFIG_INITIAL : "dynamicConfig/initial",
    DYNAMIC_CONFIG_UPDATED : "dynamicConfig/updated"
  };
  /**
   * @param {!Object} value
   * @return {?}
   */
  styleData.initialDynamicConfig = function(value) {
    return {
      type : styleData.t.DYNAMIC_CONFIG_INITIAL,
      config : value
    };
  };
  /**
   * @param {!Object} num
   * @return {?}
   */
  styleData.dynamicConfig = function(num) {
    return {
      type : styleData.t.DYNAMIC_CONFIG_UPDATED,
      config : num
    };
  };
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var eachTextNode = __webpack_require__(21);
  var isObject = __webpack_require__(15);
  /** @type {string} */
  var funcTag = "[object Number]";
  /**
   * @param {!Object} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return "number" == typeof value || isObject(value) && eachTextNode(value) == funcTag;
  };
}, function(canCreateDiscussions, me, n) {
  Object.defineProperty(me, "__esModule", {
    value : true
  });
  me.t = {
    SET_ACTIVE_TAB : "tabs/SET_ACTIVE_TAB"
  };
  /**
   * @param {!Object} id
   * @return {?}
   */
  me.setActiveTab = function(id) {
    return {
      type : me.t.SET_ACTIVE_TAB,
      data : id
    };
  };
}, function(canCreateDiscussions, BeautifulProperties, unescape) {
  var get4Parity = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var gotoNewOfflinePage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var i = this;
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var query = unescape(1);
  var d = unescape(4);
  /**
   * @return {?}
   */
  BeautifulProperties.isIncognito = function() {
    return get4Parity(i, void 0, void 0, function() {
      var e;
      return gotoNewOfflinePage(this, function(_context) {
        switch(_context.label) {
          case 0:
            return (e = d.isChrome() || d.isFF()) ? [4, query.SafePromise.create(function(wrongCredsCallback) {
              if (chrome && chrome.extension) {
                chrome.extension.isAllowedIncognitoAccess(wrongCredsCallback);
              } else {
                wrongCredsCallback(false);
              }
            })] : [3, 2];
          case 1:
            e = _context.sent();
            /** @type {number} */
            _context.label = 2;
          case 2:
            return [2, e];
        }
      });
    });
  };
  /**
   * @return {?}
   */
  BeautifulProperties.getNextPingDate = function() {
    /** @type {!Date} */
    var prevMonth = new Date;
    return prevMonth.getHours() > 2 && prevMonth.setDate(prevMonth.getDate() + 1), prevMonth.setHours(3), prevMonth.setMinutes(Math.floor(60 * Math.random())), prevMonth.getTime();
  };
}, function(canCreateDiscussions, t, __M) {
  var when = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var resolve = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var value = this;
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var jsc = __M(3).Logger.create("universal.bg.prefs");
  /**
   * @param {!Object} id
   * @param {!Object} parents
   * @return {?}
   */
  var all = function(id, parents) {
    return when(value, void 0, void 0, function() {
      var value;
      var default_favicon;
      return resolve(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 2, , 3]), [4, parents.get(id)];
          case 1:
            return "undefined" === (value = _a.sent()) ? [2, void 0] : [2, value && JSON.parse(value)];
          case 2:
            throw (default_favicon = _a.sent()) && default_favicon.toString().includes("SyntaxError") ? (parents.remove(id), new Error("'" + id + "' has unparseable value, removing")) : default_favicon;
          case 3:
            return [2];
        }
      });
    });
  };
  var offsetFromCenter = function() {
    return function(_api) {
      var value = this;
      /** @type {!Object} */
      this._api = _api;
      /**
       * @param {!Object} key
       * @return {?}
       */
      this.get = function(key) {
        return when(value, void 0, void 0, function() {
          var children;
          var n;
          var result;
          var target;
          var node = this;
          return resolve(this, function(_a) {
            switch(_a.label) {
              case 0:
                /** @type {boolean} */
                children = Array.isArray(key);
                /** @type {number} */
                _a.label = 1;
              case 1:
                return _a.trys.push([1, 6, , 7]), children ? (key = key, [4, Promise.all(key.map(function(uploads) {
                  return all(uploads, node._api);
                }))]) : [3, 3];
              case 2:
                return result = _a.sent(), n = key.reduce(function(e, attribute, type) {
                  var _a;
                  return Object.assign(e, ((_a = {})[attribute] = result[type], _a));
                }, {}), [3, 5];
              case 3:
                return [4, all(key = key, this._api)];
              case 4:
                n = _a.sent();
                /** @type {number} */
                _a.label = 5;
              case 5:
                return [3, 7];
              case 6:
                return target = _a.sent(), children && (n = {}), jsc.warn("prefs get error:", target), [3, 7];
              case 7:
                return [2, n];
            }
          });
        });
      };
      /**
       * @param {!Object} name
       * @param {string} value
       * @return {?}
       */
      this.set = function(name, value) {
        return when(value, void 0, void 0, function() {
          var e;
          var _this10 = this;
          return resolve(this, function(_a) {
            switch(_a.label) {
              case 0:
                return null === name || "object" != typeof name ? [3, 2] : [4, Promise.all(Object.keys(name).map(function(key) {
                  return _this10.set(key, name[key]);
                }))];
              case 1:
                return _a.sent(), [3, 5];
              case 2:
                return _a.trys.push([2, 4, , 5]), value = void 0 === value ? "undefined" : JSON.stringify(value), [4, this._api.set(name, value)];
              case 3:
                return _a.sent(), [3, 5];
              case 4:
                return e = _a.sent(), jsc.warn("prefs set error", e), [3, 5];
              case 5:
                return [2];
            }
          });
        });
      };
      /**
       * @return {?}
       */
      this.all = function() {
        return when(value, void 0, void 0, function() {
          var ref$;
          var name;
          var value;
          return resolve(this, function(_context) {
            switch(_context.label) {
              case 0:
                return [4, this._api.getAll()];
              case 1:
                for (name in ref$ = _context.sent()) {
                  if ("undefined" === ref$[name]) {
                    ref$[name] = void 0;
                  } else {
                    try {
                      value = ref$[name];
                      /** @type {*} */
                      ref$[name] = value && JSON.parse(value);
                    } catch (e) {
                    }
                  }
                }
                return [2, ref$];
            }
          });
        });
      };
      /**
       * @param {!Object} fn
       * @return {?}
       */
      this.remove = function(fn) {
        try {
          return value._api.remove(fn);
        } catch (target) {
          return jsc.warn("prefs remove error", target), Promise.resolve();
        }
      };
      /**
       * @return {?}
       */
      this.clearAll = function() {
        try {
          return value._api.removeAll().catch(function(target) {
            return jsc.warn("prefs clearAll error", target);
          });
        } catch (target) {
          return jsc.warn("prefs clearAll error", target), Promise.resolve();
        }
      };
    };
  }();
  t.PrefsImpl = offsetFromCenter;
}, , , , , , , , , , function(canCreateDiscussions, exports, opt_function) {
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var isCommercial = opt_function(25);
  var Emitter = function() {
    return function(tile) {
      if (void 0 === tile) {
        tile = {};
      }
      var self = this;
      /**
       * @param {string} name
       * @param {!Function} fn
       * @return {?}
       */
      this.on = function(name, fn) {
        return self._internalEmitter.on(name, fn);
      };
      /**
       * @param {string} event
       * @param {!Function} callback
       * @return {?}
       */
      this.one = function(event, callback) {
        return self._internalEmitter.one(event, callback);
      };
      /**
       * @param {string} name
       * @param {!Function} fn
       * @return {?}
       */
      this.off = function(name, fn) {
        return self._internalEmitter.off(name, fn);
      };
      /**
       * @param {string} name
       * @param {!Function} n
       * @return {?}
       */
      this.emit = function(name, n) {
        return self._internalEmitter.emit(name, n);
      };
      /**
       * @param {!Object} event
       * @param {string} selector
       * @param {string} type
       * @return {?}
       */
      this.delegate = function(event, selector, type) {
        return self._internalEmitter.delegate(event, selector, type);
      };
      this._internalEmitter = isCommercial(tile);
    };
  }();
  exports.Emitter = Emitter;
}, , , , , , function(mixin, canCreateDiscussions, $) {
  var def = $(25);
  if ("function" != typeof Object.assign) {
    /**
     * @param {!Object} obj
     * @param {...(Object|null)} p1
     * @return {!Object}
     */
    Object.assign = function(obj) {
      if (null == obj) {
        throw new TypeError("Cannot convert undefined or null to object");
      }
      /** @type {!Object} */
      var t = Object(obj);
      /** @type {number} */
      var i = 1;
      for (; i < arguments.length; i++) {
        var r = arguments[i];
        if (null != r) {
          var n;
          for (n in r) {
            if (r.hasOwnProperty(n)) {
              t[n] = r[n];
            }
          }
        }
      }
      return t;
    };
  }
  try {
    /**
     * @param {!Object} o
     * @return {?}
     */
    mixin.exports = function(o) {
      /**
       * @param {boolean} value
       * @return {undefined}
       */
      function init(value) {
        if (!self.isConnected()) {
          cb("connect to url: " + o.url);
          socket = new WebSocket(o.url);
          /** @type {boolean} */
          done = false;
          /** @type {boolean} */
          connected = false;
          /**
           * @return {undefined}
           */
          socket.onopen = function() {
            /** @type {number} */
            dt = data_object;
            /** @type {boolean} */
            connected = true;
            if (h) {
              /** @type {boolean} */
              h = false;
              self.close();
            }
            if (value && o.resetQueueOnReconnect) {
              /** @type {!Array} */
              result = [];
            } else {
              end();
            }
            self.emit("connect");
            if (value) {
              self.emit("reconnect");
              /** @type {boolean} */
              c = false;
            }
          };
          /**
           * @param {!Object} message
           * @return {undefined}
           */
          socket.onmessage = function(message) {
            if (s) {
              console.log("%c Received: %s", "color: #46af91;", message.data);
            }
            send(message.data);
            (function(t) {
              try {
                /** @type {*} */
                t = JSON.parse(t);
              } catch (err) {
                callback(err.stack || err, t);
              }
              if (o.useQueue) {
                arrUrls.push(t);
                notify();
              } else {
                self.emit("message", t);
              }
            })(message.data);
          };
          /**
           * @param {undefined} t
           * @return {undefined}
           */
          socket.onclose = function(t) {
            /** @type {boolean} */
            connected = false;
            self.emit("disconnect", t);
            if (!done) {
              close("disconnected");
            }
          };
          /** @type {function(!Object): undefined} */
          socket.onerror = close;
          if (window.app) {
            app.one("offline", function() {
              if (connected) {
                self.close();
                app.one("online", function() {
                  self.connect();
                });
              }
            });
          }
        }
      }
      /**
       * @param {string} m
       * @return {undefined}
       */
      function send(m) {
        if (o.useStandBy && m && !connect(m)) {
          clearTimeout(appendTrackTimer);
          /** @type {number} */
          appendTrackTimer = setTimeout(function() {
            self.close();
            /** @type {boolean} */
            l = true;
            /** @type {boolean} */
            appendTrackTimer = false;
          }, o.useStandBy);
        }
      }
      /**
       * @param {string} e
       * @return {?}
       */
      function connect(e) {
        if (e && "ping" == e) {
          return true;
        }
        var eventObj;
        /** @type {boolean} */
        var arr = false;
        try {
          /** @type {*} */
          eventObj = JSON.parse(e);
        } catch (e) {
        }
        return eventObj && ("ping" == eventObj || eventObj.action && "pong" == eventObj.action) && (arr = true), arr;
      }
      /**
       * @return {undefined}
       */
      function end() {
        if (socket) {
          for (; socket.readyState == WebSocket.OPEN && result.length;) {
            n = result.shift();
            if (s) {
              console.log("%c Sending %s", "color:rgba(10, 10, 10, 0.6); font-size: 10px", n);
            }
            send(n);
            socket.send(n);
            if (tid) {
              clearTimeout(tid);
            }
            /** @type {number} */
            tid = setTimeout(tryConnect, o.idleTimeout);
          }
        }
        var n;
      }
      /**
       * @return {undefined}
       */
      function tryConnect() {
        /** @type {null} */
        tid = null;
        self.send("ping");
      }
      /**
       * @param {!Object} e
       * @return {undefined}
       */
      function close(e) {
        callback("websocket error", e);
        self.emit("error", e);
        if (!(e && e.target && [WebSocket.CLOSING, WebSocket.CLOSED].indexOf(e.target.readyState) > -1 || timer)) {
          if (connected) {
            self.close();
          }
          cb("try to reconnect in " + dt / 1E3 + "s");
          /** @type {number} */
          timer = setTimeout(function() {
            /** @type {number} */
            dt = Math.min(offset, 1.5 * dt);
            /** @type {null} */
            timer = null;
            init(true);
          }, dt);
        }
      }
      /**
       * @return {undefined}
       */
      function cb() {
        if (s) {
          console.log.apply(console, arguments);
        }
      }
      /**
       * @return {undefined}
       */
      function callback() {
        console.error.apply(console, arguments);
      }
      /**
       * @return {undefined}
       */
      function notify() {
        if (!(i || xx)) {
          /** @type {(null|number)} */
          i = 0 !== arrUrls.length ? setTimeout(function() {
            if (!xx) {
              self.emit("message", arrUrls.shift());
            }
            /** @type {null} */
            i = null;
            notify();
          }, o.useQueue) : null;
        }
      }
      var socket;
      var timer;
      var tid;
      var i;
      var endCallTimeout;
      var c;
      /** @type {boolean} */
      var s = !o.silentLogs;
      var WebSocket = window.WebSocket || window.MozWebSocket;
      /** @type {boolean} */
      var l = false;
      /** @type {null} */
      var appendTrackTimer = null;
      /** @type {boolean} */
      var connected = false;
      /** @type {boolean} */
      var done = false;
      /** @type {boolean} */
      var h = false;
      /** @type {number} */
      var dt = 1E3;
      /** @type {number} */
      var data_object = 1E3;
      /** @type {number} */
      var offset = 6E4;
      /** @type {!Array} */
      var result = [];
      /** @type {!Array} */
      var arrUrls = [];
      /** @type {boolean} */
      var xx = false;
      /** @type {!Object} */
      o = Object.assign({}, {
        url : null,
        connectionTimeout : 1E3,
        idleTimeout : 3E5,
        useQueue : false,
        useStandBy : false,
        playDelay : 50,
        resetQueueOnReconnect : !!o.fluid
      }, o);
      var self = def({
        connect : init,
        reconnect : function() {
          if (!c) {
            /** @type {boolean} */
            c = true;
            if (self.isConnected()) {
              self.one("disconnect", function() {
                setTimeout(self.connect.bind(null, true), 0);
              });
              /** @type {boolean} */
              done = true;
              self.close();
            } else {
              self.connect(true);
            }
          }
        },
        send : function(name) {
          if (l) {
            !function(id) {
              if (connect(id)) {
                return false;
              }
              if (l) {
                /** @type {boolean} */
                l = false;
                init(true);
              }
            }(name);
          } else {
            /** @type {string} */
            var regExResult = JSON.stringify(name);
            result.push(regExResult);
            end();
            if (o.fluid && void 0 === socket) {
              self.emit("fluidNotConnected");
            }
          }
        },
        close : function() {
          if (done = true, cb("explicit close requested"), !connected) {
            return h = true;
          }
          try {
            if (socket) {
              socket.close();
            }
            if (timer) {
              clearTimeout(timer);
              /** @type {null} */
              timer = null;
            }
          } catch (err) {
            callback("socket closing bug", err.stack || err);
          }
          /** @type {boolean} */
          connected = false;
          if (appendTrackTimer) {
            clearTimeout(appendTrackTimer);
          }
        },
        isConnected : function() {
          return connected;
        },
        release : function() {
          clearTimeout(timer);
        },
        toString : function() {
          return "[object WebSocket]";
        },
        wsPlay : function() {
          clearTimeout(endCallTimeout);
          /** @type {number} */
          endCallTimeout = setTimeout(function() {
            /** @type {boolean} */
            xx = false;
            notify();
          }, o.playDelay);
        },
        wsPause : function() {
          clearTimeout(endCallTimeout);
          /** @type {boolean} */
          xx = true;
        }
      });
      return self;
    };
  } catch (e) {
  }
}, function(canCreateDiscussions, BeautifulProperties, floor) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var startYNew = floor(4);
  /** @type {boolean} */
  var o = false;
  !function(node) {
    /**
     * @param {!Array} arr
     * @param {string} element
     * @param {!Object} value
     * @return {?}
     */
    node.isIncluded = function(arr, element, value) {
      /** @type {string} */
      var _end2 = Array.isArray(value) ? "(" + value.join("|") + ")$" : "(" + value + ")";
      /** @type {!RegExp} */
      var negativeRegex = new RegExp("^" + element + "(_\\w+)?_" + _end2);
      return arr.some(function(val) {
        return negativeRegex.test(val);
      });
    };
    /**
     * @param {?} name
     * @return {?}
     */
    node.create = function(name) {
      if (void 0 === name) {
        /** @type {!Array} */
        name = [];
      }
      /**
       * @param {string} params
       * @param {!Object} id
       * @return {?}
       */
      var get = function(params, id) {
        return node.isIncluded(name, params, id);
      };
      return {
        gdprSignupEnabled : name.includes("gdpr_signup_enabled"),
        gButtonAnimation : name.includes("new_gbutton_enabled"),
        emotions : name.includes("emogenie_enabled") || name.includes("emogenie_beta_enabled"),
        emogenieNRPUExperiment : get("emogenie_nrpu_experiment", ["enabled1", "enabled2"]),
        fluidDogfood : o || name.includes("fluid_slack_dogfood"),
        fluidInsider : o || name.includes("fluid_insider_enabled"),
        fluidCanary1pct : name.includes("fluid_canary_1pct_enabled"),
        gdocsPremiumInlineAlerts : name.includes("gdocs_premium_inline_dogfood"),
        fluidGDocs : get("fluid_gdocs", ["internal"]) || get("fluid_gdocs_rollout", ["enabled"]),
        unifiedFunnel : true,
        inlineAdvancedAlerts : name.includes("extension_outcomes_inline_internal"),
        anonUsersPopupEditor : name.includes("popup_editor_for_anonymous_users_test_1") || name.includes("popup_editor_for_anonymous_users_test_2"),
        sendEmailPremiumPopup : get("send_email_premium_popup", "enabled"),
        freePremiumAlerts : get("show_occasional_free_premium_alerts_new", ["enabled_1", "enabled_2"]) || get("show_occasional_free_premium_alerts_existing", ["enabled_1", "enabled_2"]) || get("show_occasional_free_premium_alerts_internal", "enabled"),
        safariMigrationPopup : name.includes("safari_migration_popup_enabled_enabled"),
        safariMigrationPopupEditorDisabled : name.includes("safari_migration_popup_editor_disabled_enabled"),
        safariMigrationInlineWarning : name.includes("safari_migration_inline_warning_enabled"),
        safariMigrationInlineCritical : name.includes("safari_migration_inline_critical_enabled"),
        safariMigrationInlineDisabled : name.includes("safari_migration_inline_disabled_enabled"),
        safariMigrationBackupNotifFirst : name.includes("safari_migration_backup_notif1_enabled"),
        safariMigrationBackupNotifSecond : name.includes("safari_migration_backup_notif2_enabled"),
        safariMigrationAppExtension : startYNew.isSafariApp() && name.includes("safari_migration_app_extension")
      };
    };
  }(BeautifulProperties.UserExperiments || (BeautifulProperties.UserExperiments = {}));
}, function(canCreateDiscussions, BeautifulProperties, n) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /** @type {!RegExp} */
  BeautifulProperties.gDocsDocumentUrlRe = /^http(s?):\/\/docs\.google\.com\/document/;
}, , , , , , , , , , , , , , , , , , , , , , , function(canCreateDiscussions, host, require) {
  /**
   * @param {!Array} a
   * @param {?} b
   * @param {!Array} n
   * @param {string} type
   * @return {?}
   */
  function log(a, b, n, type) {
    switch(void 0 === a ? "undefined" : emitRevealSeparator(a)) {
      case "object":
        return "function" == typeof a[type] ? a[type].apply(a, function(obj) {
          if (Array.isArray(obj)) {
            /** @type {number} */
            var i = 0;
            /** @type {!Array} */
            var data = Array(obj.length);
            for (; i < obj.length; i++) {
              data[i] = obj[i];
            }
            return data;
          }
          return Array.from(obj);
        }(n)) : a[type];
      case "function":
        return a(b);
      default:
        return a;
    }
  }
  Object.defineProperty(host, "__esModule", {
    value : true
  });
  /** @type {function(!Array): ?} */
  var emitRevealSeparator = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a255) {
    return typeof a255;
  } : function(obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  };
  /**
   * @param {!Array} buffer
   * @param {!Object} options
   * @return {undefined}
   */
  host.printBuffer = function(buffer, options) {
    var console = options.logger;
    var actionTransformer = options.actionTransformer;
    var _options$titleFormatt = options.titleFormatter;
    var titleFormatter = void 0 === _options$titleFormatt ? (info = options, timestamp = info.timestamp, end = info.duration, function(propertyPreview, mcallname, speedup_percent) {
      /** @type {!Array} */
      var vars = ["action"];
      return vars.push("%c" + String(propertyPreview.type)), timestamp && vars.push("%c@ " + mcallname), end && vars.push("%c(in " + speedup_percent.toFixed(2) + " ms)"), vars.join(" ");
    }) : _options$titleFormatt;
    var callback = options.collapsed;
    var colors = options.colors;
    var level = options.level;
    var timeLeft = options.diff;
    var info;
    var timestamp;
    var end;
    buffer.forEach(function(logEntry, indice) {
      var started = logEntry.started;
      var startedTime = logEntry.startedTime;
      var action = logEntry.action;
      var value = logEntry.prevState;
      var error = logEntry.error;
      var took = logEntry.took;
      var nextState = logEntry.nextState;
      var nextEntry = buffer[indice + 1];
      if (nextEntry) {
        nextState = nextEntry.prevState;
        /** @type {number} */
        took = nextEntry.started - started;
      }
      var formattedAction = actionTransformer(action);
      var cb = "function" == typeof callback ? callback(function() {
        return nextState;
      }, action, logEntry) : callback;
      var formattedTime = (0, formatUtil.formatTime)(startedTime);
      /** @type {string} */
      var itemNodeList = colors.title ? "color: " + colors.title(formattedAction) + ";" : "";
      /** @type {!Array} */
      var newNodeLists = ["color: gray; font-weight: lighter;"];
      newNodeLists.push(itemNodeList);
      if (options.timestamp) {
        newNodeLists.push("color: gray; font-weight: lighter;");
      }
      if (options.duration) {
        newNodeLists.push("color: gray; font-weight: lighter;");
      }
      var title = titleFormatter(formattedAction, formattedTime, took);
      try {
        if (cb) {
          if (colors.title) {
            console.groupCollapsed.apply(console, ["%c " + title].concat(newNodeLists));
          } else {
            console.groupCollapsed(title);
          }
        } else {
          if (colors.title) {
            console.group.apply(console, ["%c " + title].concat(newNodeLists));
          } else {
            console.group(title);
          }
        }
      } catch (e) {
        console.log(title);
      }
      var prevStateLevel = log(level, formattedAction, [value], "prevState");
      var actionLevel = log(level, formattedAction, [formattedAction], "action");
      var errorLevel = log(level, formattedAction, [error, value], "error");
      var nextStateLevel = log(level, formattedAction, [nextState], "nextState");
      if (prevStateLevel) {
        if (colors.prevState) {
          console[prevStateLevel]("%c prev state", "color: " + colors.prevState(value) + "; font-weight: bold", value);
        } else {
          console[prevStateLevel]("prev state", value);
        }
      }
      if (actionLevel) {
        if (colors.action) {
          console[actionLevel]("%c action    ", "color: " + colors.action(formattedAction) + "; font-weight: bold", formattedAction);
        } else {
          console[actionLevel]("action    ", formattedAction);
        }
      }
      if (error && errorLevel) {
        if (colors.error) {
          console[errorLevel]("%c error     ", "color: " + colors.error(error, value) + "; font-weight: bold;", error);
        } else {
          console[errorLevel]("error     ", error);
        }
      }
      if (nextStateLevel) {
        if (colors.nextState) {
          console[nextStateLevel]("%c next state", "color: " + colors.nextState(nextState) + "; font-weight: bold", nextState);
        } else {
          console[nextStateLevel]("next state", nextState);
        }
      }
      if (timeLeft) {
        (0, ret.default)(value, nextState, console, cb);
      }
      try {
        console.groupEnd();
      } catch (e) {
        console.log("\u2014\u2014 log end \u2014\u2014");
      }
    });
  };
  var $1;
  var formatUtil = require(358);
  var event = require(479);
  var ret = ($1 = event) && $1.__esModule ? $1 : {
    default : $1
  };
}, function(module, Component, builder) {
  Object.defineProperty(Component, "__esModule", {
    value : true
  });
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @param {!Object} target
   * @param {string} id
   * @return {undefined}
   */
  Component.default = function(obj, name, target, id) {
    var o = (0, ret.default)(obj, name);
    try {
      if (id) {
        target.groupCollapsed("diff");
      } else {
        target.group("diff");
      }
    } catch (e) {
      target.log("diff");
    }
    if (o) {
      o.forEach(function(type) {
        var key;
        var kind = type.kind;
        var o = function(item) {
          var kind = item.kind;
          var ccPath = item.path;
          var sortable = item.lhs;
          var select = item.rhs;
          var mapId = item.index;
          var record = item.item;
          switch(kind) {
            case "E":
              return [ccPath.join("."), sortable, "\u2192", select];
            case "N":
              return [ccPath.join("."), select];
            case "D":
              return [ccPath.join(".")];
            case "A":
              return [ccPath.join(".") + "[" + mapId + "]", record];
            default:
              return [];
          }
        }(type);
        target.log.apply(target, ["%c " + lookup[kind].text, (key = kind, "color: " + lookup[key].color + "; font-weight: bold")].concat(function(data) {
          {
            if (Array.isArray(data)) {
              /** @type {number} */
              var i = 0;
              /** @type {!Array} */
              var intArray = Array(data.length);
              for (; i < data.length; i++) {
                intArray[i] = data[i];
              }
              return intArray;
            }
            return Array.from(data);
          }
        }(o)));
      });
    } else {
      target.log("\u2014\u2014 no diff \u2014\u2014");
    }
    try {
      target.groupEnd();
    } catch (e) {
      target.log("\u2014\u2014 diff end \u2014\u2014 ");
    }
  };
  var $1;
  var event = builder(480);
  var ret = ($1 = event) && $1.__esModule ? $1 : {
    default : $1
  };
  var lookup = {
    E : {
      color : "#2196F3",
      text : "CHANGED:"
    },
    N : {
      color : "#4CAF50",
      text : "ADDED:"
    },
    D : {
      color : "#F44336",
      text : "DELETED:"
    },
    A : {
      color : "#2196F3",
      text : "ARRAY:"
    }
  };
  /** @type {function(!Object, !Object, !Object, string): undefined} */
  module.exports = Component.default;
}, function(mixin, t, moment) {
  (function(data) {
    var m;
    !function(addedRenderer, saveNotifs) {
      if (!(void 0 === (m = function() {
        return saveNotifs();
      }.apply(t, [])))) {
        mixin.exports = m;
      }
    }(0, function(undefined) {
      /**
       * @param {!Function} ctor
       * @param {!Function} superCtor
       * @return {undefined}
       */
      function inherits(ctor, superCtor) {
        /** @type {!Function} */
        ctor.super_ = superCtor;
        /** @type {!Object} */
        ctor.prototype = Object.create(superCtor.prototype, {
          constructor : {
            value : ctor,
            enumerable : false,
            writable : true,
            configurable : true
          }
        });
      }
      /**
       * @param {!Object} status
       * @param {string} comment
       * @return {undefined}
       */
      function Diff(status, comment) {
        Object.defineProperty(this, "kind", {
          value : status,
          enumerable : true
        });
        if (comment && comment.length) {
          Object.defineProperty(this, "path", {
            value : comment,
            enumerable : true
          });
        }
      }
      /**
       * @param {undefined} value
       * @param {!Object} origin
       * @param {!Object} path
       * @return {undefined}
       */
      function DiffEdit(value, origin, path) {
        DiffEdit.super_.call(this, "E", value);
        Object.defineProperty(this, "lhs", {
          value : origin,
          enumerable : true
        });
        Object.defineProperty(this, "rhs", {
          value : path,
          enumerable : true
        });
      }
      /**
       * @param {undefined} value
       * @param {!Object} path
       * @return {undefined}
       */
      function DiffNew(value, path) {
        DiffNew.super_.call(this, "N", value);
        Object.defineProperty(this, "rhs", {
          value : path,
          enumerable : true
        });
      }
      /**
       * @param {undefined} value
       * @param {!Object} path
       * @return {undefined}
       */
      function DiffDeleted(value, path) {
        DiffDeleted.super_.call(this, "D", value);
        Object.defineProperty(this, "lhs", {
          value : path,
          enumerable : true
        });
      }
      /**
       * @param {undefined} item
       * @param {!Object} e
       * @param {!Object} index
       * @return {undefined}
       */
      function DiffArray(item, e, index) {
        DiffArray.super_.call(this, "A", item);
        Object.defineProperty(this, "index", {
          value : e,
          enumerable : true
        });
        Object.defineProperty(this, "item", {
          value : index,
          enumerable : true
        });
      }
      /**
       * @param {!Object} data
       * @param {number} index
       * @param {undefined} title
       * @return {?}
       */
      function push(data, index, title) {
        var r = data.slice((title || index) + 1 || data.length);
        return data.length = index < 0 ? data.length + index : index, data.push.apply(data, r), data;
      }
      /**
       * @param {!Object} value
       * @return {?}
       */
      function type(value) {
        /** @type {string} */
        var type = typeof value;
        return "object" !== type ? type : value === Math ? "math" : null === value ? "null" : Array.isArray(value) ? "array" : "[object Date]" === Object.prototype.toString.call(value) ? "date" : void 0 !== value.toString && /^\/.*\//.test(value.toString()) ? "regexp" : "object";
      }
      /**
       * @param {!Object} value
       * @param {!Object} a
       * @param {string} changes
       * @param {string} prefilter
       * @param {number} path
       * @param {?} key
       * @param {!Array} stack
       * @return {undefined}
       */
      function deepDiff(value, a, changes, prefilter, path, key, stack) {
        var currentPath = (path = path || []).slice(0);
        if (void 0 !== key) {
          if (prefilter) {
            if ("function" == typeof prefilter && prefilter(currentPath, key)) {
              return;
            }
            if ("object" == typeof prefilter) {
              if (prefilter.prefilter && prefilter.prefilter(currentPath, key)) {
                return;
              }
              if (prefilter.normalize) {
                var result = prefilter.normalize(currentPath, key, value, a);
                if (result) {
                  value = result[0];
                  a = result[1];
                }
              }
            }
          }
          currentPath.push(key);
        }
        if ("regexp" === type(value) && "regexp" === type(a)) {
          value = value.toString();
          a = a.toString();
        }
        /** @type {string} */
        var valueType = typeof value;
        /** @type {string} */
        var t = typeof a;
        if ("undefined" === valueType) {
          if ("undefined" !== t) {
            changes(new DiffNew(currentPath, a));
          }
        } else {
          if ("undefined" === t) {
            changes(new DiffDeleted(currentPath, value));
          } else {
            if (type(value) !== type(a)) {
              changes(new DiffEdit(currentPath, value, a));
            } else {
              if ("[object Date]" === Object.prototype.toString.call(value) && "[object Date]" === Object.prototype.toString.call(a) && value - a != 0) {
                changes(new DiffEdit(currentPath, value, a));
              } else {
                if ("object" === valueType && null !== value && null !== a) {
                  if ((stack = stack || []).indexOf(value) < 0) {
                    if (stack.push(value), Array.isArray(value)) {
                      var i;
                      value.length;
                      /** @type {number} */
                      i = 0;
                      for (; i < value.length; i++) {
                        if (i >= a.length) {
                          changes(new DiffArray(currentPath, i, new DiffDeleted(undefined, value[i])));
                        } else {
                          deepDiff(value[i], a[i], changes, prefilter, currentPath, i, stack);
                        }
                      }
                      for (; i < a.length;) {
                        changes(new DiffArray(currentPath, i, new DiffNew(undefined, a[i++])));
                      }
                    } else {
                      /** @type {!Array<string>} */
                      var oldCondition = Object.keys(value);
                      /** @type {!Array<string>} */
                      var out = Object.keys(a);
                      oldCondition.forEach(function(k, a) {
                        var m = out.indexOf(k);
                        if (m >= 0) {
                          deepDiff(value[k], a[k], changes, prefilter, currentPath, k, stack);
                          out = push(out, m);
                        } else {
                          deepDiff(value[k], undefined, changes, prefilter, currentPath, k, stack);
                        }
                      });
                      out.forEach(function(i) {
                        deepDiff(undefined, a[i], changes, prefilter, currentPath, i, stack);
                      });
                    }
                    /** @type {number} */
                    stack.length = stack.length - 1;
                  }
                } else {
                  if (value !== a) {
                    if (!("number" === valueType && isNaN(value) && isNaN(a))) {
                      changes(new DiffEdit(currentPath, value, a));
                    }
                  }
                }
              }
            }
          }
        }
      }
      /**
       * @param {string} target
       * @param {string} source
       * @param {string} obj
       * @param {string} options
       * @return {?}
       */
      function read(target, source, obj, options) {
        return options = options || [], deepDiff(target, source, function(neighbourTile) {
          if (neighbourTile) {
            options.push(neighbourTile);
          }
        }, obj), options.length ? options : undefined;
      }
      /**
       * @param {string} target
       * @param {string} source
       * @param {!Object} change
       * @return {undefined}
       */
      function applyChange(target, source, change) {
        if (target && source && change && change.kind) {
          /** @type {string} */
          var it = target;
          /** @type {number} */
          var j = -1;
          /** @type {number} */
          var r_len = change.path ? change.path.length - 1 : 0;
          for (; ++j < r_len;) {
            if (void 0 === it[change.path[j]]) {
              /** @type {(Array|{})} */
              it[change.path[j]] = "number" == typeof change.path[j] ? [] : {};
            }
            it = it[change.path[j]];
          }
          switch(change.kind) {
            case "A":
              !function applyArrayChange(arr, index, change) {
                if (change.path && change.path.length) {
                  var i;
                  var it = arr[index];
                  /** @type {number} */
                  var cell_amount = change.path.length - 1;
                  /** @type {number} */
                  i = 0;
                  for (; i < cell_amount; i++) {
                    it = it[change.path[i]];
                  }
                  switch(change.kind) {
                    case "A":
                      applyArrayChange(it[change.path[i]], change.index, change.item);
                      break;
                    case "D":
                      delete it[change.path[i]];
                      break;
                    case "E":
                    case "N":
                      it[change.path[i]] = change.rhs;
                  }
                } else {
                  switch(change.kind) {
                    case "A":
                      applyArrayChange(arr[index], change.index, change.item);
                      break;
                    case "D":
                      arr = push(arr, index);
                      break;
                    case "E":
                    case "N":
                      arr[index] = change.rhs;
                  }
                }
                return arr;
              }(change.path ? it[change.path[j]] : it, change.index, change.item);
              break;
            case "D":
              delete it[change.path[j]];
              break;
            case "E":
            case "N":
              it[change.path[j]] = change.rhs;
          }
        }
      }
      var $scope;
      var conflict;
      /** @type {!Array} */
      var failureRecaps = [];
      return $scope = "object" == typeof data && data ? data : "undefined" != typeof window ? window : {}, (conflict = $scope.DeepDiff) && failureRecaps.push(function() {
        if (void 0 !== conflict && $scope.DeepDiff === read) {
          $scope.DeepDiff = conflict;
          /** @type {string} */
          conflict = undefined;
        }
      }), inherits(DiffEdit, Diff), inherits(DiffNew, Diff), inherits(DiffDeleted, Diff), inherits(DiffArray, Diff), Object.defineProperties(read, {
        diff : {
          value : read,
          enumerable : true
        },
        observableDiff : {
          value : deepDiff,
          enumerable : true
        },
        applyDiff : {
          value : function(target, source, filter) {
            if (target && source) {
              deepDiff(target, source, function(change) {
                if (!(filter && !filter(target, source, change))) {
                  applyChange(target, source, change);
                }
              });
            }
          },
          enumerable : true
        },
        applyChange : {
          value : applyChange,
          enumerable : true
        },
        revertChange : {
          value : function(target, source, change) {
            if (target && source && change && change.kind) {
              var j;
              var rown;
              /** @type {string} */
              var it = target;
              /** @type {number} */
              rown = change.path.length - 1;
              /** @type {number} */
              j = 0;
              for (; j < rown; j++) {
                if (void 0 === it[change.path[j]]) {
                  it[change.path[j]] = {};
                }
                it = it[change.path[j]];
              }
              switch(change.kind) {
                case "A":
                  !function revertArrayChange(arr, index, change) {
                    if (change.path && change.path.length) {
                      var i;
                      var it = arr[index];
                      /** @type {number} */
                      var cell_amount = change.path.length - 1;
                      /** @type {number} */
                      i = 0;
                      for (; i < cell_amount; i++) {
                        it = it[change.path[i]];
                      }
                      switch(change.kind) {
                        case "A":
                          revertArrayChange(it[change.path[i]], change.index, change.item);
                          break;
                        case "D":
                        case "E":
                          it[change.path[i]] = change.lhs;
                          break;
                        case "N":
                          delete it[change.path[i]];
                      }
                    } else {
                      switch(change.kind) {
                        case "A":
                          revertArrayChange(arr[index], change.index, change.item);
                          break;
                        case "D":
                        case "E":
                          arr[index] = change.lhs;
                          break;
                        case "N":
                          arr = push(arr, index);
                      }
                    }
                    return arr;
                  }(it[change.path[j]], change.index, change.item);
                  break;
                case "D":
                case "E":
                  it[change.path[j]] = change.lhs;
                  break;
                case "N":
                  delete it[change.path[j]];
              }
            }
          },
          enumerable : true
        },
        isConflict : {
          value : function() {
            return void 0 !== conflict;
          },
          enumerable : true
        },
        noConflict : {
          value : function() {
            return failureRecaps && (failureRecaps.forEach(function(onstep) {
              onstep();
            }), failureRecaps = null), read;
          },
          enumerable : true
        }
      }), read;
    });
  }).call(t, moment(33));
}, function(module, exports, n) {
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  exports.default = {
    level : "log",
    logger : console,
    logErrors : true,
    collapsed : void 0,
    predicate : void 0,
    duration : false,
    timestamp : true,
    stateTransformer : function(state) {
      return state;
    },
    actionTransformer : function(action) {
      return action;
    },
    errorTransformer : function(error) {
      return error;
    },
    colors : {
      title : function() {
        return "inherit";
      },
      prevState : function() {
        return "#9E9E9E";
      },
      action : function() {
        return "#03A9F4";
      },
      nextState : function() {
        return "#4CAF50";
      },
      error : function() {
        return "#F20404";
      }
    },
    diff : false,
    diffPredicate : void 0,
    transformer : void 0
  };
  module.exports = exports.default;
}, function(canCreateDiscussions, defaultTagAttributes, $) {
  var x = $(361);
  var self = $(485);
  var e = $(486);
  /** @type {string} */
  var categories = "[object Null]";
  /** @type {string} */
  var tags = "[object Undefined]";
  var value = x.a ? x.a.toStringTag : void 0;
  /**
   * @param {?} key
   * @return {?}
   */
  defaultTagAttributes.a = function(key) {
    return null == key ? void 0 === key ? tags : categories : value && value in Object(key) ? Object(self.a)(key) : Object(e.a)(key);
  };
}, function(canCreateDiscussions, C, getArgument) {
  var desc = getArgument(484);
  /** @type {(Window|boolean)} */
  var freeSelf = "object" == typeof self && self && self.Object === Object && self;
  var sx = desc.a || freeSelf || Function("return this")();
  C.a = sx;
}, function(canCreateDiscussions, proto, moment) {
  (function(global) {
    var n = "object" == typeof global && global && global.Object === Object && global;
    proto.a = n;
  }).call(proto, moment(33));
}, function(canCreateDiscussions, defaultTagAttributes, Clazz_doubleToInt) {
  var x = Clazz_doubleToInt(361);
  var ObjProto = Object.prototype;
  /** @type {function(this:Object, *): boolean} */
  var hasOwnProperty = ObjProto.hasOwnProperty;
  /** @type {function(this:*): string} */
  var toString = ObjProto.toString;
  var key = x.a ? x.a.toStringTag : void 0;
  /**
   * @param {!Object} obj
   * @return {?}
   */
  defaultTagAttributes.a = function(obj) {
    /** @type {boolean} */
    var compValue = hasOwnProperty.call(obj, key);
    var val = obj[key];
    try {
      obj[key] = void 0;
      /** @type {boolean} */
      var e = true;
    } catch (e) {
    }
    /** @type {string} */
    var t = toString.call(obj);
    return e && (compValue ? obj[key] = val : delete obj[key]), t;
  };
}, function(canCreateDiscussions, defaultTagAttributes, n) {
  /** @type {function(this:*): string} */
  var fnToStr = Object.prototype.toString;
  /**
   * @param {!Object} value
   * @return {?}
   */
  defaultTagAttributes.a = function(value) {
    return fnToStr.call(value);
  };
}, function(canCreateDiscussions, neighbor, $) {
  var self = $(488);
  var node = Object(self.a)(Object.getPrototypeOf, Object);
  neighbor.a = node;
}, function(canCreateDiscussions, defaultTagAttributes, n) {
  /**
   * @param {!Object} x
   * @param {!Object} name
   * @return {?}
   */
  defaultTagAttributes.a = function(x, name) {
    return function(t) {
      return x(name(t));
    };
  };
}, function(canCreateDiscussions, defaultTagAttributes, n) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  defaultTagAttributes.a = function(obj) {
    return null != obj && "object" == typeof obj;
  };
}, function(html, b, require) {
  (function(oldLayer, l) {
    var c_export;
    var pkg = require(492);
    c_export = "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== oldLayer ? oldLayer : l;
    var a = Object(pkg.a)(c_export);
    b.a = a;
  }).call(b, require(33), require(491)(html));
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} type
   * @return {?}
   */
  mixin.exports = function(type) {
    if (!type.webpackPolyfill) {
      /** @type {!Object} */
      var module = Object.create(type);
      if (!module.children) {
        /** @type {!Array} */
        module.children = [];
      }
      Object.defineProperty(module, "loaded", {
        enumerable : true,
        get : function() {
          return module.l;
        }
      });
      Object.defineProperty(module, "id", {
        enumerable : true,
        get : function() {
          return module.i;
        }
      });
      Object.defineProperty(module, "exports", {
        enumerable : true
      });
      /** @type {number} */
      module.webpackPolyfill = 1;
    }
    return module;
  };
}, function(canCreateDiscussions, defaultTagAttributes, n) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  defaultTagAttributes.a = function(obj) {
    var result;
    var Symbol = obj.Symbol;
    if ("function" == typeof Symbol) {
      if (Symbol.observable) {
        result = Symbol.observable;
      } else {
        result = Symbol("observable");
        Symbol.observable = result;
      }
    } else {
      /** @type {string} */
      result = "@@observable";
    }
    return result;
  };
}, function(canCreateDiscussions, defaultTagAttributes, $) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  defaultTagAttributes.a = function(obj) {
    /** @type {!Array<string>} */
    var json = Object.keys(obj);
    var args = {};
    /** @type {number} */
    var i = 0;
    for (; i < json.length; i++) {
      /** @type {string} */
      var j = json[i];
      0;
      if ("function" == typeof obj[j]) {
        args[j] = obj[j];
      }
    }
    /** @type {!Array<string>} */
    var data = Object.keys(args);
    0;
    var c = void 0;
    try {
      result = args;
      Object.keys(result).forEach(function(name) {
        var done = result[name];
        var gotFeed = done(void 0, {
          type : self.a.INIT
        });
        if (void 0 === gotFeed) {
          throw new Error('Reducer "' + name + "\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");
        }
        /** @type {string} */
        var GET_USER_PROFILE_SUCCESS = "@@redux/PROBE_UNKNOWN_ACTION_" + Math.random().toString(36).substring(7).split("").join(".");
        if (void 0 === done(void 0, {
          type : GET_USER_PROFILE_SUCCESS
        })) {
          throw new Error('Reducer "' + name + "\" returned undefined when probed with a random type. Don't try to handle " + self.a.INIT + ' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.');
        }
      });
    } catch (ContainerInstance) {
      c = ContainerInstance;
    }
    var result;
    return function() {
      var visibleChildren = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
      var event = arguments[1];
      if (c) {
        throw c;
      }
      var $c$;
      var $1;
      var ch;
      /** @type {boolean} */
      var anyChildChanged = false;
      var arrSets = {};
      /** @type {number} */
      var a = 0;
      for (; a < data.length; a++) {
        /** @type {string} */
        var i = data[a];
        var cb = args[i];
        var child = visibleChildren[i];
        var name = cb(child, event);
        if (void 0 === name) {
          /** @type {string} */
          var lastErrorOutput = ($c$ = i, ch = void 0, void 0, ch = ($1 = event) && $1.type, "Given action " + (ch && '"' + ch.toString() + '"' || "an action") + ', reducer "' + $c$ + '" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');
          throw new Error(lastErrorOutput);
        }
        arrSets[i] = name;
        /** @type {boolean} */
        anyChildChanged = anyChildChanged || name !== child;
      }
      return anyChildChanged ? arrSets : visibleChildren;
    };
  };
  var self = $(360);
  $(336);
  $(362);
}, function(canCreateDiscussions, defaultTagAttributes, n) {
  /**
   * @param {!Function} func
   * @param {!Object} cb
   * @return {?}
   */
  function f(func, cb) {
    return function() {
      return cb(func.apply(void 0, arguments));
    };
  }
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  defaultTagAttributes.a = function(obj, name) {
    if ("function" == typeof obj) {
      return f(obj, name);
    }
    if ("object" != typeof obj || null === obj) {
      throw new Error("bindActionCreators expected an object or a function, instead received " + (null === obj ? "null" : typeof obj) + '. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');
    }
    /** @type {!Array<string>} */
    var existingKeys = Object.keys(obj);
    var map = {};
    /** @type {number} */
    var i = 0;
    for (; i < existingKeys.length; i++) {
      /** @type {string} */
      var key = existingKeys[i];
      var value = obj[key];
      if ("function" == typeof value) {
        map[key] = f(value, name);
      }
    }
    return map;
  };
}, function(canCreateDiscussions, defaultTagAttributes, keyGen) {
  /**
   * @return {?}
   */
  defaultTagAttributes.a = function() {
    /** @type {number} */
    var _len8 = arguments.length;
    /** @type {!Array} */
    var args = Array(_len8);
    /** @type {number} */
    var _key8 = 0;
    for (; _key8 < _len8; _key8++) {
      args[_key8] = arguments[_key8];
    }
    return function(createStore) {
      return function(rootReducer, initialState, enhancer) {
        var store = createStore(rootReducer, initialState, enhancer);
        var dispatch = store.dispatch;
        /** @type {!Array} */
        var query = [];
        var middlewareAPI = {
          getState : store.getState,
          dispatch : function(event) {
            return dispatch(event);
          }
        };
        return query = args.map(function(middleware) {
          return middleware(middlewareAPI);
        }), dispatch = o.a.apply(void 0, query)(store.dispatch), _extends({}, store, {
          dispatch : dispatch
        });
      };
    };
  };
  var o = keyGen(363);
  /** @type {function(!Object, ...(Object|null)): !Object} */
  var _extends = Object.assign || function(obj) {
    /** @type {number} */
    var i = 1;
    for (; i < arguments.length; i++) {
      var a = arguments[i];
      var key;
      for (key in a) {
        if (Object.prototype.hasOwnProperty.call(a, key)) {
          obj[key] = a[key];
        }
      }
    }
    return obj;
  };
}, function(canCreateDiscussions, win, require) {
  var gotoNewOfflinePage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var collectRefsFromPathitem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var add_prefix = this && this.__spread || function() {
    /** @type {!Array} */
    var followedKeys = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
    }
    return followedKeys;
  };
  Object.defineProperty(win, "__esModule", {
    value : true
  });
  var merge = require(381);
  var exports = require(359);
  var self = require(364);
  var results = require(502);
  var support = require(503);
  var state = require(504);
  var reducers = require(383);
  var panels = require(505);
  var settings = require(17);
  var api_config = require(367);
  var search = require(367);
  win.pureActions = search.pureActions;
  var io = require(295);
  var CheckDailyStat = require(165);
  var DragDropAction = require(1);
  var exported = require(86);
  var 0079C1 = function() {
    return function(store, canCreateDiscussions, n) {
      var self = this;
      /** @type {!Database} */
      this._store = store;
      /** @type {!Object} */
      this._userSagas = canCreateDiscussions;
      /** @type {string} */
      this._cookiesHelper = n;
      /**
       * @return {?}
       */
      this.logout = function() {
        return Promise.race([self._store.runSaga(self._userSagas.logoutUser.bind(self._userSagas)).done, DragDropAction.SafePromise.delay(10 * exported.second).then(function() {
          /** @type {!Error} */
          var serializationError = new Error("Logout timeout!");
          throw CheckDailyStat.gnar.logoutFormFail(void 0, serializationError.message), serializationError;
        })]).catch(function() {
          return self._cookiesHelper.deleteGrauth();
        }).then(function() {
          return self.refreshUser(false, "oauth");
        });
      };
      /**
       * @return {?}
       */
      this.refreshUser = function() {
        var e;
        /** @type {!Array} */
        var args = [];
        /** @type {number} */
        var i = 0;
        for (; i < arguments.length; i++) {
          args[i] = arguments[i];
        }
        return (e = self._store).runSaga.apply(e, add_prefix([self._userSagas.externalUpdateUser.bind(self._userSagas)], args)).done;
      };
      /**
       * @param {!Object} data
       * @return {?}
       */
      this.signin = function(data) {
        var args = data.form;
        var dataIP = {
          email_login : {
            email : args.email,
            password : args.password
          }
        };
        return self._store.runSaga(self._userSagas.authRequest.bind(self._userSagas), settings.URLS.authSignin, dataIP, data.placement, "signin").done;
      };
      /**
       * @param {!Object} data
       * @return {?}
       */
      this.signup = function(data) {
        var form = data.form;
        var dataIP = {
          email_signup : {
            name : form.name,
            email : form.email,
            password : form.password
          },
          custom_fields : "true" === data.disableMarketingEmails ? {
            disableMarketingEmails : "true"
          } : {}
        };
        return self._store.runSaga(self._userSagas.authRequest.bind(self._userSagas), settings.URLS.authSignup, dataIP, data.placement, "signup").done;
      };
    };
  }();
  win.AuthSagaRunners = 0079C1;
  var memoryStor = function() {
    return function(store, canCreateDiscussions) {
      var me = this;
      /** @type {!Database} */
      this._store = store;
      /** @type {!Object} */
      this._tabsSagas = canCreateDiscussions;
      /**
       * @return {?}
       */
      this.sendStateToTabs = function() {
        return me._store.runSaga(me._tabsSagas.sendStateToTabs.bind(me._tabsSagas));
      };
    };
  }();
  win.TabsSagaRunner = memoryStor;
  var inputel = function() {
    /**
     * @param {!Object} path
     * @param {!Object} service
     * @param {!Object} command
     * @param {!Object} that
     * @param {!Object} key
     * @param {!Object} optModifiers
     * @return {undefined}
     */
    function init(path, service, command, that, key, optModifiers) {
      var _this = this;
      /** @type {!Object} */
      this._dynamicConfigSagas = path;
      /** @type {!Object} */
      this._userSagas = service;
      /** @type {!Object} */
      this._settingsSagas = command;
      /** @type {!Object} */
      this._tabsSagas = that;
      /** @type {!Object} */
      this._connectionSagas = key;
      /** @type {!Object} */
      this._pageConfig = optModifiers;
      var data;
      var val;
      var params;
      var process = self.default(path.start.bind(path), key.start.bind(key), service.start.bind(service), command.start.bind(command));
      this.store = (data = process, val = exports.combineReducers({
        dynamicConfig : results.dynamicConfigReducer,
        user : reducers.userReducer,
        tabs : panels.tabsReducer,
        settings : state.settingsReducer,
        connection : support.connectionReducer
      }), params = merge({
        level : "debug",
        colors : {
          title : function() {
            return "green";
          }
        }
      }), exports.createStore(val, {}, exports.applyMiddleware(data, params)));
      this.runSaga = process.run;
      /**
       * @return {?}
       */
      this.initStore = function() {
        return process.run(_this._startupFlow.bind(_this)).done.then(function() {
          _this.store.subscribe(function() {
            process.run(that.sendStateToTabs.bind(that));
            process.run(command.processEmailConnectednessData.bind(command));
          });
        });
      };
      this.actions = exports.bindActionCreators(api_config.pureActions, this.store.dispatch);
    }
    return init.prototype._startupFlow = function() {
      return gotoNewOfflinePage(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, [io.fork([this._dynamicConfigSagas, this._dynamicConfigSagas.start]), io.call([this._settingsSagas, this._settingsSagas.setInitialSettings]), io.call([this._pageConfig, this._pageConfig.init]), io.call([this._userSagas, this._userSagas.updateUser], {
              failoverFromCache : true
            })]];
          case 1:
            return _context.sent(), [4, io.fork([this._connectionSagas, this._connectionSagas.monitorIsIncognito])];
          case 2:
            return _context.sent(), [4, io.call([this._tabsSagas, this._tabsSagas.start])];
          case 3:
            return _context.sent(), [2];
        }
      });
    }, init;
  }();
  win.StoreControllerImpl = inputel;
}, function(canCreateDiscussions, exports, groupingFunction) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
      default : obj
    };
  }
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  exports.NOT_ITERATOR_ERROR = void 0;
  /**
   * @param {!Object} store
   * @return {?}
   */
  exports.storeIO = function(store) {
    if ((0, data.warnDeprecated)("storeIO is deprecated, to run Saga dynamically, use 'run' method of the middleware"), store[name]) {
      return store[name];
    }
    var _this = (0, _deepAssign2.default)();
    /** @type {function(string): ?} */
    var dispatch = store.dispatch;
    return store.dispatch = function(event) {
      var evt = dispatch(event);
      return _this.emit(event), evt;
    }, store[name] = {
      subscribe : _this.subscribe,
      dispatch : store.dispatch,
      getState : store.getState
    }, store[name];
  };
  /**
   * @param {?} e
   * @param {!Object} _ref
   * @return {?}
   */
  exports.runSaga = function(e, _ref) {
    var subscribe = _ref.subscribe;
    var hash = _ref.dispatch;
    var getState = _ref.getState;
    var artistTrack = arguments.length <= 2 || void 0 === arguments[2] ? data.noop : arguments[2];
    return (0, data.check)(e, data.is.iterator, $), (0, _noframeworkWaypoints2.default)(e, subscribe, hash, getState, artistTrack);
  };
  var data = groupingFunction(61);
  var _noframeworkWaypoints2 = _interopRequireDefault(groupingFunction(292));
  var _deepAssign2 = _interopRequireDefault(groupingFunction(365));
  /** @type {string} */
  var $ = exports.NOT_ITERATOR_ERROR = "runSaga must be called on an iterator";
  var name = (0, data.sym)("IO");
}, function(canCreateDiscussions, exports, __webpack_require__) {
  /**
   * @param {?} plugins
   * @param {string} name
   * @return {?}
   */
  function transform(plugins, name) {
    /**
     * @param {!Object} value
     * @param {!Function} input
     * @return {?}
     */
    function send(value, input) {
      if (o) {
        return res;
      }
      if (input) {
        if (o = true, !(input instanceof _stream2.default)) {
          throw input;
        }
        return res;
      }
      if (ref) {
        ref(value);
      }
      var info = $(plugins[name], 3);
      var m = info[0];
      var state = info[1];
      var val = info[2];
      return ref = val, name = assign(state, value), assign(m, value);
    }
    var sel_construtor_name = arguments.length <= 2 || void 0 === arguments[2] ? "iterator" : arguments[2];
    var o = void 0;
    var ref = void 0;
    var iterator = {
      name : sel_construtor_name,
      next : send,
      throw : function(type) {
        return send(null, type);
      }
    };
    return "undefined" != typeof Symbol && (iterator[Symbol.iterator] = function() {
      return iterator;
    }), iterator;
  }
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var $ = function() {
    return function(arr, chunksOrSource) {
      if (Array.isArray(arr)) {
        return arr;
      }
      if (Symbol.iterator in Object(arr)) {
        return function(set, object) {
          /** @type {!Array} */
          var _arr = [];
          /** @type {boolean} */
          var _iteratorNormalCompletion3 = true;
          /** @type {boolean} */
          var o = false;
          var i = void 0;
          try {
            var _s;
            var _iterator3 = set[Symbol.iterator]();
            for (; !(_iteratorNormalCompletion3 = (_s = _iterator3.next()).done) && (_arr.push(_s.value), !object || _arr.length !== object); _iteratorNormalCompletion3 = true) {
            }
          } catch (contactCapacity) {
            /** @type {boolean} */
            o = true;
            i = contactCapacity;
          } finally {
            try {
              if (!_iteratorNormalCompletion3 && _iterator3.return) {
                _iterator3.return();
              }
            } finally {
              if (o) {
                throw i;
              }
            }
          }
          return _arr;
        }(arr, chunksOrSource);
      }
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    };
  }();
  /**
   * @param {string} pattern
   * @param {!Object} worker
   * @return {?}
   */
  exports.takeEvery = function(pattern, worker) {
    /** @type {number} */
    var length = arguments.length;
    /** @type {!Array} */
    var args = Array(length > 2 ? length - 2 : 0);
    /** @type {number} */
    var i = 2;
    for (; i < length; i++) {
      args[i - 2] = arguments[i];
    }
    return transform({
      take : [{
        done : false,
        value : (0, queue.take)(pattern)
      }, "fork"],
      fork : [function(value) {
        return {
          done : false,
          value : queue.fork.apply(void 0, [worker].concat(args, [value]))
        };
      }, "take"]
    }, "take", "takeEvery(" + pattern + ", " + worker.name + ")");
  };
  /**
   * @param {string} pattern
   * @param {!Object} worker
   * @return {?}
   */
  exports.takeLatest = function(pattern, worker) {
    /** @type {number} */
    var length = arguments.length;
    /** @type {!Array} */
    var args = Array(length > 2 ? length - 2 : 0);
    /** @type {number} */
    var i = 2;
    for (; i < length; i++) {
      args[i - 2] = arguments[i];
    }
    var eff = {
      done : false,
      value : (0, queue.take)(pattern)
    };
    var has___ = void 0;
    var lastTrackInfoUrl = void 0;
    return transform({
      take : [eff, function() {
        return has___ ? "cancel" : "fork";
      }, function(trackInfoUrl) {
        return lastTrackInfoUrl = trackInfoUrl;
      }],
      cancel : [function() {
        return {
          done : false,
          value : (0, queue.cancel)(has___)
        };
      }, "fork"],
      fork : [function() {
        return {
          done : false,
          value : queue.fork.apply(void 0, [worker].concat(args, [lastTrackInfoUrl]))
        };
      }, "take", function(boardManager) {
        return has___ = boardManager;
      }]
    }, "take", "takeLatest(" + pattern + ", " + worker.name + ")");
  };
  var $1;
  var a = __webpack_require__(61);
  var queue = __webpack_require__(163);
  var event = __webpack_require__(164);
  var _stream2 = ($1 = event) && $1.__esModule ? $1 : {
    default : $1
  };
  /**
   * @param {!Object} value
   * @param {!Object} options
   * @return {?}
   */
  var assign = function(value, options) {
    return a.is.func(value) ? value(options) : value;
  };
  var res = {
    done : true
  };
}, function(canCreateDiscussions, t, factory) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  function define(obj) {
    return obj && obj.__esModule ? obj : {
      default : obj
    };
  }
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  t.GET_STATE_DEPRECATED_WARNING = t.RUN_SAGA_DYNAMIC_ERROR = t.sagaArgError = void 0;
  /**
   * @return {?}
   */
  t.default = function() {
    /**
     * @param {!Object} _ref
     * @return {?}
     */
    function createLogger(_ref) {
      /**
       * @param {!Function} d
       * @return {?}
       */
      function log(d) {
        /** @type {number} */
        var length = arguments.length;
        /** @type {!Array} */
        var args = Array(length > 1 ? length - 1 : 0);
        /** @type {number} */
        var i = 1;
        for (; i < length; i++) {
          args[i - 1] = arguments[i];
        }
        return (0, o.default)(d.apply(void 0, [error].concat(args)), presentObjectConnection.subscribe, dispatch, next, artistTrack, 0, d.name);
      }
      var next = _ref.getState;
      var dispatch = _ref.dispatch;
      var presentObjectConnection = (0, module.default)();
      /** @type {(function(string): ?|undefined)} */
      var artistTrack = a.isDev ? function(e) {
        return (0, a.asap)(function() {
          return dispatch(e);
        });
      } : void 0;
      /**
       * @return {?}
       */
      var error = function() {
        return (0, a.warnDeprecated)(file), next();
      };
      return fn = log, args.forEach(log), function(f) {
        return function(object) {
          var returnValue = f(object);
          return object[C.MONITOR_ACTION] || presentObjectConnection.emit(object), returnValue;
        };
      };
    }
    /** @type {number} */
    var _len8 = arguments.length;
    /** @type {!Array} */
    var args = Array(_len8);
    /** @type {number} */
    var _key8 = 0;
    for (; _key8 < _len8; _key8++) {
      args[_key8] = arguments[_key8];
    }
    var fn = void 0;
    return args.forEach(function(e, person) {
      return (0, a.check)(e, a.is.func, callback("createSagaMiddleware", person, e));
    }), createLogger.run = function(e) {
      /** @type {number} */
      var _len9 = arguments.length;
      /** @type {!Array} */
      var args = Array(_len9 > 1 ? _len9 - 1 : 0);
      /** @type {number} */
      var _key9 = 1;
      for (; _key9 < _len9; _key9++) {
        args[_key9 - 1] = arguments[_key9];
      }
      if (!fn) {
        throw new Error(lastErrorOutput);
      }
      (0, a.check)(e, a.is.func, callback("sagaMiddleware.run", 0, e));
      var test = fn.apply(void 0, [e].concat(args));
      return test.done.catch(function(event) {
        if (!(event instanceof _Event2.default)) {
          throw event;
        }
      }), test;
    }, createLogger;
  };
  var a = factory(61);
  var o = define(factory(292));
  var module = define(factory(365));
  var C = factory(293);
  var _Event2 = define(factory(164));
  /** @type {function(string, number, string): ?} */
  var callback = t.sagaArgError = function(hiding_events, type, fn) {
    return "\n  " + hiding_events + " can only be called on Generator functions\n  Argument " + fn + " at position " + type + " is not function!\n";
  };
  /** @type {string} */
  var lastErrorOutput = t.RUN_SAGA_DYNAMIC_ERROR = "Before running a Saga dynamically using middleware.run, you must mount the Saga middleware on the Store using applyMiddleware";
  /** @type {string} */
  var file = t.GET_STATE_DEPRECATED_WARNING = "\n  Using the 'getState' param of Sagas to access the state is deprecated since 0.9.1\n  To access the Store's state use 'yield select()' instead\n  For more infos see http://yelouafi.github.io/redux-saga/docs/api/index.html#selectselector-args\n";
}, function(canCreateDiscussions, exports, require) {
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  exports.monitorActions = exports.createMockTask = exports.MANUAL_CANCEL = exports.PARALLEL_AUTO_CANCEL = exports.RACE_AUTO_CANCEL = exports.CANCEL = exports.asap = exports.arrayOfDeffered = exports.deferred = exports.asEffect = exports.is = exports.noop = exports.TASK = void 0;
  var $ = require(61);
  var tsUnit_2 = require(163);
  var StateMachine = require(292);
  var Bufferish = require(501);
  var ReactMeteorData = function(e) {
    {
      if (e && e.__esModule) {
        return e;
      }
      var t = {};
      if (null != e) {
        var key;
        for (key in e) {
          if (Object.prototype.hasOwnProperty.call(e, key)) {
            t[key] = e[key];
          }
        }
      }
      return t.default = e, t;
    }
  }(require(293));
  exports.TASK = $.TASK;
  exports.noop = $.noop;
  exports.is = $.is;
  exports.asEffect = tsUnit_2.asEffect;
  exports.deferred = $.deferred;
  exports.arrayOfDeffered = $.arrayOfDeffered;
  exports.asap = $.asap;
  exports.CANCEL = StateMachine.CANCEL;
  exports.RACE_AUTO_CANCEL = StateMachine.RACE_AUTO_CANCEL;
  exports.PARALLEL_AUTO_CANCEL = StateMachine.PARALLEL_AUTO_CANCEL;
  exports.MANUAL_CANCEL = StateMachine.MANUAL_CANCEL;
  exports.createMockTask = Bufferish.createMockTask;
  exports.monitorActions = ReactMeteorData;
}, function(canCreateDiscussions, BeautifulProperties, $) {
  /**
   * @param {!Object} obj
   * @param {string} key
   * @param {!Function} value
   * @return {?}
   */
  function debug(obj, key, value) {
    return key in obj ? Object.defineProperty(obj, key, {
      value : value,
      enumerable : true,
      configurable : true,
      writable : true
    }) : obj[key] = value, obj;
  }
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /**
   * @return {?}
   */
  BeautifulProperties.createMockTask = function() {
    var err;
    /** @type {boolean} */
    var lastTrackInfoUrl = true;
    var autoReview = void 0;
    var mmConfig = void 0;
    return debug(err = {}, tmpobj.TASK, true), debug(err, "isRunning", function() {
      return lastTrackInfoUrl;
    }), debug(err, "result", function() {
      return autoReview;
    }), debug(err, "error", function() {
      return mmConfig;
    }), debug(err, "setRunning", function(trackInfoUrl) {
      return lastTrackInfoUrl = trackInfoUrl;
    }), debug(err, "setResult", function(data) {
      return autoReview = data;
    }), debug(err, "setError", function($mmConfig) {
      return mmConfig = $mmConfig;
    }), err;
  };
  var tmpobj = $(61);
}, function(canCreateDiscussions, BeautifulProperties, unescape) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var base = unescape(382);
  var label = unescape(433);
  /**
   * @param {!Object} config
   * @param {!Object} t
   * @return {?}
   */
  BeautifulProperties.dynamicConfigReducer = function(config, t) {
    if (void 0 === config) {
      config = base.DynamicConfig.empty;
    }
    var lastEndItem = t.type;
    var c = t.config;
    switch(lastEndItem) {
      case label.t.DYNAMIC_CONFIG_INITIAL:
        return "server" === config.source || config.version === c.version ? config : c;
      case label.t.DYNAMIC_CONFIG_UPDATED:
        return config.version === c.version ? config : c;
      default:
        return config;
    }
  };
}, function(canCreateDiscussions, host, unescape) {
  Object.defineProperty(host, "__esModule", {
    value : true
  });
  var label = unescape(194);
  var d = unescape(4);
  host.defaultConnection = {
    networkOffline : !window.navigator.onLine,
    cookiesDisabled : false === navigator.cookieEnabled,
    online : true,
    dataControl : d.isFF() ? "active" : "inactive"
  };
  /**
   * @param {?} state
   * @param {!Object} result
   * @return {?}
   */
  host.connectionReducer = function(state, result) {
    if (void 0 === state) {
      state = host.defaultConnection;
    }
    var courseSections = result.type;
    var query = result.data;
    var online = result.online;
    switch(courseSections) {
      case label.t.ONLINE_STATE:
        return Object.assign({}, state, {
          online : online
        });
      case label.t.UPDATE_CONNECTION:
        return Object.assign({}, state, query);
      case label.t.ACTIVATE_DATA_CONTROL:
        return Object.assign({}, state, {
          dataControl : "active"
        });
      case label.t.ACCEPT_DATA_CONTROL:
        return Object.assign({}, state, {
          dataControl : "accepted"
        });
      case label.t.DISABLE_DATA_CONTROL:
        return Object.assign({}, state, {
          dataControl : "inactive"
        });
      default:
        return state;
    }
  };
}, function(canCreateDiscussions, state, SmartHttpRemote) {
  var update = this && this.__assign || function() {
    return (update = Object.assign || function(obj) {
      var props;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var prop;
        for (prop in props = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(props, prop)) {
            obj[prop] = props[prop];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  var collectRefsFromPathitem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var log = this && this.__spread || function() {
    /** @type {!Array} */
    var followedKeys = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
    }
    return followedKeys;
  };
  Object.defineProperty(state, "__esModule", {
    value : true
  });
  var isDefined = SmartHttpRemote(434);
  var remote = SmartHttpRemote(10);
  var playval = SmartHttpRemote(294);
  var u = remote.getGlobal().appConfig.newsVersion;
  /**
   * @param {!Object} data
   * @param {string} action
   * @return {?}
   */
  state.settingsReducer = function(data, action) {
    if (void 0 === data) {
      data = {};
    }
    var _Object$assign;
    var props;
    var item;
    var o;
    var properties;
    var _a;
    var param2 = action.type;
    var value = action.data;
    var p = void 0 === value ? {} : value;
    var property = action.domain;
    var interpolants = action.enabledDefs;
    var isEnabled = action.enabled;
    var actionHeaders = action.showNews;
    var name = action.propKey;
    var addedProduct = action.loginReminderType;
    var aTab = action.delightfulMessageId;
    var args = data[property] || {};
    switch(param2) {
      case playval.t.SETTINGS_INITIAL:
        return Object.assign({}, data, p);
      case playval.t.TOGGLE_DEFS:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            enabledDefs : interpolants
          })
        });
      case playval.t.TOGGLE_SITE:
        return Object.assign({}, data, ((_Object$assign = {})[property] = Object.assign({}, args, {
          enabled : isEnabled,
          disabledDate : true === isEnabled ? null : Date.now()
        }), _Object$assign));
      case playval.t.TOGGLE_FIELD:
        return Object.assign({}, data, ((props = {})[property] = Object.assign({}, data[property], {
          disabledFields : Object.assign({}, args.disabledFields, p)
        }), props));
      case playval.t.SHOW_NEWS:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            showNews : actionHeaders
          })
        });
      case playval.t.SHOW_ONBOARDING:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            showOnboarding : true
          })
        });
      case playval.t.SEEN_ONBOARDING:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            showOnboarding : false
          })
        });
      case playval.t.SEEN_ADVANCED_INLINE_CARDS_ONBOARDING:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            seenAdvancedInlineCardsOnboarding : true
          })
        });
      case playval.t.SEEN_DELIGHTFUL_MESSAGE:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            seenDelightfulMessages : log(data.common.seenDelightfulMessages || [], [aTab])
          })
        });
      case playval.t.SEEN_GDOCS_OPT_IN:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            seenGdocsOptIn : true
          })
        });
      case playval.t.SEEN_GDOCS_LARGE_DOCUMENT_WARNING:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            seenGdocsLargeDocumentWarning : true
          })
        });
      case playval.t.SET_GDOCS_INITIAL_DISABLE:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            gdocsWasInitiallyDisabled : true
          })
        });
      case playval.t.HIDE_GDOCS_SIGNIN_POPUP:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            hideGdocsSigninPopupTime : Date.now()
          })
        });
      case playval.t.SET_GDOCS_ENABLED_SETTING:
        /** @type {string} */
        var type = "docs.google.com";
        return true === data.common.clickedGdocsAuthentication ? Object.assign({}, data, ((item = {})[type] = Object.assign({}, data[type], {
          enabled : true,
          disabledDate : null
        }), item.common = Object.assign({}, data.common, {
          clickedGdocsAuthentication : false,
          gdocsWasInitiallyDisabled : true
        }), item)) : data;
      case playval.t.CLICK_GDOCS_AUTHENTICATION:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            clickedGdocsAuthentication : true
          })
        });
      case playval.t.SEEN_NEWS:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            seenNewsVersion : u
          })
        });
      case playval.t.SET_DAPI_PROP:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, (o = {}, o[name] = p, o))
        });
      case playval.t.DISABLE_REMINDER_NOTIFICATION:
        return Object.assign({}, data, ((properties = {})[property] = Object.assign({}, args, {
          disableReminderNotification : true
        }), properties));
      case playval.t.SHOW_DISABLE_REMINDER:
        return Object.assign({}, data, ((_a = {})[property] = Object.assign({}, args, {
          disabledDate : Date.now()
        }), _a));
      case playval.t.EDGE_POPUP_FROM_GBUTTON:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            showEdgePopupFromGButton : true
          })
        });
      case playval.t.SHOW_LOGIN_REMINDER:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            loginReminderType : addedProduct,
            showLoginReminder : true
          })
        });
      case playval.t.HIDE_LOGIN_REMINDER:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            showLoginReminder : false
          })
        });
      case playval.t.DISABLE_LOGIN_REMINDER:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            loginReminderDisabled : true,
            showLoginReminder : false
          })
        });
      case playval.t.DISABLE_EMAIL_SUMMARIZATION:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            emailSummarizationDisabled : true
          })
        });
      case playval.t.HIDE_EMOTIONS_PROMPT:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            emotionsSettings : update({}, data.common.emotionsSettings || {}, {
              hideEnabledPopup : true
            })
          })
        });
      case playval.t.SEEN_CLARITY_NOTIFICATION:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            seenClarityNotification : true
          })
        });
      case playval.t.SET_SAFARI_MIGRATION_POPUP_SHOWN_TIMESTAMP:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            safariMigrationPopupShownTimestamp : Date.now()
          })
        });
      case playval.t.SET_SAFARI_MIGRATION_BACKUP_NOTIFY_FIRST_TIMESTAMP:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            safariMigrationBackupNotifFirstTimestamp : Date.now()
          })
        });
      case playval.t.SET_SAFARI_MIGRATION_BACKUP_NOTIFY_SECOND_TIMESTAMP:
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            safariMigrationBackupNotifSecondTimestamp : Date.now()
          })
        });
      case playval.t.SHOW_GMAIL_SEND_EMAIL_PREMIUM_POPUP:
        var maxTime = data.common.sendEmailPremiumPopupViews;
        var O = isDefined(maxTime) ? maxTime + 1 : 1;
        return Object.assign({}, data, {
          common : Object.assign({}, data.common, {
            sendEmailPremiumPopupViews : O,
            sendEmailPremiumPopupLastShownTimestamp : Date.now()
          })
        });
      default:
        return data;
    }
  };
}, function(canCreateDiscussions, BeautifulProperties, getFilename) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var label = getFilename(435);
  /**
   * @param {?} value
   * @param {string} obj
   * @return {?}
   */
  BeautifulProperties.tabsReducer = function(value, obj) {
    if (void 0 === value) {
      value = {};
    }
    var object_t = obj.type;
    var active = obj.data;
    switch(object_t) {
      case label.t.SET_ACTIVE_TAB:
        return Object.assign({}, value, {
          active : active
        });
      default:
        return value;
    }
  };
}, function(canCreateDiscussions, exports, require) {
  var parseRow = this && this.__assign || Object.assign || function(obj) {
    var props;
    /** @type {number} */
    var i = 1;
    /** @type {number} */
    var length = arguments.length;
    for (; i < length; i++) {
      var prop;
      for (prop in props = arguments[i]) {
        if (Object.prototype.hasOwnProperty.call(props, prop)) {
          obj[prop] = props[prop];
        }
      }
    }
    return obj;
  };
  var promise = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var getRawMessage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, y && (t = y[2 & op[0] ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) {
                return t;
              }
              switch(y = 0, t && (op = [0, t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  y = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              y = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var y;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var formats = require(368);
  var ts = require(369);
  var PreferencesBase = require(507);
  exports.ValueManager = PreferencesBase.ValueManager;
  exports.BaseStorage = PreferencesBase.BaseStorage;
  exports.MemoryStorage = PreferencesBase.MemoryStorage;
  exports.ContainerIdManager = PreferencesBase.ContainerIdManager;
  exports.GAClientIdManager = PreferencesBase.GAClientIdManager;
  exports.LocalStorage = PreferencesBase.LocalStorage;
  exports.CookieStorage = PreferencesBase.CookieStorage;
  exports.ChromeCookieStorage = PreferencesBase.ChromeCookieStorage;
  exports.WebExtensionsCookieStorage = PreferencesBase.WebExtensionsCookieStorage;
  exports.ReadonlyWebExtensionsCookieStorage = PreferencesBase.ReadonlyWebExtensionsCookieStorage;
  exports.BackendStorage = PreferencesBase.BackendStorage;
  var tsUnit_2 = require(508);
  exports.GoogleAnalyticsClient = tsUnit_2.GoogleAnalyticsClient;
  /** @type {!Array} */
  var scenes = ["client", "clientVersion", "userId", "isTest", "containerId", "instanceId", "batchId"];
  /** @type {string} */
  var obj = "gnar_nextPingTimestamp";
  var ReactMeteorData = function() {
    /**
     * @param {string} backend_hostname
     * @param {string} backend_port
     * @param {string} http
     * @param {?} screen
     * @param {?} vncClientScreen
     * @param {!Object} zkOptions
     * @param {!Array} noAckBatchOptions
     * @param {?} sslOptions
     * @return {undefined}
     */
    function Client(backend_hostname, backend_port, http, screen, vncClientScreen, zkOptions, noAckBatchOptions, sslOptions) {
      if (void 0 === zkOptions) {
        /** @type {null} */
        zkOptions = null;
      }
      if (void 0 === noAckBatchOptions) {
        /** @type {boolean} */
        noAckBatchOptions = false;
      }
      /** @type {string} */
      this._client = backend_port;
      /** @type {string} */
      this._clientVersion = http;
      this._fetch = screen;
      this._containerIdManager = vncClientScreen;
      /** @type {!Object} */
      this._logger = zkOptions;
      /** @type {!Array} */
      this._storePingTimestamp = noAckBatchOptions;
      this._gaClientOpt = sslOptions;
      this._instanceId = formats.alphanumeric(8);
      /** @type {number} */
      this._batchId = 0;
      /** @type {boolean} */
      this._isUserReady = false;
      /** @type {!Array} */
      this._queue = [];
      /** @type {string} */
      this._eventsUrl = backend_hostname + "/events";
      /** @type {string} */
      this._liteUrl = backend_hostname + "/lite";
      this._pingMaybe();
    }
    return Client.prototype.track = function(data, params) {
      if (void 0 === params && (params = {
        lite : false
      }), 0 !== data.eventName.indexOf(this._client + "/")) {
        throw new Error("Event name " + data.eventName + " should start with '" + this._client + "/'");
      }
      return Object.keys(data).forEach(function(sceneUid) {
        if (-1 !== scenes.indexOf(sceneUid)) {
          throw new Error("Event data should not contain '" + sceneUid + "' prop.");
        }
      }), this._isUserReady || params.lite && !params.sendUser ? (data.eventName !== this._client + "/ping" && this._pingMaybe(), this._send(data, params)) : this._enqueue(data, params);
    }, Client.prototype.setUser = function(value, record) {
      if (null === value || "" === value) {
        throw new Error("Invalid userId: " + value);
      }
      var n = this._userId && this._userId !== value && !(/^-/.test(value) && /^-/.test(this._userId));
      this._isTest = record;
      /** @type {string} */
      this._userId = value;
      if (n) {
        this._pingMaybe(true);
      }
      if (!this._isUserReady) {
        this._execQueue();
        /** @type {boolean} */
        this._isUserReady = true;
      }
    }, Client.prototype.getContainerId = function() {
      return this._containerIdManager.getContainerId();
    }, Client.prototype._setNextPingTimestamp = function() {
      var flax = this;
      var default_favicon = formats.getNextPingDate();
      if (this._nextPingTimestamp = default_favicon, this._storePingTimestamp) {
        try {
          localStorage.setItem(obj, default_favicon.toString());
        } catch (newSelected) {
          ts.guard(function() {
            return flax._logger && flax._logger.nextPingDateWriteError(newSelected);
          });
        }
      }
    }, Client.prototype._getNextPingTimestamp = function() {
      var flax = this;
      var t = this._nextPingTimestamp;
      if (void 0 !== t || !this._storePingTimestamp) {
        return t;
      }
      try {
        var owner = localStorage.getItem(obj);
        /** @type {(number|undefined)} */
        t = null === owner ? void 0 : parseInt(owner, 10);
      } catch (newSelected) {
        t = void 0;
        ts.guard(function() {
          return flax._logger && flax._logger.nextPingDateReadError(newSelected);
        });
      }
      return t;
    }, Client.prototype._shouldPing = function(a22) {
      if (a22) {
        return true;
      }
      var t = this._getNextPingTimestamp();
      return void 0 === t || t < Date.now();
    }, Client.prototype._pingMaybe = function(e) {
      var node = this;
      if (void 0 === e && (e = false), this._shouldPing(e)) {
        this._setNextPingTimestamp();
        var data = {
          eventName : this._client + "/ping",
          referrer : document.referrer,
          url : document.location.href
        };
        if (this._gaClientOpt) {
          this._gaClientOpt.getClientId().then(function(canCreateDiscussions) {
            return node.track(parseRow({}, data, {
              gaClientId : canCreateDiscussions
            }));
          }, function(canCreateDiscussions) {
            return node.track(data);
          });
        } else {
          this.track(data);
        }
      }
    }, Client.prototype.pingMaybe = function() {
      this._pingMaybe();
    }, Client.prototype._enqueue = function(cb, data) {
      var _nightmare = this;
      return new Promise(function(n, reject) {
        _nightmare._queue.push([cb, data, {
          resolve : n,
          reject : reject
        }]);
      });
    }, Client.prototype._execQueue = function() {
      var that = this;
      this._queue.forEach(function(attributes) {
        var a = attributes[0];
        var updated = attributes[1];
        var d = attributes[2];
        var resolve = d.resolve;
        var reject = d.reject;
        that._send(a, updated).then(function() {
          return resolve();
        }).catch(function(x) {
          return reject(x);
        });
      });
      /** @type {!Array} */
      this._queue = [];
    }, Client.prototype._withClientProps = function(data) {
      return parseRow({}, data, {
        client : this._client,
        clientVersion : this._clientVersion
      });
    }, Client.prototype._withUserProps = function(data) {
      return promise(this, void 0, void 0, function() {
        var id;
        return getRawMessage(this, function(_context) {
          switch(_context.label) {
            case 0:
              return [4, this.getContainerId().catch(function() {
              })];
            case 1:
              return id = _context.sent(), [2, parseRow({}, data, {
                containerId : id,
                userId : this._userId,
                isTest : this._isTest
              })];
          }
        });
      });
    }, Client.prototype._withBrowserProps = function(data) {
      return parseRow({}, data, {
        userAgent : navigator.userAgent,
        screenWidth : screen.width,
        screenHeight : screen.height
      });
    }, Client.prototype._withInstanceProps = function(data) {
      /** @type {number} */
      var batchId = this._batchId++;
      return parseRow({}, data, {
        instanceId : this._instanceId,
        batchId : batchId
      });
    }, Client.prototype._send = function(args, obj) {
      return promise(this, void 0, void 0, function() {
        var error;
        var that = this;
        return getRawMessage(this, function(_a) {
          switch(_a.label) {
            case 0:
              return _a.trys.push([0, 4, , 5]), args = this._withClientProps(args), (!obj.lite || obj.lite && obj.sendInstance) && (args = this._withInstanceProps(args)), !obj.lite || obj.lite && obj.sendUser ? [4, this._withUserProps(args)] : [3, 2];
            case 1:
              args = _a.sent();
              /** @type {number} */
              _a.label = 2;
            case 2:
              return (!obj.lite || obj.lite && obj.sendBrowser) && (args = this._withBrowserProps(args)), [4, this._doSend(obj.lite ? this._liteUrl : this._eventsUrl, args)];
            case 3:
              return [2, _a.sent()];
            case 4:
              throw error = _a.sent(), ts.guard(function() {
                return that._logger && that._logger.sendError(error);
              }), error;
            case 5:
              return [2];
          }
        });
      });
    }, Client.prototype._doSend = function(message, callback) {
      return this._fetch(message, {
        mode : "cors",
        credentials : "include",
        method : "post",
        headers : {
          "Content-Type" : "application/json"
        },
        body : JSON.stringify({
          events : [callback]
        })
      }).then(function(rv) {
        return rv.ok ? Promise.resolve() : Promise.reject(new Error(rv.statusText));
      });
    }, Client;
  }();
  exports.GnarClientImpl = ReactMeteorData;
  var GetFlashVars = function() {
    /**
     * @return {undefined}
     */
    function TouchTracker() {
      /** @type {!Array} */
      this.history = [];
    }
    return TouchTracker.prototype.track = function(data) {
      return this.history.push(data), Promise.resolve();
    }, TouchTracker.prototype.pingMaybe = function() {
    }, TouchTracker.prototype.setUser = function(login, cb) {
    }, TouchTracker.prototype.getContainerId = function() {
      return Promise.resolve("dummy_container_id");
    }, TouchTracker;
  }();
  exports.MemoryGnarClient = GetFlashVars;
  var BetterInterface = function() {
    /**
     * @return {undefined}
     */
    function self() {
    }
    return self.prototype.track = function(data) {
      /** @type {string} */
      var t = "trackingGnar";
      try {
        /** @type {*} */
        var n = JSON.parse(localStorage.getItem(t)) || [];
        n.push(data);
        localStorage.setItem(t, JSON.stringify(n));
      } catch (e) {
      }
      return Promise.resolve();
    }, self.prototype.pingMaybe = function() {
    }, self.prototype.setUser = function(login, cb) {
    }, self.prototype.getContainerId = function() {
      return Promise.resolve("dummy_container_id");
    }, self;
  }();
  exports.LocalStorageGnarClient = BetterInterface;
}, function(canCreateDiscussions, exports, String) {
  /**
   * @param {!Object} data
   * @return {?}
   */
  function onDeleteDone(data) {
    return {
      type : "success",
      value : data
    };
  }
  /**
   * @param {!Error} exception
   * @return {?}
   */
  function failure(exception) {
    return {
      type : "failure",
      error : exception
    };
  }
  /**
   * @param {?} handler
   * @return {?}
   */
  function callback(handler) {
    return handler.then(onDeleteDone, failure);
  }
  /**
   * @param {number} n
   * @param {number} t
   * @param {!Function} c
   * @return {?}
   */
  function f(n, t, c) {
    var a = c();
    return n > 0 ? a.catch(function(canCreateDiscussions) {
      return (new Promise(function(_nextEventFunc, n) {
        return setTimeout(_nextEventFunc, t);
      })).then(function(canCreateDiscussions) {
        return f(n - 1, t, c);
      });
    }) : a;
  }
  var travelElement;
  var cb = this && this.__extends || (travelElement = Object.setPrototypeOf || {
    __proto__ : []
  } instanceof Array && function(json, b) {
    /** @type {!Object} */
    json.__proto__ = b;
  } || function(scope, args) {
    var key;
    for (key in args) {
      if (args.hasOwnProperty(key)) {
        scope[key] = args[key];
      }
    }
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    travelElement(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  var tailRun = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var gotoNewOfflinePage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, y && (t = y[2 & op[0] ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) {
                return t;
              }
              switch(y = 0, t && (op = [0, t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  y = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              y = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var y;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var c = String(384);
  var kind = String(368);
  var s = String(369);
  /**
   * @return {?}
   */
  var parseDate = function() {
    return (new Date).setFullYear((new Date).getFullYear() + 10);
  };
  /**
   * @return {?}
   */
  var restore = function() {
    return (new Date).setMinutes((new Date).getMinutes() + 10);
  };
  /** @type {!RegExp} */
  var BASIC_DOMAIN_REGEXP = /^\.\w+\.\w+/;
  var Number = function() {
    /**
     * @param {string} e
     * @param {!Array} n
     * @param {!Object} func
     * @param {number} msg
     * @param {number} t
     * @param {?} value
     * @return {undefined}
     */
    function e(e, n, func, msg, t, value) {
      if (void 0 === n) {
        /** @type {!Array} */
        n = [];
      }
      if (void 0 === func) {
        /** @type {null} */
        func = null;
      }
      if (void 0 === msg) {
        /** @type {number} */
        msg = 3E5;
      }
      if (void 0 === t) {
        /** @type {number} */
        t = 0;
      }
      if (void 0 === value) {
        /**
         * @return {?}
         */
        value = function() {
          return Date.now();
        };
      }
      /** @type {string} */
      this.primaryStorage = e;
      /** @type {!Array} */
      this.secondaryStorages = n;
      /** @type {!Object} */
      this._logger = func;
      /** @type {number} */
      this._cacheSuccessTimeoutMillis = msg;
      /** @type {number} */
      this._cacheFailureTimeoutMillis = t;
      this._getTime = value;
      /** @type {!Array<?>} */
      this._allStorages = [e].concat(n);
    }
    return e.prototype._expireCache = function(key) {
      if (0 === key) {
        /** @type {number} */
        this._cacheExpireTimestamp = 0;
      } else {
        if (key > 0) {
          this._cacheExpireTimestamp = this._getTime() + key;
        }
      }
    }, e.prototype.getValue = function() {
      var _this = this;
      if (void 0 !== this._cache && (void 0 === this._cacheExpireTimestamp || this._getTime() < this._cacheExpireTimestamp)) {
        return this._cache;
      }
      var touchSystem = s.guard(function() {
        return _this._logger && _this._logger.getValueStart(_this.valueLabel());
      });
      var cache = this._valueFromStorage();
      return cache && (this._cache = cache, this._cacheExpireTimestamp = void 0, cache.then(function(canCreateDiscussions) {
        return _this._expireCache(_this._cacheSuccessTimeoutMillis);
      }, function(canCreateDiscussions) {
        return _this._expireCache(_this._cacheFailureTimeoutMillis);
      })), cache.then(function(canCreateDiscussions) {
        if (touchSystem) {
          s.guard(function() {
            return touchSystem.getValueSuccess();
          });
        }
      }, function(e) {
        if (touchSystem) {
          s.guard(function() {
            return touchSystem.getValueFailure(e);
          });
        }
      }), cache;
    }, e.prototype._valueFromStorage = function() {
      var that = this;
      return Promise.all(this._allStorages.map(function(canCreateDiscussions) {
        return callback(canCreateDiscussions.safeGetValue(that.key()));
      })).then(function(t) {
        var value = t[0];
        if ("failure" === value.type) {
          return Promise.reject("getting value from primary storage '" + that.primaryStorage.name + "' has failed: " + value.error);
        }
        var r = t.find(function(data) {
          return "success" === data.type && void 0 !== data.value;
        });
        if (void 0 === r) {
          return Promise.resolve(void 0);
        }
        var i = r.value;
        /** @type {boolean} */
        var o = "success" === value.type && void 0 === value.value && void 0 !== r;
        var temp = t.reduce(function(e, tag, n) {
          return "success" === tag.type && tag.value !== i ? e.concat(n) : e;
        }, []);
        return that.setValue(i, o, false, temp);
      });
    }, e.prototype.setValue = function(name, o, n, temp) {
      var props = this;
      if (void 0 === o) {
        /** @type {boolean} */
        o = false;
      }
      if (void 0 === n) {
        /** @type {boolean} */
        n = false;
      }
      if (void 0 === temp) {
        /** @type {!Array<?>} */
        temp = Array.from(Array(this._allStorages.length).keys());
      }
      var iterable = temp.map(function(cVariable) {
        return callback(props._allStorages[cVariable].safeSetValue(props.key(), name));
      });
      /** @type {!Promise<?>} */
      var loadPropPromise = Promise.all(iterable).then(function(data) {
        if (o || n) {
          var json = data[0];
          if ("success" !== json.type) {
            return Promise.reject("setting " + props.valueLabel() + " to primary storage has failed:\n                " + json.error);
          }
        }
        return Promise.resolve(name);
      });
      return loadPropPromise.then(function(canCreateDiscussions) {
        if (o) {
          s.guard(function() {
            return props._logger && props._logger.valueRecovered();
          });
        } else {
          if (n) {
            s.guard(function() {
              return props._logger && props._logger.valueGenerated();
            });
          }
        }
      }), loadPropPromise;
    }, e;
  }();
  exports.ValueManager = Number;
  var NumberType = function(s) {
    /**
     * @return {?}
     */
    function t() {
      var o = null !== s && s.apply(this, arguments) || this;
      return o.containerIdLength = 12, o.getContainerId = function() {
        return s.prototype.getValue.call(o).then(function(n) {
          return tailRun(o, void 0, void 0, function() {
            return gotoNewOfflinePage(this, function(_context) {
              switch(_context.label) {
                case 0:
                  return void 0 !== n ? [3, 2] : [4, s.prototype.setValue.call(this, this.generateContainerId(), false, true)];
                case 1:
                  return [2, _context.sent()];
                case 2:
                  return [2, n];
              }
            });
          });
        });
      }, o;
    }
    return cb(t, s), t.prototype.key = function() {
      return "gnar_containerId";
    }, t.prototype.valueLabel = function() {
      return "ContainerId";
    }, t.prototype.generateContainerId = function() {
      return kind.alphanumeric(this.containerIdLength);
    }, t;
  }(Number);
  exports.ContainerIdManager = NumberType;
  var log = function(o) {
    /**
     * @return {?}
     */
    function item() {
      return null !== o && o.apply(this, arguments) || this;
    }
    return cb(item, o), item.prototype.key = function() {
      return "ga_clientId";
    }, item.prototype.valueLabel = function() {
      return "GAClientId";
    }, item.prototype.setId = function(type) {
      o.prototype.setValue.call(this, type, false, true);
    }, item;
  }(Number);
  exports.GAClientIdManager = log;
  var object = function() {
    /**
     * @param {string} type
     * @return {undefined}
     */
    function e(type) {
      /** @type {string} */
      this.name = type;
    }
    return e.prototype.safeSetValue = function(i, value) {
      var morsel = this;
      return this.ensureAvailable(i).then(function() {
        return morsel.setValue(i, value);
      });
    }, e.prototype.safeGetValue = function(j) {
      var canvasLayersManager = this;
      return this.ensureAvailable(j).then(function() {
        return canvasLayersManager.getValue(j);
      }).then(function(to) {
        return "" === to ? void 0 : to;
      });
    }, e;
  }();
  exports.BaseStorage = object;
  var keydownSignal = function(arg) {
    /**
     * @param {string} value
     * @param {string} domain
     * @return {?}
     */
    function update(value, domain) {
      var req = arg.call(this, "chromeCookie") || this;
      if (req._url = value, req._domain = domain, !BASIC_DOMAIN_REGEXP.test(domain)) {
        throw new Error('Incorrect cookie domain provided.\n        Use top-level domain, starting from "."');
      }
      return req;
    }
    return cb(update, arg), update.prototype._hasRuntimeError = function() {
      return window.chrome && window.chrome.runtime && window.chrome.runtime.lastError;
    }, update.prototype.ensureAvailable = function() {
      var req = this;
      return f(2, 1E3, function() {
        return new Promise(function(saveNotifs, cbf) {
          var undefined = kind.alphanumeric(10);
          try {
            window.chrome.cookies.set({
              name : undefined,
              value : undefined,
              url : req._url,
              domain : req._domain,
              expirationDate : restore() / 1E3
            }, function(s) {
              var o = req._hasRuntimeError();
              if (!s && o) {
                cbf("chrome.cookie.set failed with an error: " + o.message);
              }
              if (s && s.value === undefined) {
                saveNotifs();
              } else {
                cbf(new Error("ChromeCookieStorage is unavailable.\n              Availability test failed.\n              Tried to set " + undefined + ", the result is " + (s ? s.value : s) + "."));
              }
            });
          } catch (thismat) {
            cbf(thismat);
          }
        });
      });
    }, update.prototype.getValue = function(val) {
      var oldManifest = this;
      return new Promise(function($, callback) {
        try {
          window.chrome.cookies.get({
            url : oldManifest._url,
            name : val
          }, function(e) {
            var err = oldManifest._hasRuntimeError();
            if (!e && err) {
              callback("chrome.cookie.get failed with an error: " + err.message);
            }
            $(e ? e.value : void 0);
          });
        } catch (identifierPositions) {
          callback(identifierPositions);
        }
      });
    }, update.prototype.setValue = function(id, n) {
      var req = this;
      return new Promise(function(saveNotifs, errorCallback) {
        try {
          window.chrome.cookies.set({
            name : id,
            value : n,
            url : req._url,
            domain : req._domain,
            expirationDate : parseDate() / 1E3
          }, function(arg) {
            var controlFlowAction = req._hasRuntimeError();
            if (!arg && controlFlowAction) {
              errorCallback("chrome.cookie.set failed with an error: " + controlFlowAction.message);
            }
            if (!(arg && arg.value === n)) {
              errorCallback(new Error("setValue for " + id + " failed.\n            Tried to set " + n + ", the result is " + (arg ? arg.value : arg) + "."));
            }
            saveNotifs();
          });
        } catch (currentDirPath) {
          errorCallback(currentDirPath);
        }
      });
    }, update;
  }(object);
  exports.ChromeCookieStorage = keydownSignal;
  var keypressSignal = function(arg) {
    /**
     * @param {string} value
     * @param {string} domain
     * @return {?}
     */
    function update(value, domain) {
      var req = arg.call(this, "webExtensionsCookie") || this;
      if (req._url = value, req._domain = domain, !BASIC_DOMAIN_REGEXP.test(domain)) {
        throw new Error('Incorrect cookie domain provided.\n        Use top-level domain, starting from "."');
      }
      return req;
    }
    return cb(update, arg), update.prototype.ensureAvailable = function() {
      var req = this;
      return f(2, 1E3, function() {
        return new Promise(function(saveNotifs, stepCallback) {
          var undefined = kind.alphanumeric(10);
          window.browser.cookies.set({
            name : undefined,
            value : undefined,
            url : req._url,
            domain : req._domain,
            expirationDate : restore() / 1E3
          }).then(function() {
            window.browser.cookies.get({
              url : req._url,
              name : undefined
            }).then(function(h) {
              if (h && h.value === undefined) {
                saveNotifs();
              } else {
                stepCallback(new Error("WebExtensionsCookieStorage is unavailable.\n              Availability test failed.\n              Tried to set " + undefined + ", the result is " + (h ? h.value : h) + "."));
              }
            }).catch(function(origErr) {
              stepCallback("browser.cookies.get failed with an error: " + origErr.message);
            });
          }).catch(function(origErr) {
            stepCallback("browser.cookies.set failed with an error: " + origErr.message);
          });
        });
      });
    }, update.prototype.getValue = function(val) {
      var oldManifest = this;
      return new Promise(function(callback, saveNotifs) {
        window.browser.cookies.get({
          url : oldManifest._url,
          name : val
        }).then(function(data) {
          callback(data ? data.value : void 0);
        }).catch(function(origErr) {
          saveNotifs("browser.cookies.get failed with an error: " + origErr.message);
        });
      });
    }, update.prototype.setValue = function(name, value) {
      var req = this;
      return new Promise(function(saveNotifs, stepCallback) {
        window.browser.cookies.set({
          name : name,
          value : value,
          url : req._url,
          domain : req._domain,
          expirationDate : parseDate() / 1E3
        }).then(function(item) {
          if (!(item && item.value === value)) {
            stepCallback(new Error("setValue failed.\n          Tried to set " + value + ", the result is " + (item ? item.value : item) + "."));
          }
          saveNotifs();
        }).catch(function(origErr) {
          stepCallback("browser.cookies.set failed with an error: " + origErr.message);
        });
      });
    }, update;
  }(object);
  exports.WebExtensionsCookieStorage = keypressSignal;
  var monitoredObjectEvents = function(arg) {
    /**
     * @param {string} value
     * @param {string} domain
     * @return {?}
     */
    function update(value, domain) {
      var req = arg.call(this, "readonlyWebExtensionsCookie") || this;
      if (req._url = value, req._domain = domain, !BASIC_DOMAIN_REGEXP.test(domain)) {
        throw new Error('Incorrect cookie domain provided.\n        Use top-level domain, starting from "."');
      }
      return req;
    }
    return cb(update, arg), update.prototype.ensureAvailable = function() {
      return Promise.resolve();
    }, update.prototype.getValue = function(val) {
      var oldManifest = this;
      return new Promise(function(callback, saveNotifs) {
        window.browser.cookies.get({
          url : oldManifest._url,
          name : val
        }).then(function(data) {
          callback(data ? data.value : void 0);
        }).catch(function(origErr) {
          saveNotifs("browser.cookies.get failed with an error: " + origErr.message);
        });
      });
    }, update.prototype.setValue = function() {
      return Promise.reject("can not set value for the readonly storage");
    }, update;
  }(object);
  exports.ReadonlyWebExtensionsCookieStorage = monitoredObjectEvents;
  var LocalStorage = function(callback) {
    /**
     * @return {?}
     */
    function init() {
      return callback.call(this, "localStorage") || this;
    }
    return cb(init, callback), init.prototype.ensureAvailable = function(type) {
      /** @type {string} */
      var name = type + "_test";
      var value = kind.alphanumeric(10);
      return new Promise(function(saveNotifs, stepCallback) {
        localStorage.setItem(name, value);
        if (localStorage.getItem(name) !== value) {
          stepCallback(new Error("LocalStorage is unavailable.\n          Availability test failed.\n          Tried to set " + value + ",\n          the result is " + localStorage.getItem(name) + "."));
        } else {
          saveNotifs();
        }
        localStorage.removeItem(name);
      });
    }, init.prototype.getValue = function(name) {
      var argument = localStorage.getItem(name);
      return new Promise(function(invalidArgumentCallback, n) {
        return invalidArgumentCallback(null === argument ? void 0 : argument);
      });
    }, init.prototype.setValue = function(value, type) {
      return new Promise(function(successCB, canCreateDiscussions) {
        localStorage.setItem(value, type);
        successCB();
      });
    }, init;
  }(object);
  exports.LocalStorage = LocalStorage;
  var CookieStorage = function(fn) {
    /**
     * @param {string} domain
     * @return {?}
     */
    function exports(domain) {
      var tr = fn.call(this, "cookie") || this;
      if (tr._domain = domain, !BASIC_DOMAIN_REGEXP.test(domain)) {
        throw new Error('Incorrect cookie domain provided.\n        Use top-level domain, starting from "."');
      }
      return tr;
    }
    return cb(exports, fn), exports.prototype._getCookieOptions = function() {
      return {
        path : "/",
        domain : this._domain,
        expires : new Date(parseDate())
      };
    }, exports.prototype.ensureAvailable = function() {
      var result = kind.alphanumeric(10);
      return new Promise(function(saveNotifs, stepCallback) {
        c.default(result, result);
        if (c.default(result) !== result) {
          stepCallback(new Error("CookieStorage is unavailable.\n          Availability test failed.\n          Tried to set " + result + ", the result is " + c.default(result) + "."));
        } else {
          saveNotifs();
        }
        c.default(result, null);
      });
    }, exports.prototype.getValue = function(key) {
      return new Promise(function(cb, n) {
        return cb(c.default(key));
      });
    }, exports.prototype.setValue = function(key, value) {
      var n = this;
      return new Promise(function(successCB, canCreateDiscussions) {
        c.default(key, value, n._getCookieOptions());
        successCB();
      });
    }, exports;
  }(object);
  exports.CookieStorage = CookieStorage;
  var O = function(self) {
    /**
     * @param {?} key
     * @param {string} value
     * @return {?}
     */
    function callback(key, value) {
      var that = self.call(this, "backend") || this;
      return that._fetch = key, that._url = value, that._baseUrl = value + "/cookies", that;
    }
    return cb(callback, self), callback.prototype.ensureAvailable = function(name) {
      var that = this;
      /** @type {string} */
      var path = name + "_test";
      var prevvalue = kind.alphanumeric(10);
      /** @type {number} */
      var rootJSPath = (restore() - Date.now()) / 1E3;
      /** @type {string} */
      var data = this._baseUrl + "?name=" + path;
      /** @type {string} */
      var msg = data + "&value=" + prevvalue + "&maxAge=" + rootJSPath;
      return this._doSend(msg, "post").then(function(result) {
        if (!result.ok) {
          throw new Error("BackendStorage is unavailable.\n          Availability test failed.\n          Tried to set " + prevvalue + ". Request failed.\n        ");
        }
      }).then(function() {
        return that._doSend(data, "get").then(function(batchResponse) {
          if (batchResponse.ok) {
            return batchResponse.json().then(function(elem) {
              if (elem.value !== prevvalue) {
                throw new Error("BackendStorage is unavailable.\n                Availability test failed.\n                Tried to get " + path + " from server.\n                Got " + elem.value + " instead of " + prevvalue + ".");
              }
            });
          }
          throw new Error("BackendStorage is unavailable.\n            Availability test failed.\n            Tried to get " + path + " from server. Request failed.");
        });
      });
    }, callback.prototype._doSend = function(message, callback) {
      return this._fetch(message, {
        credentials : "include",
        method : callback
      });
    }, callback.prototype.getValue = function(key) {
      /** @type {string} */
      var msg = this._baseUrl + "?name=" + key;
      return this._doSend(msg, "get").then(function(rawResp) {
        return rawResp.json();
      }).then(function(select_ele) {
        return select_ele.value;
      });
    }, callback.prototype.setValue = function(id, type) {
      /** @type {number} */
      var pwd = (parseDate() - Date.now()) / 1E3;
      /** @type {string} */
      var data = this._baseUrl + "?name=" + id + "&value=" + type + "&maxAge=" + pwd;
      return this._doSend(data, "post").then(function() {
      });
    }, callback;
  }(object);
  exports.BackendStorage = O;
  var MemoryStorage = function(list) {
    /**
     * @param {number} value
     * @return {?}
     */
    function fn(value) {
      if (void 0 === value) {
        value = void 0;
      }
      var x = list.call(this, "memory") || this;
      return x._value = value, x;
    }
    return cb(fn, list), fn.prototype.ensureAvailable = function() {
      return Promise.resolve();
    }, fn.prototype.getValue = function(val) {
      return Promise.resolve(this._value);
    }, fn.prototype.setValue = function(variableId, value) {
      return this._value = value, Promise.resolve();
    }, fn;
  }(object);
  exports.MemoryStorage = MemoryStorage;
}, function(canCreateDiscussions, t, n) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  /**
   * @return {undefined}
   */
  var run = function() {
    var i;
    var doc;
    var script;
    var url;
    var r;
    var scriptElem;
    var wafCss;
    /** @type {!Window} */
    i = window;
    /** @type {!HTMLDocument} */
    doc = document;
    /** @type {string} */
    script = "script";
    /** @type {string} */
    url = "//www.google-analytics.com/analytics.js";
    /** @type {string} */
    r = "ga";
    /** @type {string} */
    i.GoogleAnalyticsObject = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments);
    };
    /** @type {number} */
    i[r].l = (new Date).getTime();
    /** @type {!Element} */
    scriptElem = doc.createElement(script);
    /** @type {!Element} */
    wafCss = doc.getElementsByTagName(script)[0];
    /** @type {number} */
    scriptElem.async = 1;
    /** @type {string} */
    scriptElem.src = url;
    wafCss.parentNode.insertBefore(scriptElem, wafCss);
  };
  var offsetFromCenter = function() {
    /**
     * @param {?} props
     * @param {!Object} container
     * @param {number} newStatement
     * @return {undefined}
     */
    function render(props, container, newStatement) {
      if (void 0 === newStatement) {
        /** @type {boolean} */
        newStatement = true;
      }
      var self = this;
      /** @type {boolean} */
      this._isReady = false;
      /** @type {!Array} */
      this._gaQueue = [];
      if (newStatement) {
        run();
      }
      this._clientId = container.getValue().then(function(SLACK_APPID) {
        return SLACK_APPID ? (ga("create", props, "auto", {
          clientId : SLACK_APPID
        }), SLACK_APPID) : (ga("create", props, "auto"), new Promise(function(fetcherPromise, stepCallback) {
          return ga(function($this) {
            if ($this) {
              var id = $this.get("clientId");
              container.setId(id);
              fetcherPromise(id);
            } else {
              stepCallback(new Error("No default google analytics tracker found after analytics.js was ready"));
            }
          });
        }));
      });
      this._clientId.then(function(canCreateDiscussions) {
        for (; self._gaQueue.length > 0;) {
          ga.apply(null, self._gaQueue.shift());
        }
        /** @type {boolean} */
        self._isReady = true;
      });
    }
    return render.prototype.setUserId = function(id) {
      if (!/^-/.test(id)) {
        this.ga("set", "userId", id);
      }
    }, render.prototype.ga = function() {
      /** @type {!Array} */
      var argumentsArray = [];
      /** @type {number} */
      var i = 0;
      for (; i < arguments.length; i++) {
        argumentsArray[i] = arguments[i];
      }
      if (this._isReady) {
        ga.apply(null, arguments);
      } else {
        this._gaQueue.push(arguments);
      }
    }, render.prototype.getClientId = function() {
      return this._clientId;
    }, render;
  }();
  t.GoogleAnalyticsClient = offsetFromCenter;
}, function(canCreateDiscussions, t, require) {
  var r;
  var updateDevicesAfterDelay = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var initSortMenu = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var vec3 = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var modData = require(436);
  var $ = require(127);
  var advertisement = require(148);
  var GenerateGif = require(165);
  var constants = require(195);
  var ApplicationFileManagerWindow = require(149);
  var TagHourlyStat = require(437);
  var EffectChain = require(56);
  t.on = ((r = {})["daily-ping"] = function(hidden, b, name) {
    return void 0 === name && (name = modData.getNextPingDate), updateDevicesAfterDelay(this, void 0, void 0, function() {
      var currEntry;
      var e;
      var raystart;
      var pFrom;
      var stripedItem;
      var value;
      return initSortMenu(this, function(_context) {
        switch(_context.label) {
          case 0:
            return hidden ? ($.call("gnar.pingMaybe"), [4, (currEntry = new TagHourlyStat.PrefsImpl(EffectChain.getBackgoundPageExtensionApi().preferences)).get("pingDate")]) : [2];
          case 1:
            return "string" != typeof(e = _context.sent()) && (e = ""), raystart = vec3(e.split("|"), 2), pFrom = raystart[0], stripedItem = raystart[1], value = b ? "cookiesDisabled" : hidden, pFrom && pFrom > Date.now() && stripedItem === value ? [2] : [4, currEntry.set("pingDate", [name(), value].join("|"))];
          case 2:
            return _context.sent(), [2];
        }
      });
    });
  }, r.app_signin_success = function(sourcePropVal) {
    GenerateGif.gnar.signInFormSuccess(sourcePropVal);
  }, r.app_signup_success = function(sourcePropVal) {
    GenerateGif.gnar.signUpFormSuccess(sourcePropVal);
  }, r["signin-error"] = function(state) {
    /** @type {string} */
    state.errorType = "Server-Side";
    $.call("gnar.track", "userLoginForm/rejected");
  }, r["signup-error"] = function(state) {
    /** @type {string} */
    state.errorType = "Server-Side";
    $.call("gnar.track", "userAccountSignupForm/rejected");
  }, r["upgrade-after-register"] = function() {
    return updateDevicesAfterDelay(this, void 0, void 0, function() {
      return initSortMenu(this, function(canCreateDiscussions) {
        return $.call("gnar.track", "Account_Type_Selected"), [2];
      });
    });
  }, r["hook-clicked"] = function(val) {
    $.call("gnar.track", "upgradeHookClicked", {
      placement : val
    });
    ApplicationFileManagerWindow.felog.userUpgradeClick(val);
  }, r["correct-btn-clicked"] = function(canCreateDiscussions) {
    $.call("gnar.track", "gbuttonClicked", {
      numberOfCriticalAlerts : canCreateDiscussions
    });
    ApplicationFileManagerWindow.felog.gButtonClick();
  }, r["btn-disable-in-field"] = function(show_delay) {
    $.call("gnar.track", "checkingInFieldToggled", {
      enabled : show_delay
    });
    ApplicationFileManagerWindow.felog.checkingToggledInField(show_delay);
  }, r["button-change-state"] = function() {
  }, r["login-attempt"] = function(val) {
    $.call("gnar.track", "signInClicked", {
      placement : val
    });
  }, r["show-dictionary"] = function() {
    $.call("gnar.track", "showDictionary");
  }, r["tab-connected"] = function(jobDoc, track, n, mmCoreSecondsYear, isSlidingUp, undefined) {
    var isEnabled = track.enabled;
    var parentRuntimeNode = n.cookiesDisabled;
    this["daily-ping"](jobDoc.id, parentRuntimeNode);
    if (!(isEnabled || true === undefined)) {
      ApplicationFileManagerWindow.felog.disabledTabLoad(jobDoc.type);
    }
    if (true === isEnabled && false === mmCoreSecondsYear) {
      ApplicationFileManagerWindow.felog.disabledTabByUserLoad(jobDoc.type);
    }
  }, r["text-checked"] = function(timeline_mode, mmCoreSplitViewBlock) {
    this["daily-ping"](timeline_mode.id, mmCoreSplitViewBlock);
  }, r["session-invalidate"] = function(self, data, not_uploaded, mmCoreSplitViewBlock, canCreateDiscussions) {
    var id = self.id;
    var boxInput = self.anonymous;
    var c = self.isTest;
    if (id !== data.id) {
      if (advertisement.tracker.gnar) {
        $.call("gnar.setUser", id, c);
      }
      if (advertisement.tracker.ga) {
        advertisement.tracker.ga.setUserId(id);
      }
      this["daily-ping"](id, mmCoreSplitViewBlock);
    }
    if (data.email && !data.anonymous && boxInput) {
      ApplicationFileManagerWindow.felog.unexpectedAnonymous({
        tokenEqualsGrauth : data.token === data.grauth,
        cookiesDisabled : mmCoreSplitViewBlock,
        reason : not_uploaded
      });
    }
  }, r["set-dapi-prop"] = function(canCreateDiscussions, boardManager) {
    if ("dialectWeak" === canCreateDiscussions) {
      /** @type {string} */
      var clojIsReversed = boardManager + "English";
      GenerateGif.gnar.languageSettingUpdate(clojIsReversed, "capi");
    }
  }, r["change-dialect"] = function($stateParams) {
    var type = $stateParams.language;
    var ENUM = $stateParams.dialectWeak;
    var obj = {
      language : type
    };
    if (ENUM) {
      /** @type {boolean} */
      obj.sameAsWeak = type === ENUM;
    }
    $.call("gnar.track", "languageStrongPreference", obj);
  }, r["change-defs"] = function(fn) {
    $.call("gnar.track", "definitionsToggled", fn);
    ApplicationFileManagerWindow.felog.toggleExtensionDefs(fn.enabled);
  }, r["checking-toggled"] = function(data) {
    $.call("gnar.track", "checkingToggled", data);
    ApplicationFileManagerWindow.felog.toggleExtension(data.enabled, data.placement);
  }, r["disable-until-next-visit"] = function() {
    $.call("gnar.track", "disableUntilNextVisit");
    GenerateGif.gnar.disableUntilNextVisitButtonClick("gButton", constants.SiteCategory.other);
    ApplicationFileManagerWindow.felog.disableUntilNextVisit();
  }, r["disable-button-click"] = function() {
    GenerateGif.gnar.disableButtonClick("gButton");
    ApplicationFileManagerWindow.felog.disableButtonClick();
  }, r["popup-open"] = function() {
    $.call("gnar.track", "browserToolbarButtonClicked");
  }, r["popup-open-on-unsupported"] = function() {
    $.call("gnar.track", "browserToolbarButtonClicked/unsupported");
  }, r["cookie-overflow"] = function(e, 1) {
    ApplicationFileManagerWindow.felog.cookieOverflow(e, 1);
  }, r["onboarding-popup-show"] = function() {
    $.call("gnar.track", "onboarding-popup-show");
    ApplicationFileManagerWindow.felog.onboardingPopupShow();
  }, r["onboarding-popup-cancel"] = function() {
    $.call("gnar.track", "onboarding-popup-cancel");
    ApplicationFileManagerWindow.felog.onboardingPopupCancel();
  }, r["onboardingTutorial-popup-show"] = function() {
    $.call("gnar.track", "onboardingTutorial-popup-show");
    ApplicationFileManagerWindow.felog.onboardingTutorialShow();
  }, r["onboardingTutorialNext-button-click"] = function() {
    $.call("gnar.track", "onboardingTutorialNext-button-click");
  }, r["onboardingTutorialPersonalize-button-click"] = function() {
    $.call("gnar.track", "onboardingTutorialPersonalize-button-click");
  }, r["onboardingTutorialSave-button-click"] = function() {
    $.call("gnar.track", "onboardingTutorialSave-button-click");
  }, r["onboardingTutorialLetsWrite-button-click"] = function() {
    $.call("gnar.track", "onboardingTutorialLetsWrite-button-click");
  }, r);
}, function(canCreateDiscussions, result, require) {
  /**
   * @param {!Object} options
   * @param {!Object} data
   * @return {?}
   */
  function buffer(options, data) {
    return callback(this, void 0, void 0, function() {
      var n;
      return resolve(this, function(_a) {
        switch(_a.label) {
          case 0:
            options.headers = options.headers || {};
            /** @type {number} */
            _a.label = 1;
          case 1:
            return _a.trys.push([1, 3, , 4]), [4, TagHourlyStat.getContainerIdOrUndefined()];
          case 2:
            return (n = _a.sent()) && (options.headers["X-Container-Id"] = n), options.headers["X-Client-Version"] = "" + storageService.getGlobal().buildInfo.version, options.headers["X-Client-Type"] = "extension-" + storageService.getGlobal().bundleInfo.browser, [3, 4];
          case 3:
            return _a.sent(), CSV.error("Error by setting request headers"), [3, 4];
          case 4:
            return data && (options.headers["X-CSRF-Token"] = data), [2, options];
        }
      });
    });
  }
  /**
   * @param {!Array} options
   * @return {?}
   */
  function getHeaders(options) {
    var t = this;
    return (new CheckDailyStat.CookiesHelper(pkg2.getBackgoundPageExtensionApi())).getCSRFToken(!!options.csrfMayBeEmpty).then(function(args) {
      return callback(t, void 0, void 0, function() {
        return resolve(this, function(canCreateDiscussions) {
          return [2, buffer(options, args)];
        });
      });
    });
  }
  /**
   * @param {!Object} data
   * @return {?}
   */
  function transform(data) {
    if (data.data && (data.query || "post" !== data.method) && (data.url += "?" + parse(data.data)), data.data && "post" === data.method && !data.query && !data.body) {
      try {
        /** @type {string} */
        data.body = JSON.stringify(data.data);
      } catch (c) {
        data.body = {};
        CSV.warn("", c);
      }
      data.headers = data.headers || {};
      data.headers["Content-Type"] = data.headers["Content-Type"] || "application/json";
      delete data.data;
    }
    return data.credentials = "include", data;
  }
  /**
   * @param {?} event
   * @return {?}
   */
  function test(event) {
    return callback(this, void 0, void 0, function() {
      /**
       * @param {!Object} res
       * @return {?}
       */
      function check(res) {
        return res.ok ? res[options.isText ? "text" : "json"]() : res.text().then(function(successDesc) {
          throw {
            name : "RequestError",
            body : successDesc,
            statusCode : res.status,
            message : res.statusText
          };
        });
      }
      var options;
      var value;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, getHeaders(event)];
          case 1:
            return options = _context.sent(), value = options.url, delete options.url, value ? [2, Promise.race([window.fetch(value, options).then(check).then(function(options) {
              if ("string" != typeof options && options && options.error) {
                throw new Error(options.error);
              }
              return options;
            }), item.delay(options.timeout || error_callback).then(function() {
              throw new Error("Fetch request to " + value + " rejected by timeout");
            })])] : [2, Promise.reject(new Error("Url is not defined in fetch request"))];
        }
      });
    });
  }
  /**
   * @param {!Object} data
   * @return {?}
   */
  function parse(data) {
    /** @type {string} */
    var ret = "";
    /**
     * @param {string} name
     * @return {undefined}
     */
    var filter = function(name) {
      if (Array.isArray(data[name])) {
        if (data[name].length) {
          var dir = data[name].map(function(major) {
            return name + "=" + major;
          }).join("&");
          ret = ret + ((ret.length ? "&" : "") + dir);
        }
      } else {
        ret = ret + ((ret.length ? "&" : "") + name + "=" + encodeURIComponent(data[name]));
      }
    };
    var filepath;
    for (filepath in data) {
      filter(filepath);
    }
    return ret;
  }
  var callback = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var resolve = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(result, "__esModule", {
    value : true
  });
  var storageService = require(10);
  var xhrSuccess = require(8);
  var item = require(4);
  var EffectChain = require(17);
  var model = require(13);
  var CheckDailyStat = require(667);
  var TagHourlyStat = require(338);
  var pkg2 = require(56);
  var CSV = require(3).Logger.create("lib.request");
  /** @type {number} */
  var error_callback = 1E4;
  if (item.isBg()) {
    model.on("fetch", function(e, success) {
      return test(e).then(success, function(invalidParam) {
        return success({
          error : invalidParam.message
        });
      });
    });
  }
  /** @type {function(!Object, !Object): ?} */
  result.setRequestHeaders = buffer;
  /** @type {function(!Array): ?} */
  result.updateRequestsHeaders = getHeaders;
  /** @type {function(!Object): ?} */
  result.transformOptions = transform;
  /**
   * @param {!Object} data
   * @param {number} options
   * @return {?}
   */
  result.fetch = function(data, options) {
    return void 0 === options && (options = {}), callback(this, void 0, void 0, function() {
      var xhr;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return options.url = data, transform(options), item.isBg() || EffectChain.isTestsMode() ? [2, test(options)] : [4, model.promiseBackground("fetch", options)];
          case 1:
            if (xhr = _context.sent(), xhrSuccess(xhr) && xhr.error) {
              throw new Error(xhr.error);
            }
            return [2, xhr];
        }
      });
    });
  };
  /** @type {function(!Object): ?} */
  result.paramStr = parse;
}, , , , , , , , , , , , , , , , , , , , , , , , , , , function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @param {!Object} str
   * @param {string} name
   * @param {boolean} id
   * @return {?}
   */
  mixin.exports = function(obj, str, name, id) {
    var length = obj.length;
    var i = name + (id ? 1 : -1);
    for (; id ? i-- : ++i < length;) {
      if (str(obj[i], i, obj)) {
        return i;
      }
    }
    return -1;
  };
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(canCreateDiscussions, event, require) {
  var incrementAndSave = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var gotoNewOfflinePage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(event, "__esModule", {
    value : true
  });
  var uri = require(17);
  var Logger = require(3);
  var UrdfMaterial = require(1);
  var query = Logger.Logger.create("Cookies");
  var relSet = function() {
    return function(_api) {
      var self = this;
      /** @type {!Object} */
      this._api = _api;
      /** @type {string} */
      this._rootPath = "/";
      /** @type {string} */
      this._grammarlyUrl = "https://" + uri.GRAMMARLY_DOMAIN + this._rootPath;
      /** @type {string} */
      this._grauthCookieName = "grauth";
      /** @type {string} */
      this._csrfTokenCookieName = "csrf-token";
      /** @type {string} */
      this._grInstallSourceCookieName = "grInstallSource";
      /** @type {string} */
      this._grChromeStoreInstallUtmName = "grChromeStoreInstallUTM";
      /**
       * @return {?}
       */
      this.getToken = function() {
        return self._api.cookies.get({
          name : self._grauthCookieName,
          url : self._grammarlyUrl
        }).then(function(thumb) {
          return thumb ? thumb.value : null;
        });
      };
      /**
       * @return {?}
       */
      this.deleteGrauth = function() {
        return self._api.cookies.remove({
          name : self._grauthCookieName,
          url : self._grammarlyUrl
        });
      };
      /**
       * @param {string} handler
       * @return {?}
       */
      this.getCSRFToken = function(handler) {
        return incrementAndSave(self, void 0, void 0, function() {
          var DOMDefaultOption;
          var handlers;
          var r;
          var self = this;
          return gotoNewOfflinePage(this, function(_a) {
            switch(_a.label) {
              case 0:
                return _a.trys.push([0, 2, , 3]), [4, UrdfMaterial.conditionalRetry(function() {
                  return self._api.cookies.get({
                    name : self._csrfTokenCookieName,
                    url : self._grammarlyUrl
                  });
                }, 5, 20, function(saveNum) {
                  return !!(handler || saveNum && saveNum.value);
                })];
              case 1:
                return DOMDefaultOption = _a.sent(), (handlers = DOMDefaultOption ? DOMDefaultOption.value : null) || handler || query.error("CRF is null"), [2, handlers];
              case 2:
                return r = _a.sent(), query.error("failed to read a CSRFToken cookie", r), [2, null];
              case 3:
                return [2];
            }
          });
        });
      };
      /**
       * @param {?} rel_url
       * @return {?}
       */
      this.watchToken = function(rel_url) {
        return self._api.cookies.watch({
          domain : uri.GRAMMARLY_DOMAIN,
          name : self._grauthCookieName,
          url : self._grammarlyUrl,
          path : self._rootPath
        }, rel_url);
      };
      /**
       * @return {?}
       */
      this.getInstallSource = function() {
        return self._api.cookies.get({
          name : self._grInstallSourceCookieName,
          url : self._grammarlyUrl
        });
      };
      /**
       * @return {?}
       */
      this.getChromeStoreInstallUTM = function() {
        return self._api.cookies.get({
          name : self._grChromeStoreInstallUtmName,
          url : self._grammarlyUrl
        });
      };
      /**
       * @return {?}
       */
      this.getAllGrammarlyCookies = function() {
        return self._api.cookies.getAll({
          domain : uri.GRAMMARLY_DOMAIN,
          path : self._rootPath
        });
      };
      /**
       * @return {?}
       */
      this.deleteGnarContainerIdCookie = function() {
        return self._api.cookies.remove({
          name : "gnar_containerId",
          url : self._grammarlyUrl
        });
      };
    };
  }();
  event.CookiesHelper = relSet;
}, , , , , , , , function(mixin, canCreateDiscussions, iter_f) {
  var next = iter_f(811);
  /**
   * @param {!Object} obj
   * @param {!Object} name
   * @return {?}
   */
  mixin.exports = function(obj, name) {
    return !(null == obj || !obj.length) && next(obj, name, 0) > -1;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} o
   * @param {!Object} name
   * @param {string} type
   * @return {?}
   */
  mixin.exports = function(o, name, type) {
    /** @type {number} */
    var jsonGraphEnvelopeIndex = -1;
    var jsonGraphEnvelopeCount = null == o ? 0 : o.length;
    for (; ++jsonGraphEnvelopeIndex < jsonGraphEnvelopeCount;) {
      if (type(name, o[jsonGraphEnvelopeIndex])) {
        return true;
      }
    }
    return false;
  };
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(mixin, canCreateDiscussions, require) {
  var read = require(537);
  var json = require(812);
  var isArray = require(813);
  /**
   * @param {!Object} value
   * @param {!Object} type
   * @param {string} id
   * @return {?}
   */
  mixin.exports = function(value, type, id) {
    return type == type ? isArray(value, type, id) : read(value, json, id);
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  mixin.exports = function(obj) {
    return obj != obj;
  };
}, function(mixin, canCreateDiscussions) {
  /**
   * @param {!Object} value
   * @param {!Object} name
   * @param {string} id
   * @return {?}
   */
  mixin.exports = function(value, name, id) {
    /** @type {number} */
    var i = id - 1;
    var l = value.length;
    for (; ++i < l;) {
      if (value[i] === name) {
        return i;
      }
    }
    return -1;
  };
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(canCreateDiscussions, global, createStorage) {
  Object.defineProperty(global, "__esModule", {
    value : true
  });
  var storage;
  var o = createStorage(3).Logger.create("lib.page-config.localforage");
  try {
    (storage = createStorage(1291)).config({
      name : "Grammarly",
      version : 1,
      size : 4194304,
      storeName : "configuration"
    });
  } catch (item) {
    o.error("Fallback to memory storage", item);
    var cache = {};
    storage = {
      getItem : function(path) {
        return Promise.resolve(cache[path]);
      },
      setItem : function(prop, value) {
        return cache[prop] = value, Promise.resolve(value);
      },
      clear : function() {
        cache = {};
        Promise.resolve(true);
      }
    };
  }
  global.localforage = storage;
}, function(canCreateDiscussions, t, n) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  /**
   * @param {!Object} context
   * @return {?}
   */
  t.current = function(context) {
    return context.connection;
  };
}, function(canCreateDiscussions, exports, n) {
  var track = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var create = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var collectRefsFromPathitem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var deepEqual = this && this.__spread || function() {
    /** @type {!Array} */
    var followedKeys = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
    }
    return followedKeys;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var s = n(299);
  var end = n(14);
  var self = n(3).Logger.create("lib.profiler");
  var Profiler = function() {
    /**
     * @return {undefined}
     */
    function track() {
      var category = this;
      this.timings = {};
      /**
       * @param {!Function} data
       * @return {?}
       */
      this.track = function(data) {
        /** @type {!Array} */
        var a = [];
        /** @type {number} */
        var i = 1;
        for (; i < arguments.length; i++) {
          a[i - 1] = arguments[i];
        }
        return track(category, void 0, void 0, function() {
          return create(this, function(canCreateDiscussions) {
            return [2, this._track.apply(this, deepEqual([false, data], a))];
          });
        });
      };
      /**
       * @param {!Function} src
       * @return {?}
       */
      this.trackAsync = function(src) {
        /** @type {!Array} */
        var a = [];
        /** @type {number} */
        var i = 1;
        for (; i < arguments.length; i++) {
          a[i - 1] = arguments[i];
        }
        return track(category, void 0, void 0, function() {
          return create(this, function(canCreateDiscussions) {
            return [2, this._track.apply(this, deepEqual([true, src], a))];
          });
        });
      };
      /**
       * @param {string} requested
       * @param {!Function} data
       * @return {?}
       */
      this._track = function(requested, data) {
        /** @type {!Array} */
        var value = [];
        /** @type {number} */
        var i = 2;
        for (; i < arguments.length; i++) {
          value[i - 2] = arguments[i];
        }
        return track(category, void 0, void 0, function() {
          var i;
          return create(this, function(_a) {
            switch(_a.label) {
              case 0:
                /** @type {string} */
                i = data.name + (requested ? "__sync" : "");
                s.timers.start(i);
                /** @type {number} */
                _a.label = 1;
              case 1:
                return _a.trys.push([1, 5, 6, 7]), requested ? [4, data.apply(void 0, deepEqual(value))] : [3, 3];
              case 2:
                return _a.sent(), [3, 4];
              case 3:
                data.apply(void 0, deepEqual(value));
                /** @type {number} */
                _a.label = 4;
              case 4:
                return [3, 7];
              case 5:
                throw _a.sent();
              case 6:
                return this.timings[i] = s.timers.stop(i), [7];
              case 7:
                return [2];
            }
          });
        });
      };
    }
    return track.start = function(key) {
      s.timers.start(key);
    }, track.stop = function(object, t) {
      if (void 0 === t) {
        /** @type {number} */
        t = 3E4;
      }
      var v = s.timers.stop(object);
      return v > t && (self.warn("profiler_" + object + "_time_exceeded " + v), "pageConfig_init" === object && end.felog.tooLongPageConfigInit(v), "updateUser" === object && end.felog.tooLongUserUpdateTime(v)), v;
    }, track.prototype.start = function(key) {
      s.timers.start(key);
    }, track.prototype.stop = function(key) {
      this.timings[key] = s.timers.stop(key);
    }, track;
  }();
  exports.Profiler = Profiler;
}, function(canCreateDiscussions, BeautifulProperties, n) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  /** @type {string} */
  (BeautifulProperties.CsToBgRpcApi || (BeautifulProperties.CsToBgRpcApi = {})).rpcLegacyMessageName = "cs-to-bg-rpc-1557421403805";
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(canCreateDiscussions, data, $) {
  var then = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(data, "__esModule", {
    value : true
  });
  var sandbox = $(10);
  var self = $(295);
  var exports = $(364);
  var connections = $(194);
  var trg = $(194);
  var tile = $(1002);
  var issue = $(1045);
  var receivedOpenEvents = $(294);
  var $scope = $(337);
  var current = $(383);
  var ui = $(1293);
  var service = $(1294);
  var el = $(4);
  var BeanstalkWorker = $(1003);
  var AvatarsIO = $(454);
  var next = $(165);
  var _this = $(3);
  var settings = $(17);
  var console = _this.Logger.create("universal.bg.state.user.sagas");
  /** @type {string} */
  data.SERIALIZED_USER_INFO_PROP_NAME = "serializedUserInfo";
  var rearmInterval = function() {
    /**
     * @param {!Object} users
     * @param {?} email
     * @param {?} options
     * @param {string} index
     * @param {?} name
     * @param {?} prototype
     * @return {undefined}
     */
    function self(users, email, options, index, name, prototype) {
      /** @type {!Object} */
      this._settingsSagas = users;
      this._prefs = email;
      this._telemetry = options;
      /** @type {string} */
      this._cookiesHelper = index;
      this._getContainerIdOrUndefined = name;
      this._reconnectAllSockets = prototype;
    }
    return self.prototype.start = function() {
      var checkData;
      return then(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.select(tile.current)];
          case 1:
            return checkData = _context.sent(), "firefox" !== sandbox.getGlobal().bundleInfo.browser || "active" !== checkData.dataControl ? [3, 3] : [4, [exports.takeLatest(trg.t.ACCEPT_DATA_CONTROL, this.start.bind(this)), exports.takeLatest(trg.t.DISABLE_DATA_CONTROL, this.activateAfterDataControl.bind(this))]];
          case 2:
            return _context.sent(), [3, 7];
          case 3:
            return el.isEdge() ? [3, 5] : [4, [self.fork([this, this.listenCookieChanges]), exports.takeLatest($scope.t.SESSION_INVALIDATE, this.updateUser.bind(this)), exports.takeLatest($scope.t.UPDATE_GROUPS, this.updateGroups.bind(this))]];
          case 4:
            return _context.sent(), [3, 7];
          case 5:
            return [4, [exports.takeLatest($scope.t.SESSION_INVALIDATE, this.updateUser.bind(this)), exports.takeLatest($scope.t.UPDATE_GROUPS, this.updateGroups.bind(this))]];
          case 6:
            _context.sent();
            /** @type {number} */
            _context.label = 7;
          case 7:
            return [2];
        }
      });
    }, self.prototype.activateAfterDataControl = function() {
      return then(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call([this, this.updateUser])];
          case 1:
            return _context.sent(), [4, self.call([this, this.start])];
          case 2:
            return _context.sent(), [2];
        }
      });
    }, self.prototype.updateUser = function(data) {
      var driver;
      var pwEncUserGroupKey;
      var params;
      var m;
      var b;
      var _;
      var w;
      var user;
      var opts;
      var selTimeVal;
      var func;
      var tmpTimeVal;
      var bgX;
      var x;
      var options;
      var value;
      var views;
      var resource;
      var id;
      var payload = void 0 === data ? {} : data;
      var lazy = payload.lazy;
      var i13nNode = payload.failoverFromCache;
      var message = payload.reason;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return [4, self.select(tile.current)];
          case 1:
            return driver = _a.sent(), "firefox" === sandbox.getGlobal().bundleInfo.browser && "active" === driver.dataControl ? [2] : [3, 5];
          case 2:
            return _a.sent() ? [4, self.call(this._prefs.get, "user")] : [3, 5];
          case 3:
            return id = _a.sent(), [4, self.put($scope.setUser(id))];
          case 4:
            return _a.sent(), [2, console.info("updateUser: SKIP AUTH")];
          case 5:
            BeanstalkWorker.Profiler.start("updateUser");
            /** @type {number} */
            _a.label = 6;
          case 6:
            return _a.trys.push([6, 42, , 49]), lazy ? [4, self.call(this._prefs.get, "loginDate")] : [3, 8];
          case 7:
            if (pwEncUserGroupKey = _a.sent(), !service.isItTimeToRefresh(pwEncUserGroupKey)) {
              return console.info("AUTH SERVICE | user session still fresh"), BeanstalkWorker.Profiler.stop("updateUser"), [2];
            }
            /** @type {number} */
            _a.label = 8;
          case 8:
            return [4, self.fork([this, this.trackCookieHeaderSize])];
          case 9:
            return _a.sent(), [4, self.call(this._getContainerIdOrUndefined)];
          case 10:
            return void 0 === (params = _a.sent()) ? [3, 12] : [4, self.call([this._telemetry, this._telemetry.setContainerId], params)];
          case 11:
            _a.sent();
            /** @type {number} */
            _a.label = 12;
          case 12:
            return [4, self.call(service.fetchUser, params)];
          case 13:
            return m = _a.sent(), [4, self.call([this, this.getMimic], params)];
          case 14:
            return b = _a.sent(), [4, self.call([this, this.getStats])];
          case 15:
            return _ = _a.sent(), [4, self.call([this, this.getGrauthFromCookie])];
          case 16:
            return w = _a.sent(), [4, self.call(service.prepareUser, m, b, _, w)];
          case 17:
            return user = _a.sent(), [4, self.select(ui.current)];
          case 18:
            return opts = _a.sent(), user.id === opts.id ? [3, 20] : [4, self.call([this._telemetry, this._telemetry.setUserId], user.id)];
          case 19:
            _a.sent();
            /** @type {number} */
            _a.label = 20;
          case 20:
            return [4, self.select(issue.getDapiProp, "dialectStrong")];
          case 21:
            return selTimeVal = _a.sent(), func = false === user.anonymous && true === opts.anonymous && void 0 !== opts.grauth && void 0 !== opts.email, [4, self.put($scope.setUser(user))];
          case 22:
            return _a.sent(), true !== func ? [3, 24] : [4, self.call([this._settingsSagas, this._settingsSagas.setAnonymousPropsToDapi])];
          case 23:
            _a.sent();
            /** @type {number} */
            _a.label = 24;
          case 24:
            return user.id === opts.id ? [3, 26] : [4, self.call([this._settingsSagas, this._settingsSagas.initializeDapiProps])];
          case 25:
            return _a.sent(), [3, 28];
          case 26:
            return [4, self.call([this._settingsSagas, this._settingsSagas.resetStrongDialectFromDapi])];
          case 27:
            _a.sent();
            /** @type {number} */
            _a.label = 28;
          case 28:
            return [4, self.select(issue.getDapiProp, "dialectStrong")];
          case 29:
            return tmpTimeVal = _a.sent(), !user.settings.dialectStrong || tmpTimeVal ? [3, 31] : [4, self.put(receivedOpenEvents.setDapiProp("dialectStrong", user.settings.dialectStrong))];
          case 30:
            _a.sent();
            tmpTimeVal = user.settings.dialectStrong;
            /** @type {number} */
            _a.label = 31;
          case 31:
            return !opts.id || user.id === opts.id && user.type === opts.type && tmpTimeVal === selTimeVal ? [3, 34] : [4, self.select(issue.getDapiProp, "dialectWeak")];
          case 32:
            return bgX = _a.sent(), x = tmpTimeVal || selTimeVal || bgX, [4, self.call(this._reconnectAllSockets, x)];
          case 33:
            _a.sent();
            console.warn("DAPI SERVICE | user changed, reseting capi session witha a dialect: ", x);
            /** @type {number} */
            _a.label = 34;
          case 34:
            return [4, self.call(this._prefs.set, {
              user : user,
              loginDate : new Date
            })];
          case 35:
            return _a.sent(), [4, self.select(tile.current)];
          case 36:
            return options = _a.sent(), value = options.authDegradation, views = options.cookiesDisabled, [4, self.call(next.fire, "session-invalidate", user, opts, message, views, params)];
          case 37:
            return _a.sent(), value ? [4, self.put(connections.updateConnection({
              authDegradation : false
            }))] : [3, 39];
          case 38:
            _a.sent();
            /** @type {number} */
            _a.label = 39;
          case 39:
            return [4, self.fork([this, this.checkReminderNotification], user, opts)];
          case 40:
            return _a.sent(), [4, self.fork([this, this.storeLoginReminderInfo], user)];
          case 41:
            return _a.sent(), [3, 49];
          case 42:
            return resource = _a.sent(), exports.isCancelError(resource) ? (BeanstalkWorker.Profiler.stop("updateUser"), [2]) : [4, self.call(this._prefs.set, {
              loginDate : 0
            })];
          case 43:
            return _a.sent(), [4, self.put(connections.updateConnection({
              authDegradation : true
            }))];
          case 44:
            return _a.sent(), [4, self.call(this._telemetry.fetchUserFail, message, resource.body, resource.statusCode)];
          case 45:
            return _a.sent(), console.warn("Update user failed. Message: ", resource), i13nNode ? [4, self.call(this._prefs.get, "user")] : [3, 48];
          case 46:
            return id = _a.sent(), [4, self.put($scope.setUser(id || current.defaultUser))];
          case 47:
            _a.sent();
            /** @type {number} */
            _a.label = 48;
          case 48:
            return [3, 49];
          case 49:
            return BeanstalkWorker.Profiler.stop("updateUser"), [2];
        }
      });
    }, self.prototype.getMimic = function(e) {
      var response;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 2, , 4]), [4, self.call(service.fetchMimic, e)];
          case 1:
            return [2, _a.sent()];
          case 2:
            return response = _a.sent(), console.warn("DAPI SERVICE | fetch mimic fail. Message: ", response.message), [4, self.call(this._telemetry.fetchMimicFail, response.body, response.statusCode)];
          case 3:
            return _a.sent(), [2, {}];
          case 4:
            return [2];
        }
      });
    }, self.prototype.getStats = function() {
      var e;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 2, , 4]), [4, self.call(service.fetchStats)];
          case 1:
            return [2, _a.sent()];
          case 2:
            return e = _a.sent(), console.warn("DAPI SERVICE | fetch stats fail. Message: ", e.message), [4, self.call(this._telemetry.fetchStatsFail, e.body, e.statusCode)];
          case 3:
            return _a.sent(), [2, {}];
          case 4:
            return [2];
        }
      });
    }, self.prototype.getGrauthFromCookie = function() {
      var _opts;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 2, , 4]), [4, self.call(this._cookiesHelper.getToken)];
          case 1:
            return [2, _a.sent()];
          case 2:
            return _opts = _a.sent(), console.warn("AUTH SERVICE | fetch cookie fail. Message: ", _opts.message), [4, self.call(this._telemetry.fetchCookieFail)];
          case 3:
            return _a.sent(), [2, "bad_cookie"];
          case 4:
            return [2];
        }
      });
    }, self.prototype.trackCookieHeaderSize = function() {
      var chart;
      var t;
      var options;
      var value;
      var operandLength;
      var _opts;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 4, , 5]), [4, self.call(this._cookiesHelper.getAllGrammarlyCookies)];
          case 1:
            return chart = _a.sent(), (t = chart.reduce(function(outputByteCount, t) {
              return outputByteCount + t.value.length;
            }, 0)) > service.MAX_COOKIE_HEADER_LENGTH ? (options = chart.reduce(function(e, t) {
              return e.value.length > t.value.length ? e : t;
            }, {
              name : "",
              value : ""
            }), value = options.name, operandLength = options.value.length, [4, self.call(next.fire, "cookie-overflow", t, {
              name : value,
              length : operandLength
            })]) : [3, 3];
          case 2:
            _a.sent();
            /** @type {number} */
            _a.label = 3;
          case 3:
            return [3, 5];
          case 4:
            return _opts = _a.sent(), console.warn("fetch grammarly cookies fail. Message: ", _opts.message), [3, 5];
          case 5:
            return [2];
        }
      });
    }, self.prototype.externalUpdateUser = function(kind, lazy, value) {
      return then(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call([this, this.updateUser], {
              lazy : lazy,
              reason : value
            })];
          case 1:
            return _context.sent(), [2];
        }
      });
    }, self.prototype.authRequest = function(callback, url, obj, path, config) {
      var c;
      var opts;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 4, , 6]), [4, self.call(service.authRequestHelper, url, obj)];
          case 1:
            return c = _a.sent(), [4, self.call([this, this.updateUser], {
              reason : config
            })];
          case 2:
            return _a.sent(), [4, self.call([next.gnar, "signin" === config ? next.gnar.signInFormSuccess : next.gnar.signUpFormSuccess], path)];
          case 3:
            return _a.sent(), [2, c];
          case 4:
            return opts = _a.sent(), console.warn("auth error", opts), [4, self.call([next.gnar, "signin" === config ? next.gnar.signInFormFail : next.gnar.signUpFormFail], path)];
          case 5:
            return _a.sent(), [2, {
              error : opts.message || opts.body
            }];
          case 6:
            return [2];
        }
      });
    }, self.prototype.logoutUser = function() {
      var e;
      var opts;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 3, , 5]), [4, self.call(service.authRequestHelper, settings.URLS.authLogout)];
          case 1:
            return e = _a.sent(), [4, self.call([next.gnar, next.gnar.logoutFormSuccess])];
          case 2:
            return _a.sent(), [2, e];
          case 3:
            return opts = _a.sent(), console.warn("auth error", opts), [4, self.call([next.gnar, next.gnar.logoutFormFail])];
          case 4:
            return _a.sent(), [2, {
              error : opts.message || opts.body
            }];
          case 5:
            return [2];
        }
      });
    }, self.prototype.listenCookieChanges = function() {
      var e;
      var t;
      return then(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(service.createCookieChannel, this._cookiesHelper.watchToken)];
          case 1:
            e = _context.sent();
            /** @type {number} */
            _context.label = 2;
          case 2:
            return [4, self.call(e.take)];
          case 3:
            return _context.sent(), t ? [4, self.cancel(t)] : [3, 5];
          case 4:
            _context.sent();
            /** @type {number} */
            _context.label = 5;
          case 5:
            return [4, self.fork([this, this.cookieChange])];
          case 6:
            return t = _context.sent(), [3, 2];
          case 7:
            return [2];
        }
      });
    }, self.prototype.updateGroups = function() {
      var e;
      var t;
      var n;
      return then(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(this._getContainerIdOrUndefined)];
          case 1:
            return e = _context.sent(), [4, self.call([this, this.getMimic], e)];
          case 2:
            return t = _context.sent(), [4, self.call(AvatarsIO.UserExperiments.create, t.groups, sandbox.getGlobal().systemInfo.os)];
          case 3:
            return n = _context.sent(), [4, self.put($scope.setGroups({
              mimic : t,
              experiments : n
            }))];
          case 4:
            return _context.sent(), [2];
        }
      });
    }, self.prototype.cookieChange = function() {
      var abbrForce;
      var t;
      var l;
      return then(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 6, , 8]), [4, self.call(el.delay, service.LOGIN_BY_COOKIE_CHANGE_TIMEOUT)];
          case 1:
            return _a.sent(), [4, self.call([this, this.getGrauthFromCookie])];
          case 2:
            return abbrForce = _a.sent(), [4, self.select(ui.current)];
          case 3:
            return t = _a.sent().grauth, abbrForce === t ? [3, 5] : [4, self.put($scope.sessionInvalidate("cookieChange"))];
          case 4:
            _a.sent();
            /** @type {number} */
            _a.label = 5;
          case 5:
            return [3, 8];
          case 6:
            return l = _a.sent(), [4, self.call(this._telemetry.frequentCookieChanges, exports.isCancelError(l))];
          case 7:
            return _a.sent(), [3, 8];
          case 8:
            return [2];
        }
      });
    }, self.prototype.storeLoginReminderInfo = function(state) {
      var fromResolved;
      var file;
      var a;
      var origHookOk;
      return then(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(this._prefs.get, data.SERIALIZED_USER_INFO_PROP_NAME)];
          case 1:
            return fromResolved = _context.sent(), file = state.type.toLowerCase(), a = !(!fromResolved || fromResolved.type !== file), false !== state.anonymous || false !== a ? [3, 3] : (origHookOk = {
              type : file
            }, [4, self.call(this._prefs.set, {
              serializedUserInfo : origHookOk
            })]);
          case 2:
            _context.sent();
            /** @type {number} */
            _context.label = 3;
          case 3:
            return [2];
        }
      });
    }, self.prototype.checkReminderNotification = function(overrideConfig) {
      var undefined;
      var ownFilter;
      var cIsObject;
      var e;
      var gold;
      return then(this, function(_context) {
        switch(_context.label) {
          case 0:
            return undefined = true === overrideConfig.anonymous, [4, self.select(issue.getLoginReminderDisabled)];
          case 1:
            return ownFilter = _context.sent(), [4, self.select(issue.getShowLoginReminder)];
          case 2:
            return (cIsObject = _context.sent()) && false === undefined ? [4, self.put(receivedOpenEvents.hideLoginReminder())] : [3, 4];
          case 3:
            _context.sent();
            /** @type {number} */
            _context.label = 4;
          case 4:
            return false === undefined || ownFilter ? [2] : [4, self.call(this._prefs.get, data.SERIALIZED_USER_INFO_PROP_NAME)];
          case 5:
            return e = _context.sent(), [4, self.select(issue.getOnboardingShowed)];
          case 6:
            return gold = _context.sent(), !e || true !== gold || cIsObject ? [3, 10] : [4, self.put(receivedOpenEvents.showLoginReminder(e.type))];
          case 7:
            return _context.sent(), [4, self.call([next.gnar, next.gnar.loginReminderBadgeShow])];
          case 8:
            return _context.sent(), [4, self.call(this._telemetry.loginReminderBadgeShow)];
          case 9:
            _context.sent();
            /** @type {number} */
            _context.label = 10;
          case 10:
            return [2];
        }
      });
    }, self;
  }();
  data.UserSagas = rearmInterval;
}, function(canCreateDiscussions, app, n) {
  Object.defineProperty(app, "__esModule", {
    value : true
  });
  /**
   * @param {!Object} $this
   * @return {?}
   */
  app.current = function($this) {
    return $this.settings;
  };
  /**
   * @param {!Object} state
   * @return {?}
   */
  app.getUserId = function(state) {
    return state.user.id;
  };
  /**
   * @param {!Object} auth
   * @return {?}
   */
  app.getUserAnonymous = function(auth) {
    return auth.user.anonymous;
  };
  /**
   * @param {!Object} _this
   * @return {?}
   */
  app.getUserExperiments = function(_this) {
    return _this.user.experiments;
  };
  /**
   * @param {!Object} a
   * @param {?} kind
   * @return {?}
   */
  app.getDapiProp = function(a, kind) {
    return a.settings.common[kind];
  };
  /**
   * @param {!Object} server
   * @return {?}
   */
  app.getLoginReminderType = function(server) {
    return server.settings.common.loginReminderType;
  };
  /**
   * @param {!Object} server
   * @return {?}
   */
  app.getShowLoginReminder = function(server) {
    return server.settings.common.showLoginReminder;
  };
  /**
   * @param {!Object} server
   * @return {?}
   */
  app.getLoginReminderDisabled = function(server) {
    return true === server.settings.common.loginReminderDisabled;
  };
  /**
   * @param {!Object} server
   * @return {?}
   */
  app.getOnboardingShowed = function(server) {
    return false === server.settings.common.showOnboarding;
  };
}, function(canCreateDiscussions, a, combine) {
  Object.defineProperty(a, "__esModule", {
    value : true
  });
  var attr = combine(135);
  /**
   * @param {!Object} options
   * @return {?}
   */
  a.isValid = function(options) {
    if (options && options.pageConfig && Object.keys(options).length && Object.keys(options.pageConfig).length && (!options.protocolVersion || options.protocolVersion === attr.PROTOCOL_VERSION)) {
      return true;
    }
  };
  /**
   * @param {number} start
   * @return {?}
   */
  a.getInterval = function(start) {
    return attr.PAGE_CONFIG_UPDATE_INTERVALS.includes(start) ? start : attr.PAGE_CONFIG_DEFAULT_INTERVAL;
  };
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(canCreateDiscussions, 
BeautifulProperties, apiClosure) {
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  apiClosure(133);
  apiClosure(3).LogConfig.configure({
    edge : false,
    prodCs : false
  });
  apiClosure(10).initGlobal("chrome", "bg");
  var api = apiClosure(318);
  var standaloneAttachments = apiClosure(56);
  apiClosure(275).bgPreload();
  var item = api.createApi();
  standaloneAttachments.initBackgroundPageExtensionApi(item);
  var interestingPoint = apiClosure(1285);
  var prevBestTile = apiClosure(1321);
  apiClosure(1322);
  interestingPoint.startBgPage(prevBestTile.GnarSpec, item);
}, function(canCreateDiscussions, t, createParagraphBoundary) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var originalParagraph = createParagraphBoundary(1286);
  t.startBgPage = originalParagraph.startBgPage;
}, function(canCreateDiscussions, prototype, require) {
  /**
   * @param {!Object} args
   * @return {?}
   */
  function init(args) {
    if (platform.isFF()) {
      var prefs = args.preferences;
      return engine.trace("Migrating preferences data..."), prefs.ensureMigrationCompleted().then(function(type) {
        engine.trace("Preferences data migration successful!");
        if (type === Alert.StorageMigrationResult.success) {
          viewPort.felog.storageMigrationSucceeded();
        }
      }, function(err7) {
        engine.error("XXX Preferences migration failed");
        viewPort.felog.storageMigrationFailed(err7);
      });
    }
    return Promise.resolve();
  }
  /**
   * @param {!Object} data
   * @param {!Object} target
   * @param {?} props
   * @param {?} cb
   * @return {?}
   */
  function enter(data, target, props, cb) {
    return functionToArrow(this, void 0, void 0, function() {
      var p;
      var source;
      var SHOW_ALL;
      return performAnimation(this, function(_context) {
        switch(_context.label) {
          case 0:
            return p = server.getVersion(), [4, data.get("version")];
          case 1:
            return source = _context.sent(), p === source ? [2] : [4, data.set("version", p)];
          case 2:
            return _context.sent(), [4, data.get("version")];
          case 3:
            return _context.sent() !== p ? [2] : source ? [3, 6] : [4, function(innerSource, targets, callbackFn) {
              return functionToArrow(this, void 0, void 0, function() {
                var t;
                return performAnimation(this, function(_a) {
                  switch(_a.label) {
                    case 0:
                      log.loadContentScripts(args, targets);
                      /** @type {string} */
                      t = "unknown";
                      /** @type {number} */
                      _a.label = 1;
                    case 1:
                      return _a.trys.push([1, 3, , 4]), [4, function() {
                        return functionToArrow(this, void 0, void 0, function() {
                          var tblr;
                          return performAnimation(this, function(_context) {
                            switch(_context.label) {
                              case 0:
                                return browsers.isSafari() || browsers.isEdge() ? [2, "webstore"] : [4, instance.getInstallSource()];
                              case 1:
                                return null === (tblr = _context.sent()) ? [2, "webstore"] : "funnel" === tblr.value ? [2, "funnel"] : "blog" === tblr.value ? [2, "blog"] : "editor" === tblr.value ? [2, "editor"] : [2, "webstore"];
                            }
                          });
                        });
                      }()];
                    case 2:
                      return t = _a.sent(), [3, 4];
                    case 3:
                      return _a.sent(), viewPort.felog.cannotGetInstallSource(), [3, 4];
                    case 4:
                      return o = t, viewPort.felog.extensionInstall(t), bower.gnar.install(o), [4, innerSource.get("enableWelcomePageForQA")];
                    case 5:
                      return _a.sent(), [4, function(e) {
                        return functionToArrow(this, void 0, void 0, function() {
                          var cfg;
                          var object;
                          var files;
                          var that;
                          return performAnimation(this, function(_context) {
                            switch(_context.label) {
                              case 0:
                                return browsers.isChrome() && e ? [2] : [4, instance.getChromeStoreInstallUTM()];
                              case 1:
                                return cfg = _context.sent(), object = !!cfg && "true" === cfg.value, files = browsers.isChrome() ? j.getExtensionSuccessURL(object) : j.getAfterInstallURL(e), that = args.tabs, [2, e ? that.updateCurrent(files) : that.open(files, true)];
                            }
                          });
                        });
                      }("funnel" === t)];
                    case 6:
                      _a.sent();
                      /** @type {number} */
                      _a.label = 7;
                    case 7:
                      return callbackFn(), [2];
                  }
                  var o;
                });
              });
            }(data, target, cb)];
          case 4:
            return _context.sent(), [4, data.set("enabledDefs", false)];
          case 5:
            return _context.sent(), props(), [3, 10];
          case 6:
            return viewPort.felog.extensionUpdated(p, source), bower.gnar.update(source), [4, data.get("enabledDefs")];
          case 7:
            return SHOW_ALL = _context.sent(), observable(SHOW_ALL) ? [3, 9] : [4, data.set("enabledDefs", true)];
          case 8:
            _context.sent();
            /** @type {number} */
            _context.label = 9;
          case 9:
            try {
              if (p.split(".")[0] !== source.split(".")[0]) {
                utils.update(args, target.toReload);
              }
            } catch (e) {
              viewPort.felog.extensionUpdateFail(source);
            }
            /** @type {number} */
            _context.label = 10;
          case 10:
            return [2];
        }
      });
    });
  }
  var functionToArrow = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var performAnimation = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(prototype, "__esModule", {
    value : true
  });
  require(1287);
  var storageService = require(10);
  if ("chrome" === storageService.getGlobal().bundleInfo.browser) {
    window.fetch = void 0;
    require(1288);
  }
  var observable = require(1289);
  var browsers = require(4);
  var viewPort = require(14);
  var vm = require(165);
  var UrdfMaterial = require(338);
  var server = require(17);
  var $ = require(1290);
  var Alert = require(56);
  var utils = require(1295);
  var THREE = require(1296);
  var AWS = require(1297);
  var links = require(1044);
  var _midimessage_event = require(1299);
  var WebSocketTransport = require(437);
  var log = require(1302);
  var platform = require(18);
  var jQuery = require(299);
  var evt = require(13);
  var exports = require(1003);
  var cp = require(667);
  var b = require(510);
  var shape = require(436);
  var window = require(496);
  var cmakeJS = require(1303);
  var pageActions = require(13);
  var ast = require(1310);
  var geo = require(1311);
  var j = require(49);
  var Logger = require(3);
  var bower = require(165);
  var os = require(1314);
  var Sequences = require(1315);
  var IDriver = require(1317);
  var angular2_2 = require(0);
  var engine = Logger.Logger.create("lib.bg.bg");
  /** @type {string} */
  var issue = "bg_start_timer";
  var input = new exports.Profiler;
  var args = Alert.getBackgoundPageExtensionApi();
  var instance = new cp.CookiesHelper(args);
  /**
   * @param {!Array} status
   * @param {!Object} self
   * @param {!Array} a
   * @return {undefined}
   */
  prototype.startBgPage = function(status, self, a) {
    if (void 0 === a) {
      /** @type {boolean} */
      a = false;
    }
    jQuery.timers.start(issue);
    var model = self.message;
    if ("background-message-api" !== model.kind) {
      throw new Error('Unexpected message API kind "' + model.kind + '"');
    }
    (function(name, obj, y) {
      return functionToArrow(this, void 0, void 0, function() {
        var result;
        var options;
        var value;
        var _track;
        var thetaLength;
        var geometry;
        var getTaskflowIdFromId;
        var x;
        var me;
        var generator;
        var network;
        var data;
        var nodeTransform;
        var fn;
        var self;
        var s;
        var response;
        var ndStr;
        var callback;
        return performAnimation(this, function(_a) {
          switch(_a.label) {
            case 0:
              return _a.trys.push([0, 3, , 4]), "firefox" === storageService.getGlobal().bundleInfo.browser && new Date < new Date(2019, 1, 11) ? [4, instance.deleteGnarContainerIdCookie()] : [3, 2];
            case 1:
              _a.sent();
              /** @type {number} */
              _a.label = 2;
            case 2:
              return [3, 4];
            case 3:
              return result = _a.sent(), engine.warn("failed to delete gnarContainerId cookie", result), [3, 4];
            case 4:
              return options = new WebSocketTransport.PrefsImpl(obj.preferences), value = new ast.DapiImpl(b.fetch), _track = function() {
                return input.track(vm.initBg, name);
              }, thetaLength = "firefox" === storageService.getGlobal().bundleInfo.browser, [4, init(obj)];
            case 5:
              return _a.sent(), geometry = new THREE.ConnectionSagas(options, evt.emitTabs, viewPort.felog, shape.isIncognito, shape.getNextPingDate, obj.management, _track, thetaLength), getTaskflowIdFromId = function() {
                return null;
              }, x = new cmakeJS.PageConfigImpl(options, function() {
                return getTaskflowIdFromId();
              }, function() {
                return obj.fetchBlacklistConfig();
              }), generator = function(obj) {
                if (me) {
                  me.reconnectAll(obj);
                }
              }, network = new Sequences.DynamicConfigSagas(options), data = new AWS.SettingsSagas(options, value, generator, evt.emitFocusedTab), nodeTransform = new _midimessage_event.TabsSagas(geometry, evt.emitTo, evt.emitFocusedTab, obj, x, y), fn = new links.UserSagas(data, options, viewPort.felog, instance, UrdfMaterial.getContainerIdOrUndefined, generator), self = new window.StoreControllerImpl(network, fn, data, nodeTransform, geometry, x), getTaskflowIdFromId = function() {
                return self.store.getState().user;
              }, s = new window.AuthSagaRunners(self, fn, instance), response = new window.TabsSagaRunner(self, nodeTransform), IDriver.CsToBgRpcServer.create(s), obj.initOAuth && obj.initOAuth(function() {
                s.refreshUser(false, "oauth");
              }), obj.initUserInfoReporter && (ndStr = new angular2_2.Observable(function(tags) {
                return self.store.subscribe(function() {
                  tags.next(self.store.getState().user);
                });
              }), obj.initUserInfoReporter(ndStr)), false === thetaLength && _track(), callback = new geo.FakeCapi, me = new geo.BackgroundSocketManager(viewPort.felog, function() {
                return self.store.getState().connection;
              }, self.actions.updateConnection, s.refreshUser, instance.getToken, pageActions, callback), input.track(function() {
                return $.api(self.store, s, self.actions, options, me.getLog, callback, obj, response);
              }), [4, input.trackAsync(self.initStore)];
            case 6:
              return _a.sent(), browsers.isSafariApp() ? [3, 8] : [4, input.trackAsync(enter, options, x, self.actions.seenNews, self.actions.showOnboarding)];
            case 7:
              _a.sent();
              /** @type {number} */
              _a.label = 8;
            case 8:
              return input.track(function() {
                return log.loadContentScripts(obj, x, server.GRAMMARLY_DOMAIN);
              }), input.track(function() {
                return log.loadProxy(obj, x);
              }), (clojIsReversed = jQuery.timers.stop(issue)) > 3E4 && viewPort.felog.bgPageInitTimeout(clojIsReversed), [4, function(logs) {
                return functionToArrow(this, void 0, void 0, function() {
                  var clojIsReversed;
                  return performAnimation(this, function(_context) {
                    switch(_context.label) {
                      case 0:
                        return [4, logs.get("bgInitFail")];
                      case 1:
                        return (clojIsReversed = _context.sent()) ? (viewPort.felog.bgPageInitFail(clojIsReversed), [4, logs.set("bgInitFail", 0)]) : [2];
                      case 2:
                        return _context.sent(), [2];
                    }
                  });
                });
              }(options)];
            case 9:
              return _a.sent(), [2];
          }
          var clojIsReversed;
        });
      });
    })(status, self, a).then(function(canCreateDiscussions) {
      if (self.sendReady) {
        self.sendReady();
      }
    }).catch(function(err) {
      viewPort.felog.bgPageStartFail(err && err.message, err && err.stack);
      engine.error("bg page start fail", err);
    });
    log.setupForcedUpdate();
    if ("prod" !== storageService.getGlobal().bundleInfo.env && "qa" === storageService.getGlobal().bundleInfo.env) {
      require(1320).startSendingBgLogsToActiveTab();
    }
    os.initIFrameCommunicationProxy(engine);
  };
  /** @type {function(!Object): ?} */
  prototype.runPrefsMigrations = init;
}, function(canCreateDiscussions, isSlidingUp) {
  /** @type {boolean} */
  window.IS_BG = true;
}, function(canCreateDiscussions, isSlidingUp) {
  !function() {
    /**
     * @param {!Object} name
     * @return {?}
     */
    function normalizeName(name) {
      if ("string" != typeof name && (name = name.toString()), /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)) {
        throw new TypeError("Invalid character in header field name");
      }
      return name.toLowerCase();
    }
    /**
     * @param {string} e
     * @return {?}
     */
    function r(e) {
      return "string" != typeof e && (e = e.toString()), e;
    }
    /**
     * @param {!Object} headers
     * @return {undefined}
     */
    function Headers(headers) {
      this.map = {};
      if (headers instanceof Headers) {
        headers.forEach(function(end, value) {
          this.append(value, end);
        }, this);
      } else {
        if (headers) {
          Object.getOwnPropertyNames(headers).forEach(function(name) {
            this.append(name, headers[name]);
          }, this);
        }
      }
    }
    /**
     * @param {?} body
     * @return {?}
     */
    function consumed(body) {
      if (body.bodyUsed) {
        return Promise.reject(new TypeError("Already read"));
      }
      /** @type {boolean} */
      body.bodyUsed = true;
    }
    /**
     * @param {!Object} obj
     * @return {?}
     */
    function callback(obj) {
      return new Promise(function(fileCallback, callback) {
        /**
         * @return {undefined}
         */
        obj.onload = function() {
          fileCallback(obj.result);
        };
        /**
         * @return {undefined}
         */
        obj.onerror = function() {
          callback(obj.error);
        };
      });
    }
    /**
     * @param {?} file
     * @return {?}
     */
    function done(file) {
      /** @type {!FileReader} */
      var reader = new FileReader;
      return reader.readAsArrayBuffer(file), callback(reader);
    }
    /**
     * @return {?}
     */
    function Body() {
      return this.bodyUsed = false, this._initBody = function(body) {
        if (this._bodyInit = body, "string" == typeof body) {
          /** @type {string} */
          this._bodyText = body;
        } else {
          if (support.blob && Blob.prototype.isPrototypeOf(body)) {
            /** @type {string} */
            this._bodyBlob = body;
          } else {
            if (support.formData && FormData.prototype.isPrototypeOf(body)) {
              /** @type {string} */
              this._bodyFormData = body;
            } else {
              if (body) {
                throw new Error("unsupported BodyInit type");
              }
              /** @type {string} */
              this._bodyText = "";
            }
          }
        }
      }, support.blob ? (this.blob = function() {
        var rejected = consumed(this);
        if (rejected) {
          return rejected;
        }
        if (this._bodyBlob) {
          return Promise.resolve(this._bodyBlob);
        }
        if (this._bodyFormData) {
          throw new Error("could not read FormData body as blob");
        }
        return Promise.resolve(new Blob([this._bodyText]));
      }, this.arrayBuffer = function() {
        return this.blob().then(done);
      }, this.text = function() {
        var e;
        var reader;
        var rejected = consumed(this);
        if (rejected) {
          return rejected;
        }
        if (this._bodyBlob) {
          return e = this._bodyBlob, (reader = new FileReader).readAsText(e), callback(reader);
        }
        if (this._bodyFormData) {
          throw new Error("could not read FormData body as text");
        }
        return Promise.resolve(this._bodyText);
      }) : this.text = function() {
        var rejected = consumed(this);
        return rejected || Promise.resolve(this._bodyText);
      }, support.formData && (this.formData = function() {
        return this.text().then(text2formData);
      }), this.json = function() {
        return this.text().then(JSON.parse);
      }, this;
    }
    /**
     * @param {string} url
     * @param {!Object} options
     * @return {undefined}
     */
    function Request(url, options) {
      var method;
      var looseWord;
      if (options = options || {}, this.url = url, this.credentials = options.credentials || "omit", this.headers = new Headers(options.headers), this.method = (method = options.method || "GET", looseWord = method.toUpperCase(), methods.indexOf(looseWord) > -1 ? looseWord : method), this.mode = options.mode || null, this.referrer = null, ("GET" === this.method || "HEAD" === this.method) && options.body) {
        throw new TypeError("Body not allowed for GET or HEAD requests");
      }
      this._initBody(options.body);
    }
    /**
     * @param {!Object} body
     * @return {?}
     */
    function text2formData(body) {
      /** @type {!FormData} */
      var form = new FormData;
      return body.trim().split("&").forEach(function(clusterShardData) {
        if (clusterShardData) {
          var headersAndBody = clusterShardData.split("=");
          var url = headersAndBody.shift().replace(/\+/g, " ");
          var filePath = headersAndBody.join("=").replace(/\+/g, " ");
          form.append(decodeURIComponent(url), decodeURIComponent(filePath));
        }
      }), form;
    }
    /**
     * @param {string} bodyInit
     * @param {!Object} options
     * @return {undefined}
     */
    function Response(bodyInit, options) {
      if (!options) {
        options = {};
      }
      this._initBody(bodyInit);
      /** @type {string} */
      this.type = "default";
      /** @type {null} */
      this.url = null;
      this.status = options.status;
      /** @type {boolean} */
      this.ok = this.status >= 200 && this.status < 300;
      this.statusText = options.statusText;
      this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers);
      this.url = options.url || "";
    }
    if (!self.fetch) {
      /**
       * @param {string} name
       * @param {string} x
       * @return {undefined}
       */
      Headers.prototype.append = function(name, x) {
        name = normalizeName(name);
        x = r(x);
        var list = this.map[name];
        if (!list) {
          /** @type {!Array} */
          list = [];
          /** @type {!Array} */
          this.map[name] = list;
        }
        list.push(x);
      };
      /**
       * @param {!Object} name
       * @return {undefined}
       */
      Headers.prototype.delete = function(name) {
        delete this.map[normalizeName(name)];
      };
      /**
       * @param {!Object} key
       * @return {?}
       */
      Headers.prototype.get = function(key) {
        var values = this.map[normalizeName(key)];
        return values ? values[0] : null;
      };
      /**
       * @param {!Object} name
       * @return {?}
       */
      Headers.prototype.getAll = function(name) {
        return this.map[normalizeName(name)] || [];
      };
      /**
       * @param {!Object} name
       * @return {?}
       */
      Headers.prototype.has = function(name) {
        return this.map.hasOwnProperty(normalizeName(name));
      };
      /**
       * @param {!Object} name
       * @param {string} val
       * @return {undefined}
       */
      Headers.prototype.set = function(name, val) {
        /** @type {!Array} */
        this.map[normalizeName(name)] = [r(val)];
      };
      /**
       * @param {!Function} context
       * @param {undefined} array
       * @return {undefined}
       */
      Headers.prototype.forEach = function(context, array) {
        Object.getOwnPropertyNames(this.map).forEach(function(value) {
          this.map[value].forEach(function(r) {
            context.call(array, r, value, this);
          }, this);
        }, this);
      };
      var support = {
        blob : "FileReader" in self && "Blob" in self && function() {
          try {
            return new Blob, true;
          } catch (e) {
            return false;
          }
        }(),
        formData : "FormData" in self
      };
      /** @type {!Array} */
      var methods = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
      Body.call(Request.prototype);
      Body.call(Response.prototype);
      /** @type {function(!Object): undefined} */
      self.Headers = Headers;
      /** @type {function(string, !Object): undefined} */
      self.Request = Request;
      /** @type {function(string, !Object): undefined} */
      self.Response = Response;
      /**
       * @param {(Request|string)} data
       * @param {!RequestInit=} callback
       * @return {!Promise<Response>}
       */
      self.fetch = function(data, callback) {
        var request;
        return request = Request.prototype.isPrototypeOf(data) && !callback ? data : new Request(data, callback), new Promise(function(resolve, cb) {
          /** @type {!XMLHttpRequest} */
          var xhr = new XMLHttpRequest;
          /**
           * @return {undefined}
           */
          xhr.onload = function() {
            /** @type {number} */
            var statusCode = 1223 === xhr.status ? 204 : xhr.status;
            if (statusCode < 100 || statusCode > 599) {
              cb(new TypeError("Network request failed"));
            } else {
              var _xhr;
              var headers;
              var options = {
                status : statusCode,
                statusText : xhr.statusText,
                headers : (_xhr = xhr, headers = new Headers, _xhr.getAllResponseHeaders().trim().split("\n").forEach(function(commentToCheck) {
                  /** @type {!Array<string>} */
                  var headersAndBody = commentToCheck.trim().split(":");
                  /** @type {string} */
                  var key = headersAndBody.shift().trim();
                  /** @type {string} */
                  var val = headersAndBody.join(":").trim();
                  headers.append(key, val);
                }), headers),
                url : "responseURL" in xhr ? xhr.responseURL : /^X-Request-URL:/m.test(xhr.getAllResponseHeaders()) ? xhr.getResponseHeader("X-Request-URL") : void 0
              };
              /** @type {(Object|null|string)} */
              var tres = "response" in xhr ? xhr.response : xhr.responseText;
              resolve(new Response(tres, options));
            }
          };
          /**
           * @return {undefined}
           */
          xhr.onerror = function() {
            cb(new TypeError("Network request failed"));
          };
          xhr.open(request.method, request.url, true);
          if ("include" === request.credentials) {
            /** @type {boolean} */
            xhr.withCredentials = true;
          }
          if ("responseType" in xhr && support.blob) {
            /** @type {string} */
            xhr.responseType = "blob";
          }
          request.headers.forEach(function(type, i) {
            xhr.setRequestHeader(i, type);
          });
          xhr.send(void 0 === request._bodyInit ? null : request._bodyInit);
        });
      };
      /** @type {boolean} */
      self.fetch.polyfill = true;
    }
  }();
}, function(mixin, canCreateDiscussions, __webpack_require__) {
  var eachTextNode = __webpack_require__(21);
  var isObject = __webpack_require__(15);
  /** @type {string} */
  var funcTag = "[object Boolean]";
  /**
   * @param {?} value
   * @return {?}
   */
  mixin.exports = function(value) {
    return true === value || false === value || isObject(value) && eachTextNode(value) == funcTag;
  };
}, function(canCreateDiscussions, me, require) {
  /**
   * @param {!Object} context
   * @param {?} scope
   * @param {?} client
   * @param {!Object} element
   * @param {?} index
   * @param {?} time
   * @param {!Object} self
   * @param {?} options
   * @return {?}
   */
  function fn(context, scope, client, element, index, time, self, options) {
    var _data;
    var d = this;
    var window = self.tabs;
    var data = (self.management, (_data = {
      dispatch : context.dispatch,
      signin : function(email, success) {
        return scope.signin(email).then(success);
      },
      signup : function(data, success) {
        return scope.signup(data).then(success);
      }
    })["create-document"] = function(nirXml) {
      var index = utils.getBrowser();
      return client.fetch(module.URLS.docsApi, {
        data : {
          content : nirXml
        },
        method : "post",
        headers : {
          "Content-Type" : "application/json",
          "X-API-Version" : "1",
          "X-Client-Type" : "extension_" + index
        }
      }).then(function(config) {
        var signalId;
        var BotSlackUserId = config.id;
        return signalId = BotSlackUserId, window.open(module.URLS.docs + "/" + signalId, true);
      }).catch(function(id) {
        return h.error("request failed", id);
      });
    }, _data["get-containerIdOrUndefined"] = function(canCreateDiscussions, childCompute) {
      TagHourlyStat.getContainerIdOrUndefined().then(childCompute);
    }, _data["content-script-inited"] = function() {
      options.sendStateToTabs();
    }, _data["external:changed-plan"] = function() {
      CheckDailyStat.felog.externalChangePlan();
      client.sessionInvalidate("changed-plan");
    }, _data["external:changed-dialect"] = function() {
      CheckDailyStat.felog.externalChangeDialect();
      client.sessionInvalidate("changed-dialect");
    }, _data["external:changed-user"] = function() {
      CheckDailyStat.felog.externalChangeUser();
      client.sessionInvalidate("changed-user");
      if (utils.isChrome()) {
        client.setGdocsEnabledSetting();
      }
    }, _data["external:editor-fix"] = function() {
      client.incFixed();
    }, _data["external:cleanup"] = function() {
      return $getDRtoDL(d, void 0, void 0, function() {
        var fields;
        var nsdisp;
        return gotoNewOfflinePage(this, function(_context) {
          switch(_context.label) {
            case 0:
              return CheckDailyStat.felog.externalLogout(), fields = ["extensionSettings", "extensionInstallDate", "version", l.SERIALIZED_USER_INFO_PROP_NAME], [4, element.get(fields)];
            case 1:
              return nsdisp = _context.sent(), element.clearAll(), [4, element.set(fields.reduce(function(testItemData, n) {
                var _a;
                return Object.assign({}, testItemData, ((_a = {})[n] = nsdisp[n], _a));
              }, {
                enabledDefs : false
              }))];
            case 2:
              return _context.sent(), client.sessionInvalidate("logout"), [2];
          }
        });
      });
    }, _data);
    return data;
  }
  if (this) {
    this.__assign;
  }
  var $getDRtoDL = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var gotoNewOfflinePage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(me, "__esModule", {
    value : true
  });
  require(295);
  require(1001);
  var $ = require(13);
  var CheckDailyStat = require(14);
  var utils = require(4);
  var Tone = require(1292);
  var TagHourlyStat = require(338);
  var l = (require(383), require(24), require(1044));
  var Logger = require(3);
  var module = require(17);
  var client = require(510);
  var h = Logger.Logger.create("lib.bg.api");
  /**
   * @param {!Object} params
   * @param {?} value
   * @param {?} callback
   * @param {!Object} key
   * @param {?} i
   * @param {?} options
   * @param {!Object} type
   * @param {?} attributes
   * @return {undefined}
   */
  me.api = function(params, value, callback, key, i, options, type, attributes) {
    var result = fn(params, value, callback, key, i, options, type, attributes);
    Object.keys(result).forEach(function(name) {
      return $.on(name, result[name]);
    });
    Tone.Offline(function() {
      return callback.updateConnection({
        networkOffline : false
      });
    }, function() {
      return callback.updateConnection({
        networkOffline : true
      });
    });
  };
  /** @type {function(!Object, ?, ?, !Object, ?, ?, !Object, ?): ?} */
  me.initAPI = fn;
}, function(module, t, moment) {
  (function(value) {
    var a;
    var main;
    /**
     * @return {?}
     */
    main = function() {
      return function test(t, n, r) {
        /**
         * @param {string} o
         * @param {?} u
         * @return {?}
         */
        function s(o, u) {
          if (!n[o]) {
            if (!t[o]) {
              if (!u && ("function" == typeof a && a)) {
                return a(o, true);
              }
              if (i) {
                return i(o, true);
              }
              /** @type {!Error} */
              var f = new Error("Cannot find module '" + o + "'");
              throw f.code = "MODULE_NOT_FOUND", f;
            }
            var m = n[o] = {
              exports : {}
            };
            t[o][0].call(m.exports, function(e) {
              var n = t[o][1][e];
              return s(n || e);
            }, m, m.exports, test, t, n, r);
          }
          return n[o].exports;
        }
        /** @type {(!Function|boolean)} */
        var i = "function" == typeof a && a;
        /** @type {number} */
        var o = 0;
        for (; o < r.length; o++) {
          s(r[o]);
        }
        return s;
      }({
        1 : [function(canCreateDiscussions, mixin, isSlidingUp) {
          (function(global) {
            /**
             * @return {undefined}
             */
            function done() {
              var signedTransactionsCounter;
              var ongoingMessage;
              /** @type {boolean} */
              r = true;
              var messageLength = message.length;
              for (; messageLength;) {
                /** @type {!Array} */
                ongoingMessage = message;
                /** @type {!Array} */
                message = [];
                /** @type {number} */
                signedTransactionsCounter = -1;
                for (; ++signedTransactionsCounter < messageLength;) {
                  ongoingMessage[signedTransactionsCounter]();
                }
                /** @type {number} */
                messageLength = message.length;
              }
              /** @type {boolean} */
              r = false;
            }
            var requestFlush;
            var r;
            var Directive = global.MutationObserver || global.WebKitMutationObserver;
            if (Directive) {
              /** @type {number} */
              var a = 0;
              var instance = new Directive(done);
              var c = global.document.createTextNode("");
              instance.observe(c, {
                characterData : true
              });
              /**
               * @return {undefined}
               */
              requestFlush = function() {
                /** @type {number} */
                c.data = a = ++a % 2;
              };
            } else {
              if (global.setImmediate || void 0 === global.MessageChannel) {
                /** @type {function(): undefined} */
                requestFlush = "document" in global && "onreadystatechange" in global.document.createElement("script") ? function() {
                  var scriptElem = global.document.createElement("script");
                  /**
                   * @return {undefined}
                   */
                  scriptElem.onreadystatechange = function() {
                    done();
                    /** @type {null} */
                    scriptElem.onreadystatechange = null;
                    scriptElem.parentNode.removeChild(scriptElem);
                    /** @type {null} */
                    scriptElem = null;
                  };
                  global.document.documentElement.appendChild(scriptElem);
                } : function() {
                  setTimeout(done, 0);
                };
              } else {
                var channel = new global.MessageChannel;
                /** @type {function(): undefined} */
                channel.port1.onmessage = done;
                /**
                 * @return {undefined}
                 */
                requestFlush = function() {
                  channel.port2.postMessage(0);
                };
              }
            }
            /** @type {!Array} */
            var message = [];
            /**
             * @param {!Object} obj
             * @return {undefined}
             */
            mixin.exports = function(obj) {
              if (!(1 !== message.push(obj) || r)) {
                requestFlush();
              }
            };
          }).call(this, void 0 !== value ? value : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
        }, {}],
        2 : [function(saveNotifs, module, n) {
          /**
           * @return {undefined}
           */
          function data() {
          }
          /**
           * @param {!Object} value
           * @return {undefined}
           */
          function Promise(value) {
            if ("function" != typeof value) {
              throw new TypeError("resolver must be a function");
            }
            /** @type {!Array} */
            this.state = PENDING;
            /** @type {!Array} */
            this.queue = [];
            this.outcome = void 0;
            if (value !== data) {
              render(this, value);
            }
          }
          /**
           * @param {!Object} promise
           * @param {!Function} onFulfilled
           * @param {!Function} onRejected
           * @return {undefined}
           */
          function QueueItem(promise, onFulfilled, onRejected) {
            /** @type {!Object} */
            this.promise = promise;
            if ("function" == typeof onFulfilled) {
              /** @type {!Function} */
              this.onFulfilled = onFulfilled;
              this.callFulfilled = this.otherCallFulfilled;
            }
            if ("function" == typeof onRejected) {
              /** @type {!Function} */
              this.onRejected = onRejected;
              this.callRejected = this.otherCallRejected;
            }
          }
          /**
           * @param {!Array} value
           * @param {?} func
           * @param {string} string
           * @return {undefined}
           */
          function unwrap(value, func, string) {
            validateRangeContainer(function() {
              var val;
              try {
                val = func(string);
              } catch (b) {
                return t.reject(value, b);
              }
              if (val === value) {
                t.reject(value, new TypeError("Cannot resolve promise with itself"));
              } else {
                t.resolve(value, val);
              }
            });
          }
          /**
           * @param {!Function} p
           * @return {?}
           */
          function setup(p) {
            var t = p && p.then;
            if (p && ("object" == typeof p || "function" == typeof p) && "function" == typeof t) {
              return function() {
                t.apply(p, arguments);
              };
            }
          }
          /**
           * @param {(Object|string)} d
           * @param {!Object} s
           * @return {undefined}
           */
          function render(d, s) {
            /**
             * @param {string} b
             * @return {undefined}
             */
            function t(b) {
              if (!n) {
                /** @type {boolean} */
                n = true;
                t.reject(d, b);
              }
            }
            /**
             * @param {string} value
             * @return {undefined}
             */
            function height(value) {
              if (!n) {
                /** @type {boolean} */
                n = true;
                t.resolve(d, value);
              }
            }
            /** @type {boolean} */
            var n = false;
            var b = test(function() {
              s(height, t);
            });
            if ("error" === b.status) {
              t(b.value);
            }
          }
          /**
           * @param {!Function} callback
           * @param {string} start
           * @return {?}
           */
          function test(callback, start) {
            var result = {};
            try {
              result.value = callback(start);
              /** @type {string} */
              result.status = "success";
            } catch (e) {
              /** @type {string} */
              result.status = "error";
              result.value = e;
            }
            return result;
          }
          var validateRangeContainer = saveNotifs(1);
          var t = {};
          /** @type {!Array} */
          var REJECTED = ["REJECTED"];
          /** @type {!Array} */
          var FULFILLED = ["FULFILLED"];
          /** @type {!Array} */
          var PENDING = ["PENDING"];
          /** @type {function(!Object): undefined} */
          module.exports = Promise;
          /**
           * @param {!Function} fn
           * @return {?}
           */
          Promise.prototype.catch = function(fn) {
            return this.then(null, fn);
          };
          /**
           * @param {!Function} value
           * @param {!Function} onRejected
           * @return {?}
           */
          Promise.prototype.then = function(value, onRejected) {
            if ("function" != typeof value && this.state === FULFILLED || "function" != typeof onRejected && this.state === REJECTED) {
              return this;
            }
            var promise = new this.constructor(data);
            if (this.state !== PENDING) {
              unwrap(promise, this.state === FULFILLED ? value : onRejected, this.outcome);
            } else {
              this.queue.push(new QueueItem(promise, value, onRejected));
            }
            return promise;
          };
          /**
           * @param {string} value
           * @return {undefined}
           */
          QueueItem.prototype.callFulfilled = function(value) {
            t.resolve(this.promise, value);
          };
          /**
           * @param {string} value
           * @return {undefined}
           */
          QueueItem.prototype.otherCallFulfilled = function(value) {
            unwrap(this.promise, this.onFulfilled, value);
          };
          /**
           * @param {string} value
           * @return {undefined}
           */
          QueueItem.prototype.callRejected = function(value) {
            t.reject(this.promise, value);
          };
          /**
           * @param {string} value
           * @return {undefined}
           */
          QueueItem.prototype.otherCallRejected = function(value) {
            unwrap(this.promise, this.onRejected, value);
          };
          /**
           * @param {!Object} item
           * @param {string} value
           * @return {?}
           */
          t.resolve = function(item, value) {
            var result = test(setup, value);
            if ("error" === result.status) {
              return t.reject(item, result.value);
            }
            var files = result.value;
            if (files) {
              render(item, files);
            } else {
              /** @type {!Array} */
              item.state = FULFILLED;
              /** @type {string} */
              item.outcome = value;
              /** @type {number} */
              var i = -1;
              var length = item.queue.length;
              for (; ++i < length;) {
                item.queue[i].callFulfilled(value);
              }
            }
            return item;
          };
          /**
           * @param {!Object} result
           * @param {string} error
           * @return {?}
           */
          t.reject = function(result, error) {
            /** @type {!Array} */
            result.state = REJECTED;
            /** @type {string} */
            result.outcome = error;
            /** @type {number} */
            var i = -1;
            var length = result.queue.length;
            for (; ++i < length;) {
              result.queue[i].callRejected(error);
            }
            return result;
          };
          /**
           * @param {!Object} value
           * @return {?}
           */
          Promise.resolve = function(value) {
            if (value instanceof this) {
              return value;
            }
            return t.resolve(new this(data), value);
          };
          /**
           * @param {?} value
           * @return {?}
           */
          Promise.reject = function(value) {
            var self = new this(data);
            return t.reject(self, value);
          };
          /**
           * @param {!Object} iterable
           * @return {?}
           */
          Promise.all = function(iterable) {
            /**
             * @param {!Object} file
             * @param {number} i
             * @return {undefined}
             */
            function resolver(file, i) {
              t.resolve(file).then(function(h) {
                result[i] = h;
                if (!(++completed !== length || body)) {
                  /** @type {boolean} */
                  body = true;
                  t.resolve(r, result);
                }
              }, function(b) {
                if (!body) {
                  /** @type {boolean} */
                  body = true;
                  t.reject(r, b);
                }
              });
            }
            var t = this;
            if ("[object Array]" !== Object.prototype.toString.call(iterable)) {
              return this.reject(new TypeError("must be an array"));
            }
            var length = iterable.length;
            /** @type {boolean} */
            var body = false;
            if (!length) {
              return this.resolve([]);
            }
            /** @type {!Array} */
            var result = new Array(length);
            /** @type {number} */
            var completed = 0;
            /** @type {number} */
            var i = -1;
            var r = new this(data);
            for (; ++i < length;) {
              resolver(iterable[i], i);
            }
            return r;
          };
          /**
           * @param {!Object} a
           * @return {?}
           */
          Promise.race = function(a) {
            var t = this;
            if ("[object Array]" !== Object.prototype.toString.call(a)) {
              return this.reject(new TypeError("must be an array"));
            }
            var l = a.length;
            /** @type {boolean} */
            var r = false;
            if (!l) {
              return this.resolve([]);
            }
            /** @type {number} */
            var i = -1;
            var ret = new this(data);
            for (; ++i < l;) {
              s = a[i];
              t.resolve(s).then(function(e) {
                if (!r) {
                  /** @type {boolean} */
                  r = true;
                  t.resolve(ret, e);
                }
              }, function(b) {
                if (!r) {
                  /** @type {boolean} */
                  r = true;
                  t.reject(ret, b);
                }
              });
            }
            var s;
            return ret;
          };
        }, {
          1 : 1
        }],
        3 : [function(f, n, canCreateDiscussions) {
          (function(g) {
            if ("function" != typeof g.Promise) {
              g.Promise = f(2);
            }
          }).call(this, void 0 !== value ? value : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
        }, {
          2 : 2
        }],
        4 : [function(saveNotifs, module, n) {
          /**
           * @param {!Array} parts
           * @param {string} options
           * @return {?}
           */
          function createBlob(parts, options) {
            parts = parts || [];
            options = options || {};
            try {
              return new Blob(parts, options);
            } catch (allBox) {
              if ("TypeError" !== allBox.name) {
                throw allBox;
              }
              var bb = new ("undefined" != typeof BlobBuilder ? BlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder);
              /** @type {number} */
              var i = 0;
              for (; i < parts.length; i = i + 1) {
                bb.append(parts[i]);
              }
              return bb.getBlob(options.type);
            }
          }
          /**
           * @param {?} o
           * @param {string} k
           * @return {undefined}
           */
          function g(o, k) {
            if (k) {
              o.then(function(val) {
                k(null, val);
              }, function(fi) {
                k(fi);
              });
            }
          }
          /**
           * @param {?} result
           * @param {!Function} value
           * @param {!Function} handler
           * @return {undefined}
           */
          function resolve(result, value, handler) {
            if ("function" == typeof value) {
              result.then(value);
            }
            if ("function" == typeof handler) {
              result.catch(handler);
            }
          }
          /**
           * @param {string} name
           * @return {?}
           */
          function String(name) {
            return "string" != typeof name && (console.warn(name + " used as a key, but it is not a string."), name = String(name)), name;
          }
          /**
           * @param {!IDBDatabase} dbParam
           * @return {?}
           */
          function _checkBlobSupportWithoutCaching(dbParam) {
            return "boolean" == typeof value ? Promise$1.resolve(value) : (db = dbParam, (new Promise$1(function(callback) {
              var transaction = db.transaction(STORE_NAME, mode);
              var blob = createBlob([""]);
              transaction.objectStore(STORE_NAME).put(blob, "key");
              /**
               * @param {!Event} event
               * @return {undefined}
               */
              transaction.onabort = function(event) {
                event.preventDefault();
                event.stopPropagation();
                callback(false);
              };
              /**
               * @return {undefined}
               */
              transaction.oncomplete = function() {
                /** @type {(Array<string>|null)} */
                var c = navigator.userAgent.match(/Chrome\/(\d+)/);
                /** @type {(Array<string>|null)} */
                var cflag = navigator.userAgent.match(/Edge\//);
                callback(cflag || !c || parseInt(c[1], 10) >= 43);
              };
            })).catch(function() {
              return false;
            })).then(function(Night) {
              return value = Night;
            });
            var db;
          }
          /**
           * @param {!Object} dbInfo
           * @return {undefined}
           */
          function _deferReadiness(dbInfo) {
            var dbContext = dbContexts[dbInfo.name];
            var deferredOperation = {};
            /** @type {!Promise} */
            deferredOperation.promise = new Promise$1(function(resolve) {
              deferredOperation.resolve = resolve;
            });
            dbContext.deferredOperations.push(deferredOperation);
            if (dbContext.dbReady) {
              dbContext.dbReady = dbContext.dbReady.then(function() {
                return deferredOperation.promise;
              });
            } else {
              /** @type {!Promise} */
              dbContext.dbReady = deferredOperation.promise;
            }
          }
          /**
           * @param {!Object} dbInfo
           * @param {boolean} upgradeNeeded
           * @return {?}
           */
          function _getConnection(dbInfo, upgradeNeeded) {
            return new Promise$1(function(resolve, failure) {
              if (dbInfo.db) {
                if (!upgradeNeeded) {
                  return resolve(dbInfo.db);
                }
                _deferReadiness(dbInfo);
                dbInfo.db.close();
              }
              /** @type {!Array} */
              var file = [dbInfo.name];
              if (upgradeNeeded) {
                file.push(dbInfo.version);
              }
              var options = o.open.apply(o, file);
              if (upgradeNeeded) {
                /**
                 * @param {!Event} event
                 * @return {undefined}
                 */
                options.onupgradeneeded = function(event) {
                  var db = options.result;
                  try {
                    db.createObjectStore(dbInfo.storeName);
                    if (event.oldVersion <= 1) {
                      db.createObjectStore(STORE_NAME);
                    }
                  } catch (allBox) {
                    if ("ConstraintError" !== allBox.name) {
                      throw allBox;
                    }
                    console.warn('The database "' + dbInfo.name + '" has been upgraded from version ' + event.oldVersion + " to version " + event.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                  }
                };
              }
              /**
               * @param {!Object} event
               * @return {undefined}
               */
              options.onerror = function(event) {
                event.preventDefault();
                failure(options.error);
              };
              /**
               * @return {undefined}
               */
              options.onsuccess = function() {
                var extensionResolver;
                resolve(options.result);
                if (extensionResolver = dbContexts[dbInfo.name].deferredOperations.pop()) {
                  extensionResolver.resolve();
                }
              };
            });
          }
          /**
           * @param {!Object} params
           * @return {?}
           */
          function read(params) {
            return createBlob([function(apfb) {
              /** @type {number} */
              var size = apfb.length;
              /** @type {!ArrayBuffer} */
              var data = new ArrayBuffer(size);
              /** @type {!Uint8Array} */
              var ui8a = new Uint8Array(data);
              /** @type {number} */
              var i = 0;
              for (; i < size; i++) {
                /** @type {number} */
                ui8a[i] = apfb.charCodeAt(i);
              }
              return data;
            }(atob(params.data))], {
              type : params.type
            });
          }
          /**
           * @param {?} value
           * @return {?}
           */
          function _isEncodedBlob(value) {
            return value && value.__local_forage_encoded_blob;
          }
          /**
           * @param {!Function} res
           * @return {?}
           */
          function _fullyReady(res) {
            var self = this;
            var undefined = self._initReady().then(function() {
              var dbContext = dbContexts[self._dbInfo.name];
              if (dbContext && dbContext.dbReady) {
                return dbContext.dbReady;
              }
            });
            return resolve(undefined, res, res), undefined;
          }
          /**
           * @param {!Object} dbInfo
           * @return {?}
           */
          function get(dbInfo) {
            _deferReadiness(dbInfo);
            var crossfilterable_layers = dbContexts[dbInfo.name].forages;
            /** @type {number} */
            var layer_i = 0;
            for (; layer_i < crossfilterable_layers.length; layer_i++) {
              if (crossfilterable_layers[layer_i]._dbInfo.db) {
                crossfilterable_layers[layer_i]._dbInfo.db.close();
                /** @type {null} */
                crossfilterable_layers[layer_i]._dbInfo.db = null;
              }
            }
            return _getConnection(dbInfo, false).then(function(database) {
              /** @type {number} */
              var layer_i = 0;
              for (; layer_i < crossfilterable_layers.length; layer_i++) {
                /** @type {string} */
                crossfilterable_layers[layer_i]._dbInfo.db = database;
              }
            }).catch(function(objectkey) {
              var key;
              var cpt;
              throw key = objectkey, (cpt = dbContexts[dbInfo.name].deferredOperations.pop()) && cpt.reject(key), objectkey;
            });
          }
          /**
           * @param {!Object} store
           * @param {string} mode
           * @param {!Function} listener
           * @return {?}
           */
          function init(store, mode, listener) {
            try {
              var self = store.db.transaction(store.storeName, mode);
              listener(null, self);
            } catch (value) {
              if (!store.db || "InvalidStateError" === value.name) {
                return get(store).then(function() {
                  var self = store.db.transaction(store.storeName, mode);
                  listener(null, self);
                });
              }
              listener(value);
            }
          }
          /**
           * @param {!Object} serializedString
           * @return {?}
           */
          function stringToBuffer(serializedString) {
            var i;
            var sextet1;
            var sextet2;
            var o;
            var id;
            /** @type {number} */
            var numOfBytes = .75 * serializedString.length;
            var len = serializedString.length;
            /** @type {number} */
            var endPos = 0;
            if ("=" === serializedString[serializedString.length - 1]) {
              numOfBytes--;
              if ("=" === serializedString[serializedString.length - 2]) {
                numOfBytes--;
              }
            }
            /** @type {!ArrayBuffer} */
            var buffer = new ArrayBuffer(numOfBytes);
            /** @type {!Uint8Array} */
            var str = new Uint8Array(buffer);
            /** @type {number} */
            i = 0;
            for (; i < len; i = i + 4) {
              /** @type {number} */
              sextet1 = BASE_CHARS.indexOf(serializedString[i]);
              /** @type {number} */
              sextet2 = BASE_CHARS.indexOf(serializedString[i + 1]);
              /** @type {number} */
              o = BASE_CHARS.indexOf(serializedString[i + 2]);
              /** @type {number} */
              id = BASE_CHARS.indexOf(serializedString[i + 3]);
              /** @type {number} */
              str[endPos++] = sextet1 << 2 | sextet2 >> 4;
              /** @type {number} */
              str[endPos++] = (15 & sextet2) << 4 | o >> 2;
              /** @type {number} */
              str[endPos++] = (3 & o) << 6 | 63 & id;
            }
            return buffer;
          }
          /**
           * @param {!Object} data
           * @return {?}
           */
          function bufferToString(data) {
            var i;
            /** @type {!Uint8Array} */
            var dmpGrp = new Uint8Array(data);
            /** @type {string} */
            var base64String = "";
            /** @type {number} */
            i = 0;
            for (; i < dmpGrp.length; i = i + 3) {
              base64String = base64String + BASE_CHARS[dmpGrp[i] >> 2];
              base64String = base64String + BASE_CHARS[(3 & dmpGrp[i]) << 4 | dmpGrp[i + 1] >> 4];
              base64String = base64String + BASE_CHARS[(15 & dmpGrp[i + 1]) << 2 | dmpGrp[i + 2] >> 6];
              base64String = base64String + BASE_CHARS[63 & dmpGrp[i + 2]];
            }
            return dmpGrp.length % 3 == 2 ? base64String = base64String.substring(0, base64String.length - 1) + "=" : dmpGrp.length % 3 == 1 && (base64String = base64String.substring(0, base64String.length - 2) + "=="), base64String;
          }
          /**
           * @return {?}
           */
          function change() {
            return !function() {
              /** @type {string} */
              var i = "_localforage_support_test";
              try {
                return localStorage.setItem(i, true), localStorage.removeItem(i), false;
              } catch (e) {
                return true;
              }
            }() || localStorage.length > 0;
          }
          /**
           * @param {!Object} entry
           * @param {string} callback
           * @return {undefined}
           */
          function callWhenReady(entry, callback) {
            /**
             * @return {?}
             */
            entry[callback] = function() {
              /** @type {!Arguments} */
              var args = arguments;
              return entry.ready().then(function() {
                return entry[callback].apply(entry, args);
              });
            };
          }
          /**
           * @return {?}
           */
          function extend() {
            /** @type {number} */
            var i = 1;
            for (; i < arguments.length; i++) {
              var obj = arguments[i];
              if (obj) {
                var key;
                for (key in obj) {
                  if (obj.hasOwnProperty(key)) {
                    if (isArray(obj[key])) {
                      arguments[0][key] = obj[key].slice();
                    } else {
                      arguments[0][key] = obj[key];
                    }
                  }
                }
              }
            }
            return arguments[0];
          }
          /** @type {function(!Object): ?} */
          var loadPlatform = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(withHashes) {
            return typeof withHashes;
          } : function(obj) {
            return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
          };
          var o = function() {
            try {
              if ("undefined" != typeof indexedDB) {
                return indexedDB;
              }
              if ("undefined" != typeof webkitIndexedDB) {
                return webkitIndexedDB;
              }
              if ("undefined" != typeof mozIndexedDB) {
                return mozIndexedDB;
              }
              if ("undefined" != typeof OIndexedDB) {
                return OIndexedDB;
              }
              if ("undefined" != typeof msIndexedDB) {
                return msIndexedDB;
              }
            } catch (e) {
              return;
            }
          }();
          if ("undefined" == typeof Promise) {
            saveNotifs(3);
          }
          /** @type {function(new:Promise, function(function((IThenable<TYPE>|TYPE|Thenable|null)=): ?, function(*=): ?): ?): ?} */
          var Promise$1 = Promise;
          var value;
          var dbContexts;
          /** @type {string} */
          var STORE_NAME = "local-forage-detect-blob-support";
          /** @type {function(this:*): string} */
          var toString = Object.prototype.toString;
          /** @type {string} */
          var READONLY = "readonly";
          /** @type {string} */
          var mode = "readwrite";
          var cordovaSQLiteDriver = {
            _driver : "asyncStorage",
            _initStorage : function(options) {
              /**
               * @return {?}
               */
              function ignoreErrors() {
                return Promise$1.resolve();
              }
              var self = this;
              var dbInfo = {
                db : null
              };
              if (options) {
                var i;
                for (i in options) {
                  dbInfo[i] = options[i];
                }
              }
              if (!dbContexts) {
                dbContexts = {};
              }
              var dbContext = dbContexts[dbInfo.name];
              if (!dbContext) {
                dbContext = {
                  forages : [],
                  db : null,
                  dbReady : null,
                  deferredOperations : []
                };
                dbContexts[dbInfo.name] = dbContext;
              }
              dbContext.forages.push(self);
              if (!self._initReady) {
                self._initReady = self.ready;
                /** @type {function(!Function): ?} */
                self.ready = _fullyReady;
              }
              /** @type {!Array} */
              var initPromises = [];
              /** @type {number} */
              var j = 0;
              for (; j < dbContext.forages.length; j++) {
                var forage = dbContext.forages[j];
                if (forage !== self) {
                  initPromises.push(forage._initReady().catch(ignoreErrors));
                }
              }
              /** @type {!Array<?>} */
              var createdCollection = dbContext.forages.slice(0);
              return Promise$1.all(initPromises).then(function() {
                return dbInfo.db = dbContext.db, _getConnection(dbInfo, false);
              }).then(function(table) {
                return dbInfo.db = table, function(dbInfo, defaultVersion) {
                  if (!dbInfo.db) {
                    return true;
                  }
                  /** @type {boolean} */
                  var winRef = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
                  /** @type {boolean} */
                  var r = dbInfo.version < dbInfo.db.version;
                  /** @type {boolean} */
                  var inputWin = dbInfo.version > dbInfo.db.version;
                  if (r && (dbInfo.version !== defaultVersion && console.warn('The database "' + dbInfo.name + "\" can't be downgraded from version " + dbInfo.db.version + " to version " + dbInfo.version + "."), dbInfo.version = dbInfo.db.version), inputWin || winRef) {
                    if (winRef) {
                      var incVersion = dbInfo.db.version + 1;
                      if (incVersion > dbInfo.version) {
                        dbInfo.version = incVersion;
                      }
                    }
                    return true;
                  }
                  return false;
                }(dbInfo, self._defaultConfig.version) ? _getConnection(dbInfo, true) : table;
              }).then(function(db) {
                dbInfo.db = dbContext.db = db;
                self._dbInfo = dbInfo;
                /** @type {number} */
                var j = 0;
                for (; j < createdCollection.length; j++) {
                  var forage = createdCollection[j];
                  if (forage !== self) {
                    forage._dbInfo.db = dbInfo.db;
                    forage._dbInfo.version = dbInfo.version;
                  }
                }
              });
            },
            _support : function() {
              try {
                if (!o) {
                  return false;
                }
                /** @type {boolean} */
                var e = "undefined" != typeof openDatabase && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);
                /** @type {boolean} */
                var pm = "function" == typeof fetch && -1 !== fetch.toString().indexOf("[native code");
                return (!e || pm) && "undefined" != typeof indexedDB && "undefined" != typeof IDBKeyRange;
              } catch (e) {
                return false;
              }
            }(),
            iterate : function(iterator, n) {
              var self = this;
              /** @type {!Promise} */
              var e = new Promise$1(function(importedCB, callback) {
                self.ready().then(function() {
                  init(self._dbInfo, READONLY, function(response_2, transaction) {
                    if (response_2) {
                      return callback(response_2);
                    }
                    try {
                      var req = transaction.objectStore(self._dbInfo.storeName).openCursor();
                      /** @type {number} */
                      var iterationNumber = 1;
                      /**
                       * @return {undefined}
                       */
                      req.onsuccess = function() {
                        var cursor = req.result;
                        if (cursor) {
                          var value = cursor.value;
                          if (_isEncodedBlob(value)) {
                            value = read(value);
                          }
                          var result = iterator(value, cursor.key, iterationNumber++);
                          if (void 0 !== result) {
                            importedCB(result);
                          } else {
                            cursor.continue();
                          }
                        } else {
                          importedCB();
                        }
                      };
                      /**
                       * @return {undefined}
                       */
                      req.onerror = function() {
                        callback(req.error);
                      };
                    } catch (cached_wifi_network_list) {
                      callback(cached_wifi_network_list);
                    }
                  });
                }).catch(callback);
              });
              return g(e, n), e;
            },
            getItem : function(target, n) {
              var self = this;
              target = String(target);
              /** @type {!Promise} */
              var e = new Promise$1(function(removeDoneCallback, callback) {
                self.ready().then(function() {
                  init(self._dbInfo, READONLY, function(response_2, transaction) {
                    if (response_2) {
                      return callback(response_2);
                    }
                    try {
                      var context = transaction.objectStore(self._dbInfo.storeName).get(target);
                      /**
                       * @return {undefined}
                       */
                      context.onsuccess = function() {
                        var value = context.result;
                        if (void 0 === value) {
                          /** @type {null} */
                          value = null;
                        }
                        if (_isEncodedBlob(value)) {
                          value = read(value);
                        }
                        removeDoneCallback(value);
                      };
                      /**
                       * @return {undefined}
                       */
                      context.onerror = function() {
                        callback(context.error);
                      };
                    } catch (cached_wifi_network_list) {
                      callback(cached_wifi_network_list);
                    }
                  });
                }).catch(callback);
              });
              return g(e, n), e;
            },
            setItem : function(val, data, a) {
              var self = this;
              val = String(val);
              /** @type {!Promise} */
              var n = new Promise$1(function(success, errback) {
                var dbInfo;
                self.ready().then(function() {
                  return dbInfo = self._dbInfo, "[object Blob]" === toString.call(data) ? _checkBlobSupportWithoutCaching(dbInfo.db).then(function(getHash) {
                    return getHash ? data : (blob = data, new Promise$1(function(resolve, onerror) {
                      /** @type {!FileReader} */
                      var reader = new FileReader;
                      reader.onerror = onerror;
                      /**
                       * @param {!Event} event
                       * @return {undefined}
                       */
                      reader.onloadend = function(event) {
                        /** @type {string} */
                        var encodedView = btoa(event.target.result || "");
                        resolve({
                          __local_forage_encoded_blob : true,
                          data : encodedView,
                          type : blob.type
                        });
                      };
                      reader.readAsBinaryString(blob);
                    }));
                    var blob;
                  }) : data;
                }).then(function(key) {
                  init(self._dbInfo, mode, function(e, transaction) {
                    if (e) {
                      return errback(e);
                    }
                    try {
                      var dbObj = transaction.objectStore(self._dbInfo.storeName);
                      if (null === key) {
                        key = void 0;
                      }
                      var data = dbObj.put(key, val);
                      /**
                       * @return {undefined}
                       */
                      transaction.oncomplete = function() {
                        if (void 0 === key) {
                          /** @type {null} */
                          key = null;
                        }
                        success(key);
                      };
                      /** @type {function(): undefined} */
                      transaction.onabort = transaction.onerror = function() {
                        var e = data.error ? data.error : data.transaction.error;
                        errback(e);
                      };
                    } catch (e) {
                      errback(e);
                    }
                  });
                }).catch(errback);
              });
              return g(n, a), n;
            },
            removeItem : function(key, a) {
              var self = this;
              key = String(key);
              /** @type {!Promise} */
              var n = new Promise$1(function(callback, reject) {
                self.ready().then(function() {
                  init(self._dbInfo, mode, function(error5, transaction) {
                    if (error5) {
                      return reject(error5);
                    }
                    try {
                      var data = transaction.objectStore(self._dbInfo.storeName).delete(key);
                      /**
                       * @return {undefined}
                       */
                      transaction.oncomplete = function() {
                        callback();
                      };
                      /**
                       * @return {undefined}
                       */
                      transaction.onerror = function() {
                        reject(data.error);
                      };
                      /**
                       * @return {undefined}
                       */
                      transaction.onabort = function() {
                        var createConnectionErr = data.error ? data.error : data.transaction.error;
                        reject(createConnectionErr);
                      };
                    } catch (createConnectionErr) {
                      reject(createConnectionErr);
                    }
                  });
                }).catch(reject);
              });
              return g(n, a), n;
            },
            clear : function(a) {
              var self = this;
              /** @type {!Promise} */
              var n = new Promise$1(function(callback, errback) {
                self.ready().then(function() {
                  init(self._dbInfo, mode, function(e, transaction) {
                    if (e) {
                      return errback(e);
                    }
                    try {
                      var data = transaction.objectStore(self._dbInfo.storeName).clear();
                      /**
                       * @return {undefined}
                       */
                      transaction.oncomplete = function() {
                        callback();
                      };
                      /** @type {function(): undefined} */
                      transaction.onabort = transaction.onerror = function() {
                        var e = data.error ? data.error : data.transaction.error;
                        errback(e);
                      };
                    } catch (e) {
                      errback(e);
                    }
                  });
                }).catch(errback);
              });
              return g(n, a), n;
            },
            length : function(a) {
              var self = this;
              /** @type {!Promise} */
              var n = new Promise$1(function(successFunc, callback) {
                self.ready().then(function() {
                  init(self._dbInfo, READONLY, function(response_2, transaction) {
                    if (response_2) {
                      return callback(response_2);
                    }
                    try {
                      var data = transaction.objectStore(self._dbInfo.storeName).count();
                      /**
                       * @return {undefined}
                       */
                      data.onsuccess = function() {
                        successFunc(data.result);
                      };
                      /**
                       * @return {undefined}
                       */
                      data.onerror = function() {
                        callback(data.error);
                      };
                    } catch (cached_wifi_network_list) {
                      callback(cached_wifi_network_list);
                    }
                  });
                }).catch(callback);
              });
              return g(n, a), n;
            },
            key : function(n, a) {
              var self = this;
              /** @type {!Promise} */
              var n = new Promise$1(function(resolve, callback) {
                if (n < 0) {
                  resolve(null);
                } else {
                  self.ready().then(function() {
                    init(self._dbInfo, READONLY, function(response_2, transaction) {
                      if (response_2) {
                        return callback(response_2);
                      }
                      try {
                        var store = transaction.objectStore(self._dbInfo.storeName);
                        /** @type {boolean} */
                        var c = false;
                        var that = store.openCursor();
                        /**
                         * @return {undefined}
                         */
                        that.onsuccess = function() {
                          var state = that.result;
                          if (state) {
                            if (0 === n) {
                              resolve(state.key);
                            } else {
                              if (c) {
                                resolve(state.key);
                              } else {
                                /** @type {boolean} */
                                c = true;
                                state.advance(n);
                              }
                            }
                          } else {
                            resolve(null);
                          }
                        };
                        /**
                         * @return {undefined}
                         */
                        that.onerror = function() {
                          callback(that.error);
                        };
                      } catch (cached_wifi_network_list) {
                        callback(cached_wifi_network_list);
                      }
                    });
                  }).catch(callback);
                }
              });
              return g(n, a), n;
            },
            keys : function(a) {
              var self = this;
              /** @type {!Promise} */
              var n = new Promise$1(function(removeDoneCallback, callback) {
                self.ready().then(function() {
                  init(self._dbInfo, READONLY, function(response_2, transaction) {
                    if (response_2) {
                      return callback(response_2);
                    }
                    try {
                      var cursor = transaction.objectStore(self._dbInfo.storeName).openCursor();
                      /** @type {!Array} */
                      var tileImagesToQueryArray = [];
                      /**
                       * @return {undefined}
                       */
                      cursor.onsuccess = function() {
                        var item = cursor.result;
                        if (item) {
                          tileImagesToQueryArray.push(item.key);
                          item.continue();
                        } else {
                          removeDoneCallback(tileImagesToQueryArray);
                        }
                      };
                      /**
                       * @return {undefined}
                       */
                      cursor.onerror = function() {
                        callback(cursor.error);
                      };
                    } catch (cached_wifi_network_list) {
                      callback(cached_wifi_network_list);
                    }
                  });
                }).catch(callback);
              });
              return g(n, a), n;
            }
          };
          /** @type {string} */
          var BASE_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
          /** @type {string} */
          var d = "~~local_forage_type~";
          /** @type {!RegExp} */
          var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;
          /** @type {string} */
          var SERIALIZED_MARKER = "__lfsc__:";
          /** @type {number} */
          var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;
          /** @type {string} */
          var TYPE_ARRAYBUFFER = "arbf";
          /** @type {string} */
          var TYPE_BLOB = "blob";
          /** @type {string} */
          var TYPE_INT8ARRAY = "si08";
          /** @type {string} */
          var TYPE_UINT8ARRAY = "ui08";
          /** @type {string} */
          var TYPE_UINT8CLAMPEDARRAY = "uic8";
          /** @type {string} */
          var TYPE_INT16ARRAY = "si16";
          /** @type {string} */
          var TYPE_INT32ARRAY = "si32";
          /** @type {string} */
          var TYPE_UINT16ARRAY = "ur16";
          /** @type {string} */
          var TYPE_UINT32ARRAY = "ui32";
          /** @type {string} */
          var TYPE_FLOAT32ARRAY = "fl32";
          /** @type {string} */
          var TYPE_FLOAT64ARRAY = "fl64";
          /** @type {number} */
          var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;
          /** @type {function(this:*): string} */
          var toString$1 = Object.prototype.toString;
          var localforageSerializer = {
            serialize : function(value, callback) {
              /** @type {string} */
              var element = "";
              if (value && (element = toString$1.call(value)), value && ("[object ArrayBuffer]" === element || value.buffer && "[object ArrayBuffer]" === toString$1.call(value.buffer))) {
                var buffer;
                /** @type {string} */
                var marker = SERIALIZED_MARKER;
                if (value instanceof ArrayBuffer) {
                  /** @type {!Object} */
                  buffer = value;
                  /** @type {string} */
                  marker = marker + TYPE_ARRAYBUFFER;
                } else {
                  buffer = value.buffer;
                  if ("[object Int8Array]" === element) {
                    /** @type {string} */
                    marker = marker + TYPE_INT8ARRAY;
                  } else {
                    if ("[object Uint8Array]" === element) {
                      /** @type {string} */
                      marker = marker + TYPE_UINT8ARRAY;
                    } else {
                      if ("[object Uint8ClampedArray]" === element) {
                        /** @type {string} */
                        marker = marker + TYPE_UINT8CLAMPEDARRAY;
                      } else {
                        if ("[object Int16Array]" === element) {
                          /** @type {string} */
                          marker = marker + TYPE_INT16ARRAY;
                        } else {
                          if ("[object Uint16Array]" === element) {
                            /** @type {string} */
                            marker = marker + TYPE_UINT16ARRAY;
                          } else {
                            if ("[object Int32Array]" === element) {
                              /** @type {string} */
                              marker = marker + TYPE_INT32ARRAY;
                            } else {
                              if ("[object Uint32Array]" === element) {
                                /** @type {string} */
                                marker = marker + TYPE_UINT32ARRAY;
                              } else {
                                if ("[object Float32Array]" === element) {
                                  /** @type {string} */
                                  marker = marker + TYPE_FLOAT32ARRAY;
                                } else {
                                  if ("[object Float64Array]" === element) {
                                    /** @type {string} */
                                    marker = marker + TYPE_FLOAT64ARRAY;
                                  } else {
                                    callback(new Error("Failed to get type for BinaryArray"));
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                callback(marker + bufferToString(buffer));
              } else {
                if ("[object Blob]" === element) {
                  /** @type {!FileReader} */
                  var fileReader = new FileReader;
                  /**
                   * @return {undefined}
                   */
                  fileReader.onload = function() {
                    /** @type {string} */
                    var str = d + value.type + "~" + bufferToString(this.result);
                    callback(SERIALIZED_MARKER + TYPE_BLOB + str);
                  };
                  fileReader.readAsArrayBuffer(value);
                } else {
                  try {
                    callback(JSON.stringify(value));
                  } catch (warFilename) {
                    console.error("Couldn't convert value into a JSON string: ", value);
                    callback(null, warFilename);
                  }
                }
              }
            },
            deserialize : function(value) {
              if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
                return JSON.parse(value);
              }
              var blobType;
              var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
              var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);
              if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
                var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
                blobType = matcher[1];
                serializedString = serializedString.substring(matcher[0].length);
              }
              var buffer = stringToBuffer(serializedString);
              switch(type) {
                case TYPE_ARRAYBUFFER:
                  return buffer;
                case TYPE_BLOB:
                  return createBlob([buffer], {
                    type : blobType
                  });
                case TYPE_INT8ARRAY:
                  return new Int8Array(buffer);
                case TYPE_UINT8ARRAY:
                  return new Uint8Array(buffer);
                case TYPE_UINT8CLAMPEDARRAY:
                  return new Uint8ClampedArray(buffer);
                case TYPE_INT16ARRAY:
                  return new Int16Array(buffer);
                case TYPE_UINT16ARRAY:
                  return new Uint16Array(buffer);
                case TYPE_INT32ARRAY:
                  return new Int32Array(buffer);
                case TYPE_UINT32ARRAY:
                  return new Uint32Array(buffer);
                case TYPE_FLOAT32ARRAY:
                  return new Float32Array(buffer);
                case TYPE_FLOAT64ARRAY:
                  return new Float64Array(buffer);
                default:
                  throw new Error("Unkown type: " + type);
              }
            },
            stringToBuffer : stringToBuffer,
            bufferToString : bufferToString
          };
          var defaults = {
            _driver : "webSQLStorage",
            _initStorage : function(options) {
              var self = this;
              var dbInfo = {
                db : null
              };
              if (options) {
                var i;
                for (i in options) {
                  dbInfo[i] = "string" != typeof options[i] ? options[i].toString() : options[i];
                }
              }
              /** @type {!Promise} */
              var dbInfoPromise = new Promise$1(function(saveNotifs, resolve) {
                try {
                  /** @type {!Database} */
                  dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
                } catch (routesFileLocation) {
                  return resolve(routesFileLocation);
                }
                dbInfo.db.transaction(function(tx) {
                  tx.executeSql("CREATE TABLE IF NOT EXISTS " + dbInfo.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], function() {
                    self._dbInfo = dbInfo;
                    saveNotifs();
                  }, function(canCreateDiscussions, defaultSounds) {
                    resolve(defaultSounds);
                  });
                });
              });
              return dbInfo.serializer = localforageSerializer, dbInfoPromise;
            },
            _support : "function" == typeof openDatabase,
            iterate : function(f, n) {
              var self = this;
              /** @type {!Promise} */
              var e = new Promise$1(function(incidentFunc, errback) {
                self.ready().then(function() {
                  var dbInfo = self._dbInfo;
                  dbInfo.db.transaction(function(tx) {
                    tx.executeSql("SELECT * FROM " + dbInfo.storeName, [], function(n, options) {
                      var data = options.rows;
                      var layerNum = data.length;
                      /** @type {number} */
                      var k = 0;
                      for (; k < layerNum; k++) {
                        var m = data.item(k);
                        var u = m.value;
                        if (u && (u = dbInfo.serializer.deserialize(u)), void 0 !== (u = f(u, m.key, k + 1))) {
                          return void incidentFunc(u);
                        }
                      }
                      incidentFunc();
                    }, function(canCreateDiscussions, e) {
                      errback(e);
                    });
                  });
                }).catch(errback);
              });
              return g(e, n), e;
            },
            getItem : function(type, n) {
              var self = this;
              type = String(type);
              /** @type {!Promise} */
              var e = new Promise$1(function(returnResultsFn, errback) {
                self.ready().then(function() {
                  var dbInfo = self._dbInfo;
                  dbInfo.db.transaction(function(tx) {
                    tx.executeSql("SELECT * FROM " + dbInfo.storeName + " WHERE key = ? LIMIT 1", [type], function(canCreateDiscussions, rslt) {
                      var r = rslt.rows.length ? rslt.rows.item(0).value : null;
                      if (r) {
                        r = dbInfo.serializer.deserialize(r);
                      }
                      returnResultsFn(r);
                    }, function(canCreateDiscussions, e) {
                      errback(e);
                    });
                  });
                }).catch(errback);
              });
              return g(e, n), e;
            },
            setItem : function(val, e, url) {
              return function test(key, url, c, f) {
                var self = this;
                key = String(key);
                /** @type {!Promise} */
                var e = new Promise$1(function(doIt, reject) {
                  self.ready().then(function() {
                    if (void 0 === url) {
                      /** @type {null} */
                      url = null;
                    }
                    /** @type {!Object} */
                    var data = url;
                    var dbInfo = self._dbInfo;
                    dbInfo.serializer.serialize(url, function(data, error5) {
                      if (error5) {
                        reject(error5);
                      } else {
                        dbInfo.db.transaction(function(callback) {
                          callback.executeSql("INSERT OR REPLACE INTO " + dbInfo.storeName + " (key, value) VALUES (?, ?)", [key, data], function() {
                            doIt(data);
                          }, function(canCreateDiscussions, error5) {
                            reject(error5);
                          });
                        }, function(sqlError) {
                          if (sqlError.code === sqlError.QUOTA_ERR) {
                            if (f > 0) {
                              return void doIt(test.apply(self, [key, data, c, f - 1]));
                            }
                            reject(sqlError);
                          }
                        });
                      }
                    });
                  }).catch(reject);
                });
                return g(e, c), e;
              }.apply(this, [val, e, url, 1]);
            },
            removeItem : function(name, a) {
              var self = this;
              name = String(name);
              /** @type {!Promise} */
              var n = new Promise$1(function(saveNotifs, errback) {
                self.ready().then(function() {
                  var dbInfo = self._dbInfo;
                  dbInfo.db.transaction(function(tx) {
                    tx.executeSql("DELETE FROM " + dbInfo.storeName + " WHERE key = ?", [name], function() {
                      saveNotifs();
                    }, function(canCreateDiscussions, e) {
                      errback(e);
                    });
                  });
                }).catch(errback);
              });
              return g(n, a), n;
            },
            clear : function(a) {
              var self = this;
              /** @type {!Promise} */
              var n = new Promise$1(function(saveNotifs, errback) {
                self.ready().then(function() {
                  var dbInfo = self._dbInfo;
                  dbInfo.db.transaction(function(tx) {
                    tx.executeSql("DELETE FROM " + dbInfo.storeName, [], function() {
                      saveNotifs();
                    }, function(canCreateDiscussions, e) {
                      errback(e);
                    });
                  });
                }).catch(errback);
              });
              return g(n, a), n;
            },
            length : function(a) {
              var self = this;
              /** @type {!Promise} */
              var n = new Promise$1(function(obtainGETData, errback) {
                self.ready().then(function() {
                  var dbInfo = self._dbInfo;
                  dbInfo.db.transaction(function(tx) {
                    tx.executeSql("SELECT COUNT(key) as c FROM " + dbInfo.storeName, [], function(canCreateDiscussions, rslt) {
                      var val = rslt.rows.item(0).c;
                      obtainGETData(val);
                    }, function(canCreateDiscussions, e) {
                      errback(e);
                    });
                  });
                }).catch(errback);
              });
              return g(n, a), n;
            },
            key : function(i, n) {
              var self = this;
              /** @type {!Promise} */
              var e = new Promise$1(function(saveNotifs, errback) {
                self.ready().then(function() {
                  var dbInfo = self._dbInfo;
                  dbInfo.db.transaction(function(tx) {
                    tx.executeSql("SELECT key FROM " + dbInfo.storeName + " WHERE id = ? LIMIT 1", [i + 1], function(canCreateDiscussions, rslt) {
                      var notifications = rslt.rows.length ? rslt.rows.item(0).key : null;
                      saveNotifs(notifications);
                    }, function(canCreateDiscussions, e) {
                      errback(e);
                    });
                  });
                }).catch(errback);
              });
              return g(e, n), e;
            },
            keys : function(a) {
              var self = this;
              /** @type {!Promise} */
              var n = new Promise$1(function(resolveCB, errback) {
                self.ready().then(function() {
                  var dbInfo = self._dbInfo;
                  dbInfo.db.transaction(function(tx) {
                    tx.executeSql("SELECT key FROM " + dbInfo.storeName, [], function(canCreateDiscussions, rslt) {
                      /** @type {!Array} */
                      var results = [];
                      /** @type {number} */
                      var i = 0;
                      for (; i < rslt.rows.length; i++) {
                        results.push(rslt.rows.item(i).key);
                      }
                      resolveCB(results);
                    }, function(canCreateDiscussions, e) {
                      errback(e);
                    });
                  });
                }).catch(errback);
              });
              return g(n, a), n;
            }
          };
          var memoryStorageDriver = {
            _driver : "localStorageWrapper",
            _initStorage : function(options) {
              var dbInfo = {};
              if (options) {
                var i;
                for (i in options) {
                  dbInfo[i] = options[i];
                }
              }
              return dbInfo.keyPrefix = dbInfo.name + "/", dbInfo.storeName !== this._defaultConfig.storeName && (dbInfo.keyPrefix += dbInfo.storeName + "/"), change() ? (this._dbInfo = dbInfo, dbInfo.serializer = localforageSerializer, Promise$1.resolve()) : Promise$1.reject();
            },
            _support : function() {
              try {
                return "undefined" != typeof localStorage && "setItem" in localStorage && "function" == typeof localStorage.setItem;
              } catch (e) {
                return false;
              }
            }(),
            iterate : function(iterator, n) {
              var self = this;
              var e = self.ready().then(function() {
                var dbInfo = self._dbInfo;
                var keyPrefix = dbInfo.keyPrefix;
                var keyPrefixLength = keyPrefix.length;
                var storageQty = localStorage.length;
                /** @type {number} */
                var iterationNumber = 1;
                /** @type {number} */
                var i = 0;
                for (; i < storageQty; i++) {
                  var key = localStorage.key(i);
                  if (0 === key.indexOf(keyPrefix)) {
                    var value = localStorage.getItem(key);
                    if (value && (value = dbInfo.serializer.deserialize(value)), void 0 !== (value = iterator(value, key.substring(keyPrefixLength), iterationNumber++))) {
                      return value;
                    }
                  }
                }
              });
              return g(e, n), e;
            },
            getItem : function(key, n) {
              var self = this;
              key = String(key);
              var e = self.ready().then(function() {
                var dbInfo = self._dbInfo;
                var data = localStorage.getItem(dbInfo.keyPrefix + key);
                return data && (data = dbInfo.serializer.deserialize(data)), data;
              });
              return g(e, n), e;
            },
            setItem : function(name, value, n) {
              var self = this;
              name = String(name);
              var e = self.ready().then(function() {
                if (void 0 === value) {
                  /** @type {null} */
                  value = null;
                }
                /** @type {string} */
                var val = value;
                return new Promise$1(function(obtainGETData, encodeURIComponent) {
                  var options = self._dbInfo;
                  options.serializer.serialize(value, function(gameVersion, itemCurrency) {
                    if (itemCurrency) {
                      encodeURIComponent(itemCurrency);
                    } else {
                      try {
                        localStorage.setItem(options.keyPrefix + name, gameVersion);
                        obtainGETData(val);
                      } catch (extJson) {
                        if (!("QuotaExceededError" !== extJson.name && "NS_ERROR_DOM_QUOTA_REACHED" !== extJson.name)) {
                          encodeURIComponent(extJson);
                        }
                        encodeURIComponent(extJson);
                      }
                    }
                  });
                });
              });
              return g(e, n), e;
            },
            removeItem : function(key, a) {
              var self = this;
              key = String(key);
              var n = self.ready().then(function() {
                var dbInfo = self._dbInfo;
                localStorage.removeItem(dbInfo.keyPrefix + key);
              });
              return g(n, a), n;
            },
            clear : function(a) {
              var self = this;
              var n = self.ready().then(function() {
                var prefix = self._dbInfo.keyPrefix;
                /** @type {number} */
                var n = localStorage.length - 1;
                for (; n >= 0; n--) {
                  var x = localStorage.key(n);
                  if (0 === x.indexOf(prefix)) {
                    localStorage.removeItem(x);
                  }
                }
              });
              return g(n, a), n;
            },
            length : function(a) {
              var n = this.keys().then(function(inRevIdx) {
                return inRevIdx.length;
              });
              return g(n, a), n;
            },
            key : function(i, n) {
              var self = this;
              var e = self.ready().then(function() {
                var t;
                var dbInfo = self._dbInfo;
                try {
                  t = localStorage.key(i);
                } catch (e) {
                  /** @type {null} */
                  t = null;
                }
                return t && (t = t.substring(dbInfo.keyPrefix.length)), t;
              });
              return g(e, n), e;
            },
            keys : function(a) {
              var self = this;
              var n = self.ready().then(function() {
                var dbInfo = self._dbInfo;
                var storageQty = localStorage.length;
                /** @type {!Array} */
                var itemKeys = [];
                /** @type {number} */
                var i = 0;
                for (; i < storageQty; i++) {
                  var k = localStorage.key(i);
                  if (0 === k.indexOf(dbInfo.keyPrefix)) {
                    itemKeys.push(k.substring(dbInfo.keyPrefix.length));
                  }
                }
                return itemKeys;
              });
              return g(n, a), n;
            }
          };
          /** @type {function(*): boolean} */
          var isArray = Array.isArray || function(value) {
            return "[object Array]" === Object.prototype.toString.call(value);
          };
          var CustomDrivers = {};
          var _this = {};
          var DriverType = {
            INDEXEDDB : cordovaSQLiteDriver,
            WEBSQL : defaults,
            LOCALSTORAGE : memoryStorageDriver
          };
          /** @type {!Array} */
          var charListNotLatin = [DriverType.INDEXEDDB._driver, DriverType.WEBSQL._driver, DriverType.LOCALSTORAGE._driver];
          /** @type {!Array} */
          var LibraryMethods = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"];
          var DefaultConfig = {
            description : "",
            driver : charListNotLatin.slice(),
            name : "localforage",
            size : 4980736,
            storeName : "keyvaluepairs",
            version : 1
          };
          var storeMixin = new (function() {
            /**
             * @param {?} options
             * @return {undefined}
             */
            function LocalForage(options) {
              var driver;
              for (driver in function(instance, Constructor) {
                if (!(instance instanceof Constructor)) {
                  throw new TypeError("Cannot call a class as a function");
                }
              }(this, LocalForage), DriverType) {
                if (DriverType.hasOwnProperty(driver)) {
                  var driverObject = DriverType[driver];
                  var driverName = driverObject._driver;
                  this[driver] = driverName;
                  if (!CustomDrivers[driverName]) {
                    this.defineDriver(driverObject);
                  }
                }
              }
              this._defaultConfig = extend({}, DefaultConfig);
              this._config = extend({}, this._defaultConfig, options);
              /** @type {null} */
              this._driverSet = null;
              /** @type {null} */
              this._initDriver = null;
              /** @type {boolean} */
              this._ready = false;
              /** @type {null} */
              this._dbInfo = null;
              this._wrapLibraryMethodsWithReady();
              this.setDriver(this._config.driver).catch(function() {
              });
            }
            return LocalForage.prototype.config = function(options) {
              if ("object" === (void 0 === options ? "undefined" : loadPlatform(options))) {
                if (this._ready) {
                  return new Error("Can't call config() after localforage has been used.");
                }
                var i;
                for (i in options) {
                  if ("storeName" === i && (options[i] = options[i].replace(/\W/g, "_")), "version" === i && "number" != typeof options[i]) {
                    return new Error("Database version must be a number.");
                  }
                  this._config[i] = options[i];
                }
                return !("driver" in options && options.driver) || this.setDriver(this._config.driver);
              }
              return "string" == typeof options ? this._config[options] : this._config;
            }, LocalForage.prototype.defineDriver = function(driverObject, callback, value) {
              /** @type {!Promise} */
              var result = new Promise$1(function(yFactory, reject) {
                try {
                  var driverName = driverObject._driver;
                  /** @type {!Error} */
                  var firstError = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
                  if (!driverObject._driver) {
                    return void reject(firstError);
                  }
                  /** @type {!Array<?>} */
                  var customDriverMethods = LibraryMethods.concat("_initStorage");
                  /** @type {number} */
                  var i = 0;
                  /** @type {number} */
                  var patchLen = customDriverMethods.length;
                  for (; i < patchLen; i++) {
                    var customDriverMethod = customDriverMethods[i];
                    if (!customDriverMethod || !driverObject[customDriverMethod] || "function" != typeof driverObject[customDriverMethod]) {
                      return void reject(firstError);
                    }
                  }
                  /**
                   * @param {boolean} data
                   * @return {undefined}
                   */
                  var then = function(data) {
                    if (CustomDrivers[driverName]) {
                      console.info("Redefining LocalForage driver: " + driverName);
                    }
                    /** @type {!Object} */
                    CustomDrivers[driverName] = driverObject;
                    /** @type {boolean} */
                    _this[driverName] = data;
                    yFactory();
                  };
                  if ("_support" in driverObject) {
                    if (driverObject._support && "function" == typeof driverObject._support) {
                      driverObject._support().then(then, reject);
                    } else {
                      then(!!driverObject._support);
                    }
                  } else {
                    then(true);
                  }
                } catch (createConnectionErr) {
                  reject(createConnectionErr);
                }
              });
              return resolve(result, callback, value), result;
            }, LocalForage.prototype.driver = function() {
              return this._driver || null;
            }, LocalForage.prototype.getDriver = function(driverName, callback, options) {
              /** @type {!Promise<?>} */
              var result = CustomDrivers[driverName] ? Promise$1.resolve(CustomDrivers[driverName]) : Promise$1.reject(new Error("Driver not found."));
              return resolve(result, callback, options), result;
            }, LocalForage.prototype.getSerializer = function(name) {
              /** @type {!Promise<{bufferToString: function(!Object): ?, deserialize: function(!Object): ?, serialize: function(!Object, !Function): undefined, stringToBuffer: function(!Object): ?}>} */
              var t = Promise$1.resolve(localforageSerializer);
              return resolve(t, name), t;
            }, LocalForage.prototype.ready = function(value) {
              var self = this;
              var result = self._driverSet.then(function() {
                return null === self._ready && (self._ready = self._initDriver()), self._ready;
              });
              return resolve(result, value, value), result;
            }, LocalForage.prototype.setDriver = function(data, callback, errorCallback) {
              /**
               * @return {undefined}
               */
              function setDriverToConfig() {
                self._config.driver = self.driver();
              }
              /**
               * @param {?} key
               * @return {?}
               */
              function ready(key) {
                return self._extend(key), setDriverToConfig(), self._ready = self._initStorage(self._config), self._ready;
              }
              var self = this;
              if (!isArray(data)) {
                /** @type {!Array} */
                data = [data];
              }
              var myDoughnutChart = this._getSupportedDrivers(data);
              var loadPropPromise = null !== this._driverSet ? this._driverSet.catch(function() {
                return Promise$1.resolve();
              }) : Promise$1.resolve();
              return this._driverSet = loadPropPromise.then(function() {
                var driverName = myDoughnutChart[0];
                return self._dbInfo = null, self._ready = null, self.getDriver(driverName).then(function(options) {
                  var supportedDrivers;
                  self._driver = options._driver;
                  setDriverToConfig();
                  self._wrapLibraryMethodsWithReady();
                  /** @type {function(): ?} */
                  self._initDriver = (supportedDrivers = myDoughnutChart, function() {
                    /** @type {number} */
                    var currentDriverIndex = 0;
                    return function driverPromiseLoop() {
                      for (; currentDriverIndex < supportedDrivers.length;) {
                        var driverName = supportedDrivers[currentDriverIndex];
                        return currentDriverIndex++, self._dbInfo = null, self._ready = null, self.getDriver(driverName).then(ready).catch(driverPromiseLoop);
                      }
                      setDriverToConfig();
                      /** @type {!Error} */
                      var error = new Error("No available storage method found.");
                      return self._driverSet = Promise$1.reject(error), self._driverSet;
                    }();
                  });
                });
              }).catch(function() {
                setDriverToConfig();
                /** @type {!Error} */
                var error = new Error("No available storage method found.");
                return self._driverSet = Promise$1.reject(error), self._driverSet;
              }), resolve(this._driverSet, callback, errorCallback), this._driverSet;
            }, LocalForage.prototype.supports = function(driverName) {
              return !!_this[driverName];
            }, LocalForage.prototype._extend = function(other) {
              extend(this, other);
            }, LocalForage.prototype._getSupportedDrivers = function(patches) {
              /** @type {!Array} */
              var supportedDrivers = [];
              /** @type {number} */
              var i = 0;
              var patchLen = patches.length;
              for (; i < patchLen; i++) {
                var driverName = patches[i];
                if (this.supports(driverName)) {
                  supportedDrivers.push(driverName);
                }
              }
              return supportedDrivers;
            }, LocalForage.prototype._wrapLibraryMethodsWithReady = function() {
              /** @type {number} */
              var i = 0;
              /** @type {number} */
              var len = LibraryMethods.length;
              for (; i < len; i++) {
                callWhenReady(this, LibraryMethods[i]);
              }
            }, LocalForage.prototype.createInstance = function(options) {
              return new LocalForage(options);
            }, LocalForage;
          }());
          module.exports = storeMixin;
        }, {
          3 : 3
        }]
      }, {}, [4])(4);
    };
    module.exports = main();
  }).call(t, moment(33));
}, function(canCreateDiscussions, Tone, redisConnect) {
  Object.defineProperty(Tone, "__esModule", {
    value : true
  });
  var client = redisConnect(162);
  /**
   * @param {boolean} duration
   * @param {boolean} callback
   * @param {!Object} name
   * @return {?}
   */
  Tone.Offline = function(duration, callback, name) {
    return void 0 === name && (name = window), client.listen(name, {
      online : duration,
      offline : callback
    }), {
      stop : function() {
        return client.unlisten(name, {
          online : duration,
          offline : callback
        });
      }
    };
  };
}, function(canCreateDiscussions, t, n) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  /**
   * @param {!Object} elem
   * @return {?}
   */
  t.current = function(elem) {
    return elem.user;
  };
}, function(canCreateDiscussions, data, require) {
  var randomDataArray = this && this.__assign || function() {
    return (randomDataArray = Object.assign || function(obj) {
      var props;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var prop;
        for (prop in props = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(props, prop)) {
            obj[prop] = props[prop];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  Object.defineProperty(data, "__esModule", {
    value : true
  });
  var $ = require(510);
  var IDriver = require(454);
  var template = require(17);
  var DateTime = require(4);
  /** @type {number} */
  var day = 30 * DateTime.MINUTE;
  /** @type {number} */
  data.LOGIN_BY_COOKIE_CHANGE_TIMEOUT = 20 * DateTime.SECOND;
  /** @type {number} */
  data.MAX_COOKIE_HEADER_LENGTH = 7168;
  /**
   * @param {string} token
   * @return {?}
   */
  data.fetchUser = function(token) {
    var options = {
      method : "post",
      query : true,
      data : Object.assign({
        app : DateTime.getBrowser() + "Ext"
      }, token ? {
        containerId : token
      } : {}),
      csrfMayBeEmpty : true
    };
    return $.fetch(template.URLS.userOrAnonymous, options);
  };
  /**
   * @param {?} nextRefreshDate
   * @return {?}
   */
  data.isItTimeToRefresh = function(nextRefreshDate) {
    return !nextRefreshDate || Date.now() - (new Date(nextRefreshDate)).getTime() > day;
  };
  /**
   * @param {string} vizId
   * @return {?}
   */
  data.fetchMimic = function(vizId) {
    var options = {
      data : randomDataArray({
        originalUri : "",
        newUser : false
      }, vizId ? {
        containerId : vizId
      } : {}),
      method : "post",
      headers : {
        "Content-Type" : "application/json"
      }
    };
    return $.fetch(template.URLS.dapiMimic, options);
  };
  /**
   * @return {?}
   */
  data.fetchStats = function() {
    return $.fetch(template.URLS.dapiFindProps, {
      data : {
        regex : "STAT:.*"
      },
      method : "post",
      headers : {
        "Content-Type" : "application/json"
      }
    });
  };
  /**
   * @param {string} data
   * @param {!Object} params
   * @param {?} user
   * @param {string} tags
   * @return {?}
   */
  data.prepareUser = function(data, params, user, tags) {
    if (void 0 === data) {
      data = {};
    }
    if (void 0 === params) {
      params = {};
    }
    if (void 0 === user) {
      user = {};
    }
    tags = tags || "empty";
    var _innerName = params.groups || [];
    var mPageConfig = params.settings || {};
    data.token = data.grauth;
    /** @type {boolean} */
    data.premium = "Premium" === data.type;
    data.experiments = IDriver.UserExperiments.create(_innerName);
    /** @type {number} */
    var width = parseInt(user["STAT:feedback_ACCEPT"], 10) || 0;
    return data.fixed_errors = isNaN(width) ? 0 : width, template.userFields.reduce(function(o, name) {
      var _a;
      var fn = data[name];
      return void 0 !== fn && Object.assign(o, ((_a = {})[name] = fn, _a)), o;
    }, {
      mimic : _innerName,
      settings : mPageConfig,
      grauth : tags
    });
  };
  /**
   * @param {(Request|string)} args
   * @param {?} body
   * @return {?}
   */
  data.authRequestHelper = function(args, body) {
    return $.fetch(args, {
      body : JSON.stringify(body),
      headers : {
        "Content-Type" : "application/json"
      },
      method : "post"
    });
  };
  /**
   * @param {?} fn
   * @return {?}
   */
  data.createCookieChannel = function(fn) {
    var res = DateTime.createChannel();
    return fn(res.put), res;
  };
}, function(canCreateDiscussions, t, floor) {
  var updateCategory = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var yBrush = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var startYNew = floor(14);
  var startXNew = floor(139);
  /**
   * @param {!Object} data
   * @param {!Function} e
   * @return {?}
   */
  t.update = function(data, e) {
    return updateCategory(this, void 0, void 0, function() {
      var notification;
      var options;
      var eCfgEl;
      var temp;
      var update;
      var result = this;
      return yBrush(this, function(_context) {
        switch(_context.label) {
          case 0:
            switch(notification = data.notification, options = data.tabs, notification.kind) {
              case "web-extension":
                return [3, 1];
              case "safari":
                return [3, 3];
            }return [3, 4];
          case 1:
            if ("web-extension" !== options.kind) {
              throw new Error('Unexpected tabs kind "' + options.kind + '"');
            }
            return [4, options.getAllTabs()];
          case 2:
            return eCfgEl = _context.sent(), (temp = eCfgEl.filter(function(msg) {
              var meth = msg.id;
              var a = msg.url;
              return a && e(a) && (!meth || meth.toString() !== startXNew.SETTINGS_TAB_ID);
            })).length ? (update = function() {
              return updateCategory(result, void 0, void 0, function() {
                return yBrush(this, function(canCreateDiscussions) {
                  return startYNew.felog.reloadNotificationClick(), temp.forEach(function(curveNode) {
                    var id = curveNode.id;
                    return options.reload(id);
                  }), [2];
                });
              });
            }, notification.create({
              title : "Grammarly needs to be reloaded",
              message : "While you were working, we updated Grammarly. To take advantage of these improvements, please save the text you are working on, and click here.",
              iconUrl : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAIAAAAErfB6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTgzMjhCMkQ1NjBGMTFFNDg0NjBEMENBNkVFNzA3RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTgzMjhCMkU1NjBGMTFFNDg0NjBEMENBNkVFNzA3RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxODMyOEIyQjU2MEYxMUU0ODQ2MEQwQ0E2RUU3MDdEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxODMyOEIyQzU2MEYxMUU0ODQ2MEQwQ0E2RUU3MDdEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pg1zYWQAAA/kSURBVHja7J15dFNVHsfz0nRJ06ZN932FbtBSoK2AlM2hVhYZAetURWhZnBEQBIvjMIvjco6WEQVZBBmqIiCoqFSQw14KCHSl1G50pUuabiFJmzTdMr9DHY/CS0iT+5Yk93v4Q5P0vnd/n/fu/f3uvb97CY1Gw8EyX3GxCTBgLAwYCwPGwoCxMGAsDBgLA8aAsTBgLAwYCwPGwoCxMGAsDBgDxsKAsTBgLAwYCwPGwoCxMGAsDBgDxsKAsTBgLAwYCwPGwoCxMGAMGAsDxsKAsTBgLAwYCwPG0imeBda5d7C/uru1Ui5uUnY1q7paVFJpX4+sTykfUPUPDf76M2uulZDHd7KxF9kIfPgiX76Ln71LuNB7lIOXnZW1qVSWsJBddtp65T91VBVK6wu66up62oaMqDWXIIIFHhNdgieIgia7hXnYCTFgxlSlEJ9sKc5pK6+Qt1B0iQihz3SPyDk+sWGO3hgwTWpXy4815n3flF/X007bRYMF7gv84hb6x7vbCjFgqgSNcFbtxQuSskHNECM3YEVwZ3pGpYXMgAYcA0ap3PaKHVWnS+7eYcn9xDgHrAlLSnSPwICN1Y3OmvcrTrAH7X2YN0bMTXANxYANEcQ5meXZZ1pvsfw+Z3tFb4qcD1EWBqyvoIvNqs3Zefs0BLUmccMQOq8enZQWMh06aQz4IarplmQUHSqXN5vcnUcKfbeMfzbUwRMDJpeGoznccDWzLFs9NGCi3Yotl7cpan5q4BSCQ2DAv5NyQL255Ogp8U0z8PmTvce9E5Niz7PFgH/RHWXnS3n7oXE2m5AdGupd8ekB9q4YMKdIWr86P0va18MxL4lsBDvj0sZTOSRiAoDPS37eUHjAdDvdh3bJWycsmeU5xkIBn2wpfq348IBmkGO+4hFW78WmzvGJtTjAQDej+OCQBUxocgliS+xzVDBm74oOaJnh3R2yjOlqqCZUFqpsKYDBq4J+17xb5vsElYUqQ8XNHzBEROAzm6tXpUNQZag4VN+cASsH1BDvml9EpKeg4lB9MIJ5AtZwNJtLjprTaIYBguqDEcAUaFx0VtXtcMNVRkYirblW3nbOnnxnoTWfR3C5BLdvaEDRr+pQK8Squ6rBPprvB4wQ3xDybOCjZhUmwZO7KPcDerpegkNEOflOch011tk/xjnAhy/S8WNgXKUQF3TVFUrriqUN9CwGsuXyvkl8xfh5J7YABqs9fXkbDTOAgPOPfnGzPMd42jkZ8OeyfuXZ1tLjzQV5nbWoWlFtihT6fjV1nZHzx2wBvK/mwvsVJ6grH8w0z3fCkqCpY5z8ULn6n9bmfNuUR+mKg40Rc1eEzjR5wE3KrvmXtlBkKS5BJHuPWxeWHCBwQ144dNK7bp85eucaRe22nZV19rQMY9b6sALwywWfUbSuCvqwt2KeHk/xClbwHv5162vopKkofLZX9PaJS00Y8I3OmqXXdlPx4q4MnbV6dBJ4yPQEeAfqLkMv00eBk/jZpL8YvC6T+TiYiq7Xydp+T/yK9eFP0EN32C1/ITjx8JS1VCydNMZEDL/Bue0Vq27sQ1tmsMB93yOrdEc+v0rSK8vvqi25e6daIRGrpJ193T0DaqAl4Nm62ToCrdGOXrGiIHiBHHl2+hQo7etZk59ViHpIeW/CCsPW0DMM+Jkr29EuWAcn+ZOElSIbge6fAcjvGvNOiovLZHoFZjzCarLb6Cf9JiZ5RdtwHzI6BN7ihqIDFyRlaKO7I4++bGKA4TF/7uoOhAWOdfLPmvSig85XDcKbPdVns5sLf5sKrL9cbRyeD566NHga38pGx88GNINr8z+72IaS8cEpawzId2IS8NqCT8+2lqIqLVDgBl2gjncX2t7tVacO1V81fhYSMK+PeGKx/yO63+P063sQTv/9wWvsRxOXmQzgdrV85rm3UYWP4FV9k7jel6/VwbneWf36zS/FqrsIqxDnEvJu7J90XFTWr1yU+2GzqgvVWM2Fx/4+0txUxrzoY415qOiCT/RebKoOQ++pPrf8+l60dEHgnT11aes57csw4LGDENaWi2ZGB8wFRjOZMOn7pnxURS0PnTHdI5L0qyGNBl7cDyt/pGikSTHQuzb/073V57X9IMrJ95WIOQwajRnAVQoxqtz7IIH72rDHtdHNKD74HbonSdsQxweVJ98tO67tBxAfgw+M5FpgNDCdCQA+2VKMqnF+I3qRtrjljdKvUV3o4YNNdZe2lP+g7SZTAiYxZTpmAOe0lSMp53HvmEdcR5F+9Xld7ld3rtNZqf21F+GipF8hHN4aqekYANzWK0ey5w2XINaEJZF+VSpr/E/FD/RXLbM8+1pn9YOf13a3oboEmA4MyGrAP3VUISkn2Xsc6YKH/qHBv908Ytg4hvGObkbRQUW/6r6A+ICWN5sGAzIAGNU47ZKgRC2N86XbilamooMOteKFa7tv3W0c/t+absmKG3vR7uY0IgMysOgOybxpmKN3rCiQNG7ZU3Oew6igFU25sk1kI+ARVu1qObMGpBswtFd1PQg6pIX+8aSfQ2N4XwvJlKhb2g0GBDPquV8m3U10dXcrknQj0nzLAc3goforHHMXGBDMyNI+uFIuNr4Q8K38yRLjL0rKO/u6ORYg/c1IN+AmJYKR98luo0k//1FczLEM6W9GugEjmVqJdvYnbbgut1daCGD9zUg34BaV1PhCSNc2VynEcna4V6wyI92AjfctuQQRJHB/8PNSWSPHYqS/GekGLOtTGlmCq40jaTZHDbrhQPZLfzPSDVg+YGwrqi2nSIJ6Pp/N0t+MdAM2fojYnke+2q3LknLG9Tej+RyrQ38Wr0nIfADTvE0vBky3TOgsI3MGbHyykLZg18XGwXKw6W9GugELeXwjS2hXK0g/97UXWQ5g/c1IN2AnG3sjS+hSd5OugQ0WeFgOYP3NSDfgh6aFPVQajqaebIEE6QC1uUp/M9INWM+sTt26KSVJSAxx8DD+6TEV6W9Guld06Egw0V+lssYHV3QQHGKKW9iJliLqbh4uMctrzHjnQGsjslF23T4j61fSZka6ASNZIZzfVUv6eZJ3NHWAbbm8XfHp8AwZWc7ndbnGA9bfjHQ30eFCBEd03la03unpePDz6R5RjtZ8iu58eehM4+nSb0a6AY9y8OISCI6TId2VB16yhX7xFN15svc4toxdEASYkaWA7ayskcQzJ7Sk6CwLnkbRxivaJjnoFxhQ/2E7BoYqJ7oEG19IubyZdHmwF9/5mYDJVNx2iZQth1+OyIAMAEZ1sK62TK+Xwx53pWDYclvVKZbsYj0iAzIAeDIiV+WcpJR0xAP8rH9HL0Z+2w09HSlXth1vLmjtlSkGeu/7V9fTfqmtHL5lmwEZSF3xsBNGCH2MTzAc1Axllmfvikt/8KvHvMY+HzT1i/rLaO+8Sdn1WvFhHVHyzrg0qq0HpgMDsvoNvhfPRCIp54KkjDRdE/TXqCenuofTWal14ckzPaPYZjpmACM8IOit0mOk20NaEdztE5cicej0UWrglBdHPcZC0zEDOMzRO5hs6asBqu1u21Z5ivQrvpXNvoRV0wzaAXBkYyAhM/45diEtAZI7mM4EAIMW+MWhKiqrNudSe4W2sHt3/PL0kBkUHdZry+W9HZPyauQ81hqNMcAL/eNRraLScDQZRQfrtSRZcwkiI3LexwnLIURG7u8ceXTdIv8EeiwG5tKWNMtGwO62QoQuibxf9WLef3WkFkJD/cO0jFWjZiFZuiWyEbweteDrqet1jAmDy4126zUw10i3ueMwu+guLWQGwtLu9HSkX9ujYyxCwLN9JXzOmZl/A2/I4JEQP3uX1yLnn5u1+YXgRB0tkKRXtvLGJ2jnpw0zF5PnJk0QBcU4ByDcTrhKIV527eNPElbqiBTdbB3Xhz+xJizpcnvlmdZb1zqq9UnkCnXwfNQ9LMkrRh+3vFnVlX59L4F0oScYyrARQIYPxgJDo90QHBinXv1od3y6bm+TR1jN8IiCf/DfnWpFpULcqOxsVcmgqR9eQA9snKztffiiAIFrpNBXqPcsZKms8c95+6HM2V7RaA1l2B8yDDjRPQLtS8y5l1qZenXHm9GL5/qM1+f3rraOU2wdkVz6WGPem6XfDJ/t5aDfDvF6vr6JhgZ7zC983xgxF3mZygH1q0UHX7/5pWKgl55ayPqVG4u+2FxyhIqT24wxEfOAE1xD0bZmv+q7pvx5OZmUrtIaVnZz4dyLmRTtiwnGMfjIFQ5LUlc2Rc6nKPGkrVcOr/Liyx+eo+BwbRB4ailXtm0qPqT/5i8jOhAPzALGMeYOWXH6KMQeq0cnUXe03c+ypjX5WeArLQuZBp6w8Q9T/9Dg6daSz+tydXgP4t67pH/YqSUzg1RgFiOXKVrc4ZQQDSd7jxtu93QfrEGK50ZnzVnJLWiNH7ofCETJJ6ZvCvz9eXrHmwt0TDjeJ7M6nJJD7/GywwBiRYHjRUEQ44Y4eATYuzk/kA8CPlqzsqu+p71SLr55t6FIWj+iAxYhVNuTsMLr/1sSwMMBDYmefp+5HS87rEMNV94q/ZbBG4DYxp5nY03wlIPqngG18efUQXcAEY67rXD4BGL9O+B/jH3K3A6IHnZANhR+wcgh4KwSdCJbJzyPZAaMXQngUKV3YlKMb5dMWlB9MAKq+U3WZfjb82x3xadbThrZfYKKQ/XBCKgKZOMWDgH2rjvj0lAdN2RCgipDxQPI9lk1K8AgcG63TljCI6wshy5UFqqM/Cxr9m7CMstzzHuxqUgSmdgvqCZUlnQTbLMFzLm3gnBL7HNm/x5DBaGaCFeasjdMItV5yc8bCg/QNgBCf78LLTMV767JAAYVSetX52dJzW6zQvCZwatC3u+aHmDOvYOdX8rbX9MtMad4FyIitD6zCQPm3JvG31xy1DzGuZK9x70Tk4Iw3jUHwJx7Y5mHG65mlmWbbpcMne6mqPmpgVMoWotv2oCHBQ11RtEhGuYWkStS6Ltl/LN0jsWaJGDOvfnjrNqcnbdPj2j+jkHZWVmvHp2UFjKd5l1xTRXwsJqUXZnl2aQbsrBKs72iN0XOR3jIrKUAHtaNzpr3K06gXXuLSjHOARsj5hqzag4D/kW57RU7qk6zBzOgXROWlEh98qqlAB5WobQ+q/biBUkZ6Y60NAi62JmeUWkhMyZQOXxhuYCH1a6WH2vM+74pH+3BvboVLHBf4Be30D/egBxADNhAVSnEJ1uKc9rKkRwqT6oIoc90j8g5PrEjzb3HgFGqrVf+U0cVNOAFXXV1PW3GHHHLJYhggcdEl2BohCe7hY1ozxsMmA5B6Fzd3VopF0OU1azqalFJpX09sj6lfED12/OIrLlWQh7fycZeZCPw4Yt8+S4Q54QLvUc5eJnQASCWCNiihM8awoCxMGAsDBgLA8bCgLEwYCwMGAPGwoCxMGAsDBiLav1PgAEASePGMkSWuH0AAAAASUVORK5CYII=",
              buttons : [{
                title : "Reload",
                iconUrl : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowZDJiMWMzMi1mODMzLTQxOTgtOGVlMy05YWY1OGVmOGUzNzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjFBODMzNzYxQkREMTFFNDk0ODFGNTFFRDg1MkEzMjUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkY1RjA5NjYxQkREMTFFNDk0ODFGNTFFRDg1MkEzMjUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2FmMWVkMGUtZjZkZC00YmYwLWE2MjctNTBkMjA4MjRiZDViIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBkMmIxYzMyLWY4MzMtNDE5OC04ZWUzLTlhZjU4ZWY4ZTM3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuUD9ZcAAAM8SURBVHjatJbbS1RRFIePOjqG99LSLFMzoazMFLsHQQVFl8fee+qhP6cX3+sxiG6QFV0MNCjNjAyx1MoumpmXsRnz0m/Bd2A3TNocpw0fw5lz9v7tddlr7bSWlhYvwNgqzosMcVl0JrtAyAs2FkSeKBQ7xKT4Kqb+t/CcqBD1olpsEDdFdyqF00Q+FtpvWDSLWrEeMsUqPPBRjIifbDCwcBiROrFLrBU1Yp3zzWZxju/axCMxsJTr/yacLopwZw0WWix3i5IE3+eBbSYiXovhIK42KxvESaw0i9aIHC9FI5TguRDLToszWG1jXnwQ4yKb/7N5N01Wd8KomE1GOFc0irPioCh33r0Q98Rz3H/B2ZTF84ZojUuuZYXToEocEydEJe/MymeiQ9wVXaJJHCeT7f01jlNXsq5Ow23VxLaM/79gyXUxJD7x/y/eRcVV8RArk45xLgm0X+wkuSax0iy5EzdvTNyngpm134MmVz5VyEQLREz0inbiFz++sZlFNuitRLiBs5qJG5+KB+J9gnlRYht4pDvntoSiYeOH6BP9WJ/y4VucRSnM4tlK3TvO7EqGVbNNeNRfd9B+feEMpxj4xWImBYaZ6EVCaOOVuCR6QnFdKNXDCtBRToxHVbzixng+rtKEUlSXQ3GeG/FLqS88S62NObGxKraaMCQ7MkjUSidvYpTTqCscQ9gvBHaWt1DJwgGEw9TzWtbyWHvEN86P8QRNwJp9MbttZofWed4kKWzN44jYw1pWYnu4Gk26FtvDS15OsOM6SmhVAIttzl5uo2HW7EFjyrU4QsFop/Ef4OztE5+pyUNUtAgWuCOTZCzlCJ1ibj4x7WbtPj/GvvAivn9LI6/kCJRyIShjYhvfjMYJF/L9IQSbmOtxBepkXgytP4TnaQit9NnDYpvYCBXcKPv5LsLcHFxbg3CjcwW2u9dj1hxAI+ENJEIzT8e9BbjOIwSlxGjaubqGaKt5jpW+pdanb7FmZKmrzxy99gm7m6NdVpGd5csk1TgMENfbhGjmX2+ZUY7XGHGtJ0O308WKnROxQH8epRb3IjpI64wmc71dQHSMLjVDHhRR08NOU4kiPExMO2DJC8JvAQYA0OLb9zl5D+gAAAAASUVORK5CYII="
              }]
            }).then(function(options) {
              options.buttonClick.subscribe(update);
            }), [3, 5]) : [2];
          case 3:
            return notification.create({
              title : "Grammarly needs to be reloaded",
              message : "While you were working, we updated Grammarly. To take advantage of these improvements, please save the text you are working on, and click here."
            }), [3, 5];
          case 4:
            throw new Error('Unsupported notification kind "${notification.kind}"');
          case 5:
            return startYNew.felog.reloadNotificationShow(), [2];
        }
      });
    });
  };
}, function(canCreateDiscussions, t, require) {
  var keepToken = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var clearProcessId = this && this.__values || function(value) {
    var func = "function" == typeof Symbol && value[Symbol.iterator];
    /** @type {number} */
    var pos = 0;
    return func ? func.call(value) : {
      next : function() {
        return value && pos >= value.length && (value = void 0), {
          value : value && value[pos++],
          done : !value
        };
      }
    };
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var exports = require(364);
  var _ = require(295);
  var trg = require(194);
  var adapter = require(1002);
  var Logger = require(3);
  var sui = require(1);
  var matrix3x2 = Logger.Logger.create("universal.bg.state.connection.sagas");
  /** @type {string} */
  var p = "dataControlActive";
  /** @type {string} */
  var d = "dataControlAllowed";
  var offsetFromCenter = function() {
    /**
     * @param {?} prefs
     * @param {?} cb
     * @param {?} date
     * @param {?} emit
     * @param {?} scope
     * @param {?} text
     * @param {?} resources
     * @param {!Array} attrName
     * @return {undefined}
     */
    function set(prefs, cb, date, emit, scope, text, resources, attrName) {
      if (void 0 === attrName) {
        /** @type {boolean} */
        attrName = false;
      }
      this._prefs = prefs;
      this._emitTabs = cb;
      this._telemetry = date;
      this._isIncognito = emit;
      this._getNextPingDate = scope;
      this._managementApi = text;
      this._initGnarClient = resources;
      /** @type {!Array} */
      this._isDataControlCheckEnabled = attrName;
    }
    return set.prototype.start = function() {
      var driver;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, _.select(adapter.current)];
          case 1:
            return driver = _context.sent(), this._isDataControlCheckEnabled && "active" === driver.dataControl ? [5, clearProcessId(this.checkDataControl())] : [3, 4];
          case 2:
            return _context.sent(), [4, [exports.takeLatest(trg.t.ACCEPT_DATA_CONTROL, this.acceptDataControl.bind(this)), exports.takeLatest(trg.t.UNINSTALL_EXTENSION, this.uninstallExtension.bind(this))]];
          case 3:
            return _context.sent(), [3, 6];
          case 4:
            return [5, clearProcessId(exports.takeLatest(trg.t.UPDATE_CONNECTION, this.checkOnline.bind(this)))];
          case 5:
            _context.sent();
            /** @type {number} */
            _context.label = 6;
          case 6:
            return [2];
        }
      });
    }, set.prototype.checkDataControl = function() {
      var parentIsCall;
      var fileId;
      var parentIsMember;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, _.call(this._prefs.get, p)];
          case 1:
            return parentIsCall = _context.sent(), [4, _.call(this._prefs.get, d)];
          case 2:
            return fileId = _context.sent(), [4, _.call(this._prefs.get, "version")];
          case 3:
            return parentIsMember = _context.sent(), parentIsCall && true !== fileId || !parentIsMember ? [4, _.call(this._prefs.set, p, true)] : [3, 6];
          case 4:
            return _context.sent(), [4, _.put(trg.activateDataControl())];
          case 5:
            return _context.sent(), [3, 11];
          case 6:
            return [4, _.call(this._initGnarClient)];
          case 7:
            return _context.sent(), [4, _.call([this._telemetry, this._telemetry.enableEventsSending])];
          case 8:
            return _context.sent(), [4, _.put(trg.disableDataControl())];
          case 9:
            return _context.sent(), [4, _.call([this, this.start])];
          case 10:
            _context.sent();
            /** @type {number} */
            _context.label = 11;
          case 11:
            return [2];
        }
      });
    }, set.prototype.acceptDataControl = function() {
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, _.call(this._prefs.set, d, true)];
          case 1:
            return _context.sent(), [4, _.call(this._initGnarClient)];
          case 2:
            return _context.sent(), [4, _.call([this._telemetry, this._telemetry.enableEventsSending])];
          case 3:
            return _context.sent(), [4, _.call([this._telemetry, this._telemetry.acceptDataControl])];
          case 4:
            return _context.sent(), [2];
        }
      });
    }, set.prototype.uninstallExtension = function() {
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, _.call(this._managementApi.uninstallSelf)];
          case 1:
            return _context.sent(), [2];
        }
      });
    }, set.prototype.checkOnline = function() {
      var e;
      var n;
      var x;
      var i;
      var imageData;
      return keepToken(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 7, , 8]), [4, _.select(adapter.current)];
          case 1:
            return e = _a.sent(), n = e.online, e.cookiesDisabled ? [4, _.fork([this, this.monitorCookiesDisable])] : [3, 3];
          case 2:
            _a.sent();
            /** @type {number} */
            _a.label = 3;
          case 3:
            return x = sui.Obj.pluck(e, ["networkOffline", "bgNotConnected", "authToCapiDegradation"]), i = x.every(function(canCreateDiscussions) {
              return !canCreateDiscussions;
            }), n === i ? [2] : [4, _.put(trg.onlineConnection(i))];
          case 4:
            return _a.sent(), i ? (matrix3x2.trace("ONLINE SERVICE| reseting capi connections after offline"), [4, _.call(this._emitTabs, "reset")]) : [3, 6];
          case 5:
            _a.sent();
            /** @type {number} */
            _a.label = 6;
          case 6:
            return [3, 8];
          case 7:
            return imageData = _a.sent(), exports.isCancelError(imageData) ? [2] : [3, 8];
          case 8:
            return [2];
        }
      });
    }, set.prototype.monitorIsIncognito = function() {
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, _.call(this._isIncognito)];
          case 1:
            return _context.sent() ? [4, _.call([this, this.callDaily], this._telemetry.incognitoInit)] : [3, 3];
          case 2:
            _context.sent();
            /** @type {number} */
            _context.label = 3;
          case 3:
            return [2];
        }
      });
    }, set.prototype.monitorCookiesDisable = function() {
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, _.call([this, this.callDaily], this._telemetry.disabledCookiesInit)];
          case 1:
            return _context.sent(), [2];
        }
      });
    }, set.prototype.callDaily = function(b, s, n) {
      var o;
      var e;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, _.call(this._prefs.get, n)];
          case 1:
            return !(o = _context.sent()) || o < Date.now() ? [4, _.call(b, s, n)] : [3, 5];
          case 2:
            return _context.sent(), [4, _.call(this._getNextPingDate)];
          case 3:
            return e = _context.sent(), [4, _.call(this._prefs.set, n, e)];
          case 4:
            _context.sent();
            /** @type {number} */
            _context.label = 5;
          case 5:
            return [2];
        }
      });
    }, set;
  }();
  t.ConnectionSagas = offsetFromCenter;
}, function(canCreateDiscussions, t, $) {
  var resolve = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var vec3 = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var exports = $(364);
  var self = $(295);
  var $realtime = $(14);
  var _this = $(1);
  var u = $(4);
  var o = $(165);
  var ui = $(1298);
  var object = $(294);
  var that = $(1045);
  var trg = $(194);
  var tile = $(1002);
  var $scope = $(10).getGlobal();
  var frequencyIndex = $scope.appConfig.newsVersion;
  var browser = $scope.bundleInfo.browser;
  var offsetFromCenter = function() {
    /**
     * @param {?} artboard
     * @param {!Object} context
     * @param {?} win
     * @param {?} selector
     * @return {undefined}
     */
    function $(artboard, context, win, selector) {
      this._prefs = artboard;
      /** @type {!Object} */
      this._dapi = context;
      this._reconnectAllSockets = win;
      this._emitFocusedTab = selector;
    }
    return $.prototype.start = function() {
      var checkData;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.select(tile.current)];
          case 1:
            return checkData = _context.sent(), "firefox" !== browser || "active" !== checkData.dataControl ? [3, 3] : [4, [exports.takeLatest(trg.t.ACCEPT_DATA_CONTROL, this.start.bind(this)), exports.takeLatest(trg.t.DISABLE_DATA_CONTROL, this.start.bind(this))]];
          case 2:
            return _context.sent(), [3, 5];
          case 3:
            return [4, [exports.takeEvery(object.DAPI_ACTIONS, this.saveToDapi.bind(this)), exports.takeEvery(object.CACHED_ACTIONS, this.cacheSettings.bind(this)), exports.takeLatest(object.t.SAVE_ANONYMOUS_PROPERTIES, this.saveAnonymousDapiProps.bind(this)), exports.takeLatest(object.t.DISABLE_ON_TAB, this.disableOnTab.bind(this)), exports.takeLatest(object.t.SAVE_EMAIL_CONNECTEDNESS_DATA, this.saveEmailConnectednessData.bind(this))]];
          case 4:
            _context.sent();
            /** @type {number} */
            _context.label = 5;
          case 5:
            return [2];
        }
      });
    }, $.prototype.initializeDapiProps = function() {
      var index;
      var apiPath;
      var j;
      var i;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            for (apiPath in index = [], ui.dapiPropsMap) {
              index.push(apiPath);
            }
            /** @type {number} */
            j = 0;
            /** @type {number} */
            _context.label = 1;
          case 1:
            return j < index.length ? (i = index[j], [4, self.call([this, this.initializeDapiProp], ui.dapiPropsMap[i])]) : [3, 4];
          case 2:
            _context.sent();
            /** @type {number} */
            _context.label = 3;
          case 3:
            return j++, [3, 1];
          case 4:
            return [2];
        }
      });
    }, $.prototype.initializeDapiProp = function(name, requiredFrom) {
      var _Object$assign;
      var o;
      var key;
      var data;
      var id;
      var p;
      return void 0 === requiredFrom && (requiredFrom = false), resolve(this, function(_a) {
        switch(_a.label) {
          case 0:
            if (void 0 === name) {
              throw new Error("Incorrect DAPI property name");
            }
            return [4, self.call([this, this.getDapiPropsPrefsKey])];
          case 1:
            return key = _a.sent(), [4, self.call(this._prefs.get, key)];
          case 2:
            return (data = _a.sent()) && data[name] && !requiredFrom ? [4, self.put(object.setDapiProp(name, data[name]))] : [3, 4];
          case 3:
            return _a.sent(), [3, 11];
          case 4:
            return _a.trys.push([4, 10, , 11]), [4, self.call($realtime.felog.initializePropFromDapi, name)];
          case 5:
            return _a.sent(), [4, self.call(this._dapi.common[name])];
          case 6:
            return null === (id = _a.sent()) ? [3, 9] : [4, self.put(object.setDapiProp(name, id))];
          case 7:
            return _a.sent(), p = Object.assign({}, data, ((_Object$assign = {})[name] = id, _Object$assign)), [4, self.call(this._prefs.set, (o = {}, o[key] = p, o))];
          case 8:
            _a.sent();
            /** @type {number} */
            _a.label = 9;
          case 9:
            return [3, 11];
          case 10:
            return _a.sent(), [3, 11];
          case 11:
            return [2];
        }
      });
    }, $.prototype.resetStrongDialectFromDapi = function() {
      var e;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return e = ui.dapiPropsMap[object.t.CHANGE_STRONG_DIALECT], [4, self.call([this, this.initializeDapiProp], e, true)];
          case 1:
            return _context.sent(), [2];
        }
      });
    }, $.prototype.saveToDapi = function(data) {
      var _Object$assign;
      var _setScrollPercent;
      var key;
      var direction;
      var value;
      var position;
      var cachetype;
      var index = data.type;
      var name = data.data;
      return resolve(this, function(_a) {
        switch(_a.label) {
          case 0:
            return [4, self.select(that.getDapiProp, index)];
          case 1:
            return _a.sent() === name ? [2] : (key = ui.dapiPropsMap[index], [4, self.call([this, this.getDapiPropsPrefsKey])]);
          case 2:
            direction = _a.sent();
            /** @type {number} */
            _a.label = 3;
          case 3:
            return _a.trys.push([3, 5, , 6]), [4, self.call(ui.dapiPropsSetter[key], this._dapi, name)];
          case 4:
            return _a.sent(), [3, 6];
          case 5:
            return _a.sent(), [3, 6];
          case 6:
            return [4, self.call(this._prefs.get, direction)];
          case 7:
            return value = _a.sent(), position = Object.assign({}, value, ((_Object$assign = {})[key] = name, _Object$assign)), [4, self.call(this._prefs.set, (_setScrollPercent = {}, _setScrollPercent[direction] = position, _setScrollPercent))];
          case 8:
            return _a.sent(), cachetype = ui.dapiPropsMap[object.t.CHANGE_STRONG_DIALECT], key !== cachetype ? [3, 10] : [4, self.call(this._reconnectAllSockets, name)];
          case 9:
            _a.sent();
            /** @type {number} */
            _a.label = 10;
          case 10:
            return [4, self.put(object.setDapiProp(key, name))];
          case 11:
            return _a.sent(), [4, self.call(o.fire, "set-dapi-prop", key, name)];
          case 12:
            return _a.sent(), [2];
        }
      });
    }, $.prototype.setInitialSettings = function() {
      var index;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call([this, this.getSettings])];
          case 1:
            return index = _context.sent(), [4, self.put(object.initialSettings(index))];
          case 2:
            return _context.sent(), [4, self.call([this, this.setShowNews])];
          case 3:
            return _context.sent(), [2];
        }
      });
    }, $.prototype.cacheSettings = function() {
      var e;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.select(that.current)];
          case 1:
            return e = _context.sent(), [4, self.call(this._prefs.set, {
              extensionSettings : e
            })];
          case 2:
            return _context.sent(), [2];
        }
      });
    }, $.prototype.getDapiPropsPrefsKey = function() {
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.select(that.getUserId)];
          case 1:
            return [2, "dapiProps_" + _context.sent()];
        }
      });
    }, $.prototype.setShowNews = function() {
      var options;
      var undefined;
      var result;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.select(that.current)];
          case 1:
            return options = _context.sent().common, undefined = options && Number.isInteger(options.seenNewsVersion) && parseInt(options.seenNewsVersion, 10), result = frequencyIndex !== undefined && frequencyIndex > 0, [4, self.put(object.showNews(result))];
          case 2:
            return _context.sent(), [2];
        }
      });
    }, $.prototype.getSettings = function() {
      var e;
      var t;
      var n;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(this._prefs.get, "extensionSettings")];
          case 1:
            return (e = _context.sent()) ? [2, e] : [4, self.call(this._prefs.get, ui.oldSettingsFields)];
          case 2:
            return t = _context.sent(), [4, self.call(ui.migrateSettings, t)];
          case 3:
            return n = _context.sent(), [4, self.call(this._prefs.set, {
              extensionSettings : n
            })];
          case 4:
            return _context.sent(), [2, n];
        }
      });
    }, $.prototype.saveAnonymousDapiProps = function(animation) {
      var element = animation.props;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(this._prefs.set, ui.anonymousDapiPropsKey, element)];
          case 1:
            return _context.sent(), [4, self.select(that.getUserAnonymous)];
          case 2:
            return false !== _context.sent() ? [3, 4] : [4, self.call([this, this.setAnonymousPropsToDapi])];
          case 3:
            _context.sent();
            /** @type {number} */
            _context.label = 4;
          case 4:
            return [2];
        }
      });
    }, $.prototype.setAnonymousPropsToDapi = function() {
      var a;
      var m;
      var n;
      var k;
      var i;
      return resolve(this, function(_a) {
        switch(_a.label) {
          case 0:
            return [4, self.call(this._prefs.get, ui.anonymousDapiPropsKey)];
          case 1:
            if (null == (a = _a.sent())) {
              return [3, 10];
            }
            for (n in m = [], a) {
              m.push(n);
            }
            /** @type {number} */
            k = 0;
            /** @type {number} */
            _a.label = 2;
          case 2:
            if (!(k < m.length)) {
              return [3, 7];
            }
            i = m[k];
            /** @type {number} */
            _a.label = 3;
          case 3:
            return _a.trys.push([3, 5, , 6]), [4, self.call(ui.dapiPropsSetter[i], this._dapi, a[i])];
          case 4:
            return _a.sent(), [3, 6];
          case 5:
            return _a.sent(), [3, 6];
          case 6:
            return k++, [3, 2];
          case 7:
            return [4, self.call(this._prefs.remove, ui.anonymousDapiPropsKey)];
          case 8:
            return _a.sent(), [4, self.call([this, this.resetStrongDialectFromDapi])];
          case 9:
            _a.sent();
            /** @type {number} */
            _a.label = 10;
          case 10:
            return [2];
        }
      });
    }, $.prototype.disableOnTab = function() {
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(this._emitFocusedTab, "disable-on-tab")];
          case 1:
            return _context.sent(), [2];
        }
      });
    }, $.prototype.saveEmailConnectednessData = function(elem) {
      var e;
      var b;
      var username;
      var j;
      var date;
      var timezoneOffset;
      var nodeType;
      var Composite;
      var name;
      var h;
      var options = elem.emailConnectednessData;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(this._prefs.get, ui.emailConnectednessDataPropsKey)];
          case 1:
            return e = _context.sent(), b = null !== e ? e : [], username = options.sender, j = options.recipiants, date = options.timestamp, timezoneOffset = options.timezoneOffset, username ? [4, self.call(ui.getEmailType, username)] : [3, 3];
          case 2:
            return Composite = _context.sent(), [3, 4];
          case 3:
            /** @type {string} */
            Composite = "personal";
            /** @type {number} */
            _context.label = 4;
          case 4:
            return nodeType = Composite, name = u.normalizedHashCode(username, 1E9), h = j.map(function(e) {
              return u.normalizedHashCode(e, 1E9);
            }), b.push({
              hashedS : name,
              hashedR : h,
              timestamp : date,
              timezoneOffset : timezoneOffset,
              emailType : nodeType
            }), [4, self.call(this._prefs.set, ui.emailConnectednessDataPropsKey, b)];
          case 5:
            return _context.sent(), [2];
        }
      });
    }, $.prototype.processEmailConnectednessData = function() {
      var q;
      var total_pageviews_raw;
      var m;
      var data;
      var title;
      var lastrayafteradjust;
      var item;
      var p;
      var messageTag;
      var x;
      var t;
      var f;
      var _;
      var params;
      var view;
      var vnode;
      var opts;
      var callback;
      var S;
      return resolve(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.select(that.getUserExperiments)];
          case 1:
            return (q = _context.sent()) && q.connectednessData ? [4, self.call(this._prefs.get, ui.emailConnectednessDataNextSyncDate)] : [2];
          case 2:
            return null === (total_pageviews_raw = _context.sent()) || Date.now() > parseInt(total_pageviews_raw, 10) ? (m = Date.now() + _this.Ms.week, [4, self.call(this._prefs.set, ui.emailConnectednessDataNextSyncDate, m)]) : [3, 8];
          case 3:
            return _context.sent(), [4, self.call(this._prefs.get, ui.emailConnectednessDataPropsKey)];
          case 4:
            return null !== (data = _context.sent()) && data.length > 0 ? (title = data.length, lastrayafteradjust = vec3(data.reduce(function(styleBuilders, bone_in) {
              return "presonal" === bone_in.emailType ? styleBuilders[0].push(bone_in) : styleBuilders[1].push(bone_in), styleBuilders;
            }, [[], []]), 2), item = lastrayafteradjust[0], p = lastrayafteradjust[1], messageTag = data[0].timestamp, [4, self.select(that.getUserId)]) : [3, 8];
          case 5:
            return x = _context.sent(), t = u.normalizedHashCode(x, 1E9), f = item.length, _ = p.length, params = ui.getHistogramByRecipients(data), view = ui.getHistogramByRecipients(item), vnode = ui.getHistogramByRecipients(p), opts = ui.getHistogramByRecipientsCount(data), callback = ui.getHistogramByRecipientsCount(item), S = ui.getHistogramByRecipientsCount(p), [4, self.call([o.gnar, o.gnar.connectednessDataEmail], _, S, vnode, t, opts, params, f, callback, view, messageTag, title)];
          case 6:
            return _context.sent(), [4, self.call(this._prefs.set, ui.emailConnectednessDataPropsKey, [])];
          case 7:
            _context.sent();
            /** @type {number} */
            _context.label = 8;
          case 8:
            return [2];
        }
      });
    }, $;
  }();
  t.SettingsSagas = offsetFromCenter;
}, function(canCreateDiscussions, exports, getFilename) {
  var _temp;
  var getAlignItem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var label = getFilename(294);
  var $$Log = getFilename(3);
  var startTimer = getFilename(10).getGlobal().appConfig.newsVersion;
  var s = $$Log.Logger.create("universal.bg.state.settings");
  /** @type {string} */
  exports.anonymousDapiPropsKey = "anonymousDapiProps";
  /** @type {!Array} */
  exports.oldSettingsFields = ["enabled_db", "enabledDefs", "disabledFields", "seenNewsVersion"];
  /** @type {string} */
  exports.emailConnectednessDataPropsKey = "connectednessProps";
  /** @type {string} */
  exports.emailConnectednessDataNextSyncDate = "connectednessDataNextSyncDate";
  /** @type {!Array} */
  var PROHIBITED_ATTRS = ["aol.com", "att.net", "comcast.net", "facebook.com", "gmail.com", "gmx.com", "googlemail.com", "hotmail.com", "hotmail.co.uk", "mac.com", "me.com", "mail.com", "msn.com", "live.com", "sbcglobal.net", "verizon.net", "yahoo.com", "yahoo.co.uk"];
  exports.dapiPropsMap = ((_temp = {})[label.t.CHANGE_WEAK_DIALECT] = "dialectWeak", _temp[label.t.CHANGE_STRONG_DIALECT] = "dialectStrong", _temp[label.t.CHANGE_EMOTIONS_FEATURE] = "emotionsFeature", _temp[label.t.SET_EMOTIONS_EMOJI_STATE] = "emotionsEmojiState", _temp);
  exports.dapiPropsSetter = {
    dialectWeak : function(opts, t) {
      return opts.common.setDialectWeak.call(opts, t);
    },
    dialectStrong : function(opts, t) {
      return opts.common.setDialectStrong.call(opts, t);
    },
    writingType : function(opts, t) {
      return opts.common.setWrittingType.call(opts, t);
    },
    primaryLanguage : function(opts, t) {
      return opts.common.setPrimaryLanguage.call(opts, t);
    },
    grammarSkills : function(opts, t) {
      return opts.common.setGrammarSkills.call(opts, t);
    },
    emotionsFeature : function(opts, t) {
      return opts.common.setEmotionsFeature.call(opts, t);
    },
    emotionsEmojiState : function(opts, t) {
      return opts.common.setEmotionsEmojiState.call(opts, t);
    }
  };
  /**
   * @param {string} clusterShardData
   * @return {?}
   */
  exports.getEmailType = function(clusterShardData) {
    var alignContentAlignItem = getAlignItem(clusterShardData.split("@").map(function(p_Interval) {
      return p_Interval.toLowerCase();
    }), 2);
    var key = (alignContentAlignItem[0], alignContentAlignItem[1]);
    return true === PROHIBITED_ATTRS.includes(key) ? "presonal" : "business";
  };
  /**
   * @param {!Object} paths
   * @return {?}
   */
  exports.getHistogramByRecipients = function(paths) {
    var results = paths.reduce(function(eventsDict, egProgram) {
      return egProgram.hashedR.forEach(function(event) {
        eventsDict[event] = eventsDict[event] ? eventsDict[event] + 1 : 1;
      }), eventsDict;
    }, {});
    var n = Object.keys(results).reduce(function(otherrefmap, i) {
      var r = results[i];
      return otherrefmap[r] = otherrefmap[r] ? otherrefmap[r] + 1 : 1, otherrefmap;
    }, {});
    return Object.keys(n).reduce(function(flattenedKeys, i) {
      return flattenedKeys.push({
        key : parseInt(i, 10),
        value : n[i]
      }), flattenedKeys;
    }, []);
  };
  /**
   * @param {!Object} paths
   * @return {?}
   */
  exports.getHistogramByRecipientsCount = function(paths) {
    var t = paths.reduce(function(aomask, suiteContainer) {
      var index = suiteContainer.hashedR.length;
      return aomask[index] = aomask[index] ? aomask[index] + 1 : 1, aomask;
    }, {});
    return Object.keys(t).reduce(function(flattenedKeys, k) {
      return flattenedKeys.push({
        key : parseInt(k, 10),
        value : t[k]
      }), flattenedKeys;
    }, []);
  };
  /**
   * @param {?} $scope
   * @return {?}
   */
  exports.migrateSettings = function($scope) {
    var c = $scope.enabled_db;
    var n = $scope.enabledDefs;
    var data = $scope.disabledFields;
    var b = $scope.seenNewsVersion;
    var result = {};
    try {
      /** @type {*} */
      var data = JSON.parse(c);
      if (data) {
        delete data.lastChange;
        /** @type {*} */
        result = data;
      }
    } catch (e) {
      s.error("error in parse enabled_db", e);
    }
    if (result.common = {
      enabledDefs : Boolean(n),
      seenNewsVersion : b || startTimer
    }, !data) {
      return result;
    }
    /** @type {!Array<string>} */
    var child = Object.keys(data);
    return child.length ? child.filter(function(unbracketed) {
      return data[unbracketed];
    }).reduce(function(viewIndex, url) {
      var _a;
      /** @type {number} */
      var hashIndex = url.indexOf(":");
      /** @type {string} */
      var nodeID = url.substr(0, hashIndex);
      /** @type {string} */
      var i = url.substr(hashIndex + 1);
      var view = viewIndex[nodeID] || {
        enabled : true
      };
      return view.disabledFields = Object.assign({}, view.disabledFields || {}, ((_a = {})[i] = true, _a)), viewIndex[nodeID] = view, viewIndex;
    }, result) : result;
  };
}, function(canCreateDiscussions, t, require) {
  var keepToken = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var self = require(295);
  var button = require(1300);
  var a = require(24);
  var platform = require(18);
  var s = require(165);
  var view = require(435);
  var child = require(1301);
  var dotOperatorRegex = require(455);
  var offsetFromCenter = function() {
    /**
     * @param {!Object} encodeCodeBlock
     * @param {?} log
     * @param {?} address
     * @param {!Object} api
     * @param {!Object} value
     * @param {string} modV
     * @return {undefined}
     */
    function exports(encodeCodeBlock, log, address, api, value, modV) {
      /** @type {!Object} */
      this._connectionSagas = encodeCodeBlock;
      this._emitTo = log;
      this._emitFocusedTab = address;
      /** @type {!Object} */
      this._api = api;
      /** @type {!Object} */
      this._pageConfig = value;
      /** @type {string} */
      this._skipWaitingActiveTabOnStart = modV;
    }
    return exports.prototype.start = function() {
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.fork([this, this.listenActiveTabChange])];
          case 1:
            return _context.sent(), this._skipWaitingActiveTabOnStart ? [3, 4] : [4, self.select(child.getActiveTab)];
          case 2:
            return _context.sent() ? [3, 4] : [4, self.take(view.t.SET_ACTIVE_TAB)];
          case 3:
            _context.sent();
            /** @type {number} */
            _context.label = 4;
          case 4:
            return [4, self.fork([this, this.listenNewTabsConnections])];
          case 5:
            return _context.sent(), [2];
        }
      });
    }, exports.prototype.listenNewTabsConnections = function() {
      var e;
      var that;
      var target;
      var b;
      var data;
      var meta;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(button.createNewTabsChannel)];
          case 1:
            e = _context.sent();
            /** @type {number} */
            _context.label = 2;
          case 2:
            return [4, self.call(e.take)];
          case 3:
            return that = _context.sent(), target = that.tab, b = that.url, [4, self.call(this._pageConfig.invalidateMemoized)];
          case 4:
            return _context.sent(), [4, self.select(child.stateByUrl, this._pageConfig, b)];
          case 5:
            return (data = _context.sent()).connection.cookiesDisabled || false === navigator.cookieEnabled ? [4, self.fork([this._connectionSagas, this._connectionSagas.monitorCookiesDisable])] : [3, 7];
          case 6:
            _context.sent();
            /** @type {number} */
            _context.label = 7;
          case 7:
            return "popup" !== target ? [3, 9] : [4, self.call(this._emitTo, "popup", "state", data)];
          case 8:
            return _context.sent(), [3, 12];
          case 9:
            return meta = child.stateForTab(data), [4, self.call(s.fire, "tab-connected", data.user, data.config, data.connection, data.settings.enabled, meta.page.domain, meta.page.grammarlyEditor)];
          case 10:
            return _context.sent(), [4, self.call(this._emitTo, target, "state", meta)];
          case 11:
            _context.sent();
            /** @type {number} */
            _context.label = 12;
          case 12:
            return [3, 2];
          case 13:
            return [2];
        }
      });
    }, exports.prototype.sendStateToTabs = function() {
      var file;
      var res;
      var n;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.select(child.stateByActiveTab, this._pageConfig)];
          case 1:
            return file = _context.sent(), [4, self.select(child.getActiveTab)];
          case 2:
            return res = _context.sent(), window.__disableSendStateToTabs ? [2] : [4, self.call([this, this.renderBadge], file)];
          case 3:
            return _context.sent(), [4, self.call(this._emitTo, "popup", "state", file)];
          case 4:
            return _context.sent(), window.__popupState = file, n = child.stateForTab(file), res && res.id ? [4, self.call(this._emitTo, res.id, "state", n)] : [3, 6];
          case 5:
            _context.sent();
            /** @type {number} */
            _context.label = 6;
          case 6:
            return [4, self.call(this._emitFocusedTab, "state", n)];
          case 7:
            return _context.sent(), [2];
        }
      });
    }, exports.prototype.listenActiveTabChange = function() {
      var e;
      var data;
      var b;
      var c;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, self.call(button.createActiveTabsChannel, this._api)];
          case 1:
            e = _context.sent();
            /** @type {number} */
            _context.label = 2;
          case 2:
            return [4, self.call(e.take)];
          case 3:
            return data = _context.sent(), [4, self.select(child.getActiveTab)];
          case 4:
            return b = _context.sent(), c = a.domainFromUrl(data.url), b && b.id === data.id && b.url === data.url ? [3, 7] : [4, self.put(view.setActiveTab(data))];
          case 5:
            return _context.sent(), [4, self.call(button.setUninstallURL, c)];
          case 6:
            _context.sent();
            /** @type {number} */
            _context.label = 7;
          case 7:
            return [3, 2];
          case 8:
            return [2];
        }
      });
    }, exports.prototype.renderBadge = function(data) {
      var active;
      var user;
      var options;
      var currentSettings;
      var hasHideDelay;
      var l;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return active = data.activeTab, user = data.user, options = data.config, currentSettings = data.settings, hasHideDelay = active && dotOperatorRegex.gDocsDocumentUrlRe.test(active.url), !user.anonymous && hasHideDelay && platform.isChrome() ? [4, self.call(button.setBadgeText, this._api, "BETA", button.BETA_BADGE_COLOR)] : [3, 2];
          case 1:
            return _context.sent(), [3, 9];
          case 2:
            return user.anonymous || options.grammarlyEditor || options.dontShowDisabledBadge ? [4, self.call(button.setBadgeText, this._api, "")] : [3, 4];
          case 3:
            return _context.sent(), [3, 9];
          case 4:
            return options.enabled || options.servicePage ? [3, 6] : [4, self.call(button.setBadgeIcon, this._api, "bang")];
          case 5:
            return _context.sent(), [3, 9];
          case 6:
            return [4, self.call(button.getBadgeText, {
              user : user,
              settings : currentSettings
            })];
          case 7:
            return l = _context.sent(), [4, self.call(button.setBadgeText, this._api, l)];
          case 8:
            _context.sent();
            /** @type {number} */
            _context.label = 9;
          case 9:
            return [2];
        }
      });
    }, exports;
  }();
  t.TabsSagas = offsetFromCenter;
}, function(canCreateDiscussions, me, clone) {
  var gotoNewOfflinePage = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var updateDevicesAfterDelay = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(me, "__esModule", {
    value : true
  });
  var sandbox = clone(10);
  var harps = clone(49);
  var cloneStream = clone(13);
  var ns = clone(4);
  var modifiedVal = clone(165);
  var l = clone(71);
  var $$Log = clone(3);
  var settings = clone(86);
  var d = $$Log.Logger.create("universal.bg.state.tabs");
  var requiredArgumentsCount = sandbox.getGlobal().appConfig.newsVersion;
  /**
   * @return {?}
   */
  me.createNewTabsChannel = function() {
    var settings = ns.createChannel();
    return cloneStream.on("tab-connected", function(sender) {
      var tab = sender.tab;
      var base = sender.url;
      return settings.put({
        tab : tab,
        url : base
      });
    }), settings;
  };
  /**
   * @param {!Object} extensionWindow
   * @return {?}
   */
  me.createActiveTabsChannel = function(extensionWindow) {
    var t = ns.createChannel({
      buffered : false
    });
    return extensionWindow.tabs.onActiveTabChange(function(component) {
      var api = component.url;
      var serverCalendarID = component.id;
      return t.put({
        url : api,
        id : serverCalendarID
      });
    }, function(e) {
      return d.error("runtime error by changing active tab", e);
    }), t;
  };
  /** @type {string} */
  me.DEFAULT_BADGE_COLOR = "#e75146";
  /** @type {string} */
  me.BETA_BADGE_COLOR = "#555A70";
  /**
   * @param {!Event} that
   * @param {string} nodeSpec
   * @return {undefined}
   */
  me.setBadgeIcon = function(that, nodeSpec) {
    if (!ns.isSafari()) {
      that.button.setBadge("");
    }
    that.button.setIconByName(nodeSpec);
  };
  /**
   * @param {!Event} evt
   * @param {string} color
   * @param {!Array} text
   * @return {undefined}
   */
  me.setBadgeText = function(evt, color, text) {
    var note = evt.button;
    switch(void 0 === text && (text = me.DEFAULT_BADGE_COLOR), note.kind) {
      case "web-extension":
        note.setBadgeBackgroundColor(text);
        note.setIconByName("");
        break;
      case "fallback":
        break;
      default:
        throw new Error("Unsupported browser button action");
    }
    note.setBadge(color);
  };
  /**
   * @param {!Object} details
   * @return {?}
   */
  me.getBadgeText = function(details) {
    details.user;
    var config = details.settings;
    var providedArgumentsCount = config.seenNewsVersion;
    var val = config.enabled;
    return requiredArgumentsCount > 0 && providedArgumentsCount !== requiredArgumentsCount ? "NEW" : val ? "" : "off";
  };
  /**
   * @param {string} url
   * @return {undefined}
   */
  me.setUninstallURL = function(url) {
    if (ns.isChrome() || ns.isFF()) {
      var t = harps.getUninstallURL(url);
      if (window.chrome.runtime.setUninstallURL) {
        window.chrome.runtime.setUninstallURL(t);
      }
    }
  };
  /** @type {!Set} */
  var triggerLookup = new Set;
  /**
   * @param {!Object} sender
   * @param {!Object} name
   * @param {string} text
   * @return {?}
   */
  me.trackDisabledTab = function(sender, name, text) {
    return gotoNewOfflinePage(this, void 0, void 0, function() {
      var d;
      var n;
      var i;
      return updateDevicesAfterDelay(this, function(_context) {
        switch(_context.label) {
          case 0:
            return "background-message-api" === sender.message.kind && ns.isChrome() ? [4, l.SafePromise.delay(settings.second)] : [3, 2];
          case 1:
            _context.sent();
            d = sender.message.getPortExists(name);
            /** @type {boolean} */
            n = triggerLookup.has(name);
            i = text.includes("chrome://");
            if (!(d || n || i)) {
              modifiedVal.gnar.siteIsBrowserDisabled();
              triggerLookup.add(name);
            }
            /** @type {number} */
            _context.label = 2;
          case 2:
            return [2];
        }
      });
    });
  };
}, function(canCreateDiscussions, self, kvFn) {
  /**
   * @param {!Object} data
   * @param {!Object} selector
   * @param {undefined} index
   * @return {?}
   */
  function resolve(data, selector, index) {
    var opts = r.domainFromUrl(index);
    var options = selector.get(opts, index);
    var meta = get(data.settings, opts);
    return Object.assign({}, data, {
      config : Object.assign({}, options, {
        domain : opts
      })
    }, {
      settings : meta,
      activeTab : data.tabs && data.tabs.active
    });
  }
  /**
   * @param {!Object} config
   * @param {string} from
   * @return {?}
   */
  function get(config, from) {
    var data = config[from];
    var canAddTab = !data || void 0 === data.enabled || data.enabled;
    return Object.assign({}, config.common, data, {
      enabled : canAddTab
    });
  }
  Object.defineProperty(self, "__esModule", {
    value : true
  });
  var r = kvFn(24);
  /** @type {function(!Object, !Object, undefined): ?} */
  self.stateByUrl = resolve;
  /**
   * @param {!Object} data
   * @param {!Object} field
   * @return {?}
   */
  self.stateByActiveTab = function(data, field) {
    return resolve(data, field, data.tabs && data.tabs.active && data.tabs.active.url);
  };
  /** @type {function(!Object, string): ?} */
  self.getTabSettings = get;
  /**
   * @param {!Object} obj
   * @return {?}
   */
  self.stateForTab = function(obj) {
    var obj_is = obj.dynamicConfig;
    var user_id = obj.user;
    var num = obj.connection;
    var result = obj.config;
    var config = obj.settings;
    return {
      dynamicConfig : obj_is,
      user : user_id,
      connection : num,
      page : Object.assign({}, config, result, {
        enabled : config.enabled && result.enabled
      })
    };
  };
  /**
   * @param {!Object} tabs
   * @return {?}
   */
  self.getActiveTab = function(tabs) {
    return tabs.tabs.active;
  };
  /**
   * @param {!Object} res
   * @return {?}
   */
  self.getAll = function(res) {
    return res;
  };
  /**
   * @param {!Object} data
   * @return {?}
   */
  self.getUserGroups = function(data) {
    return data.user.groups;
  };
  /**
   * @param {!Object} _this
   * @return {?}
   */
  self.getExperiments = function(_this) {
    return _this.user.experiments;
  };
}, function(canCreateDiscussions, val, __webpack_require__) {
  /**
   * @return {undefined}
   */
  function update() {
    if (chrome.runtime.requestUpdateCheck) {
      chrome.runtime.requestUpdateCheck(function(canCreateDiscussions) {
        return "update_available" === canCreateDiscussions ? log.info("update pending...") : "no_update" === canCreateDiscussions ? log.info("no update found") : "throttled" === canCreateDiscussions ? log.info("Oops, I'm asking too frequently - I need to back off.") : void 0;
      });
    }
    setTimeout(update, 72E5);
  }
  /**
   * @param {!Object} fn
   * @param {string} src
   * @param {?} options
   * @return {?}
   */
  function executeScript(fn, src, options) {
    return void 0 === options && (options = {}), fn ? new Promise(function(saveNotifs, negater) {
      return chrome.tabs.executeScript(fn, Object.assign({
        file : src
      }, options), function() {
        return utils.chromeBgError() ? negater(utils.chromeBgError()) : saveNotifs();
      });
    }) : Promise.reject(utils.chromeBgError());
  }
  /**
   * @param {string} tab
   * @return {?}
   */
  function show(tab) {
    return call(this, void 0, void 0, function() {
      return hintLink(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, new Promise(function(zippo) {
              return tab.id && chrome.tabs.executeScript(tab.id, {
                code : "document.body.dataset.grCSLoaded"
              }, function(memo) {
                return zippo(memo && memo.pop());
              });
            })];
          case 1:
            return [2, !_context.sent() && tab || void 0];
        }
      });
    });
  }
  /**
   * @param {!Object} input
   * @param {!Object} date
   * @param {boolean} value
   * @param {boolean} url
   * @return {?}
   */
  function g(input, date, value, url) {
    return call(this, void 0, void 0, function() {
      var source;
      var $module;
      var googleContactPhotoURL;
      var html;
      var element;
      return hintLink(this, function(_context) {
        switch(_context.label) {
          case 0:
            if ("web-extension" !== (source = input.tabs).kind) {
              throw new Error('Unexpected tabs kind "' + source.kind + '"');
            }
            return [4, source.getAllTabs()];
          case 1:
            return $module = _context.sent(), [4, source.getActiveTabUrl()];
          case 2:
            return googleContactPhotoURL = _context.sent(), html = url ? function(tab) {
              return tab.url && tab.url.includes(url);
            } : function(result) {
              var str = result.url;
              if (str && 0 === str.indexOf("http")) {
                return !!str.includes("grammarly") || date.get(a.domainFromUrl(str)).enabled;
              }
            }, element = $module.filter(html), [4, Promise.all(element.map(value ? show : function(e) {
              return Promise.resolve(e);
            }))];
          case 3:
            return [2, _context.sent().filter(function(canCreateDiscussions) {
              return !!canCreateDiscussions;
            }).sort(function(option) {
              return option.url === googleContactPhotoURL ? -1 : 1;
            })];
        }
      });
    });
  }
  var call = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var hintLink = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(val, "__esModule", {
    value : true
  });
  var _bling = __webpack_require__(14);
  var a = __webpack_require__(24);
  var utils = __webpack_require__(4);
  var log = __webpack_require__(3).Logger.create("lib.bg.chrome");
  /** @type {number} */
  var src = 20;
  var chrome = window.chrome;
  /** @type {boolean} */
  var f = false;
  /**
   * @return {undefined}
   */
  val.setupForcedUpdate = function() {
    if (!(!utils.isChrome() && !utils.isFF() || f)) {
      if (chrome.runtime.onUpdateAvailable) {
        chrome.runtime.onUpdateAvailable.addListener(function(iosSim) {
          log.info("Detected the next extension version " + iosSim.version);
          /** @type {boolean} */
          f = true;
          var list = utils.getRandomIntInclusive(1, src);
          log.info("Going to update in minutes: " + list);
          setTimeout(chrome.runtime.reload, 60 * list * 1E3);
        });
      }
      update();
    }
  };
  /**
   * @param {!Object} args
   * @param {!Object} e
   * @param {boolean} a
   * @return {?}
   */
  val.loadContentScripts = function(args, e, a) {
    return call(this, void 0, void 0, function() {
      var manifest;
      var fileList;
      var result;
      var ref;
      var node;
      var cmd;
      var callback;
      var v;
      var uv;
      return hintLink(this, function(_context) {
        switch(_context.label) {
          case 0:
            return (utils.isChrome() || utils.isFF()) && (manifest = chrome.runtime.getManifest()) && (fileList = manifest.content_scripts) && (result = fileList.pop()) ? (ref = result.js, node = result.css, ref && node ? [4, g(args, e, true, a)] : [2]) : [2];
          case 1:
            return (cmd = _context.sent()).length ? (log.info("Load content scripts to", cmd), callback = function(value, data) {
              _bling.felog.chromeContentScriptLoadError(value && value.message, data);
              log.error("cs " + data + " loaded with error: " + value.message);
            }, v = performance.now(), [4, Promise.all(cmd.map(function(ast) {
              var source = ast.id;
              return Promise.all([ref.reduce(function(actionAsPromise, arg_scr) {
                return actionAsPromise.then(function() {
                  return executeScript(source, arg_scr, {
                    runAt : "document_idle"
                  });
                });
              }, Promise.resolve()).then(function() {
                return log.info("scripts loaded");
              }).catch(function(head) {
                return callback(head, "js");
              }), node.reduce(function(actionAsPromise, trackInfoUrl) {
                return actionAsPromise.then(function() {
                  return lastTrackInfoUrl = trackInfoUrl, void 0 === (tOutResp = {
                    runAt : "document_idle"
                  }) && (tOutResp = {}), (mruSource = source) ? new Promise(function(saveNotifs, negater) {
                    return chrome.tabs.insertCSS(mruSource, Object.assign({
                      file : lastTrackInfoUrl
                    }, tOutResp), function() {
                      return utils.chromeBgError() ? negater(utils.chromeBgError()) : saveNotifs();
                    });
                  }) : Promise.reject(utils.chromeBgError());
                  var mruSource;
                  var lastTrackInfoUrl;
                  var tOutResp;
                });
              }, Promise.resolve()).then(function() {
                return log.info("css loaded");
              }).catch(function(head) {
                return callback(head, "css");
              })]);
            }))]) : [2];
          case 2:
            return _context.sent(), uv = performance.now(), log.trace("Content scripts load time: " + (uv - v) + " ms"), [2];
        }
      });
    });
  };
  /**
   * @param {!Object} d
   * @param {!Object} t
   * @return {?}
   */
  val.loadProxy = function(d, t) {
    return call(this, void 0, void 0, function() {
      var navLinksArr;
      var r;
      var v;
      return hintLink(this, function(_a) {
        switch(_a.label) {
          case 0:
            if (!utils.isChrome()) {
              return [2];
            }
            /** @type {number} */
            _a.label = 1;
          case 1:
            return _a.trys.push([1, 4, , 5]), [4, g(d, t)];
          case 2:
            return navLinksArr = _a.sent(), [4, Promise.all(navLinksArr.map(function(tab) {
              return executeScript(tab.id, "src/js/Grammarly-proxy.js");
            }))];
          case 3:
            return _a.sent(), log.info("proxy loaded on", navLinksArr.map(function(chefServer) {
              return chefServer.url;
            })), [3, 5];
          case 4:
            return r = _a.sent(), v = r && r.message || r, log.error("proxy loaded with error: ", v), [3, 5];
          case 5:
            return [2];
        }
      });
    });
  };
  /** @type {function(!Object, !Object, boolean, boolean): ?} */
  val.filteredTabs = g;
}, function(canCreateDiscussions, Buffer, require) {
  var f;
  var aCh = this && this.__extends || (f = function(shape, t) {
    return (f = Object.setPrototypeOf || {
      __proto__ : []
    } instanceof Array && function(json, b) {
      /** @type {!Object} */
      json.__proto__ = b;
    } || function(scope, args) {
      var key;
      for (key in args) {
        if (args.hasOwnProperty(key)) {
          scope[key] = args[key];
        }
      }
    })(shape, t);
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    f(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  Object.defineProperty(Buffer, "__esModule", {
    value : true
  });
  var utils = require(4);
  var Modes = require(135);
  var PhotoData = require(24);
  var TagHourlyStat = require(1304);
  var participating_user_ids = require(1307);
  var Uint8Array = function(el) {
    /**
     * @param {undefined} error
     * @param {?} root
     * @param {undefined} start
     * @return {?}
     */
    function test(error, root, start) {
      var map = el.call(this, error, start) || this;
      return map._userStateOrNull = root, map._invalidate = function() {
        return map.load();
      }, map.invalidateMemoized = utils.memoize(map._invalidate, void 0, 1E4), map.getByPage = function(v, args) {
        if (void 0 === args && (args = PhotoData.getUrl()), v) {
          /** @type {(string|undefined)} */
          var dataKey = Object.keys(v).find(function(specialToken) {
            return (new RegExp(specialToken)).test(args);
          });
          return dataKey ? v[dataKey] : void 0;
        }
      }, map;
    }
    return aCh(test, el), test.prototype._transformConfig = function(item, oldKey) {
      var options = this._userStateOrNull();
      return !(options && options.mimic && item && item.enabledForGroups && participating_user_ids(item.enabledForGroups, options.mimic).length) || item.disabledBrowsers && item.disabledBrowsers.includes(utils.getBrowser()) || (item.enabled = true), item;
    }, test.prototype.get = function(key, title) {
      var n = this.config.pageConfig[key] || this.config.subdomains.find(function(options) {
        return (new RegExp("\\." + utils.escapeRegExp(options.domain) + "$")).test(key);
      }) || this.config.partials.find(function(event) {
        return key.includes(event.domain);
      });
      var data = this._transformConfig(n, key);
      if (data && false === data.enabled) {
        return data;
      }
      var streamSize2 = this.getByPage(data && data.pages, title) || data || {};
      return streamSize2.enabled = false !== streamSize2.enabled, streamSize2;
    }, test.prototype.toReload = function(address) {
      return 0 === address.indexOf("http") && Modes.SITES_TO_RELOAD.some(function(city) {
        return address.includes(city);
      });
    }, test;
  }(TagHourlyStat.ConfigLoader);
  Buffer.PageConfigImpl = Uint8Array;
}, function(canCreateDiscussions, template, __webpack_require__) {
  var ready = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var warn = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(template, "__esModule", {
    value : true
  });
  var root = __webpack_require__(1001);
  var _classlist = __webpack_require__(14);
  var result = __webpack_require__(1305);
  var helper = __webpack_require__(1046);
  var _UiIcon = __webpack_require__(1306);
  var $ = __webpack_require__(1003);
  var global = __webpack_require__(3);
  var Mock = __webpack_require__(71);
  var l = global.Logger.create("lib.page-config.config-loader");
  /** @type {string} */
  var msg = "Config missed";
  /** @type {string} */
  var lastErrorOutput = "Config malformed";
  var m = function() {
    /**
     * @param {?} initial_value
     * @param {?} opts
     * @return {undefined}
     */
    function LocalStorage(initial_value, opts) {
      this._prefs = initial_value;
      this._fetchBlacklistConfig = opts;
    }
    return LocalStorage.prototype.init = function() {
      return ready(this, void 0, void 0, function() {
        var config;
        var TestClass5;
        return warn(this, function(_context) {
          switch(_context.label) {
            case 0:
              return $.Profiler.start("pageConfig_init"), [4, this.isSkipConfig()];
            case 1:
              return _context.sent() ? (l.warn("Config: use default config in DEBUG mode (skipConfig=true)"), [3, 4]) : [3, 2];
            case 2:
              return [4, this.loadFromStorage()];
            case 3:
              config = _context.sent();
              /** @type {number} */
              _context.label = 4;
            case 4:
              return this.config = config || {}, TestClass5 = this, [4, (new result.Meta).load()];
            case 5:
              return TestClass5.meta = _context.sent(), $.Profiler.stop("pageConfig_init"), [2, this];
          }
        });
      });
    }, LocalStorage.prototype.isSkipConfig = function() {
      return ready(this, void 0, void 0, function() {
        var e;
        return warn(this, function(_context) {
          switch(_context.label) {
            case 0:
              return (e = false) ? [4, this._prefs.get("skipConfig")] : [3, 2];
            case 1:
              e = _context.sent();
              /** @type {number} */
              _context.label = 2;
            case 2:
              return [2, e];
          }
        });
      });
    }, Object.defineProperty(LocalStorage.prototype, "config", {
      get : function() {
        return this._config;
      },
      set : function(name) {
        name = name || {};
        this._config = _UiIcon.decorateConfig(name);
      },
      enumerable : true,
      configurable : true
    }), LocalStorage.prototype.load = function() {
      return ready(this, void 0, void 0, function() {
        var o;
        var val;
        var f;
        var e_total;
        return warn(this, function(canCreateDiscussions) {
          return o = this.meta.config, val = o.date, f = o.interval, val + f > Date.now() ? (e_total = (val + f - Date.now()) / 1E3 / 60, l.info("Config: next update in " + e_total.toFixed(2) + " m"), [2]) : (l.info("Config: going to update config from CDN..."), [2, this.updateFromCDN()]);
        });
      });
    }, LocalStorage.prototype.updateFromCDN = function() {
      return ready(this, void 0, void 0, function() {
        var options;
        var controlFlowAction;
        var errMsg;
        return warn(this, function(_a) {
          switch(_a.label) {
            case 0:
              return _a.trys.push([0, 2, , 3]), [4, Promise.race([this._fetchBlacklistConfig(), Mock.SafePromise.delay(6E4).then(function() {
                throw new Error("Fail to load config from extension api!");
              })])];
            case 1:
              if (options = _a.sent(), !helper.isValid(options)) {
                throw new Error(lastErrorOutput);
              }
              return this.config = options, this.save(options), [3, 3];
            case 2:
              return controlFlowAction = _a.sent(), _classlist.felog.pageConfigCDNError(controlFlowAction.message), errMsg = "Config: can't get valid config - " + controlFlowAction.message, l.warn(errMsg), this.saveOnError(errMsg), [3, 3];
            case 3:
              return [2];
          }
        });
      });
    }, LocalStorage.prototype.loadFromStorage = function() {
      return ready(this, void 0, void 0, function() {
        var tweet;
        var err;
        return warn(this, function(_a) {
          switch(_a.label) {
            case 0:
              return _a.trys.push([0, 2, , 3]), [4, root.localforage.getItem("config")];
            case 1:
              if (!(tweet = _a.sent())) {
                throw new Error(msg);
              }
              if (!helper.isValid(tweet)) {
                throw new Error(lastErrorOutput);
              }
              return l.info("Config: loaded from local storage successfully"), [2, tweet];
            case 2:
              return err = _a.sent(), msg === err.message || _classlist.felog.pageConfigLocalStorageError(err.message, err.name), l.warn("Config: cannot get valid config from storage: " + err), [2, void 0];
            case 3:
              return [2];
          }
        });
      });
    }, LocalStorage.prototype.save = function(result) {
      var interval = result.interval;
      var version = result.protocolVersion;
      var newVersion = result.version;
      root.localforage.setItem("config", result);
      this.fireVersionUpdate(newVersion, this.meta.config.version);
      this.meta.set({
        date : this.getCurrentTimestamp(),
        status : "success",
        interval : interval,
        protocolVersion : version,
        version : newVersion
      });
      l.info("Config: new config saved to local storage successfully: " + result.version, result);
    }, LocalStorage.prototype.saveOnError = function(s) {
      var config = this.meta.config;
      var interval = config.interval;
      var version = config.protocolVersion;
      var appVersion = config.version;
      this.meta.set({
        date : this.getCurrentTimestamp(),
        status : "failed",
        interval : interval,
        protocolVersion : version,
        version : appVersion,
        info : s
      });
    }, LocalStorage.prototype.fireVersionUpdate = function(current, name) {
      if (current && name !== current) {
        _classlist.felog.pageConfigUpdated(name, current);
      }
    }, LocalStorage.prototype.getCurrentTimestamp = function() {
      return Date.now();
    }, LocalStorage;
  }();
  template.ConfigLoader = m;
}, function(canCreateDiscussions, modifier, handler) {
  var finishedModule = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var withinHierarchy = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(modifier, "__esModule", {
    value : true
  });
  var result = handler(1001);
  var _results = handler(1046);
  /** @type {string} */
  var c = "lastConfigUpdate";
  var nulls = function() {
    /**
     * @return {undefined}
     */
    function e() {
    }
    return e.prototype.load = function() {
      return finishedModule(this, void 0, void 0, function() {
        var e;
        return withinHierarchy(this, function(_context) {
          switch(_context.label) {
            case 0:
              return [4, result.localforage.getItem(c)];
            case 1:
              return e = _context.sent(), this.set(e), [2, this];
          }
        });
      });
    }, e.prototype.set = function(name) {
      var options = name || {};
      var version = options.protocolVersion;
      var rev = options.version;
      var status_code = options.status;
      var i = options.info;
      var date = options.date;
      var interval = options.interval;
      return this._meta = {
        date : Number(date) || 0,
        interval : _results.getInterval(Number(interval)),
        protocolVersion : version,
        version : rev,
        status : status_code,
        info : i
      }, result.localforage.setItem(c, this._meta);
    }, Object.defineProperty(e.prototype, "config", {
      get : function() {
        return this._meta;
      },
      enumerable : true,
      configurable : true
    }), e;
  }();
  modifier.Meta = nulls;
}, function(canCreateDiscussions, data, require) {
  /**
   * @param {!Object} obj
   * @return {?}
   */
  function resolve(obj) {
    var config = format({
      pageConfig : {}
    }, obj);
    return config.pageConfig || (config.pageConfig = {}), config;
  }
  Object.defineProperty(data, "__esModule", {
    value : true
  });
  var IntelWallet = require(17);
  var UrdfMaterial = require(135);
  var utils = require(4);
  var format = require(175);
  var LOGGER_STUB = require(3).Logger.create("lib.page-config.decorator");
  /** @type {function(!Object): ?} */
  data.deepCopyWithDefault = resolve;
  var server = function() {
    /**
     * @return {undefined}
     */
    function proto() {
    }
    return proto.decorate = function(o) {
      return o = o || {}, o = this.filterByVersion(o), o = this.withDefault(o), o = this.parseBooleans(o), o = this.parseBrowserValues(o), o = this.filterInvalidPageRegexp(o), o = this.collectSubdomains(o), o = this.collectPartials(o);
    }, proto.withDefault = function(value) {
      value = resolve(value);
      var method = UrdfMaterial.PAGE_CONFIG && UrdfMaterial.PAGE_CONFIG.pageConfig || {};
      UrdfMaterial.OVERRIDE_PAGE_CONFIG;
      return value.pageConfig = format({}, method, value.pageConfig), value;
    }, proto.filterByVersion = function(args, last) {
      if (void 0 === last) {
        last = IntelWallet.getVersion();
      }
      var currentEndpoint = (args = resolve(args)).pageConfig;
      return args.pageConfig = Object.keys(currentEndpoint || {}).filter(function(scriptIndex) {
        var version = currentEndpoint[scriptIndex].version;
        return !version || "*" === version || 1 !== utils.versionComparator(last, version);
      }).reduce(function(testItemData, method) {
        var _a;
        return Object.assign({}, testItemData, ((_a = {})[method] = args.pageConfig[method], _a));
      }, {}), args;
    }, proto.parseBooleans = function(deps) {
      /**
       * @param {!Object} value
       * @return {?}
       */
      function defined(value) {
        return !(false === value || "false" === value);
      }
      /**
       * @param {!Object} code
       * @return {?}
       */
      function minify_properties(code) {
        return !!code && defined(code);
      }
      var object = (deps = resolve(deps)).pageConfig;
      return Object.keys(object || {}).forEach(function(name) {
        if (!object[name]) {
          object[name] = {};
        }
        var result = object[name];
        result.enabled = defined(result.enabled);
        result.matchInclusions = minify_properties(result.matchInclusions);
        result.matchSubdomains = minify_properties(result.matchSubdomains);
        if (result.pages) {
          Object.keys(result.pages).forEach(function(i) {
            result.pages[i].enabled = defined(result.pages[i].enabled);
          });
        }
      }), deps;
    }, proto.parseBrowserValues = function(file, tags) {
      if (void 0 === tags) {
        tags = utils.getBrowser();
      }
      var attributes = (file = resolve(file)).pageConfig;
      return Object.keys(attributes || {}).map(function(name) {
        var oldSiteDetail = attributes[name] && attributes[name].disabledBrowsers;
        if (oldSiteDetail && oldSiteDetail.includes(tags)) {
          /** @type {boolean} */
          attributes[name].enabled = false;
        }
      }), file;
    }, proto.filterInvalidPageRegexp = function(deps) {
      var r = (deps = resolve(deps)).pageConfig;
      return Object.keys(r || {}).forEach(function(i) {
        var layout = r[i];
        if (layout.pages) {
          layout.pages = Object.keys(layout.pages).filter(function(specialToken) {
            try {
              return new RegExp(specialToken);
            } catch (e) {
              return false;
            }
          }).reduce(function(testItemData, n) {
            var _a;
            return Object.assign({}, testItemData, ((_a = {})[n] = layout.pages[n], _a));
          }, {});
        }
      }), deps;
    }, proto.collectSubdomains = function(uri) {
      var parent = (uri = resolve(uri)).pageConfig;
      /** @type {!Array} */
      uri.subdomains = [];
      try {
        /** @type {!Array<?>} */
        uri.subdomains = Object.keys(parent || {}).filter(function(charObjName) {
          return parent[charObjName].matchSubdomains;
        }).map(function(path) {
          return Object.assign({
            domain : path
          }, parent[path]);
        });
      } catch (e) {
        LOGGER_STUB.warn("Cannot collect subdomains from config");
      }
      return uri;
    }, proto.collectPartials = function(results) {
      var parent = (results = resolve(results)).pageConfig;
      /** @type {!Array} */
      results.partials = [];
      try {
        /** @type {!Array<?>} */
        results.partials = Object.keys(parent || {}).filter(function(charObjName) {
          return parent[charObjName].matchInclusions;
        }).map(function(path) {
          return Object.assign({
            domain : path
          }, parent[path]);
        });
      } catch (e) {
        LOGGER_STUB.warn("Cannot collect partials from config");
      }
      return results;
    }, proto;
  }();
  data.RawConfigDecorator = server;
  /**
   * @param {?} options
   * @return {?}
   */
  data.decorateConfig = function(options) {
    return server.decorate(options);
  };
}, function(mixin, canCreateDiscussions, n) {
  var f = n(121);
  var o = n(1308);
  var i = n(136);
  var end = n(1309);
  var m = i(function(e) {
    var b = f(e, end);
    return b.length && b[0] === e[0] ? o(b) : [];
  });
  mixin.exports = m;
}, function(mixin, canCreateDiscussions, n) {
  var p = n(157);
  var a = n(675);
  var c = n(676);
  var h = n(121);
  var l = n(114);
  var next = n(158);
  /** @type {function(...?): number} */
  var f = Math.min;
  /**
   * @param {!Object} obj
   * @param {!Object} type
   * @param {string} name
   * @return {?}
   */
  mixin.exports = function(obj, type, name) {
    var callback = name ? c : a;
    var l = obj[0].length;
    var length = obj.length;
    var i = length;
    /** @type {!Array} */
    var args = Array(length);
    /** @type {number} */
    var n = 1 / 0;
    /** @type {!Array} */
    var out = [];
    for (; i--;) {
      var result = obj[i];
      if (i && type) {
        result = h(result, l(type));
      }
      /** @type {number} */
      n = f(result.length, n);
      args[i] = !name && (type || l >= 120 && result.length >= 120) ? new p(i && result) : void 0;
    }
    result = obj[0];
    /** @type {number} */
    var k = -1;
    var err = args[0];
    e: for (; ++k < l && out.length < n;) {
      var value = result[k];
      var data = type ? type(value) : value;
      if (value = name || 0 !== value ? value : 0, !(err ? next(err, data) : callback(out, data, name))) {
        i = length;
        for (; --i;) {
          var err = args[i];
          if (!(err ? next(err, data) : callback(obj[i], data, name))) {
            continue e;
          }
        }
        if (err) {
          err.push(data);
        }
        out.push(value);
      }
    }
    return out;
  };
}, function(mixin, canCreateDiscussions, require) {
  var isBlank = require(145);
  /**
   * @param {!Object} key
   * @return {?}
   */
  mixin.exports = function(key) {
    return isBlank(key) ? key : [];
  };
}, function(canCreateDiscussions, exports, __M) {
  /**
   * @param {string} authenticated
   * @return {?}
   */
  function get(authenticated) {
    return callback(f, authenticated);
  }
  /**
   * @param {string} length
   * @return {?}
   */
  function uid(length) {
    return callback(isFirstTimeShow, length);
  }
  /**
   * @param {string} optionalOverwriteOrAsk
   * @return {?}
   */
  function value(optionalOverwriteOrAsk) {
    return callback(plugins, optionalOverwriteOrAsk);
  }
  /**
   * @param {string} position
   * @return {?}
   */
  function type(position) {
    return callback(isFirstTimeShown, position);
  }
  /**
   * @param {string} channel
   * @return {?}
   */
  function subscribe(channel) {
    return callback(methods, channel);
  }
  /**
   * @param {string} value
   * @return {?}
   */
  function val(value) {
    return callback(events, value);
  }
  var transportExecute = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var validatePath = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(exports, "__esModule", {
    value : true
  });
  var b = __M(17);
  var a = __M(14);
  var containerLogger = __M(3).Logger.create("lib.bg.dapi");
  /** @type {!Array} */
  var f = ["british", "american", "australian", "canadian"];
  /** @type {!Array} */
  var isFirstTimeShow = ["work", "school", "otherProjects"];
  /** @type {!Array} */
  var plugins = ["english", "notEnglish"];
  /** @type {!Array} */
  var isFirstTimeShown = ["beginner", "intermediate", "advanced"];
  /** @type {!Array} */
  var methods = ["enable", "disable"];
  /** @type {!Array} */
  var events = ["hide", "show"];
  /**
   * @param {!Array} arr
   * @param {string} prop
   * @return {?}
   */
  var callback = function(arr, prop) {
    return null != prop && arr.includes(prop) ? prop : null;
  };
  /** @type {function(string): ?} */
  exports.parseDialect = get;
  /** @type {function(string): ?} */
  exports.parseWritingType = uid;
  /** @type {function(string): ?} */
  exports.parsePrimaryLanguage = value;
  /** @type {function(string): ?} */
  exports.parseGrammarSkills = type;
  /** @type {function(string): ?} */
  exports.parseEmotionsFeature = subscribe;
  /** @type {function(string): ?} */
  exports.parseEmotionsEmojiState = val;
  var Property = function() {
    /**
     * @param {string} v
     * @param {!Function} n
     * @param {?} msg
     * @return {undefined}
     */
    function e(v, n, msg) {
      /** @type {string} */
      this._key = v;
      /** @type {!Function} */
      this._parser = n;
      this._fetch = msg;
    }
    return e.prototype.get = function() {
      return transportExecute(this, void 0, void 0, function() {
        var type;
        var settingObject;
        var err;
        return validatePath(this, function(_a) {
          switch(_a.label) {
            case 0:
              return _a.trys.push([0, 2, , 3]), type = b.URLS.dapiProps + "/" + this._key, [4, this._fetch(type, {
                method : "post",
                headers : {
                  "Content-Type" : "application/json"
                }
              })];
            case 1:
              return [2, (settingObject = _a.sent()) && settingObject[this._key] ? this._parser(settingObject[this._key]) : null];
            case 2:
              throw err = _a.sent(), containerLogger.error("Error by getting prop " + this._key + " from dapi", err), a.felog.getDapiPropError(err && err.statusCode), err;
            case 3:
              return [2];
          }
        });
      });
    }, e.prototype.set = function(name) {
      return transportExecute(this, void 0, void 0, function() {
        var item;
        var url;
        var err;
        return validatePath(this, function(_a) {
          switch(_a.label) {
            case 0:
              return _a.trys.push([0, 2, , 3]), url = "" + b.URLS.dapiProps, [4, this._fetch(url, {
                method : "post",
                isText : true,
                headers : {
                  "Content-Type" : "application/json"
                },
                body : JSON.stringify((item = {}, item[this._key] = name, item))
              })];
            case 1:
              return [2, _a.sent()];
            case 2:
              throw err = _a.sent(), containerLogger.error("Error by setting prop " + this._key + " to dapi", err), a.felog.setDapiPropError(err && err.statusCode), err;
            case 3:
              return [2];
          }
        });
      });
    }, e;
  }();
  exports.Property = Property;
  var HtmlAttribute = function() {
    return function(width) {
      var self = this;
      /**
       * @return {?}
       */
      this.dialectStrong = function() {
        return self._dialectStrong.get();
      };
      /**
       * @return {?}
       */
      this.dialectWeak = function() {
        return self._dialectWeak.get();
      };
      /**
       * @return {?}
       */
      this.writingType = function() {
        return self._writingType.get();
      };
      /**
       * @return {?}
       */
      this.primaryLanguage = function() {
        return self._primaryLanguage.get();
      };
      /**
       * @return {?}
       */
      this.grammarSkills = function() {
        return self._grammarSkills.get();
      };
      /**
       * @return {?}
       */
      this.emotionsFeature = function() {
        return self._emotionsFeature.get();
      };
      /**
       * @return {?}
       */
      this.emotionsEmojiState = function() {
        return self._emotionsEmojiState.get();
      };
      /**
       * @param {!Object} e
       * @return {?}
       */
      this.setDialectWeak = function(e) {
        return self._dialectWeak.set(e);
      };
      /**
       * @param {!Object} e
       * @return {?}
       */
      this.setDialectStrong = function(e) {
        return self._dialectStrong.set(e);
      };
      /**
       * @param {!Object} e
       * @return {?}
       */
      this.setWrittingType = function(e) {
        return self._writingType.set(e);
      };
      /**
       * @param {!Object} e
       * @return {?}
       */
      this.setPrimaryLanguage = function(e) {
        return self._primaryLanguage.set(e);
      };
      /**
       * @param {!Object} e
       * @return {?}
       */
      this.setGrammarSkills = function(e) {
        return self._grammarSkills.set(e);
      };
      /**
       * @param {!Object} e
       * @return {?}
       */
      this.setEmotionsFeature = function(e) {
        return self._emotionsFeature.set(e);
      };
      /**
       * @param {!Object} e
       * @return {?}
       */
      this.setEmotionsEmojiState = function(e) {
        return self._emotionsEmojiState.set(e);
      };
      this._dialectStrong = new Property("dialectStrong", get, width);
      this._dialectWeak = new Property("dialectWeak", get, width);
      this._writingType = new Property("writingType", uid, width);
      this._primaryLanguage = new Property("primaryLanguage", value, width);
      this._grammarSkills = new Property("grammarSkills", type, width);
      this._emotionsFeature = new Property("emotionsFeature", subscribe, width);
      this._emotionsEmojiState = new Property("emotionsEmojiState", val, width);
    };
  }();
  var CreateSBTreeClass = function() {
    return function(name) {
      this.common = new HtmlAttribute(name);
    };
  }();
  exports.DapiImpl = CreateSBTreeClass;
}, function(canCreateDiscussions, api, require) {
  var wrap = this && this.__assign || function() {
    return (wrap = Object.assign || function(obj) {
      var props;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var prop;
        for (prop in props = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(props, prop)) {
            obj[prop] = props[prop];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  var incrementAndSave = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var gotoNewOfflinePage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(api, "__esModule", {
    value : true
  });
  var _this = require(1);
  var merge = require(453);
  var client = require(4);
  var settings = require(17);
  var e = require(397);
  var pkg = require(1312);
  api.FakeCapi = pkg.FakeCapi;
  var App = require(1313);
  var Logger = require(3);
  var storageService = require(10);
  var logger = Logger.Logger.create("universal.bg.socket");
  var questsByLevel = function() {
    return function(canCreateDiscussions, isSlidingUp, n, dontForceConstraints, mmCoreSecondsYear, rdb, forceExecution, b) {
      if (void 0 === b) {
        /** @type {!Array} */
        b = [storageService.getGlobal().appConfig.url.capi, storageService.getGlobal().appConfig.url.capiGDocs];
      }
      var self = this;
      this._telemetry = canCreateDiscussions;
      this._getConnectionState = isSlidingUp;
      this._updateConnectionState = n;
      this._refreshUser = dontForceConstraints;
      this._getTokenCookie = mmCoreSecondsYear;
      /** @type {!Object} */
      this._message = rdb;
      /** @type {!Object} */
      this._fakeCapi = forceExecution;
      /** @type {!Array} */
      this._wsUrlWhitelist = b;
      this._sockets = {};
      /** @type {number} */
      this._releaseTimeout = 5E3;
      /** @type {number} */
      this._maxReconnectTime = 12E4;
      /** @type {!Array} */
      this._log = [];
      /**
       * @param {string} exit
       * @return {undefined}
       */
      this.reconnectAll = function(exit) {
        /** @type {string} */
        self._dialect = exit;
        Object.keys(self._sockets).forEach(function(uuid) {
          return self._sockets[uuid].reconnect();
        });
      };
      /**
       * @return {?}
       */
      this.getLog = function() {
        var e = self._log.slice(0);
        return self._log = [], e;
      };
      /**
       * @param {string} options
       * @return {undefined}
       */
      this._setMessageType = function(options) {
        var id = options.id;
        var server = options.iframeMode;
        logger.trace("IFRAME MODE " + id, self._sockets);
        var factory = self._sockets[id];
        if (factory) {
          factory.setMessageType(server ? e.MessageTypes.serverIframe : e.MessageTypes.server);
        }
      };
      /**
       * @param {!Object} data
       * @param {!Object} type
       * @param {string} visConfigSelection
       * @return {?}
       */
      this._onBackgroundSocketEmit = function(data, type, visConfigSelection) {
        var event = data.event;
        var uuid = data.socketId;
        var message = data.msg;
        if (logger.trace("from ws " + event + " " + uuid, {
          msg : message,
          messageType : type
        }), message && message.error && "not_authorized" === message.error) {
          return self._tryToFixSession();
        }
        /** @type {number} */
        var autoResumeTimer = setTimeout(function() {
          var client = self._sockets[uuid];
          if (client) {
            client.release();
            client.overrideEmitToNoOp();
            delete self._sockets[uuid];
          }
        }, self._releaseTimeout);
        self._message.emitTo(visConfigSelection, type, wrap({}, data, {
          id : client.guid()
        }), function(timeout) {
          return timeout && clearTimeout(autoResumeTimer);
        });
      };
      /**
       * @param {!Object} data
       * @param {?} options
       * @param {string} segment
       * @return {?}
       */
      this._onContentScriptSocketMessage = function(data, options, segment) {
        if (data && !self._getConnectionState().authToCapiDegradation) {
          var id = data.socketId;
          var undefined = data.method;
          /** @type {boolean} */
          var b = "close" === undefined;
          var a = self._sockets[id];
          if (a || !b) {
            if (!a) {
              if (!self._wsUrlWhitelist.includes(data.url)) {
                return void logger.error("disallowed websocket url " + data.url, data);
              }
              a = new App.BackgroundSocket(data, segment, self._onBackgroundSocketEmit, self._fakeCapi);
              self._sockets[id] = a;
            }
            switch("connect" !== undefined && delete data.url, data.arg && "start" === data.arg.action && self._dialect && (data.arg.dialect = self._dialect), undefined) {
              case "connect":
                self._refreshUser(true, "onSessionStart").then(function() {
                  return a.connect(data.arg);
                });
                break;
              case "send":
                a.send(data.arg);
                break;
              case "reconnect":
                a.reconnect();
                break;
              case "release":
                a.release();
                break;
              case "close":
                a.close();
                break;
              case "wsPlay":
                a.wsPlay();
                break;
              case "wsPause":
                a.wsPause();
                break;
              default:
                logger.error("Unknown method", undefined);
            }
            if (b) {
              a.close();
              a.overrideEmitToNoOp();
              delete self._sockets[id];
            }
          }
        }
      };
      /**
       * @return {?}
       */
      this._tryToFixSession = function() {
        var e = self._getConnectionState();
        var pubDateEl = e.authToCapiDegradation;
        var psNode = e.authDegradation;
        var backwardNode = e.cookiesDisabled;
        if (pubDateEl) {
          return self._telemetry.capiNotAuthorizedLoop(!!psNode, !!backwardNode), void logger.error("User not authorized... Recovery fail =(");
        }
        if (backwardNode) {
          self._telemetry.socketDisabledCookie();
          logger.error("User disabled cookies... =(");
        }
        logger.warn("User not authorized... Try to recover");
        self._updateConnectionState({
          authToCapiDegradation : true
        });
        self._connectionFixer();
      };
      /**
       * @return {?}
       */
      this._connectionFixer = function() {
        return incrementAndSave(self, void 0, void 0, function() {
          var clojIsReversed;
          var self = this;
          return gotoNewOfflinePage(this, function(_context) {
            switch(_context.label) {
              case 0:
                return Object.keys(this._sockets).forEach(function(uri) {
                  return self._sockets[uri].release();
                }), [4, new Promise(function(e) {
                  return self._tryToConnect(e);
                })];
              case 1:
                return clojIsReversed = _context.sent(), this._updateConnectionState({
                  authToCapiDegradation : false
                }), Object.keys(this._sockets).forEach(function(uuid) {
                  return self._sockets[uuid].reconnect();
                }), this._telemetry.socketBgRestored(clojIsReversed), [2];
            }
          });
        });
      };
      /**
       * @param {!Function} f
       * @param {number} r
       * @param {number} s
       * @return {?}
       */
      this._tryToConnect = function(f, r, s) {
        return void 0 === r && (r = 1E4), void 0 === s && (s = 1), incrementAndSave(self, void 0, void 0, function() {
          var config;
          var end;
          var jsonpClient;
          var value;
          var clear;
          var out = this;
          return gotoNewOfflinePage(this, function(_context) {
            switch(_context.label) {
              case 0:
                return logger.warn("Fixer inited, will try to connect in " + r / 1E3 + "s., count:" + s), [4, client.delay(r)];
              case 1:
                return _context.sent(), [4, this._refreshUser(false, "recover_after_capi_error")];
              case 2:
                return _context.sent(), config = merge({
                  url : settings.URLS.capi
                }), end = client.getBrowser(), jsonpClient = "chrome" === end ? "extension_chrome" : "firefox" === end ? "extension_firefox" : "safari" === end ? "extension_safari" : "edge" === end ? "extension_edge" : _this.try_(function() {
                  return _this.assertNever(end);
                }, function(canCreateDiscussions) {
                  return "extension";
                }), value = {
                  docid : client.guid(),
                  client : jsonpClient,
                  protocolVersion : "1.0",
                  action : "start",
                  id : 0
                }, clear = function() {
                  if (config) {
                    config.close();
                    config.release();
                    config.emit = client._f;
                  }
                  /** @type {null} */
                  config = null;
                }, config && (config.emit = function(type, options) {
                  return void 0 === options && (options = {}), "connect" === type ? config && config.send(value) : options.action && "start" === options.action ? (clear(), logger.warn("yay, we fixed capi connection!"), f(s)) : void((options.error || "error" === type) && (clear(), s % 10 == 0 && out._logFailedReconnect({
                    count : s,
                    error : options.error
                  }), logger.warn("still on error( " + type, options), out._tryToConnect(f, Math.min(out._maxReconnectTime, 2 * r), s + 1)));
                }), config && config.connect(), [2];
            }
          });
        });
      };
      /**
       * @param {!Object} t
       * @return {?}
       */
      this._logFailedReconnect = function(t) {
        var text = t.count;
        var count = t.error;
        return incrementAndSave(self, void 0, void 0, function() {
          var why;
          return gotoNewOfflinePage(this, function(_a) {
            switch(_a.label) {
              case 0:
                /** @type {string} */
                why = "exception";
                /** @type {number} */
                _a.label = 1;
              case 1:
                return _a.trys.push([1, 3, , 4]), [4, this._getTokenCookie()];
              case 2:
                return why = _a.sent(), [3, 4];
              case 3:
                return _a.sent(), [3, 4];
              case 4:
                return logger.warn("log failed reconnect " + text, count), this._telemetry.socketBgReconnectFail(why || "", text), [2];
            }
          });
        });
      };
      rdb.on(e.MessageTypes.iframeMode, this._setMessageType);
      rdb.on(e.MessageTypes.client, this._onContentScriptSocketMessage);
    };
  }();
  api.BackgroundSocketManager = questsByLevel;
}, function(canCreateDiscussions, t, require) {
  var declare = this && this.__assign || function() {
    return (declare = Object.assign || function(obj) {
      var props;
      /** @type {number} */
      var i = 1;
      /** @type {number} */
      var length = arguments.length;
      for (; i < length; i++) {
        var prop;
        for (prop in props = arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(props, prop)) {
            obj[prop] = props[prop];
          }
        }
      }
      return obj;
    }).apply(this, arguments);
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var ViewContext = require(25);
  var config = require(4);
  var bind = require(99);
  var offsetFromCenter = function() {
    return function() {
      var result = this;
      /** @type {!Array} */
      this._fakeWebsocketData = [];
      /** @type {boolean} */
      this._isAutorun = false;
      /** @type {number} */
      this._latestRevision = 0;
      /**
       * @return {?}
       */
      this.isOn = function() {
        return result._fakeWebsocketData && result._fakeWebsocketData.length > 0;
      };
      /**
       * @return {?}
       */
      this.getSocket = function() {
        return result._socket;
      };
      /**
       * @return {undefined}
       */
      this.run = function() {
        if (result._fakeWebsocketData.length > 0) {
          var self = result._fakeWebsocketData.shift();
          self.rev = result._latestRevision;
          if ("synonyms" === self.action) {
            result._socket.emit("message", self);
          } else {
            result._socket.emit(self.event, self);
          }
          setTimeout(result.run, 0);
        } else {
          /** @type {number} */
          result._latestRevision = 0;
          /** @type {boolean} */
          result._isAutorun = false;
        }
      };
      /**
       * @param {!Object} response
       * @return {undefined}
       */
      this.setData = function(response) {
        result._fakeWebsocketData = response.value;
        result._isAutorun = response.autorun;
        result._debouncedRunFakeCapi.cancel();
      };
      /**
       * @return {?}
       */
      this._fakeWebsocket = function() {
        var socket = declare({}, ViewContext({}), {
          send : function(val) {
            if ("start" === val.action) {
              socket.emit("start", {
                event : "message",
                action : "start"
              });
            }
            if ("submit_ot" === val.action) {
              result._latestRevision = val.rev;
              if (result._isAutorun) {
                result._debouncedRunFakeCapi();
              }
            }
          },
          close : config._f,
          connect : function() {
            socket.emit("connect", {
              event : "connect"
            });
          },
          reconnect : function() {
            return socket.connect();
          },
          isConnected : config._F,
          release : config._f,
          toString : function() {
            return "Fake socket";
          },
          wsPlay : config._f,
          wsPause : config._f
        });
        return socket;
      };
      this._socket = this._fakeWebsocket();
      this._debouncedRunFakeCapi = bind(this.run, 3E3);
    };
  }();
  t.FakeCapi = offsetFromCenter;
}, function(canCreateDiscussions, event, require) {
  var f;
  var parseVar = this && this.__extends || (f = function(shape, t) {
    return (f = Object.setPrototypeOf || {
      __proto__ : []
    } instanceof Array && function(json, b) {
      /** @type {!Object} */
      json.__proto__ = b;
    } || function(scope, args) {
      var key;
      for (key in args) {
        if (args.hasOwnProperty(key)) {
          scope[key] = args[key];
        }
      }
    })(shape, t);
  }, function(child, t) {
    /**
     * @return {undefined}
     */
    function o() {
      this.constructor = child;
    }
    f(child, t);
    child.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o);
  });
  Object.defineProperty(event, "__esModule", {
    value : true
  });
  var expect = require(453);
  var Logger = require(3);
  var events = require(447);
  var Debug = Logger.Logger.create("universal.bg.socket");
  var relSet = function(e) {
    /**
     * @param {!Object} input
     * @param {?} o
     * @param {?} f
     * @param {!Object} duration
     * @return {?}
     */
    function init(input, o, f, duration) {
      var self = e.call(this) || this;
      return self._sender = o, self._onInternalSocketEmit = f, self._fakeCapi = duration, self._messageType = "socket-server", self._closedByMe = false, self.connect = function(e) {
        return self._internalSocket.connect(e);
      }, self.send = function(type) {
        return self._internalSocket.send(type);
      }, self.close = function() {
        return self._internalSocket.close();
      }, self.wsPlay = function() {
        return self._internalSocket.wsPlay();
      }, self.wsPause = function() {
        return self._internalSocket.wsPause();
      }, self.isConnected = function() {
        return self._internalSocket.isConnected();
      }, self.socketId = "0", self.reconnect = function() {
        if (!self._reconnectInProgress) {
          /** @type {boolean} */
          self._reconnectInProgress = true;
          self._reconnectFn().then(function() {
            return self._reconnectInProgress = false;
          });
        }
      }, self.release = function() {
        Debug.trace("CLOSE SOCKET");
        self._internalSocket.close();
        self._internalSocket.release();
      }, self.overrideEmitToNoOp = function() {
        return self._internalSocket.emit = function() {
        };
      }, self.setMessageType = function(value) {
        Debug.trace("USE EXT SOCKET", value);
        /** @type {number} */
        self._messageType = value;
      }, self._getEnhancedSocket = function(monthName) {
        var child = self._fakeCapi.isOn() ? self._fakeCapi.getSocket() : expect(monthName);
        var emit = child.emit;
        return Object.assign(child, {
          emit : function(name, obj) {
            emit(name, obj);
            self._emit(name, obj);
          },
          reconnect : self.reconnect,
          toString : function() {
            return "[object BackgroundSocket]";
          }
        });
      }, self._emit = function(name, value) {
        if ("disconnect" === name && self._closedByMe) {
          /** @type {boolean} */
          self._closedByMe = false;
        } else {
          self._onInternalSocketEmit({
            event : name,
            socketId : self._socketId,
            msg : value
          }, self._messageType, self._sender);
        }
      }, self._reconnectFn = function() {
        /**
         * @return {undefined}
         */
        var closePopup = function() {
        };
        /** @type {!Promise} */
        var p_extl = new Promise(function(canCreateDiscussions) {
          return closePopup = canCreateDiscussions;
        });
        return self._internalSocket.one("connect", closePopup), self._internalSocket.isConnected() ? (self._internalSocket.one("disconnect", function() {
          return setTimeout(function() {
            return self._internalSocket.connect(true);
          }, 0);
        }), self._closedByMe = true, self._internalSocket.close()) : self._internalSocket.connect(true), p_extl;
      }, self._internalSocket = self._getEnhancedSocket(input), self._socketId = input.socketId, self;
    }
    return parseVar(init, e), init;
  }(events.Emitter);
  event.BackgroundSocket = relSet;
}, function(canCreateDiscussions, BeautifulProperties, n) {
  /**
   * @param {!Object} t
   * @param {string} p
   * @param {!Object} d
   * @param {string} s
   * @return {undefined}
   */
  function p(t, p, d, s) {
    f.on(p, function(value, hookHandler, i) {
      t.debug("received '" + p + "' from tab #" + i);
      f.emitTo(i, d, value, function() {
        return hookHandler("success");
      }, function() {
        return hookHandler("addressee-is-disconnected-from-bg");
      }, function(value) {
        switch(value) {
          case model.toPopupEditor:
            return function(o) {
              return o && Y.isExtensionUrl(fn, o) || false;
            };
          case model.toContentScript:
            return function(log) {
              return log && !Y.isExtensionUrl(fn, log) || false;
            };
          default:
            return void o.assertNever(value);
        }
      }(s));
    });
  }
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var f = n(13);
  var $$Log = n(3);
  var o = n(1);
  var next = n(200);
  var end = n(56);
  var model;
  var type;
  /** @type {string} */
  var fn = "src/popupEditorIFrame.html";
  var Y = end.getBackgoundPageExtensionApi();
  /** @type {string} */
  (type = model || (model = {})).toPopupEditor = "toPopupEditor";
  /** @type {string} */
  type.toContentScript = "toContentScript";
  /**
   * @param {!Object} v
   * @return {undefined}
   */
  BeautifulProperties.initIFrameCommunicationProxy = function(v) {
    var props;
    var n;
    var value;
    if (void 0 === v) {
      v = $$Log.Logger.create("bg/iframeMessagingProxy");
    }
    p(v, next.PopupEditorIFrameMessages.bgPopupEditorIFrameToPopupEditor, next.PopupEditorIFrameMessages.popupEditorIFrame, model.toPopupEditor);
    p(v, next.PopupEditorIFrameMessages.bgPopupEditorIFrameFromPopupEditor, next.PopupEditorIFrameMessages.popupEditorIFrame, model.toContentScript);
    /** @type {!Object} */
    props = v;
    n = next.SignInIframeMessages.bgSignInIFrame;
    value = next.SignInIframeMessages.signInIFrame;
    f.on(n, function(exports, canCreateDiscussions, i) {
      props.debug("received '" + n + "' from tab #" + i);
      f.emitTo(i, value, exports);
    });
    v.debug("IFrame messaging initialized");
  };
}, function(canCreateDiscussions, event, require) {
  var keepToken = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(event, "__esModule", {
    value : true
  });
  var $ = require(295);
  var viewportItem = require(4);
  var sec = require(86);
  var o = require(1316);
  var payload = require(433);
  var relSet = function() {
    /**
     * @param {?} prefs
     * @return {undefined}
     */
    function set(prefs) {
      this._prefs = prefs;
    }
    return set.prototype.start = function() {
      var key;
      var url;
      return keepToken(this, function(_context) {
        switch(_context.label) {
          case 0:
            return [4, $.call(o.getInitial, this._prefs)];
          case 1:
            return key = _context.sent(), [4, $.put(payload.initialDynamicConfig(key))];
          case 2:
            _context.sent();
            /** @type {number} */
            _context.label = 3;
          case 3:
            return [4, $.call(o.load, this._prefs)];
          case 4:
            return (url = _context.sent()) ? [4, $.put(payload.dynamicConfig(url))] : [3, 6];
          case 5:
            _context.sent();
            /** @type {number} */
            _context.label = 6;
          case 6:
            return [4, $.call(viewportItem.delay, 5 * sec.minute)];
          case 7:
            return _context.sent(), [3, 3];
          case 8:
            return [2];
        }
      });
    }, set;
  }();
  event.DynamicConfigSagas = relSet;
}, function(canCreateDiscussions, t, n) {
  /**
   * @param {!Object} id
   * @param {?} comment
   * @return {?}
   */
  function callback(id, comment) {
    return o.parse(m.DynamicConfig.parse(id))(comment);
  }
  var finishedModule = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var withinHierarchy = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var remote = n(10);
  var end = n(14);
  var o = n(432);
  var $$Log = n(3);
  var l = n(71);
  var h = n(86);
  var m = n(382);
  var filesOp = $$Log.Logger.create("universal/bg/state/dynamicConfig");
  /** @type {string} */
  var d = "dynamicConfig";
  /**
   * @param {!Object} params
   * @return {?}
   */
  t.getInitial = function(params) {
    return finishedModule(this, void 0, void 0, function() {
      var loggedIn;
      var controlFlowAction;
      return withinHierarchy(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 2, , 3]), [4, params.get(d)];
          case 1:
            return (loggedIn = _a.sent()) ? [2, callback("local", loggedIn)] : [2, m.DynamicConfig.empty];
          case 2:
            return controlFlowAction = _a.sent(), end.felog.dynamicConfigLoadFromPrefsError(controlFlowAction.message), filesOp.error("Error getting DynamicConfig from prefs: " + controlFlowAction.message), [3, 3];
          case 3:
            return [2, m.DynamicConfig.empty];
        }
      });
    });
  };
  /**
   * @param {!Object} e
   * @return {?}
   */
  t.load = function(e) {
    return finishedModule(this, void 0, void 0, function() {
      var opt;
      var to3;
      var value;
      var result;
      var controlFlowAction;
      return withinHierarchy(this, function(_a) {
        switch(_a.label) {
          case 0:
            return _a.trys.push([0, 5, , 6]), [4, Promise.race([fetch(remote.getGlobal().appConfig.url.dynamicConfigUrl), l.SafePromise.delay(60 * h.second).then(function() {
              throw new Error("Timeout");
            })])];
          case 1:
            return (opt = _a.sent()).ok ? [3, 3] : [4, opt.text()];
          case 2:
            throw to3 = _a.sent(), new Error("Request error: " + opt.status + " " + to3);
          case 3:
            return [4, opt.json()];
          case 4:
            return value = _a.sent(), result = callback("server", value), e.set(d, value).catch(function(origErr) {
              end.felog.dynamicConfigSaveToPrefsError(origErr.message);
              filesOp.error("Error caching DynamicConfig: " + origErr.message);
            }), [2, result];
          case 5:
            return controlFlowAction = _a.sent(), end.felog.dynamicConfigLoadFromServerError(controlFlowAction.message), filesOp.error("Error getting DynamicConfig from server: " + controlFlowAction.message), [3, 6];
          case 6:
            return [2, null];
        }
      });
    });
  };
}, function(canCreateDiscussions, t, FbmNoise2) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var Malakh = FbmNoise2(1318);
  var elevationNoise = FbmNoise2(1004);
  var ruggedNoise = FbmNoise2(1319);
  var $$Log = FbmNoise2(3);
  var offsetFromCenter = function() {
    return function exports(encodeCodeBlock, log) {
      if (void 0 === log) {
        log = $$Log.Logger.create(exports.name);
      }
      var self = this;
      /** @type {!Object} */
      this._authSagaRunners = encodeCodeBlock;
      this._log = log;
      this.publicApi = {
        log : function(str) {
          self._log.debug("\ud83d\udce1 log via CS-BG rpc: " + str);
        },
        getTime : function() {
          return Date.now();
        },
        logout : function() {
          self._authSagaRunners.logout();
        }
      };
    };
  }();
  t.CsToBgRpcApiImpl = offsetFromCenter;
  /**
   * @param {!Function} name
   * @return {?}
   */
  (t.CsToBgRpcServer || (t.CsToBgRpcServer = {})).create = function(name) {
    var containerHeight = (new offsetFromCenter(name)).publicApi;
    return new Malakh.GenericRpcServer(new ruggedNoise.LegacyBasedBgRpcTransport(elevationNoise.CsToBgRpcApi.rpcLegacyMessageName), containerHeight);
  };
}, function(canCreateDiscussions, t, n) {
  var add = this && this.__awaiter || function(value, data, P, generator) {
    return new (P || (P = Promise))(function(isObject, resolve) {
      /**
       * @param {!Object} value
       * @return {undefined}
       */
      function a(value) {
        try {
          next(generator.next(value));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} error
       * @return {undefined}
       */
      function onRejected(error) {
        try {
          next(generator.throw(error));
        } catch (formatedList) {
          resolve(formatedList);
        }
      }
      /**
       * @param {!Object} request
       * @return {undefined}
       */
      function next(request) {
        if (request.done) {
          isObject(request.value);
        } else {
          (new P(function(reject) {
            reject(request.value);
          })).then(a, onRejected);
        }
      }
      next((generator = generator.apply(value, data || [])).next());
    });
  };
  var gotoNewOfflinePage = this && this.__generator || function(value, data) {
    /**
     * @param {number} data
     * @return {?}
     */
    function verb(data) {
      return function(canCreateDiscussions) {
        return function(op) {
          if (pp) {
            throw new TypeError("Generator is already executing.");
          }
          for (; _;) {
            try {
              if (pp = 1, c && (t = 2 & op[0] ? c.return : op[0] ? c.throw || ((t = c.return) && t.call(c), 0) : c.next) && !(t = t.call(c, op[1])).done) {
                return t;
              }
              switch(c = 0, t && (op = [2 & op[0], t.value]), op[0]) {
                case 0:
                case 1:
                  t = op;
                  break;
                case 4:
                  return _.label++, {
                    value : op[1],
                    done : false
                  };
                case 5:
                  _.label++;
                  c = op[1];
                  /** @type {!Array} */
                  op = [0];
                  continue;
                case 7:
                  op = _.ops.pop();
                  _.trys.pop();
                  continue;
                default:
                  if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                    /** @type {number} */
                    _ = 0;
                    continue;
                  }
                  if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                    _.label = op[1];
                    break;
                  }
                  if (6 === op[0] && _.label < t[1]) {
                    _.label = t[1];
                    t = op;
                    break;
                  }
                  if (t && _.label < t[2]) {
                    _.label = t[2];
                    _.ops.push(op);
                    break;
                  }
                  if (t[2]) {
                    _.ops.pop();
                  }
                  _.trys.pop();
                  continue;
              }
              op = data.call(value, _);
            } catch (e) {
              /** @type {!Array} */
              op = [6, e];
              /** @type {number} */
              c = 0;
            } finally {
              /** @type {number} */
              pp = t = 0;
            }
          }
          if (5 & op[0]) {
            throw op[1];
          }
          return {
            value : op[0] ? op[1] : void 0,
            done : true
          };
        }([data, canCreateDiscussions]);
      };
    }
    var pp;
    var c;
    var t;
    var g;
    var _ = {
      label : 0,
      sent : function() {
        if (1 & t[0]) {
          throw t[1];
        }
        return t[1];
      },
      trys : [],
      ops : []
    };
    return g = {
      next : verb(0),
      throw : verb(1),
      return : verb(2)
    }, "function" == typeof Symbol && (g[Symbol.iterator] = function() {
      return this;
    }), g;
  };
  var collectRefsFromPathitem = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var arrayPush = this && this.__spread || function() {
    /** @type {!Array} */
    var followedKeys = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      followedKeys = followedKeys.concat(collectRefsFromPathitem(arguments[i]));
    }
    return followedKeys;
  };
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var offsetFromCenter = function() {
    /**
     * @param {string} callbackTarget
     * @param {!Object} event
     * @return {undefined}
     */
    function subscribe(callbackTarget, event) {
      var n = this;
      /** @type {string} */
      this._transport = callbackTarget;
      /** @type {!Object} */
      this._api = event;
      this._sub = this._transport.inbound.subscribe(function(options) {
        return add(n, void 0, void 0, function() {
          var res;
          var vs;
          var err;
          return gotoNewOfflinePage(this, function(_a) {
            switch(_a.label) {
              case 0:
                return _a.trys.push([0, 4, , 5]), "function" != typeof(res = this._api[options.data.method]) ? [3, 2] : [4, res.call.apply(res, arrayPush([this._api], options.data.args))];
              case 1:
                return vs = _a.sent(), this._transport.outbound({
                  clientId : options.clientId,
                  data : {
                    id : options.data.id,
                    res : vs
                  }
                }), [3, 3];
              case 2:
                throw {
                  message : "invalid method name " + options.data.method
                };
              case 3:
                return [3, 5];
              case 4:
                return err = _a.sent(), this._transport.outbound({
                  clientId : options.clientId,
                  data : {
                    id : options.data.id,
                    err : err
                  }
                }), [3, 5];
              case 5:
                return [2];
            }
          });
        });
      });
    }
    return subscribe.prototype.dispose = function() {
      this._sub.unsubscribe();
    }, subscribe;
  }();
  t.GenericRpcServer = offsetFromCenter;
}, function(canCreateDiscussions, t, unescape) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var s_utf8 = unescape(0);
  var offsetFromCenter = function() {
    return function(canCreateDiscussions, message) {
      if (void 0 === message) {
        message = unescape(13);
      }
      var self = this;
      this._rpcMessageName = canCreateDiscussions;
      /** @type {string} */
      this._message = message;
      this.inbound = new s_utf8.Observable(function(errors) {
        /**
         * @param {?} t
         * @param {?} scale
         * @param {string} name
         * @return {undefined}
         */
        var t = function(t, scale, name) {
          var z = t;
          errors.next({
            clientId : name,
            data : z
          });
        };
        return self._message.on(self._rpcMessageName, t), function() {
          return self._message.off(self._rpcMessageName, t);
        };
      });
      /**
       * @param {!Object} req
       * @return {undefined}
       */
      this.outbound = function(req) {
        self._message.emitTo(req.clientId, self._rpcMessageName, req.data);
      };
    };
  }();
  t.LegacyBasedBgRpcTransport = offsetFromCenter;
}, function(canCreateDiscussions, BeautifulProperties, SHA384) {
  var r = this && this.__read || function(obj, data) {
    var node = "function" == typeof Symbol && obj[Symbol.iterator];
    if (!node) {
      return obj;
    }
    var result;
    var mockConsole;
    var value = node.call(obj);
    /** @type {!Array} */
    var linksArr = [];
    try {
      for (; (void 0 === data || data-- > 0) && !(result = value.next()).done;) {
        linksArr.push(result.value);
      }
    } catch (Console_error) {
      mockConsole = {
        error : Console_error
      };
    } finally {
      try {
        if (result && !result.done && (node = value.return)) {
          node.call(value);
        }
      } finally {
        if (mockConsole) {
          throw mockConsole.error;
        }
      }
    }
    return linksArr;
  };
  var add_prefix = this && this.__spread || function() {
    /** @type {!Array} */
    var bytes = [];
    /** @type {number} */
    var i = 0;
    for (; i < arguments.length; i++) {
      /** @type {!Array<?>} */
      bytes = bytes.concat(r(arguments[i]));
    }
    return bytes;
  };
  Object.defineProperty(BeautifulProperties, "__esModule", {
    value : true
  });
  var test = SHA384(13);
  /** @type {!Array} */
  var methods = ["log", "info", "warn", "error", "time", "timeEnd", "debug"];
  /** @type {!Window} */
  var global = window;
  /** @type {!Console} */
  var c = console;
  /**
   * @return {undefined}
   */
  BeautifulProperties.startSendingBgLogsToActiveTab = function() {
    var originalConsole = {};
    methods.forEach(function(method) {
      /**
       * @return {undefined}
       */
      originalConsole[method] = function() {
        /** @type {!Array} */
        var e = [];
        /** @type {number} */
        var i = 0;
        for (; i < arguments.length; i++) {
          e[i] = arguments[i];
        }
        if ("toFocussed not allowed for popup when it open like regular tab" !== e[0]) {
          try {
            test.emitFocusedTab("bg-log", {
              method : method,
              args : e
            });
          } catch (e) {
          }
        }
        c[method].apply(c, add_prefix(e));
      };
    });
    global.console = originalConsole;
  };
}, function(canCreateDiscussions, t, n) {
  Object.defineProperty(t, "__esModule", {
    value : true
  });
  var offsetFromCenter = function() {
    /**
     * @param {!Object} val
     * @return {undefined}
     */
    function self(val) {
      /** @type {!Object} */
      this.gnar = val;
    }
    return self.prototype.acceptedAlert = function(pollProfileId, userId, popUp) {
      return this.gnar.track({
        eventName : "chromeExt/accepted-alert",
        object : "alert",
        objectId : "accepted",
        experiment : pollProfileId,
        sessionId : userId,
        url : popUp
      }, {
        lite : true,
        sendInstance : false,
        sendBrowser : false,
        sendUser : false
      });
    }, self.prototype.appStart = function() {
      return this.gnar.track({
        action : "start",
        component : "companion",
        eventName : "chromeExt/companion/app-start",
        object : "app"
      });
    }, self.prototype.capturedException = function(pollProfileId, userId, popUp) {
      return this.gnar.track({
        eventName : "chromeExt/captured-exception",
        object : "exception",
        objectId : "captured",
        experiment : pollProfileId,
        sessionId : userId,
        url : popUp
      }, {
        lite : true,
        sendInstance : false,
        sendBrowser : false,
        sendUser : false
      });
    }, self.prototype.checkingToggleClick = function(position, id, setHeight) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/checking-toggle-click",
        object : "toggle",
        objectId : "checking",
        placement : position,
        siteCategory : id,
        state : setHeight
      });
    }, self.prototype.connectednessDataEmail = function(eta, lmbda, n, froot, fext, params, container, enumType, value, count, totalCount) {
      return this.gnar.track({
        eventName : "chromeExt/connectednessData-email",
        object : "email",
        objectId : "connectednessData",
        businessCount : eta,
        businessHistogramByRCount : lmbda,
        businessHistogramByRecipients : n,
        hashedUserId : froot,
        histogramByRCount : fext,
        histogramByRecipients : params,
        personalCount : container,
        personalHistogramByRCount : enumType,
        personalHistogramByRecipients : value,
        startDateTime : count,
        totalCount : totalCount
      }, {
        lite : true,
        sendInstance : false,
        sendBrowser : false,
        sendUser : false
      });
    }, self.prototype.declineBetaButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/declineBeta-button-click",
        object : "button",
        objectId : "declineBeta",
        placement : val
      });
    }, self.prototype.definitionPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/definition-popup-show",
        object : "popup",
        objectId : "definition"
      });
    }, self.prototype.definitionToggleClick = function(state) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/definition-toggle-click",
        object : "toggle",
        objectId : "definition",
        state : state
      });
    }, self.prototype.delightfulMessagePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/delightfulMessage-popup-show",
        object : "popup",
        objectId : "delightfulMessage"
      });
    }, self.prototype.disableButtonClick = function(gButton) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/disable-button-click",
        object : "button",
        objectId : "disable",
        placement : gButton
      });
    }, self.prototype.disableReminderDoNotShowAgainButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/disableReminderDoNotShowAgain-button-click",
        object : "button",
        objectId : "disableReminderDoNotShowAgain",
        placement : val
      });
    }, self.prototype.disableReminderNotificationShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/disableReminder-notification-show",
        object : "notification",
        objectId : "disableReminder"
      });
    }, self.prototype.disableUntilNextVisitButtonClick = function(gButton, menuOpts) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/disableUntilNextVisit-button-click",
        object : "button",
        objectId : "disableUntilNextVisit",
        placement : gButton,
        siteCategory : menuOpts
      });
    }, self.prototype.documentGenreButtonClick = function(dst, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/documentGenre-button-click",
        object : "button",
        objectId : "documentGenre",
        documentGenre : dst,
        placement : val
      });
    }, self.prototype.editorInit = function(eta, lmbda, n, froot) {
      return this.gnar.track({
        action : "init",
        eventName : "chromeExt/editor-init",
        object : "editor",
        docId : eta,
        mode : lmbda,
        cssBundle : n,
        jsBundle : froot
      });
    }, self.prototype.emailSummarizationAcceptButtonClick = function(id, bl) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emailSummarizationAccept-button-click",
        object : "button",
        objectId : "emailSummarizationAccept",
        docId : id,
        placement : bl
      });
    }, self.prototype.emailSummarizationBadgeShow = function(docUri) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emailSummarization-badge-show",
        object : "badge",
        objectId : "emailSummarization",
        docId : docUri
      });
    }, self.prototype.emailSummarizationDisableButtonClick = function(id, bl) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emailSummarizationDisable-button-click",
        object : "button",
        objectId : "emailSummarizationDisable",
        docId : id,
        placement : bl
      });
    }, self.prototype.emailSummarizationExpandButtonClick = function(id, bl) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emailSummarizationExpand-button-click",
        object : "button",
        objectId : "emailSummarizationExpand",
        docId : id,
        placement : bl
      });
    }, self.prototype.emailSummarizationIgnoreButtonClick = function(id, bl) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emailSummarizationIgnore-button-click",
        object : "button",
        objectId : "emailSummarizationIgnore",
        docId : id,
        placement : bl
      });
    }, self.prototype.emailSummarizationPopupShow = function(docUri) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emailSummarization-popup-show",
        object : "popup",
        objectId : "emailSummarization",
        docId : docUri
      });
    }, self.prototype.emogenieBetaDeclineBetaButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/declineBeta-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "declineBeta",
        placement : val
      });
    }, self.prototype.emogenieBetaEnableButtonClick = function(name, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/enable-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "enable",
        pageId : name,
        placement : val
      });
    }, self.prototype.emogenieBetaEnablePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emogenieBeta/enable-popup-show",
        feature : "emogenieBeta",
        object : "popup",
        objectId : "enable"
      });
    }, self.prototype.emogenieBetaInvitePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emogenieBeta/invite-popup-show",
        feature : "emogenieBeta",
        object : "popup",
        objectId : "invite"
      });
    }, self.prototype.emogenieBetaLearnMoreButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/learnMore-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "learnMore",
        placement : val
      });
    }, self.prototype.emogenieBetaLeaveBetaButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/leaveBeta-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "leaveBeta",
        placement : val
      });
    }, self.prototype.emogenieBetaLeaveBetaPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emogenieBeta/leaveBeta-popup-show",
        feature : "emogenieBeta",
        object : "popup",
        objectId : "leaveBeta"
      });
    }, self.prototype.emogenieBetaSettingsButtonClick = function(name, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/settings-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "settings",
        pageId : name,
        placement : val
      });
    }, self.prototype.emogenieBetaSettingsPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emogenieBeta/settings-popup-show",
        feature : "emogenieBeta",
        object : "popup",
        objectId : "settings"
      });
    }, self.prototype.emogenieBetaShareFeedbackButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/shareFeedback-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "shareFeedback",
        placement : val
      });
    }, self.prototype.emogenieBetaShowEmogenieToggleClick = function(state) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/showEmogenie-toggle-click",
        feature : "emogenieBeta",
        object : "toggle",
        objectId : "showEmogenie",
        state : state
      });
    }, self.prototype.emogenieBetaThumbsDownButtonClick = function(id, hkey, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/thumbsDown-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "thumbsDown",
        docId : id,
        emotionName : hkey,
        placement : val
      });
    }, self.prototype.emogenieBetaThumbsUpButtonClick = function(eta, lmbda, n) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/thumbsUp-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "thumbsUp",
        docId : eta,
        emotionName : lmbda,
        placement : n
      });
    }, self.prototype.emogenieBetaTryNowButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/emogenieBeta/tryNow-button-click",
        feature : "emogenieBeta",
        object : "button",
        objectId : "tryNow",
        placement : val
      });
    }, self.prototype.emogenieBetaWelcomePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emogenieBeta/welcome-popup-show",
        feature : "emogenieBeta",
        object : "popup",
        objectId : "welcome"
      });
    }, self.prototype.emogeniePopupShow = function(eta, lmbda, n) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emogenie-popup-show",
        object : "popup",
        objectId : "emogenie",
        docId : eta,
        emotions : lmbda,
        numberEmotionsShown : n
      });
    }, self.prototype.emogenieShow = function(eta, lmbda, n) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/emogenie-show",
        object : "emogenie",
        docId : eta,
        emotions : lmbda,
        numberEmotionsShown : n
      });
    }, self.prototype.enableButtonClick = function(name, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/enable-button-click",
        object : "button",
        objectId : "enable",
        pageId : name,
        placement : val
      });
    }, self.prototype.enablePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/enable-popup-show",
        object : "popup",
        objectId : "enable"
      });
    }, self.prototype.facebookSignInButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/facebookSignIn-button-click",
        object : "button",
        objectId : "facebookSignIn",
        placement : val
      });
    }, self.prototype.facebookSignUpButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/facebookSignUp-button-click",
        object : "button",
        objectId : "facebookSignUp",
        placement : val
      });
    }, self.prototype.featuresUnavailablePopupDisableButtonClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/featuresUnavailablePopupDisable-button-click",
        object : "button",
        objectId : "featuresUnavailablePopupDisable",
        placement : "featuresUnavailablePopup"
      });
    }, self.prototype.featuresUnavailablePopupDismissButtonClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/featuresUnavailablePopupDismiss-button-click",
        object : "button",
        objectId : "featuresUnavailablePopupDismiss",
        placement : "featuresUnavailablePopup"
      });
    }, self.prototype.featuresUnavailablePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/featuresUnavailable-popup-show",
        object : "popup",
        objectId : "featuresUnavailable"
      });
    }, self.prototype.feedbackPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/feedback-popup-show",
        object : "popup",
        objectId : "feedback",
        placement : "gdocs"
      });
    }, self.prototype.feedbackSentButtonClick = function(data, options, value) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/feedbackSent-button-click",
        object : "button",
        objectId : "feedbackSent",
        feedback : data,
        placement : options,
        score : value
      });
    }, self.prototype.gButtonClick = function(eta, lmbda, n, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/g-button-click",
        object : "button",
        objectId : "g",
        docId : eta,
        numberOfAdvancedAlerts : lmbda,
        numberOfCriticalAlerts : n,
        placement : val
      });
    }, self.prototype.gdocsEditorInit = function(eta, lmbda, n, froot) {
      return this.gnar.track({
        action : "init",
        eventName : "chromeExt/gdocs/editor-init",
        feature : "gdocs",
        object : "editor",
        docId : eta,
        mode : lmbda,
        cssBundle : n,
        jsBundle : froot
      });
    }, self.prototype.gdocsFeaturesUnavailablePopupDisableButtonClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/featuresUnavailablePopupDisable-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "featuresUnavailablePopupDisable",
        placement : "featuresUnavailablePopup"
      });
    }, self.prototype.gdocsFeaturesUnavailablePopupDismissButtonClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/featuresUnavailablePopupDismiss-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "featuresUnavailablePopupDismiss",
        placement : "featuresUnavailablePopup"
      });
    }, self.prototype.gdocsFeaturesUnavailablePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gdocs/featuresUnavailable-popup-show",
        feature : "gdocs",
        object : "popup",
        objectId : "featuresUnavailable"
      });
    }, self.prototype.gdocsLargeDocumentButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/largeDocument-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "largeDocument",
        placement : val
      });
    }, self.prototype.gdocsLargeDocumentPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gdocs/largeDocument-popup-show",
        feature : "gdocs",
        object : "popup",
        objectId : "largeDocument"
      });
    }, self.prototype.gdocsOfflinePageReloadButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/offlinePageReload-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "offlinePageReload",
        placement : val
      });
    }, self.prototype.gdocsOfflinePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gdocs/offline-popup-show",
        feature : "gdocs",
        object : "popup",
        objectId : "offline"
      });
    }, self.prototype.gdocsOpenEditorButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/openEditor-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "openEditor",
        placement : val
      });
    }, self.prototype.gdocsOptInPopupCloseButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/optInPopupClose-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "optInPopupClose",
        placement : val
      });
    }, self.prototype.gdocsOptInPopupEnableButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/optInPopupEnable-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "optInPopupEnable",
        placement : val
      });
    }, self.prototype.gdocsOptInPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gdocs/optIn-popup-show",
        feature : "gdocs",
        object : "popup",
        objectId : "optIn"
      });
    }, self.prototype.gdocsRegisterPromptButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gdocs/registerPrompt-button-click",
        feature : "gdocs",
        object : "button",
        objectId : "registerPrompt",
        placement : val
      });
    }, self.prototype.gdocsRegisterPromptPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gdocs/registerPrompt-popup-show",
        feature : "gdocs",
        object : "popup",
        objectId : "registerPrompt"
      });
    }, self.prototype.getPremiumButtonClick = function(val, data, urlPartConfig) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/getPremium-button-click",
        object : "button",
        objectId : "getPremium",
        placement : val,
        numberOfAdvancedAlerts : data,
        numberOfCriticalAlerts : urlPartConfig
      });
    }, self.prototype.gmailPopupGmailPremiumNotificationClick = function(bookmarkLink) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gmailPopup/gmailPremium-notification-click",
        feature : "gmailPopup",
        object : "notification",
        objectId : "gmailPremium",
        location : bookmarkLink
      });
    }, self.prototype.gmailPopupGmailPremiumNotificationShow = function(formatters, customFormatters) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gmailPopup/gmailPremium-notification-show",
        feature : "gmailPopup",
        object : "notification",
        objectId : "gmailPremium",
        characters : formatters,
        premiumAlerts : customFormatters
      });
    }, self.prototype.gmailPopupGmailPremiumPopupClose = function(not_uploaded) {
      return this.gnar.track({
        action : "close",
        eventName : "chromeExt/gmailPopup/gmailPremium-popup-close",
        feature : "gmailPopup",
        object : "popup",
        objectId : "gmailPremium",
        reason : not_uploaded
      });
    }, self.prototype.gmailPopupGmailPremiumPopupLearnMoreButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gmailPopup/gmailPremiumPopupLearnMore-button-click",
        feature : "gmailPopup",
        object : "button",
        objectId : "gmailPremiumPopupLearnMore",
        placement : val
      });
    }, self.prototype.gmailPopupGmailPremiumPopupShow = function(formatters, customFormatters) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gmailPopup/gmailPremium-popup-show",
        feature : "gmailPopup",
        object : "popup",
        objectId : "gmailPremium",
        characters : formatters,
        premiumAlerts : customFormatters
      });
    }, self.prototype.gmailPremiumNotificationClick = function(bookmarkLink) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gmailPremium-notification-click",
        object : "notification",
        objectId : "gmailPremium",
        location : bookmarkLink
      });
    }, self.prototype.gmailPremiumNotificationShow = function(formatters, customFormatters) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gmailPremium-notification-show",
        object : "notification",
        objectId : "gmailPremium",
        characters : formatters,
        premiumAlerts : customFormatters
      });
    }, self.prototype.gmailPremiumPopupClose = function(not_uploaded) {
      return this.gnar.track({
        action : "close",
        eventName : "chromeExt/gmailPremium-popup-close",
        object : "popup",
        objectId : "gmailPremium",
        reason : not_uploaded
      });
    }, self.prototype.gmailPremiumPopupLearnMoreButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/gmailPremiumPopupLearnMore-button-click",
        object : "button",
        objectId : "gmailPremiumPopupLearnMore",
        placement : val
      });
    }, self.prototype.gmailPremiumPopupShow = function(formatters, customFormatters) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/gmailPremium-popup-show",
        object : "popup",
        objectId : "gmailPremium",
        characters : formatters,
        premiumAlerts : customFormatters
      });
    }, self.prototype.googleSignInButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/googleSignIn-button-click",
        object : "button",
        objectId : "googleSignIn",
        placement : val
      });
    }, self.prototype.googleSignUpButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/googleSignUp-button-click",
        object : "button",
        objectId : "googleSignUp",
        placement : val
      });
    }, self.prototype.initializedExtension = function(pollProfileId, userId, popUp) {
      return this.gnar.track({
        eventName : "chromeExt/initialized-extension",
        object : "extension",
        objectId : "initialized",
        experiment : pollProfileId,
        sessionId : userId,
        url : popUp
      }, {
        lite : true,
        sendInstance : false,
        sendBrowser : false,
        sendUser : false
      });
    }, self.prototype.install = function(type) {
      return this.gnar.track({
        action : "install",
        eventName : "chromeExt/install",
        installSource : type
      });
    }, self.prototype.invitePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/invite-popup-show",
        object : "popup",
        objectId : "invite"
      });
    }, self.prototype.languageSettingUpdate = function(isSlidingUp, $cont, $slides) {
      return this.gnar.track({
        action : "update",
        eventName : "chromeExt/language-setting-update",
        object : "setting",
        objectId : "language",
        language : isSlidingUp,
        languageSource : $cont,
        isLikeCapi : $slides
      });
    }, self.prototype.largeDocumentButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/largeDocument-button-click",
        object : "button",
        objectId : "largeDocument",
        placement : val
      });
    }, self.prototype.largeDocumentPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/largeDocument-popup-show",
        object : "popup",
        objectId : "largeDocument"
      });
    }, self.prototype.launchTime = function(eta, lmbda, n) {
      return this.gnar.track({
        action : "launchTime",
        eventName : "chromeExt/launchTime",
        isFirstLoad : eta,
        popupEditorType : lmbda,
        time : n
      });
    }, self.prototype.learnMoreButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/learnMore-button-click",
        object : "button",
        objectId : "learnMore",
        placement : val
      });
    }, self.prototype.leaveBetaButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/leaveBeta-button-click",
        object : "button",
        objectId : "leaveBeta",
        placement : val
      });
    }, self.prototype.leaveBetaPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/leaveBeta-popup-show",
        object : "popup",
        objectId : "leaveBeta"
      });
    }, self.prototype.loginReminderBadgeShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/loginReminder-badge-show",
        object : "badge",
        objectId : "loginReminder"
      });
    }, self.prototype.loginReminderCloseButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/loginReminderClose-button-click",
        object : "button",
        objectId : "loginReminderClose",
        placement : val
      });
    }, self.prototype.loginReminderDoNotShowThisAgainButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/loginReminderDoNotShowThisAgain-button-click",
        object : "button",
        objectId : "loginReminderDoNotShowThisAgain",
        placement : val
      });
    }, self.prototype.loginReminderPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/loginReminder-popup-show",
        object : "popup",
        objectId : "loginReminder"
      });
    }, self.prototype.logoutFormFail = function(fieldErrors, hideFieldErrorsOnChange) {
      return this.gnar.track({
        action : "fail",
        eventName : "chromeExt/logout-form-fail",
        object : "form",
        objectId : "logout",
        fieldErrors : fieldErrors,
        formErrorMessage : hideFieldErrorsOnChange
      });
    }, self.prototype.logoutFormSuccess = function() {
      return this.gnar.track({
        action : "success",
        eventName : "chromeExt/logout-form-success",
        object : "form",
        objectId : "logout"
      });
    }, self.prototype.myGrammarlyButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/myGrammarly-button-click",
        object : "button",
        objectId : "myGrammarly",
        placement : val
      });
    }, self.prototype.newBadgeButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/newBadge-button-click",
        object : "button",
        objectId : "newBadge",
        placement : val
      });
    }, self.prototype.newDocumentButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/newDocument-button-click",
        object : "button",
        objectId : "newDocument",
        placement : val
      });
    }, self.prototype.offlinePageReloadButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/offlinePageReload-button-click",
        object : "button",
        objectId : "offlinePageReload",
        placement : val
      });
    }, self.prototype.offlinePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/offline-popup-show",
        object : "popup",
        objectId : "offline"
      });
    }, self.prototype.onboardingOverlayCloseButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/onboarding/overlayClose-button-click",
        feature : "onboarding",
        object : "button",
        objectId : "overlayClose",
        placement : val
      });
    }, self.prototype.onboardingOverlayLetsWriteButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/onboarding/overlayLetsWrite-button-click",
        feature : "onboarding",
        object : "button",
        objectId : "overlayLetsWrite",
        placement : val
      });
    }, self.prototype.onboardingOverlayNextButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/onboarding/overlayNext-button-click",
        feature : "onboarding",
        object : "button",
        objectId : "overlayNext",
        placement : val
      });
    }, self.prototype.onboardingOverlayPersonalizeButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/onboarding/overlayPersonalize-button-click",
        feature : "onboarding",
        object : "button",
        objectId : "overlayPersonalize",
        placement : val
      });
    }, self.prototype.onboardingOverlaySaveButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/onboarding/overlaySave-button-click",
        feature : "onboarding",
        object : "button",
        objectId : "overlaySave",
        placement : val
      });
    }, self.prototype.onboardingOverlayShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/onboarding/overlay-show",
        feature : "onboarding",
        object : "overlay"
      });
    }, self.prototype.onboardingPopupCloseButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/onboarding/popupClose-button-click",
        feature : "onboarding",
        object : "button",
        objectId : "popupClose",
        placement : val
      });
    }, self.prototype.onboardingPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/onboarding/popup-show",
        feature : "onboarding",
        object : "popup"
      });
    }, self.prototype.openEditorButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/openEditor-button-click",
        object : "button",
        objectId : "openEditor",
        placement : val
      });
    }, self.prototype.optInPopupCloseButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/optInPopupClose-button-click",
        object : "button",
        objectId : "optInPopupClose",
        placement : val
      });
    }, self.prototype.optInPopupEnableButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/optInPopupEnable-button-click",
        object : "button",
        objectId : "optInPopupEnable",
        placement : val
      });
    }, self.prototype.optInPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/optIn-popup-show",
        object : "popup",
        objectId : "optIn"
      });
    }, self.prototype.overlayCloseButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/overlayClose-button-click",
        object : "button",
        objectId : "overlayClose",
        placement : val
      });
    }, self.prototype.overlayLetsWriteButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/overlayLetsWrite-button-click",
        object : "button",
        objectId : "overlayLetsWrite",
        placement : val
      });
    }, self.prototype.overlayNextButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/overlayNext-button-click",
        object : "button",
        objectId : "overlayNext",
        placement : val
      });
    }, self.prototype.overlayPersonalizeButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/overlayPersonalize-button-click",
        object : "button",
        objectId : "overlayPersonalize",
        placement : val
      });
    }, self.prototype.overlaySaveButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/overlaySave-button-click",
        object : "button",
        objectId : "overlaySave",
        placement : val
      });
    }, self.prototype.overlayShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/overlay-show",
        object : "overlay"
      });
    }, self.prototype.popupCloseButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/popupClose-button-click",
        object : "button",
        objectId : "popupClose",
        placement : val
      });
    }, self.prototype.popupEditorDocumentGenreButtonClick = function(dst, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/popupEditor/documentGenre-button-click",
        feature : "popupEditor",
        object : "button",
        objectId : "documentGenre",
        documentGenre : dst,
        placement : val
      });
    }, self.prototype.popupEditorLaunchTime = function(eta, lmbda, n) {
      return this.gnar.track({
        action : "launchTime",
        eventName : "chromeExt/popupEditor/launchTime",
        feature : "popupEditor",
        isFirstLoad : eta,
        popupEditorType : lmbda,
        time : n
      });
    }, self.prototype.popupEditorSettingToggleClick = function(id, setHeight) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/popupEditor/setting-toggle-click",
        feature : "popupEditor",
        object : "toggle",
        objectId : "setting",
        settingName : id,
        state : setHeight
      });
    }, self.prototype.popupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/popup-show",
        object : "popup"
      });
    }, self.prototype.premiumPreviewCardShow = function(lens) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/premiumPreview-card-show",
        object : "card",
        objectId : "premiumPreview",
        lens : lens
      });
    }, self.prototype.premiumPreviewLearnMoreClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/premiumPreview-learnMore-click",
        object : "learnMore",
        objectId : "premiumPreview"
      });
    }, self.prototype.premiumPreviewNotificationClick = function(bookmarkLink) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/premiumPreview-notification-click",
        object : "notification",
        objectId : "premiumPreview",
        location : bookmarkLink
      });
    }, self.prototype.premiumPreviewNotificationShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/premiumPreview-notification-show",
        object : "notification",
        objectId : "premiumPreview"
      });
    }, self.prototype.premiumPreviewPremiumPreviewCardShow = function(lens) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/premiumPreview/premiumPreview-card-show",
        feature : "premiumPreview",
        object : "card",
        objectId : "premiumPreview",
        lens : lens
      });
    }, self.prototype.premiumPreviewPremiumPreviewLearnMoreClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/premiumPreview/premiumPreview-learnMore-click",
        feature : "premiumPreview",
        object : "learnMore",
        objectId : "premiumPreview"
      });
    }, self.prototype.premiumPreviewPremiumPreviewNotificationClick = function(bookmarkLink) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/premiumPreview/premiumPreview-notification-click",
        feature : "premiumPreview",
        object : "notification",
        objectId : "premiumPreview",
        location : bookmarkLink
      });
    }, self.prototype.premiumPreviewPremiumPreviewNotificationShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/premiumPreview/premiumPreview-notification-show",
        feature : "premiumPreview",
        object : "notification",
        objectId : "premiumPreview"
      });
    }, self.prototype.premiumPreviewPremiumPreviewTransformClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/premiumPreview/premiumPreview-transform-click",
        feature : "premiumPreview",
        object : "transform",
        objectId : "premiumPreview"
      });
    }, self.prototype.premiumPreviewTransformClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/premiumPreview-transform-click",
        object : "transform",
        objectId : "premiumPreview"
      });
    }, self.prototype.registerPromptButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/registerPrompt-button-click",
        object : "button",
        objectId : "registerPrompt",
        placement : val
      });
    }, self.prototype.registerPromptPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/registerPrompt-popup-show",
        object : "popup",
        objectId : "registerPrompt"
      });
    }, self.prototype.safariMigrationInlineCardClick = function(canCreateDiscussions) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/safariMigration-inlineCard-click",
        object : "inlineCard",
        objectId : "safariMigration",
        migrationRequestType : canCreateDiscussions
      });
    }, self.prototype.safariMigrationInlineCardShow = function(canCreateDiscussions) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/safariMigration-inlineCard-show",
        object : "inlineCard",
        objectId : "safariMigration",
        migrationRequestType : canCreateDiscussions
      });
    }, self.prototype.safariMigrationPopupButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/safariMigrationPopup-button-click",
        object : "button",
        objectId : "safariMigrationPopup",
        placement : val
      });
    }, self.prototype.safariMigrationPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/safariMigration-popup-show",
        object : "popup",
        objectId : "safariMigration"
      });
    }, self.prototype.settingToggleClick = function(id, setHeight) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/setting-toggle-click",
        object : "toggle",
        objectId : "setting",
        settingName : id,
        state : setHeight
      });
    }, self.prototype.settingsButtonClick = function(name, val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/settings-button-click",
        object : "button",
        objectId : "settings",
        pageId : name,
        placement : val
      });
    }, self.prototype.settingsPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/settings-popup-show",
        object : "popup",
        objectId : "settings"
      });
    }, self.prototype.shareFeedbackButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/shareFeedback-button-click",
        object : "button",
        objectId : "shareFeedback",
        placement : val
      });
    }, self.prototype.showEmogenieToggleClick = function(state) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/showEmogenie-toggle-click",
        object : "toggle",
        objectId : "showEmogenie",
        state : state
      });
    }, self.prototype.signInButtonClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/signIn-button-click",
        object : "button",
        objectId : "signIn",
        placement : "settingsToolbar"
      });
    }, self.prototype.signInFormFail = function(val, data, urlPartConfig) {
      return this.gnar.track({
        action : "fail",
        eventName : "chromeExt/signIn-form-fail",
        object : "form",
        objectId : "signIn",
        placement : val,
        fieldErrors : data,
        formErrorMessage : urlPartConfig
      });
    }, self.prototype.signInFormSuccess = function(val) {
      return this.gnar.track({
        action : "success",
        eventName : "chromeExt/signIn-form-success",
        object : "form",
        objectId : "signIn",
        placement : val
      });
    }, self.prototype.signInOverlayShow = function(val) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/signIn-overlay-show",
        object : "overlay",
        objectId : "signIn",
        placement : val
      });
    }, self.prototype.signUpButtonClick = function() {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/signUp-button-click",
        object : "button",
        objectId : "signUp",
        placement : "settingsToolbar"
      });
    }, self.prototype.signUpFormFail = function(val, data, urlPartConfig) {
      return this.gnar.track({
        action : "fail",
        eventName : "chromeExt/signUp-form-fail",
        object : "form",
        objectId : "signUp",
        placement : val,
        fieldErrors : data,
        formErrorMessage : urlPartConfig
      });
    }, self.prototype.signUpFormSuccess = function(val) {
      return this.gnar.track({
        action : "success",
        eventName : "chromeExt/signUp-form-success",
        object : "form",
        objectId : "signUp",
        placement : val
      });
    }, self.prototype.signUpOverlayShow = function(val) {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/signUp-overlay-show",
        object : "overlay",
        objectId : "signUp",
        placement : val
      });
    }, self.prototype.siteIsBrowserDisabled = function() {
      return this.gnar.track({
        action : "siteIsBrowserDisabled",
        eventName : "chromeExt/siteIsBrowserDisabled"
      });
    }, self.prototype.synonymAcceptButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/synonymAccept-button-click",
        object : "button",
        objectId : "synonymAccept",
        placement : val
      });
    }, self.prototype.synonymsPopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/synonyms-popup-show",
        object : "popup",
        objectId : "synonyms"
      });
    }, self.prototype.thumbsDownButtonClick = function(eta, lmbda, n) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/thumbsDown-button-click",
        object : "button",
        objectId : "thumbsDown",
        docId : eta,
        emotionName : lmbda,
        placement : n
      });
    }, self.prototype.thumbsUpButtonClick = function(eta, lmbda, n) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/thumbsUp-button-click",
        object : "button",
        objectId : "thumbsUp",
        docId : eta,
        emotionName : lmbda,
        placement : n
      });
    }, self.prototype.toolbarButtonClick = function(val, btn) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/toolbar-button-click",
        object : "button",
        objectId : "toolbar",
        placement : val,
        type : btn
      });
    }, self.prototype.tryNowButtonClick = function(val) {
      return this.gnar.track({
        action : "click",
        eventName : "chromeExt/tryNow-button-click",
        object : "button",
        objectId : "tryNow",
        placement : val
      });
    }, self.prototype.update = function(v) {
      return this.gnar.track({
        action : "update",
        eventName : "chromeExt/update",
        oldVersion : v
      });
    }, self.prototype.welcomePopupShow = function() {
      return this.gnar.track({
        action : "show",
        eventName : "chromeExt/welcome-popup-show",
        object : "popup",
        objectId : "welcome"
      });
    }, self;
  }();
  t.GnarSpec = offsetFromCenter;
}, function(canCreateDiscussions, isSlidingUp) {
  !function() {
    /**
     * @param {number} callback
     * @return {undefined}
     */
    function push(callback) {
      g.set(callback);
    }
    /**
     * @param {!Object} options
     * @return {undefined}
     */
    function failure(options) {
      if (100 != options.get(length) && get(func(options, key)) % 1E4 >= 100 * equal(options, length)) {
        throw "abort";
      }
    }
    /**
     * @param {!Object} url
     * @return {undefined}
     */
    function loadModel(url) {
      if (read(func(url, value))) {
        throw "abort";
      }
    }
    /**
     * @return {undefined}
     */
    function messageHandler() {
      /** @type {string} */
      var text = doc.location.protocol;
      if ("http:" != text && "https:" != text) {
        throw "abort";
      }
    }
    /**
     * @param {!Object} res
     * @return {undefined}
     */
    function send(res) {
      try {
        if (options.navigator.sendBeacon) {
          push(42);
        } else {
          if (options.XMLHttpRequest && "withCredentials" in new options.XMLHttpRequest) {
            push(40);
          }
        }
      } catch (e) {
      }
      res.set(config, serialize(res), true);
      res.set(cell, equal(res, cell) + 1);
      /** @type {!Array} */
      var drilldownLevelLabels = [];
      store.map(function(key, exports) {
        if (exports.F) {
          if (null != (key = res.get(key)) && key != exports.defaultValue) {
            if ("boolean" == typeof key) {
              /** @type {number} */
              key = key * 1;
            }
            drilldownLevelLabels.push(exports.F + "=" + parse("" + key));
          }
        }
      });
      drilldownLevelLabels.push("z=" + getRandomString());
      res.set(meta, drilldownLevelLabels.join("&"), true);
    }
    /**
     * @param {!Object} el
     * @return {undefined}
     */
    function run(el) {
      var url = func(el, label) || updatePresenterWindow() + "/collect";
      var error = el.get(header);
      var data = func(el, state);
      if (!data && el.get(option) && (data = "beacon"), error) {
        request(url, func(el, meta), error, el.get(node));
      } else {
        if (data) {
          error = data;
          data = func(el, meta);
          var obj = el.get(node);
          obj = obj || name;
          if ("image" == error) {
            test(url, data, obj);
          } else {
            if (!("xhr" == error && ajax(url, data, obj) || "beacon" == error && sync(url, data, obj))) {
              loop(url, data, obj);
            }
          }
        } else {
          loop(url, func(el, meta), el.get(node));
        }
      }
      url = el.get(value);
      error = (url = trim(url)).hitcount;
      url.hitcount = error ? error + 1 : 1;
      url = el.get(value);
      delete trim(url).pending_experiments;
      el.set(node, name, true);
    }
    /**
     * @param {!Object} self
     * @return {undefined}
     */
    function fill(self) {
      if ((options.gaData = options.gaData || {}).expId) {
        self.set(mt, (options.gaData = options.gaData || {}).expId);
      }
      if ((options.gaData = options.gaData || {}).expVar) {
        self.set(groups, (options.gaData = options.gaData || {}).expVar);
      }
      var params = self.get(value);
      if (params = trim(params).pending_experiments) {
        /** @type {!Array} */
        var drilldownLevelLabels = [];
        for (i in params) {
          if (params.hasOwnProperty(i) && params[i]) {
            drilldownLevelLabels.push(encodeURIComponent(i) + "." + encodeURIComponent(params[i]));
          }
        }
        /** @type {string} */
        var i = drilldownLevelLabels.join("!");
      } else {
        i = void 0;
      }
      if (i) {
        self.set(match, i, true);
      }
    }
    /**
     * @return {undefined}
     */
    function create() {
      if (options.navigator && "preview" == options.navigator.loadPurpose) {
        throw "abort";
      }
    }
    /**
     * @param {!Object} cmp
     * @return {undefined}
     */
    function provide(cmp) {
      var value = options.gaDevIds;
      if (isArray(value) && 0 != value.length) {
        cmp.set("&did", value.join(","), true);
      }
    }
    /**
     * @param {!Object} valid
     * @return {undefined}
     */
    function submit(valid) {
      if (!valid.get(value)) {
        throw "abort";
      }
    }
    /**
     * @param {!Object} node
     * @return {undefined}
     */
    function process(node) {
      var i = equal(node, status);
      if (500 <= i) {
        push(15);
      }
      var value = func(node, x);
      if ("transaction" != value && "item" != value) {
        value = equal(node, height);
        /** @type {number} */
        var now = (new Date).getTime();
        var s = equal(node, handler);
        if (0 == s && node.set(handler, now), 0 < (s = Math.round(2 * (now - s) / 1E3)) && (value = Math.min(value + s, 20), node.set(handler, now)), 0 >= value) {
          throw "abort";
        }
        node.set(height, --value);
      }
      node.set(status, ++i);
    }
    /**
     * @param {string} type
     * @param {!Function} msg
     * @param {!Function} t
     * @param {!Function} val
     * @return {undefined}
     */
    function expect(type, msg, t, val) {
      /**
       * @return {?}
       */
      msg[type] = function() {
        try {
          return val && push(val), t.apply(this, arguments);
        } catch (value) {
          throw callback("exc", type, value && value.name), value;
        }
      };
    }
    /**
     * @param {string} value
     * @param {string} component
     * @param {string} el
     * @return {?}
     */
    function getValue(value, component, el) {
      if ("none" == component) {
        /** @type {string} */
        component = "";
      }
      /** @type {!Array} */
      var type = [];
      var rgb = map(value);
      /** @type {number} */
      value = "__utma" == value ? 6 : 2;
      /** @type {number} */
      var i = 0;
      for (; i < rgb.length; i++) {
        var item = ("" + rgb[i]).split(".");
        if (item.length >= value) {
          type.push({
            hash : item[0],
            R : rgb[i],
            O : item
          });
        }
      }
      if (0 != type.length) {
        return 1 == type.length ? type[0] : getPath(component, type) || getPath(el, type) || getPath(null, type) || type[0];
      }
    }
    /**
     * @param {string} type
     * @param {!Array} data
     * @return {?}
     */
    function getPath(type, data) {
      if (null == type) {
        /** @type {number} */
        var primaryKey = type = 1;
      } else {
        primaryKey = get(type);
        type = get(assert(type, ".") ? type.substring(1) : "." + type);
      }
      /** @type {number} */
      var i = 0;
      for (; i < data.length; i++) {
        if (data[i].hash == primaryKey || data[i].hash == type) {
          return data[i];
        }
      }
    }
    /**
     * @param {!Array} t
     * @param {number} index
     * @return {?}
     */
    function formatDate(t, index) {
      /** @type {!Date} */
      var d = new Date;
      /** @type {(Navigator|null)} */
      var n = options.navigator;
      /** @type {!PluginArray} */
      var versions = n.plugins || [];
      /** @type {!Array} */
      t = [t, n.userAgent, d.getTimezoneOffset(), d.getYear(), d.getDate(), d.getHours(), d.getMinutes() + index];
      /** @type {number} */
      index = 0;
      for (; index < versions.length; ++index) {
        t.push(versions[index].description);
      }
      return get(t.join("."));
    }
    /**
     * @param {?} name
     * @param {number} sec
     * @return {?}
     */
    function render(name, sec) {
      /** @type {!Date} */
      var d = new Date;
      /** @type {(Navigator|null)} */
      var n = options.navigator;
      /** @type {number} */
      var candidatesWidth = d.getHours() + Math.floor((d.getMinutes() + sec) / 60);
      return get([name, n.userAgent, n.language || "", d.getTimezoneOffset(), d.getYear(), d.getDate() + Math.floor(candidatesWidth / 24), (24 + candidatesWidth) % 24, (60 + d.getMinutes() + sec) % 60].join("."));
    }
    /**
     * @param {!NodeList} list
     * @param {string} domain
     * @return {?}
     */
    function emit(list, domain) {
      if (domain == doc.location.hostname) {
        return false;
      }
      /** @type {number} */
      var i = 0;
      for (; i < list.length; i++) {
        if (list[i] instanceof RegExp) {
          if (list[i].test(domain)) {
            return true;
          }
        } else {
          if (0 <= domain.indexOf(list[i])) {
            return true;
          }
        }
      }
      return false;
    }
    /**
     * @param {?} start
     * @param {?} duration
     * @return {?}
     */
    function out(start, duration) {
      return duration != formatDate(start, 0) && duration != formatDate(start, -1) && duration != formatDate(start, -2) && duration != render(start, 0) && duration != render(start, -1) && duration != render(start, -2);
    }
    /**
     * @param {string} tag
     * @return {?}
     */
    function m(tag) {
      return 0 <= tag.indexOf(".") || 0 <= tag.indexOf(":");
    }
    /**
     * @param {string} data
     * @return {?}
     */
    function get(data) {
      var i;
      /** @type {number} */
      var value = 1;
      if (data) {
        /** @type {number} */
        value = 0;
        /** @type {number} */
        i = data.length - 1;
        for (; 0 <= i; i--) {
          var r = data.charCodeAt(i);
          value = 0 != (r = 266338304 & (value = (value << 6 & 268435455) + r + (r << 14))) ? value ^ r >> 21 : value;
        }
      }
      return value;
    }
    /**
     * @param {number} width
     * @return {undefined}
     */
    var Buffer = function(width) {
      this.w = width || [];
    };
    /**
     * @param {!Object} name
     * @return {undefined}
     */
    Buffer.prototype.set = function(name) {
      /** @type {boolean} */
      this.w[name] = true;
    };
    /**
     * @return {?}
     */
    Buffer.prototype.encode = function() {
      /** @type {!Array} */
      var e = [];
      /** @type {number} */
      var i = 0;
      for (; i < this.w.length; i++) {
        if (this.w[i]) {
          e[Math.floor(i / 6)] ^= 1 << i % 6;
        }
      }
      /** @type {number} */
      i = 0;
      for (; i < e.length; i++) {
        /** @type {string} */
        e[i] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(e[i] || 0);
      }
      return e.join("") + "~";
    };
    var g = new Buffer;
    /**
     * @param {!Object} value
     * @return {?}
     */
    var serialize = function(value) {
      value = getData(value);
      value = new Buffer(value);
      var vals = g.w.slice();
      /** @type {number} */
      var i = 0;
      for (; i < value.w.length; i++) {
        vals[i] = vals[i] || value.w[i];
      }
      return (new Buffer(vals)).encode();
    };
    /**
     * @param {!Object} e
     * @return {?}
     */
    var getData = function(e) {
      return e = e.get(input), isArray(e) || (e = []), e;
    };
    /**
     * @param {!Function} b
     * @return {?}
     */
    var stringify = function(b) {
      return "function" == typeof b;
    };
    /**
     * @param {!Object} obj
     * @return {?}
     */
    var isArray = function(obj) {
      return "[object Array]" == Object.prototype.toString.call(Object(obj));
    };
    /**
     * @param {!Object} condition
     * @return {?}
     */
    var closest = function(condition) {
      return null != condition && -1 < (condition.constructor + "").indexOf("String");
    };
    /**
     * @param {string} value
     * @param {string} key
     * @return {?}
     */
    var assert = function(value, key) {
      return 0 == value.indexOf(key);
    };
    /**
     * @param {string} name
     * @return {?}
     */
    var normalize = function(name) {
      return name ? name.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "") : "";
    };
    /**
     * @return {?}
     */
    var getMetrics = function() {
      /** @type {string} */
      var label = options.navigator.userAgent + (doc.cookie ? doc.cookie : "") + (doc.referrer ? doc.referrer : "");
      /** @type {number} */
      var pos = label.length;
      /** @type {number} */
      var readersLength = options.history.length;
      for (; 0 < readersLength;) {
        /** @type {string} */
        label = label + (readersLength-- ^ pos++);
      }
      return [val() ^ 2147483647 & get(label), Math.round((new Date).getTime() / 1E3)].join(".");
    };
    /**
     * @param {string} name
     * @return {?}
     */
    var f = function(name) {
      /** @type {!Element} */
      var t = doc.createElement("img");
      return t.width = 1, t.height = 1, t.src = name, t;
    };
    /**
     * @return {undefined}
     */
    var name = function() {
    };
    /**
     * @param {?} value
     * @return {?}
     */
    var parse = function(value) {
      return encodeURIComponent instanceof Function ? encodeURIComponent(value) : (push(28), value);
    };
    /**
     * @param {!HTMLElement} target
     * @param {string} type
     * @param {!Function} fn
     * @param {boolean} selector
     * @return {undefined}
     */
    var on = function(target, type, fn, selector) {
      try {
        if (target.addEventListener) {
          target.addEventListener(type, fn, !!selector);
        } else {
          if (target.attachEvent) {
            target.attachEvent("on" + type, fn);
          }
        }
      } catch (e) {
        push(27);
      }
    };
    /** @type {!RegExp} */
    var rNum = /^[\w\-:/.?=&%!]+$/;
    /**
     * @param {string} node
     * @param {string} val
     * @param {!Object} n
     * @return {undefined}
     */
    var execute = function(node, val, n) {
      if (node) {
        if (n) {
          /** @type {string} */
          n = "";
          if (val && rNum.test(val)) {
            /** @type {string} */
            n = ' id="' + val + '"';
          }
          if (rNum.test(node)) {
            doc.write("<script" + n + ' src="' + node + '">\x3c/script>');
          }
        } else {
          /** @type {string} */
          (n = doc.createElement("script")).type = "text/javascript";
          /** @type {boolean} */
          n.async = true;
          /** @type {string} */
          n.src = node;
          if (val) {
            /** @type {string} */
            n.id = val;
          }
          (node = doc.getElementsByTagName("script")[0]).parentNode.insertBefore(n, node);
        }
      }
    };
    /**
     * @param {string} d
     * @param {string} options
     * @return {?}
     */
    var getKey = function(d, options) {
      return find(doc.location[options ? "href" : "search"], d);
    };
    /**
     * @param {string} prefixes
     * @param {string} str
     * @return {?}
     */
    var find = function(prefixes, str) {
      return (prefixes = prefixes.match("(?:&|#|\\?)" + parse(str).replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1") + "=([^&#]*)")) && 2 == prefixes.length ? prefixes[1] : "";
    };
    /**
     * @return {?}
     */
    var toString = function() {
      /** @type {string} */
      var fntxt = "" + doc.location.hostname;
      return 0 == fntxt.indexOf("www.") ? fntxt.substring(4) : fntxt;
    };
    /**
     * @param {string} url
     * @param {string} value
     * @return {?}
     */
    var has = function(url, value) {
      var index = url.indexOf(value);
      return (5 == index || 6 == index) && ("/" == (url = url.charAt(index + value.length)) || "?" == url || "" == url || ":" == url);
    };
    /**
     * @param {!Array} path
     * @param {!Object} d
     * @return {?}
     */
    var reduce = function(path, d) {
      if (1 == d.length && null != d[0] && "object" == typeof d[0]) {
        return d[0];
      }
      var value = {};
      /** @type {number} */
      var end_flight_idx = Math.min(path.length + 1, d.length);
      /** @type {number} */
      var i = 0;
      for (; i < end_flight_idx; i++) {
        if ("object" == typeof d[i]) {
          var key;
          for (key in d[i]) {
            if (d[i].hasOwnProperty(key)) {
              value[key] = d[i][key];
            }
          }
          break;
        }
        if (i < path.length) {
          value[path[i]] = d[i];
        }
      }
      return value;
    };
    /**
     * @return {undefined}
     */
    var type = function() {
      /** @type {!Array} */
      this.keys = [];
      this.values = {};
      this.m = {};
    };
    /**
     * @param {!Object} name
     * @param {!Object} val
     * @param {boolean} r
     * @return {undefined}
     */
    type.prototype.set = function(name, val, r) {
      this.keys.push(name);
      if (r) {
        /** @type {!Object} */
        this.m[":" + name] = val;
      } else {
        /** @type {!Object} */
        this.values[":" + name] = val;
      }
    };
    /**
     * @param {!Object} key
     * @return {?}
     */
    type.prototype.get = function(key) {
      return this.m.hasOwnProperty(":" + key) ? this.m[":" + key] : this.values[":" + key];
    };
    /**
     * @param {!Function} fn
     * @return {undefined}
     */
    type.prototype.map = function(fn) {
      /** @type {number} */
      var i = 0;
      for (; i < this.keys.length; i++) {
        var key = this.keys[i];
        var array = this.get(key);
        if (array) {
          fn(key, array);
        }
      }
    };
    var _userAgent;
    var preserveHTML;
    var tick;
    var ret;
    var s;
    /** @type {!Window} */
    var options = window;
    /** @type {!HTMLDocument} */
    var doc = document;
    /**
     * @param {!Function} msg
     * @param {number} t
     * @return {?}
     */
    var merge = function(msg, t) {
      return setTimeout(msg, t);
    };
    /** @type {!Window} */
    var win = window;
    /** @type {!HTMLDocument} */
    var obj = document;
    /**
     * @param {number} e
     * @return {?}
     */
    var read = function(e) {
      var b = win._gaUserPrefs;
      if (b && b.ioo && b.ioo() || e && true === win["ga-disable-" + e]) {
        return true;
      }
      try {
        /** @type {!Object} */
        var h = win.external;
        if (h && h._gaUserPrefs && "oo" == h._gaUserPrefs) {
          return true;
        }
      } catch (e) {
      }
      /** @type {!Array} */
      e = [];
      /** @type {!Array<string>} */
      b = obj.cookie.split(";");
      /** @type {!RegExp} */
      h = /^\s*AMP_TOKEN=\s*(.*?)\s*$/;
      /** @type {number} */
      var i = 0;
      for (; i < b.length; i++) {
        /** @type {(Array<string>|null)} */
        var p = b[i].match(h);
        if (p) {
          e.push(p[1]);
        }
      }
      /** @type {number} */
      b = 0;
      for (; b < e.length; b++) {
        if ("$OPT_OUT" == decodeURIComponent(e[b])) {
          return true;
        }
      }
      return false;
    };
    /**
     * @param {string} e
     * @return {?}
     */
    var map = function(e) {
      /** @type {!Array} */
      var r = [];
      /** @type {!Array<string>} */
      var Assignments = doc.cookie.split(";");
      /** @type {!RegExp} */
      e = new RegExp("^\\s*" + e + "=\\s*(.*?)\\s*$");
      /** @type {number} */
      var ii = 0;
      for (; ii < Assignments.length; ii++) {
        /** @type {(Array<string>|null)} */
        var m = Assignments[ii].match(e);
        if (m) {
          r.push(m[1]);
        }
      }
      return r;
    };
    /**
     * @param {!Object} n
     * @param {string} e
     * @param {string} result
     * @param {string} value
     * @param {string} code
     * @param {number} index
     * @return {?}
     */
    var cb = function(n, e, result, value, code, index) {
      if (!(code = !read(code) && !(regex.test(doc.location.hostname) || "/" == result && regexIso8601.test(value)))) {
        return false;
      }
      if (e && 1200 < e.length && (e = e.substring(0, 1200)), result = n + "=" + e + "; path=" + result + "; ", index && (result = result + ("expires=" + (new Date((new Date).getTime() + index)).toGMTString() + "; ")), value && "none" !== value && (result = result + ("domain=" + value + ";")), value = doc.cookie, doc.cookie = result, !(value = value != doc.cookie)) {
        e: {
          n = map(n);
          /** @type {number} */
          value = 0;
          for (; value < n.length; value++) {
            if (e == n[value]) {
              /** @type {boolean} */
              value = true;
              break e;
            }
          }
          /** @type {boolean} */
          value = false;
        }
      }
      return value;
    };
    /**
     * @param {string} data
     * @return {?}
     */
    var resolve = function(data) {
      return encodeURIComponent ? encodeURIComponent(data).replace(/\(/g, "%28").replace(/\)/g, "%29") : data;
    };
    /** @type {!RegExp} */
    var regexIso8601 = /^(www\.)?google(\.com?)?(\.[a-z]{2})?$/;
    /** @type {!RegExp} */
    var regex = /(^|\.)doubleclick\.net$/i;
    /** @type {!RegExp} */
    var typeReg1 = /^.*Version\/?(\d+)[^\d].*$/i;
    /**
     * @return {?}
     */
    var browser = function() {
      if (void 0 !== options.__ga4__) {
        return options.__ga4__;
      }
      if (void 0 === _userAgent) {
        /** @type {string} */
        var userAgent = options.navigator.userAgent;
        if (userAgent) {
          /** @type {string} */
          var ua = userAgent;
          try {
            /** @type {string} */
            ua = decodeURIComponent(userAgent);
          } catch (e) {
          }
          if (userAgent = !(0 <= ua.indexOf("Chrome") || 0 <= ua.indexOf("CriOS") || !(0 <= ua.indexOf("Safari/") || 0 <= ua.indexOf("Safari,")))) {
            /** @type {boolean} */
            userAgent = 11 <= ((ua = typeReg1.exec(ua)) ? Number(ua[1]) : -1);
          }
          /** @type {boolean} */
          _userAgent = userAgent;
        } else {
          /** @type {boolean} */
          _userAgent = false;
        }
      }
      return _userAgent;
    };
    /** @type {!RegExp} */
    var util = /^https?:\/\/[^/]*cdn\.ampproject\.org\//;
    /** @type {!Array} */
    var sorted = [];
    /**
     * @return {undefined}
     */
    var D = function() {
      self.D([name]);
    };
    /**
     * @param {!Function} next
     * @param {?} index
     * @return {?}
     */
    var success = function(next, index) {
      var output = map("AMP_TOKEN");
      return 1 < output.length ? (push(55), false) : "$OPT_OUT" == (output = decodeURIComponent(output[0] || "")) || "$ERROR" == output || read(index) ? (push(62), false) : util.test(doc.referrer) || "$NOT_FOUND" != output ? void 0 !== s ? (push(56), merge(function() {
        next(s);
      }, 0), true) : preserveHTML ? (sorted.push(next), true) : "$RETRIEVING" == output ? (push(57), merge(function() {
        success(next, index);
      }, 1E4), true) : (preserveHTML = true, output && "$" != output[0] || (call("$RETRIEVING", 3E4), setTimeout(_quickFormat, 3E4), output = ""), !!upload(output, index) && (sorted.push(next), true)) : (push(68), false);
    };
    /**
     * @param {string} e
     * @param {?} index
     * @param {string} done
     * @return {?}
     */
    var upload = function(e, index, done) {
      if (!window.JSON) {
        return push(58), false;
      }
      var response = options.XMLHttpRequest;
      if (!response) {
        return push(59), false;
      }
      var xhr = new response;
      return "withCredentials" in xhr ? (xhr.open("POST", (done || "https://ampcid.google.com/v1/publisher:getClientId") + "?key=AIzaSyA65lEHUEizIsNtlbNo-l2K18dT680nsaM", true), xhr.withCredentials = true, xhr.setRequestHeader("Content-Type", "text/plain"), xhr.onload = function() {
        if (preserveHTML = false, 4 == xhr.readyState) {
          try {
            if (200 != xhr.status) {
              push(61);
              extend("", "$ERROR", 3E4);
            }
            /** @type {*} */
            var options = JSON.parse(xhr.responseText);
            if (options.optOut) {
              push(63);
              extend("", "$OPT_OUT", 31536E6);
            } else {
              if (options.clientId) {
                extend(options.clientId, options.securityToken, 31536E6);
              } else {
                if (!done && options.alternateUrl) {
                  if (tick) {
                    clearTimeout(tick);
                  }
                  /** @type {boolean} */
                  preserveHTML = true;
                  upload(e, index, options.alternateUrl);
                } else {
                  push(64);
                  extend("", "$NOT_FOUND", 36E5);
                }
              }
            }
          } catch (e) {
            push(65);
            extend("", "$ERROR", 3E4);
          }
          /** @type {null} */
          xhr = null;
        }
      }, response = {
        originScope : "AMP_ECID_GOOGLE"
      }, e && (response.securityToken = e), xhr.send(JSON.stringify(response)), tick = merge(function() {
        push(66);
        extend("", "$ERROR", 3E4);
      }, 1E4), true) : (push(60), false);
    };
    /**
     * @return {undefined}
     */
    var _quickFormat = function() {
      /** @type {boolean} */
      preserveHTML = false;
    };
    /**
     * @param {string} o
     * @param {number} target
     * @return {?}
     */
    var call = function(o, target) {
      if (void 0 === ret) {
        /** @type {string} */
        ret = "";
        var crossfilterable_layers = end();
        /** @type {number} */
        var layer_i = 0;
        for (; layer_i < crossfilterable_layers.length; layer_i++) {
          var i = crossfilterable_layers[layer_i];
          if (cb("AMP_TOKEN", encodeURIComponent(o), "/", i, "", target)) {
            return void(ret = i);
          }
        }
      }
      cb("AMP_TOKEN", encodeURIComponent(o), "/", ret, "", target);
    };
    /**
     * @param {string} key
     * @param {string} obj
     * @param {number} i
     * @return {undefined}
     */
    var extend = function(key, obj, i) {
      if (tick) {
        clearTimeout(tick);
      }
      if (obj) {
        call(obj, i);
      }
      /** @type {string} */
      s = key;
      obj = sorted;
      /** @type {!Array} */
      sorted = [];
      /** @type {number} */
      i = 0;
      for (; i < obj.length; i++) {
        obj[i](key);
      }
    };
    /**
     * @return {?}
     */
    var updatePresenterWindow = function() {
      return (Te || "https:" == doc.location.protocol ? "https:" : "http:") + "//www.google-analytics.com";
    };
    /**
     * @param {string} url
     * @param {string} options
     * @param {string} obj
     * @return {undefined}
     */
    var loop = function(url, options, obj) {
      if (obj = obj || name, 2036 >= options.length) {
        test(url, options, obj);
      } else {
        if (!(8192 >= options.length)) {
          throw callback("len", options.length), new function(specName) {
            /** @type {string} */
            this.name = "len";
            /** @type {string} */
            this.message = specName + "-8192";
          }(options.length);
        }
        if (!(sync(url, options, obj) || ajax(url, options, obj))) {
          test(url, options, obj);
        }
      }
    };
    /**
     * @param {string} url
     * @param {string} params
     * @param {!Object} options
     * @param {string} file
     * @return {undefined}
     */
    var request = function(url, params, options, file) {
      ajax(url + "?" + params, "", file = file || name, options);
    };
    /**
     * @param {string} v
     * @param {string} key
     * @param {string} callback
     * @return {undefined}
     */
    var test = function(v, key, callback) {
      var req = f(v + "?" + key);
      /** @type {function(): undefined} */
      req.onload = req.onerror = function() {
        /** @type {null} */
        req.onload = null;
        /** @type {null} */
        req.onerror = null;
        callback();
      };
    };
    /**
     * @param {string} name
     * @param {string} type
     * @param {string} cb
     * @param {!Object} opts
     * @return {?}
     */
    var ajax = function(name, type, cb, opts) {
      var XMLHttpRequest = options.XMLHttpRequest;
      if (!XMLHttpRequest) {
        return false;
      }
      var xhr = new XMLHttpRequest;
      return "withCredentials" in xhr && (name = name.replace(/^http:/, "https:"), xhr.open("POST", name, true), xhr.withCredentials = true, xhr.setRequestHeader("Content-Type", "text/plain"), xhr.onreadystatechange = function() {
        if (4 == xhr.readyState) {
          if (opts) {
            try {
              var html = xhr.responseText;
              if (1 > html.length) {
                callback("xhr", "ver", "0");
                cb();
              } else {
                if ("1" != html.charAt(0)) {
                  callback("xhr", "ver", String(html.length));
                  cb();
                } else {
                  if (3 < opts.count++) {
                    callback("xhr", "tmr", "" + opts.count);
                    cb();
                  } else {
                    if (1 == html.length) {
                      cb();
                    } else {
                      var e = html.charAt(1);
                      if ("d" == e) {
                        request("https://stats.g.doubleclick.net/j/collect", opts.U, opts, cb);
                      } else {
                        if ("g" == e) {
                          /** @type {string} */
                          var SomeImperativeViewport = "https://www.google.%/ads/ga-audiences".replace("%", "com");
                          test(SomeImperativeViewport, opts.google, cb);
                          var port = html.substring(2);
                          if (port) {
                            if (/^[a-z.]{1,6}$/.test(port)) {
                              /** @type {string} */
                              var url = "https://www.google.%/ads/ga-audiences".replace("%", port);
                              test(url, opts.google, name);
                            } else {
                              callback("tld", "bcc", port);
                            }
                          }
                        } else {
                          callback("xhr", "brc", e);
                          cb();
                        }
                      }
                    }
                  }
                }
              }
            } catch (e) {
              callback("xhr", "rsp");
              cb();
            }
          } else {
            cb();
          }
          /** @type {null} */
          xhr = null;
        }
      }, xhr.send(type), true);
    };
    /**
     * @param {string} url
     * @param {string} data
     * @param {string} callback
     * @return {?}
     */
    var sync = function(url, data, callback) {
      return !!options.navigator.sendBeacon && (!!options.navigator.sendBeacon(url, data) && (callback(), true));
    };
    /**
     * @param {string} arr
     * @param {string} key
     * @param {string} text
     * @return {undefined}
     */
    var callback = function(arr, key, text) {
      if (!(1 <= 100 * Math.random() || read("?"))) {
        /** @type {!Array} */
        arr = ["t=error", "_e=" + arr, "_v=j67", "sr=1"];
        if (key) {
          arr.push("_f=" + key);
        }
        if (text) {
          arr.push("_m=" + parse(text.substring(0, 100)));
        }
        arr.push("aip=1");
        arr.push("z=" + val());
        test("https://www.google-analytics.com/u/d", arr.join("&"), name);
      }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    var trim = function(e) {
      var progt = options.gaData = options.gaData || {};
      return progt[e] = progt[e] || {};
    };
    /**
     * @return {undefined}
     */
    var Set = function() {
      /** @type {!Array} */
      this.M = [];
    };
    /**
     * @param {!Object} val
     * @return {undefined}
     */
    Set.prototype.add = function(val) {
      this.M.push(val);
    };
    /**
     * @param {?} input
     * @return {undefined}
     */
    Set.prototype.D = function(input) {
      try {
        /** @type {number} */
        var f = 0;
        for (; f < this.M.length; f++) {
          var item = input.get(this.M[f]);
          if (item && stringify(item)) {
            item.call(options, input);
          }
        }
      } catch (e) {
      }
      if ((f = input.get(node)) != name && stringify(f)) {
        input.set(node, name, true);
        setTimeout(f, 10);
      }
    };
    /**
     * @return {?}
     */
    var val = function() {
      return Math.round(2147483647 * Math.random());
    };
    /**
     * @return {?}
     */
    var getRandomString = function() {
      try {
        /** @type {!Uint32Array} */
        var userNonce = new Uint32Array(1);
        return options.crypto.getRandomValues(userNonce), 2147483647 & userNonce[0];
      } catch (e) {
        return val();
      }
    };
    /**
     * @return {undefined}
     */
    var Vector = function() {
      this.data = new type;
    };
    var store = new type;
    /** @type {!Array} */
    var spheres = [];
    /**
     * @param {!Object} key
     * @return {?}
     */
    Vector.prototype.get = function(key) {
      var v = require(key);
      var nb = this.data.get(key);
      return v && null == nb && (nb = stringify(v.defaultValue) ? v.defaultValue() : v.defaultValue), v && v.Z ? v.Z(this, key, nb) : nb;
    };
    /**
     * @param {!Object} val
     * @param {!Object} type
     * @return {?}
     */
    var func = function(val, type) {
      return null == (val = val.get(type)) ? "" : "" + val;
    };
    /**
     * @param {!Object} key
     * @param {!Object} value
     * @return {?}
     */
    var equal = function(key, value) {
      return null == (key = key.get(value)) || "" === key ? 0 : 1 * key;
    };
    /**
     * @param {!Object} name
     * @param {string} val
     * @param {boolean} i
     * @return {undefined}
     */
    Vector.prototype.set = function(name, val, i) {
      if (name) {
        if ("object" == typeof name) {
          var key;
          for (key in name) {
            if (name.hasOwnProperty(key)) {
              validate(this, key, name[key], i);
            }
          }
        } else {
          validate(this, name, val, i);
        }
      }
    };
    /**
     * @param {!Object} o
     * @param {!Object} name
     * @param {string} v
     * @param {boolean} n
     * @return {undefined}
     */
    var validate = function(o, name, v, n) {
      if (null != v) {
        switch(name) {
          case value:
            MOBILE_TEL_REGEXP.test(v);
        }
      }
      var a = require(name);
      if (a && a.o) {
        a.o(o, name, v, n);
      } else {
        o.data.set(name, v, n);
      }
    };
    /**
     * @param {string} data
     * @param {string} byteOffset
     * @param {number} length
     * @param {string} array
     * @param {!Object} other
     * @return {undefined}
     */
    var Float32Array = function(data, byteOffset, length, array, other) {
      /** @type {string} */
      this.name = data;
      /** @type {string} */
      this.F = byteOffset;
      /** @type {string} */
      this.Z = array;
      /** @type {!Object} */
      this.o = other;
      /** @type {number} */
      this.defaultValue = length;
    };
    /**
     * @param {!Object} path
     * @return {?}
     */
    var require = function(path) {
      var val = store.get(path);
      if (!val) {
        /** @type {number} */
        var iter_sph = 0;
        for (; iter_sph < spheres.length; iter_sph++) {
          var test = spheres[iter_sph];
          var value = test[0].exec(path);
          if (value) {
            val = test[1](value);
            store.set(val.name, val);
            break;
          }
        }
      }
      return val;
    };
    /**
     * @param {string} value
     * @param {string} key
     * @param {!Function} a
     * @param {!Function} v
     * @param {!Function} minutes
     * @return {?}
     */
    var $ = function(value, key, a, v, minutes) {
      return value = new Float32Array(value, key, a, v, minutes), store.set(value.name, value), value.name;
    };
    /**
     * @param {string} hash
     * @param {!Function} message
     * @return {undefined}
     */
    var getValueOfBestMatchingHashEntry = function(hash, message) {
      spheres.push([new RegExp("^" + hash + "$"), message]);
    };
    /**
     * @param {string} value
     * @param {string} id
     * @param {?} num
     * @return {?}
     */
    var parseInt = function(value, id, num) {
      return $(value, id, num, void 0, minuteStep);
    };
    /**
     * @return {undefined}
     */
    var minuteStep = function() {
    };
    var i = closest(window.GoogleAnalyticsObject) && normalize(window.GoogleAnalyticsObject) || "ga";
    /** @type {!RegExp} */
    var other = /^(?:utma\.)?\d+\.\d+$/;
    /** @type {!RegExp} */
    var timeBack = /^amp-[\w.-]{22,64}$/;
    /** @type {boolean} */
    var Te = false;
    var file = parseInt("apiVersion", "v");
    var d = parseInt("clientVersion", "_v");
    $("anonymizeIp", "aip");
    var time = $("adSenseId", "a");
    var x = $("hitType", "t");
    var node = $("hitCallback");
    var meta = $("hitPayload");
    $("nonInteraction", "ni");
    $("currencyCode", "cu");
    $("dataSource", "ds");
    var option = $("useBeacon", void 0, false);
    var state = $("transport");
    $("sessionControl", "sc", "");
    $("sessionGroup", "sg");
    $("queueTime", "qt");
    var cell = $("_s", "_s");
    $("screenName", "cd");
    var html = $("location", "dl", "");
    var filter = $("referrer", "dr");
    var r2 = $("page", "dp", "");
    $("hostname", "dh");
    var language = $("language", "ul");
    var table = $("encoding", "de");
    $("title", "dt", function() {
      return doc.title || void 0;
    });
    getValueOfBestMatchingHashEntry("contentGroup([0-9]+)", function(array_list) {
      return new Float32Array(array_list[0], "cg" + array_list[1]);
    });
    var str = $("screenColors", "sd");
    var seed = $("screenResolution", "sr");
    var skeletonId = $("viewportSize", "vp");
    var fn = $("javaEnabled", "je");
    var start = $("flashVersion", "fl");
    $("campaignId", "ci");
    $("campaignName", "cn");
    $("campaignSource", "cs");
    $("campaignMedium", "cm");
    $("campaignKeyword", "ck");
    $("campaignContent", "cc");
    var $music = $("eventCategory", "ec");
    var selectTargElm = $("eventAction", "ea");
    var str_origin = $("eventLabel", "el");
    var percent = $("eventValue", "ev");
    var relativeUrlImg = $("socialNetwork", "sn");
    var $realtime = $("socialAction", "sa");
    var en = $("socialTarget", "st");
    var p = $("l1", "plt");
    var point = $("l2", "pdt");
    var active = $("l3", "dns");
    var foo = $("l4", "rrt");
    var fileName = $("l5", "srt");
    var sub = $("l6", "tcp");
    var cur = $("l7", "dit");
    var property = $("l8", "clt");
    var message = $("timingCategory", "utc");
    var $gBCRBottom = $("timingVar", "utv");
    var ht = $("timingLabel", "utl");
    var $existing_results = $("timingValue", "utt");
    $("appName", "an");
    $("appVersion", "av", "");
    $("appId", "aid", "");
    $("appInstallerId", "aiid", "");
    $("exDescription", "exd");
    $("exFatal", "exf");
    var mt = $("expId", "xid");
    var groups = $("expVar", "xvar");
    var match = $("exp", "exp");
    var endColorCoords = $("_utma", "_utma");
    var DOM = $("_utmz", "_utmz");
    var setting = $("_utmht", "_utmht");
    var status = $("_hc", void 0, 0);
    var handler = $("_ti", void 0, 0);
    var height = $("_to", void 0, 20);
    getValueOfBestMatchingHashEntry("dimension([0-9]+)", function(array_list) {
      return new Float32Array(array_list[0], "cd" + array_list[1]);
    });
    getValueOfBestMatchingHashEntry("metric([0-9]+)", function(array_list) {
      return new Float32Array(array_list[0], "cm" + array_list[1]);
    });
    $("linkerParam", void 0, void 0, function(x) {
      var n = x.get(key);
      var i = x.get(o) || "";
      if (n = "_ga=2." + parse(render(i + n, 0) + "." + i + "-" + n), (i = x.get(j)) && x.get(id)) {
        var width = equal(x, y);
        if (1E3 * width + equal(x, opacity) <= (new Date).getTime()) {
          push(76);
          /** @type {string} */
          x = "";
        } else {
          push(44);
          /** @type {string} */
          x = "&_gac=1." + parse([render(i, 0), width, i].join("."));
        }
      } else {
        /** @type {string} */
        x = "";
      }
      return n + x;
    }, minuteStep);
    var config = $("usage", "_u");
    var input = $("_um");
    $("forceSSL", void 0, void 0, function() {
      return Te;
    }, function(canCreateDiscussions, isSlidingUp, dontForceConstraints) {
      push(34);
      /** @type {boolean} */
      Te = !!dontForceConstraints;
    });
    var series = $("_j1", "jid");
    var c = $("_j2", "gjid");
    getValueOfBestMatchingHashEntry("\\&(.*)", function(colors) {
      var clickedItemId;
      var cfgColors;
      var p = new Float32Array(colors[0], colors[1]);
      var day = (clickedItemId = colors[0].substring(1), store.map(function(canCreateDiscussions, thisItemModel) {
        if (thisItemModel.F == clickedItemId) {
          cfgColors = thisItemModel;
        }
      }), cfgColors && cfgColors.name);
      return day && (p.Z = function(date) {
        return date.get(day);
      }, p.o = function(b, input, x, n) {
        b.set(day, x, n);
      }, p.F = void 0), p;
    });
    var specvid = parseInt("_oot");
    var $rating = $("previewTask");
    var pornResult = $("checkProtocolTask");
    var result = $("validationTask");
    var autotypedRaised = $("checkStorageTask");
    var illegalResult = $("historyImportTask");
    var differenceThreeAdvance = $("samplerTask");
    var event = $("_rlt");
    var host = $("buildHitTask");
    var instance = $("sendHitTask");
    var funcRunBCount = $("ceTask");
    var funcRunCCount = $("devIdTask");
    var resultOfFirstTry = $("timingTask");
    var funcRunACount = $("displayFeaturesTask");
    var resultOfSecondTry = $("customTask");
    var v = parseInt("name");
    var key = parseInt("clientId", "cid");
    var date = parseInt("clientIdTime");
    var delta = parseInt("storedClientId");
    var url = $("userId", "uid");
    var value = parseInt("trackingId", "tid");
    var path = parseInt("cookieName", void 0, "_ga");
    var context = parseInt("cookieDomain");
    var b = parseInt("cookiePath", void 0, "/");
    var position = parseInt("cookieExpires", void 0, 63072E3);
    var plugin = parseInt("cookieUpdate", void 0, true);
    var thing = parseInt("legacyCookieDomain");
    var uid = parseInt("legacyHistoryImport", void 0, true);
    var target = parseInt("storage", void 0, "cookie");
    var display = parseInt("allowLinker", void 0, false);
    var code = parseInt("allowAnchor", void 0, true);
    var length = parseInt("sampleRate", "sf", 100);
    var offset = parseInt("siteSpeedSampleRate", void 0, 1);
    var hash = parseInt("alwaysSendReferrer", void 0, false);
    var o = parseInt("_gid", "_gid");
    var x2 = parseInt("_gcn");
    var which = parseInt("useAmpClientId");
    var j = parseInt("_gclid");
    var y = parseInt("_gt");
    var opacity = parseInt("_ge", void 0, 7776E6);
    var data = parseInt("_gclsrc");
    var id = parseInt("storeGac", void 0, true);
    var label = $("transportUrl");
    var r = $("_r", "_r");
    var header = $("_dp");
    /**
     * @param {!Function} next
     * @return {undefined}
     */
    var each = function(next) {
      var a = {};
      if (getPerformaceInfo(a) || isEmpty(a)) {
        var b = a[p];
        if (!(null == b || 1 / 0 == b || isNaN(b))) {
          if (0 < b) {
            contains(a, active);
            contains(a, sub);
            contains(a, fileName);
            contains(a, point);
            contains(a, foo);
            contains(a, cur);
            contains(a, property);
            merge(function() {
              next(a);
            }, 10);
          } else {
            on(options, "load", function() {
              each(next);
            }, false);
          }
        }
      }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    var getPerformaceInfo = function(data) {
      var t = options.performance || options.webkitPerformance;
      if (!(t = t && t.timing)) {
        return false;
      }
      var start = t.navigationStart;
      return 0 != start && (data[p] = t.loadEventStart - start, data[active] = t.domainLookupEnd - t.domainLookupStart, data[sub] = t.connectEnd - t.connectStart, data[fileName] = t.responseStart - t.requestStart, data[point] = t.responseEnd - t.responseStart, data[foo] = t.fetchStart - start, data[cur] = t.domInteractive - start, data[property] = t.domContentLoadedEventStart - start, true);
    };
    /**
     * @param {?} object
     * @return {?}
     */
    var isEmpty = function(object) {
      if (options.top != options) {
        return false;
      }
      /** @type {!Object} */
      var items = options.external;
      var item = items && items.onloadT;
      return items && !items.isValidLoadTime && (item = void 0), 2147483648 < item && (item = void 0), 0 < item && items.setPageReadyTime(), null != item && (object[p] = item, true);
    };
    /**
     * @param {!NodeList} version
     * @param {number} name
     * @return {undefined}
     */
    var contains = function(version, name) {
      var current_selection = version[name];
      if (isNaN(current_selection) || 1 / 0 == current_selection || 0 > current_selection) {
        version[name] = void 0;
      }
    };
    /**
     * @param {!Object} res
     * @return {?}
     */
    var query = function(res) {
      return function(w) {
        if ("pageview" == w.get(x) && !res.I) {
          /** @type {boolean} */
          res.I = true;
          /** @type {boolean} */
          var n = (i = w, r = Math.min(equal(i, offset), 100), !(get(func(i, key)) % 100 >= r));
          /** @type {boolean} */
          var readable = 0 < find(w.get(html), "gclid").length;
          if (n || readable) {
            each(function(sports) {
              if (n) {
                res.send("timing", sports);
              }
              if (readable) {
                res.send("adtiming", sports);
              }
            });
          }
        }
        var i;
        var r;
      };
    };
    /** @type {boolean} */
    var k = false;
    /**
     * @param {!Object} result
     * @return {undefined}
     */
    var done = function(result) {
      if ("cookie" == func(result, target)) {
        if (result.get(plugin) || func(result, delta) != func(result, key)) {
          /** @type {number} */
          var o = 1E3 * equal(result, position);
          a(result, key, path, o);
        }
        if (a(result, o, x2, 864E5), result.get(id)) {
          var chat = result.get(j);
          if (chat) {
            /** @type {number} */
            var target = Math.min(equal(result, opacity), 1E3 * equal(result, position));
            /** @type {number} */
            target = Math.min(target, 1E3 * equal(result, y) + target - (new Date).getTime());
            result.data.set(opacity, target);
            o = {};
            var yRatio = result.get(y);
            var id = result.get(data);
            var action = ok(func(result, b));
            var a = split(func(result, context));
            var text = func(result, value);
            if (id && "aw.ds" != id) {
              if (o) {
                /** @type {boolean} */
                o.ua = true;
              }
            } else {
              /** @type {string} */
              chat = ["1", yRatio, resolve(chat)].join(".");
              if (0 < target) {
                if (o) {
                  /** @type {boolean} */
                  o.ta = true;
                }
                cb("_gac_" + resolve(text), chat, action, a, text, target);
              }
            }
            apply(o);
          }
        } else {
          push(75);
        }
        if (result = "none" === split(func(result, context))) {
          /** @type {string} */
          result = doc.location.hostname;
          /** @type {boolean} */
          result = regex.test(result) || regexIso8601.test(result);
        }
        if (result) {
          push(30);
        }
      }
    };
    /**
     * @param {!Object} data
     * @param {string} target
     * @param {?} x
     * @param {number} f
     * @return {?}
     */
    var a = function(data, target, x, f) {
      var tmp = write(data, target);
      if (tmp) {
        x = func(data, x);
        var action = ok(func(data, b));
        var a = split(func(data, context));
        var text = func(data, value);
        if ("auto" != a) {
          if (cb(x, tmp, action, a, text, f)) {
            /** @type {boolean} */
            k = true;
          }
        } else {
          push(32);
          var result = end();
          /** @type {number} */
          var i = 0;
          for (; i < result.length; i++) {
            if (a = result[i], data.data.set(context, a), tmp = write(data, target), cb(x, tmp, action, a, text, f)) {
              return void(k = true);
            }
          }
          data.data.set(context, "auto");
        }
      }
    };
    /**
     * @param {!Object} response
     * @return {undefined}
     */
    var build = function(response) {
      if ("cookie" == func(response, target) && !k && (done(response), !k)) {
        throw "abort";
      }
    };
    /**
     * @param {!Object} element
     * @return {undefined}
     */
    var addTxState = function(element) {
      if (element.get(uid)) {
        var data = func(element, context);
        var url = func(element, thing) || toString();
        var item = getValue("__utma", url, data);
        if (item) {
          push(19);
          element.set(setting, (new Date).getTime(), true);
          element.set(endColorCoords, item.R);
          if ((data = getValue("__utmz", url, data)) && item.hash == data.hash) {
            element.set(DOM, data.R);
          }
        }
      }
    };
    /**
     * @param {!Object} data
     * @param {string} out
     * @return {?}
     */
    var write = function(data, out) {
      out = resolve(func(data, out));
      var result = split(func(data, context)).split(".").length;
      return 1 < (data = postMessage(func(data, b))) && (result = result + ("-" + data)), out ? ["GA1", result, out].join(".") : "";
    };
    /**
     * @param {!Object} value
     * @param {(Node|NodeList|string)} obj
     * @return {?}
     */
    var wrap = function(value, obj) {
      return set(obj, func(value, context), func(value, b));
    };
    /**
     * @param {!NodeList} o
     * @param {string} t
     * @param {string} val
     * @return {?}
     */
    var set = function(o, t, val) {
      if (!o || 1 > o.length) {
        push(12);
      } else {
        /** @type {!Array} */
        var result = [];
        /** @type {number} */
        var i = 0;
        for (; i < o.length; i++) {
          var h = o[i];
          var repeat = h.split(".");
          var s = repeat.shift();
          if (("GA1" == s || "1" == s) && 1 < repeat.length) {
            if (1 == (h = repeat.shift().split("-")).length) {
              /** @type {string} */
              h[1] = "1";
            }
            h[0] *= 1;
            h[1] *= 1;
            repeat = {
              H : h,
              s : repeat.join(".")
            };
          } else {
            /** @type {(undefined|{H: !Array, s: ?})} */
            repeat = timeBack.test(h) ? {
              H : [0, 0],
              s : h
            } : void 0;
          }
          if (repeat) {
            result.push(repeat);
          }
        }
        if (1 == result.length) {
          return push(13), result[0].s;
        }
        if (0 != result.length) {
          return push(14), 1 == (result = print(result, split(t).split(".").length, 0)).length ? result[0].s : (1 < (result = print(result, postMessage(val), 1)).length && push(41), result[0] && result[0].s);
        }
        push(12);
      }
    };
    /**
     * @param {!Array} e
     * @param {?} post
     * @param {number} i
     * @return {?}
     */
    var print = function(e, post, i) {
      var last;
      /** @type {!Array} */
      var newClassList = [];
      /** @type {!Array} */
      var nextConstraints = [];
      /** @type {number} */
      var f = 0;
      for (; f < e.length; f++) {
        var c = e[f];
        if (c.H[i] == post) {
          newClassList.push(c);
        } else {
          if (null == last || c.H[i] < last) {
            /** @type {!Array} */
            nextConstraints = [c];
            last = c.H[i];
          } else {
            if (c.H[i] == last) {
              nextConstraints.push(c);
            }
          }
        }
      }
      return 0 < newClassList.length ? newClassList : nextConstraints;
    };
    /**
     * @param {string} size
     * @return {?}
     */
    var split = function(size) {
      return 0 == size.indexOf(".") ? size.substr(1) : size;
    };
    /**
     * @return {?}
     */
    var end = function() {
      /** @type {!Array} */
      var loginServers = [];
      var lst = toString().split(".");
      if (4 == lst.length) {
        var k = lst[lst.length - 1];
        if (parseInt(k, 10) == k) {
          return ["none"];
        }
      }
      /** @type {number} */
      k = lst.length - 2;
      for (; 0 <= k; k--) {
        loginServers.push(lst.slice(k).join("."));
      }
      return loginServers.push("none"), loginServers;
    };
    /**
     * @param {string} m
     * @return {?}
     */
    var ok = function(m) {
      return m ? (1 < m.length && m.lastIndexOf("/") == m.length - 1 && (m = m.substr(0, m.length - 1)), 0 != m.indexOf("/") && (m = "/" + m), m) : "/";
    };
    /**
     * @param {string} m
     * @return {?}
     */
    var postMessage = function(m) {
      return "/" == (m = ok(m)) ? 1 : m.split("/").length;
    };
    /**
     * @param {!Object} data
     * @return {undefined}
     */
    var apply = function(data) {
      if (data.ta) {
        push(77);
      }
      if (data.na) {
        push(74);
      }
      if (data.pa) {
        push(73);
      }
      if (data.ua) {
        push(69);
      }
    };
    /** @type {!RegExp} */
    var route = new RegExp(/^https?:\/\/([^\/:]+)/);
    /** @type {!RegExp} */
    var rProps = /(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/;
    /** @type {!RegExp} */
    var opRegex = /(.*)([?&#])(?:_gac=[^&#]*)(?:&?)(.*)/;
    /**
     * @param {string} target
     * @return {undefined}
     */
    var el = function(target) {
      push(48);
      /** @type {string} */
      this.target = target;
      /** @type {boolean} */
      this.T = false;
    };
    /**
     * @param {!Object} options
     * @param {string} data
     * @return {?}
     */
    el.prototype.ca = function(options, data) {
      if (options.tagName) {
        if ("a" == options.tagName.toLowerCase()) {
          return void(options.href && (options.href = debug(this, options.href, data)));
        }
        if ("form" == options.tagName.toLowerCase()) {
          return add(this, options);
        }
      }
      if ("string" == typeof options) {
        return debug(this, options, data);
      }
    };
    /**
     * @param {!Object} i
     * @param {string} str
     * @param {string} _
     * @return {?}
     */
    var debug = function(i, str, _) {
      /** @type {(Array<string>|null)} */
      var b = rProps.exec(str);
      if (b && 3 <= b.length) {
        /** @type {string} */
        str = b[1] + (b[3] ? b[2] + b[3] : "");
      }
      if ((b = opRegex.exec(str)) && 3 <= b.length) {
        /** @type {string} */
        str = b[1] + (b[3] ? b[2] + b[3] : "");
      }
      i = i.target.get("linkerParam");
      var o = str.indexOf("?");
      return b = str.indexOf("#"), _ ? str = str + ((-1 == b ? "#" : "&") + i) : (_ = -1 == o ? "?" : "&", str = -1 == b ? str + (_ + i) : str.substring(0, b) + _ + i + str.substring(b)), (str = str.replace(/&+_ga=/, "&_ga=")).replace(/&+_gac=/, "&_gac=");
    };
    /**
     * @param {!Object} obj
     * @param {!Object} options
     * @return {undefined}
     */
    var add = function(obj, options) {
      if (options && options.action) {
        if ("get" == options.method.toLowerCase()) {
          obj = obj.target.get("linkerParam").split("&");
          /** @type {number} */
          var index = 0;
          for (; index < obj.length; index++) {
            var value = obj[index].split("=");
            var tag = value[1];
            value = value[0];
            var input = options.childNodes || [];
            /** @type {boolean} */
            var n = false;
            /** @type {number} */
            var i = 0;
            for (; i < input.length; i++) {
              if (input[i].name == value) {
                input[i].setAttribute("value", tag);
                /** @type {boolean} */
                n = true;
                break;
              }
            }
            if (!n) {
              (input = doc.createElement("input")).setAttribute("type", "hidden");
              input.setAttribute("name", value);
              input.setAttribute("value", tag);
              options.appendChild(input);
            }
          }
        } else {
          if ("post" == options.method.toLowerCase()) {
            options.action = debug(obj, options.action);
          }
        }
      }
    };
    /**
     * @param {(Node|NodeList|string)} e
     * @param {string} index
     * @param {?} lastIndex
     * @return {undefined}
     */
    el.prototype.S = function(e, index, lastIndex) {
      /**
       * @param {string} event
       * @return {undefined}
       */
      function dragEnd(event) {
        try {
          event = event || options.event;
          e: {
            var e = event.target || event.srcElement;
            /** @type {number} */
            event = 100;
            for (; e && 0 < event;) {
              if (e.href && e.nodeName.match(/^a(?:rea)?$/i)) {
                var result = e;
                break e;
              }
              e = e.parentNode;
              event--;
            }
            result = {};
          }
          if (("http:" == result.protocol || "https:" == result.protocol) && emit(e, result.hostname || "") && result.href) {
            result.href = debug(item, result.href, index);
          }
        } catch (e) {
          push(26);
        }
      }
      var item = this;
      if (!this.T) {
        /** @type {boolean} */
        this.T = true;
        on(doc, "mousedown", dragEnd, false);
        on(doc, "keyup", dragEnd, false);
      }
      if (lastIndex) {
        on(doc, "submit", function(event) {
          if ((event = (event = event || options.event).target || event.srcElement) && event.action) {
            var isActive = event.action.match(route);
            if (isActive && emit(e, isActive[1])) {
              add(item, event);
            }
          }
        });
      }
    };
    var $n;
    /** @type {!RegExp} */
    var trueRE = /^(GTM|OPT)-[A-Z0-9]+$/;
    /** @type {!RegExp} */
    var empty = /;_gaexp=[^;]*/g;
    /** @type {!RegExp} */
    var quote = /;((__utma=)|([^;=]+=GAX?\d+\.))[^;]*/g;
    /** @type {!RegExp} */
    var utils = /^https?:\/\/[\w\-.]+\.google.com(:\d+)?\/optimize\/opt-launch\.html\?.*$/;
    /**
     * @param {!Object} y
     * @param {string} data
     * @param {string} value
     * @return {undefined}
     */
    var Date = function(y, data, value) {
      /** @type {string} */
      this.aa = data;
      if (!(data = value)) {
        /** @type {string} */
        data = (data = func(y, v)) && "t0" != data ? JSON_START.test(data) ? "_gat_" + resolve(func(y, value)) : "_gat_" + resolve(data) : "_gat";
      }
      /** @type {string} */
      this.Y = data;
      /** @type {null} */
      this.ra = null;
    };
    /**
     * @param {?} t
     * @param {!Object} o
     * @param {!Object} type
     * @return {undefined}
     */
    var reset = function(t, o, type) {
      if (!o.get(type)) {
        if ("1" == map(t.Y)[0]) {
          o.set(type, "", true);
        } else {
          o.set(type, "" + val(), true);
        }
      }
    };
    /**
     * @param {?} t
     * @param {!Object} d
     * @return {undefined}
     */
    var t = function(t, d) {
      if (d.get(series)) {
        cb(t.Y, "1", d.get(b), d.get(context), d.get(value), 6E4);
      }
    };
    /**
     * @param {?} data
     * @param {!Object} target
     * @param {number} string
     * @return {?}
     */
    var register = function(data, target, string) {
      var o = new type;
      /**
       * @param {!Object} s
       * @return {undefined}
       */
      var callback = function(s) {
        if (require(s).F) {
          o.set(require(s).F, target.get(s));
        }
      };
      callback(file);
      callback(d);
      callback(value);
      callback(key);
      callback(series);
      if (!(0 != string && 1 != string)) {
        callback(url);
        callback(c);
        callback(o);
      }
      o.set(require(config).F, serialize(target));
      /** @type {string} */
      var url = "";
      return o.map(function(expectedSrc, vendor) {
        url = url + (parse(expectedSrc) + "=");
        /** @type {string} */
        url = url + (parse("" + vendor) + "&");
      }), url = url + ("z=" + val()), 0 == string ? url = data.aa + url : 1 == string ? url = "t=dc&aip=1&_r=3&" + url : 2 == string && (url = "t=sr&aip=1&_r=4&slf_rd=1&" + url), url;
    };
    /**
     * @param {?} m
     * @param {!Object} s
     * @return {?}
     */
    var list = function(m, s) {
      return null === m.ra && (m.ra = 1 === function(b) {
        var index;
        var params = new function() {
          /** @type {number} */
          this.V = 100;
          /** @type {boolean} */
          this.$ = this.fa = false;
          /** @type {string} */
          this.oa = "detourexp";
          /** @type {number} */
          this.ea = 1;
        };
        if (params.fa && params.$) {
          return 0;
        }
        if (params.$ = true, b) {
          if (params.oa && void 0 !== b.get(params.oa)) {
            return equal(b, params.oa);
          }
          if (0 == b.get(offset)) {
            return 0;
          }
        }
        return 0 == params.V ? 0 : (void 0 === index && (index = getRandomString()), 0 == index % params.V ? Math.floor(index / params.V) % params.ea + 1 : 0);
      }(s), m.ra && push(33)), m.ra;
    };
    /** @type {!RegExp} */
    var JSON_START = /^gtm\d+$/;
    /**
     * @param {!Object} b
     * @param {number} result
     * @return {undefined}
     */
    var search = function(b, result) {
      if (!(b = b.b).get("dcLoaded")) {
        var value;
        var a = new Buffer(getData(b));
        a.set(29);
        b.set(input, a.w);
        if ((result = result || {})[path]) {
          value = resolve(result[path]);
        }
        (function(a, t) {
          var id = t.get(host);
          t.set(host, function(n) {
            reset(a, n, series);
            reset(a, n, c);
            var e = id(n);
            return t(a, n), e;
          });
          var complete = t.get(instance);
          t.set(instance, function(data) {
            var output = complete(data);
            if (data.get(series)) {
              if (browser() !== list(a, data)) {
                push(80);
                var options = {
                  U : register(a, data, 1),
                  google : register(a, data, 2),
                  count : 0
                };
                request("https://stats.g.doubleclick.net/j/collect", options.U, options);
              } else {
                f(register(a, data, 0));
              }
              data.set(series, "", true);
            }
            return output;
          });
        })(result = new Date(b, "https://stats.g.doubleclick.net/r/collect?t=dc&aip=1&_r=3&", value), b);
        b.set("dcLoaded", true);
      }
    };
    /**
     * @param {!Object} i
     * @return {undefined}
     */
    var exports = function(i) {
      if (!i.get("dcLoaded") && "cookie" == i.get(target)) {
        var d = new Date(i);
        if (reset(d, i, series), reset(d, i, c), t(d, i), i.get(series)) {
          /** @type {boolean} */
          var sat = browser() !== list(d, i);
          i.set(r, 1, true);
          if (sat) {
            push(79);
            i.set(label, updatePresenterWindow() + "/j/collect", true);
            i.set(header, {
              U : register(d, i, 1),
              google : register(d, i, 2),
              count : 0
            }, true);
          } else {
            i.set(label, updatePresenterWindow() + "/r/collect", true);
          }
        }
      }
    };
    /** @type {!RegExp} */
    var MOBILE_TEL_REGEXP = /^(UA|YT|MO|GP)-(\d+)-(\d+)$/;
    /**
     * @param {?} obj
     * @return {undefined}
     */
    var main = function(obj) {
      /**
       * @param {!Object} name
       * @param {string} t
       * @return {undefined}
       */
      function callback(name, t) {
        o.b.data.set(name, t);
      }
      /**
       * @param {!Object} obj
       * @param {!Function} name
       * @return {undefined}
       */
      function assert(obj, name) {
        callback(obj, name);
        o.filters.add(obj);
      }
      var controller;
      var o = this;
      this.b = new Vector;
      this.filters = new Set;
      callback(v, obj[v]);
      callback(value, normalize(obj[value]));
      callback(path, obj[path]);
      callback(context, obj[context] || toString());
      callback(b, obj[b]);
      callback(position, obj[position]);
      callback(plugin, obj[plugin]);
      callback(thing, obj[thing]);
      callback(uid, obj[uid]);
      callback(display, obj[display]);
      callback(code, obj[code]);
      callback(length, obj[length]);
      callback(offset, obj[offset]);
      callback(hash, obj[hash]);
      callback(target, obj[target]);
      callback(url, obj[url]);
      callback(date, obj[date]);
      callback(which, obj[which]);
      callback(id, obj[id]);
      callback(file, 1);
      callback(d, "j67");
      assert(specvid, loadModel);
      assert(resultOfSecondTry, name);
      assert($rating, create);
      assert(pornResult, messageHandler);
      assert(result, submit);
      assert(autotypedRaised, build);
      assert(illegalResult, addTxState);
      assert(differenceThreeAdvance, failure);
      assert(event, process);
      assert(funcRunBCount, fill);
      assert(funcRunCCount, provide);
      assert(funcRunACount, exports);
      assert(host, send);
      assert(instance, run);
      assert(resultOfFirstTry, query(this));
      initialize(this.b);
      update(this.b, obj[key]);
      this.b.set(time, (controller = options.gaGlobal = options.gaGlobal || {}).hid = controller.hid || val());
      (function(text, i, viewModel) {
        if (!$n) {
          /** @type {string} */
          var id = doc.location.hash;
          /** @type {string} */
          var fileName = options.name;
          /** @type {!RegExp} */
          var extensionRegex = /^#?gaso=([^&]*)/;
          if (fileName = (id = (id = id && id.match(extensionRegex) || fileName && fileName.match(extensionRegex)) ? id[1] : map("GASO")[0] || "") && id.match(/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i)) {
            cb("GASO", "" + id, viewModel, i, text, 0);
            if (!window._udo) {
              /** @type {string} */
              window._udo = i;
            }
            if (!window._utcp) {
              /** @type {string} */
              window._utcp = viewModel;
            }
            text = fileName[1];
            execute("https://www.google.com/analytics/web/inpage/pub/inpage.js?" + (text ? "prefix=" + text + "&" : "") + val(), "_gasojs");
          }
          /** @type {boolean} */
          $n = true;
        }
      })(this.b.get(value), this.b.get(context), this.b.get(b));
    };
    /**
     * @param {!Object} c
     * @param {!Object} s
     * @return {undefined}
     */
    var update = function(c, s) {
      var f = func(c, path);
      if (c.data.set(x2, "_ga" == f ? "_gid" : f + "_gid"), "cookie" == func(c, target)) {
        if (k = false, f = map(func(c, path)), !(f = wrap(c, f))) {
          f = func(c, context);
          var r = func(c, thing) || toString();
          if (null != (f = getValue("__utma", r, f))) {
            push(10);
            f = f.O[1] + "." + f.O[2];
          } else {
            f = void 0;
          }
        }
        if (f && (k = true), r = f && !c.get(plugin)) {
          if (2 != (r = f.split(".")).length) {
            /** @type {boolean} */
            r = false;
          } else {
            if (r = Number(r[1])) {
              var s = equal(c, position);
              /** @type {boolean} */
              r = r + s < (new Date).getTime() / 1E3;
            } else {
              /** @type {boolean} */
              r = false;
            }
          }
        }
        if (r && (f = void 0), f && (c.data.set(delta, f), c.data.set(key, f), f = map(func(c, x2)), (f = wrap(c, f)) && c.data.set(o, f)), c.get(id) && (f = c.get(j), r = c.get(data), !f || r && "aw.ds" != r)) {
          if (f = {}, doc) {
            /** @type {!Array} */
            r = [];
            /** @type {!Array<string>} */
            s = doc.cookie.split(";");
            /** @type {!RegExp} */
            var a = /^\s*_gac_(UA-\d+-\d+)=\s*(.+?)\s*$/;
            /** @type {number} */
            var i = 0;
            for (; i < s.length; i++) {
              /** @type {(Array<string>|null)} */
              var p = s[i].match(a);
              if (p) {
                r.push({
                  ja : p[1],
                  value : p[2]
                });
              }
            }
            if (s = {}, r && r.length) {
              /** @type {number} */
              a = 0;
              for (; a < r.length; a++) {
                if ("1" != (i = r[a].value.split("."))[0] || 3 != i.length) {
                  if (f) {
                    /** @type {boolean} */
                    f.na = true;
                  }
                } else {
                  if (i[1]) {
                    if (s[r[a].ja]) {
                      if (f) {
                        /** @type {boolean} */
                        f.pa = true;
                      }
                    } else {
                      /** @type {!Array} */
                      s[r[a].ja] = [];
                    }
                    s[r[a].ja].push({
                      timestamp : i[1],
                      qa : i[2]
                    });
                  }
                }
              }
            }
            r = s;
          } else {
            r = {};
          }
          r = r[func(c, value)];
          apply(f);
          if (r && 0 != r.length) {
            f = r[0];
            c.data.set(y, f.timestamp);
            c.data.set(j, f.qa);
          }
        }
      }
      if (c.get(plugin)) {
        e: {
          if (r = getKey("_ga", c.get(code))) {
            if (c.get(display)) {
              if (f = r.indexOf("."), -1 == f) {
                push(22);
              } else {
                if (s = r.substring(0, f), f = (a = r.substring(f + 1)).indexOf("."), r = a.substring(0, f), a = a.substring(f + 1), "1" == s) {
                  if (out(f = a, r)) {
                    push(23);
                    break e;
                  }
                } else {
                  if ("2" != s) {
                    push(22);
                    break e;
                  }
                  if (s = "", 0 < (f = a.indexOf("-")) ? (s = a.substring(0, f), f = a.substring(f + 1)) : f = a.substring(1), out(s + f, r)) {
                    push(53);
                    break e;
                  }
                  if (s) {
                    push(2);
                    c.data.set(o, s);
                  }
                }
                push(11);
                c.data.set(key, f);
                if (f = getKey("_gac", c.get(code))) {
                  if ("1" != (f = f.split("."))[0] || 4 != f.length) {
                    push(72);
                  } else {
                    if (out(f[3], f[1])) {
                      push(71);
                    } else {
                      c.data.set(j, f[3]);
                      c.data.set(y, f[2]);
                      push(70);
                    }
                  }
                }
              }
            } else {
              push(21);
            }
          }
        }
      }
      if (s) {
        push(9);
        c.data.set(key, parse(s));
      }
      if (!c.get(key)) {
        if (s = (s = options.gaGlobal && options.gaGlobal.vid) && -1 != s.search(other) ? s : void 0) {
          push(17);
          c.data.set(key, s);
        } else {
          push(8);
          c.data.set(key, getMetrics());
        }
      }
      if (!c.get(o)) {
        push(3);
        c.data.set(o, getMetrics());
      }
      done(c);
    };
    /**
     * @param {!Object} self
     * @return {undefined}
     */
    var initialize = function(self) {
      /** @type {(Navigator|null)} */
      var value = options.navigator;
      var p = options.screen;
      /** @type {!Location} */
      var result = doc.location;
      if (self.set(filter, function(key, prefix) {
        /** @type {string} */
        var hash = doc.referrer;
        if (/^(https?|android-app):\/\//i.test(hash)) {
          if (key) {
            return hash;
          }
          if (key = "//" + doc.location.hostname, !has(hash, key)) {
            return prefix && (prefix = key.replace(/\./g, "-") + ".cdn.ampproject.org", has(hash, prefix)) ? void 0 : hash;
          }
        }
      }(self.get(hash), self.get(which))), result) {
        /** @type {string} */
        var content = result.pathname || "";
        if ("/" != content.charAt(0)) {
          push(31);
          /** @type {string} */
          content = "/" + content;
        }
        self.set(html, result.protocol + "//" + result.hostname + content + result.search);
      }
      if (p) {
        self.set(seed, p.width + "x" + p.height);
      }
      if (p) {
        self.set(str, p.colorDepth + "-bit");
      }
      /** @type {!Element} */
      p = doc.documentElement;
      /** @type {number} */
      var nodecrypto = (content = doc.body) && content.clientWidth && content.clientHeight;
      /** @type {!Array} */
      var out = [];
      if (p && p.clientWidth && p.clientHeight && ("CSS1Compat" === doc.compatMode || !nodecrypto) ? out = [p.clientWidth, p.clientHeight] : nodecrypto && (out = [content.clientWidth, content.clientHeight]), p = 0 >= out[0] || 0 >= out[1] ? "" : out.join("x"), self.set(skeletonId, p), self.set(start, function() {
        var v;
        var seed;
        if ((seed = (seed = options.navigator) ? seed.plugins : null) && seed.length) {
          /** @type {number} */
          var i = 0;
          for (; i < seed.length && !v; i++) {
            /** @type {!Plugin} */
            var val = seed[i];
            if (-1 < val.name.indexOf("Shockwave Flash")) {
              /** @type {string} */
              v = val.description;
            }
          }
        }
        if (!v) {
          try {
            var a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
            v = a.GetVariable("$version");
          } catch (e) {
          }
        }
        if (!v) {
          try {
            a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");
            /** @type {string} */
            v = "WIN 6,0,21,0";
            /** @type {string} */
            a.AllowScriptAccess = "always";
            v = a.GetVariable("$version");
          } catch (e) {
          }
        }
        if (!v) {
          try {
            v = (a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version");
          } catch (e) {
          }
        }
        return v && (a = v.match(/[\d]+/g)) && 3 <= a.length && (v = a[0] + "." + a[1] + " r" + a[2]), v || void 0;
      }()), self.set(table, doc.characterSet || doc.charset), self.set(fn, value && "function" == typeof value.javaEnabled && value.javaEnabled() || false), self.set(language, (value && (value.language || value.browserLanguage) || "").toLowerCase()), self.data.set(j, getKey("gclid", true)), self.data.set(data, getKey("gclsrc", true)), self.data.set(y, Math.round((new Date).getTime() / 1E3)), result && self.get(code) && (value = doc.location.hash)) {
        /** @type {!Array<string>} */
        value = value.split(/[?&#]+/);
        /** @type {!Array} */
        result = [];
        /** @type {number} */
        p = 0;
        for (; p < value.length; ++p) {
          if (assert(value[p], "utm_id") || assert(value[p], "utm_campaign") || assert(value[p], "utm_source") || assert(value[p], "utm_medium") || assert(value[p], "utm_term") || assert(value[p], "utm_content") || assert(value[p], "gclid") || assert(value[p], "dclid") || assert(value[p], "gclsrc")) {
            result.push(value[p]);
          }
        }
        if (0 < result.length) {
          /** @type {string} */
          value = "#" + result.join("&");
          self.set(html, self.get(html) + value);
        }
      }
    };
    /**
     * @param {!Object} key
     * @return {?}
     */
    main.prototype.get = function(key) {
      return this.b.get(key);
    };
    /**
     * @param {!Object} name
     * @param {string} b
     * @return {undefined}
     */
    main.prototype.set = function(name, b) {
      this.b.set(name, b);
    };
    var defaults = {
      pageview : [r2],
      event : [$music, selectTargElm, str_origin, percent],
      social : [relativeUrlImg, $realtime, en],
      timing : [message, $gBCRBottom, $existing_results, ht]
    };
    /**
     * @param {string} type
     * @return {undefined}
     */
    main.prototype.send = function(type) {
      if (!(1 > arguments.length)) {
        if ("string" == typeof arguments[0]) {
          var i = arguments[0];
          /** @type {!Array<?>} */
          var n = [].slice.call(arguments, 1);
        } else {
          i = arguments[0] && arguments[0][x];
          /** @type {!Arguments} */
          n = arguments;
        }
        if (i) {
          (n = reduce(defaults[i] || [], n))[x] = i;
          this.b.set(n, void 0, true);
          this.filters.D(this.b);
          this.b.data.m = {};
        }
      }
    };
    /**
     * @param {!Object} i
     * @param {undefined} d
     * @return {undefined}
     */
    main.prototype.ma = function(i, d) {
      var fullName = this;
      if (!log(i, fullName, d)) {
        _(i, function() {
          log(i, fullName, d);
        });
        init(String(fullName.get(v)), i, void 0, d, true);
      }
    };
    var child;
    var row;
    var owner;
    var item;
    /**
     * @param {!Function} fn
     * @return {?}
     */
    var runOnce = function(fn) {
      return "prerender" != doc.visibilityState && (fn(), true);
    };
    /**
     * @param {!Function} i
     * @return {undefined}
     */
    var remove = function(i) {
      if (!runOnce(i)) {
        push(16);
        /** @type {boolean} */
        var isNewStyle = false;
        /**
         * @return {undefined}
         */
        var fn = function() {
          if (!isNewStyle && runOnce(i)) {
            /** @type {boolean} */
            isNewStyle = true;
            /** @type {function(): undefined} */
            var callback = fn;
            /** @type {!HTMLDocument} */
            var document = doc;
            if (document.removeEventListener) {
              document.removeEventListener("visibilitychange", callback, false);
            } else {
              if (document.detachEvent) {
                document.detachEvent("onvisibilitychange", callback);
              }
            }
          }
        };
        on(doc, "visibilitychange", fn);
      }
    };
    /** @type {!RegExp} */
    var regExpFrom = /^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/;
    /**
     * @param {!Object} value
     * @return {undefined}
     */
    var check = function(value) {
      if (stringify(value[0])) {
        this.u = value[0];
      } else {
        /** @type {(Array<string>|null)} */
        var c = regExpFrom.exec(value[0]);
        if (null != c && 4 == c.length && (this.c = c[1] || "t0", this.K = c[2] || "", this.C = c[3], this.a = [].slice.call(value, 1), this.K || (this.A = "create" == this.C, this.i = "require" == this.C, this.g = "provide" == this.C, this.ba = "remove" == this.C), this.i && (3 <= this.a.length ? (this.X = this.a[1], this.W = this.a[2]) : this.a[1] && (closest(this.a[1]) ? this.X = this.a[1] : this.W = this.a[1]))), c = value[1], value = value[2], !this.C) {
          throw "abort";
        }
        if (this.i && (!closest(c) || "" == c)) {
          throw "abort";
        }
        if (this.g && (!closest(c) || "" == c || !stringify(value))) {
          throw "abort";
        }
        if (m(this.c) || m(this.K)) {
          throw "abort";
        }
        if (this.g && "t0" != this.c) {
          throw "abort";
        }
      }
    };
    child = new type;
    owner = new type;
    item = new type;
    row = {
      ec : 45,
      ecommerce : 46,
      linkid : 47
    };
    /**
     * @param {!Object} resource
     * @param {!Function} name
     * @param {number} values
     * @return {?}
     */
    var log = function(resource, name, values) {
      if (!(name == params)) {
        name.get(v);
      }
      var Model = child.get(resource);
      return !!stringify(Model) && (name.plugins_ = name.plugins_ || new type, !!name.plugins_.get(resource) || (name.plugins_.set(resource, new Model(name, values || {})), true));
    };
    /**
     * @param {string} target
     * @param {!Object} value
     * @param {string} item
     * @param {!Object} node
     * @param {string} token
     * @return {?}
     */
    var init = function(target, value, item, node, token) {
      if (!stringify(child.get(value)) && !owner.get(value)) {
        if (row.hasOwnProperty(value) && push(row[value]), trueRE.test(value)) {
          if (push(52), !(target = params.j(target))) {
            return true;
          }
          node = {
            id : value,
            B : (item = node || {}).dataLayer || "dataLayer",
            ia : !!target.get("anonymizeIp"),
            sync : token,
            G : false
          };
          if (target.get("&gtm") == value) {
            /** @type {boolean} */
            node.G = true;
          }
          /** @type {string} */
          var id = String(target.get("name"));
          if ("t0" != id) {
            /** @type {string} */
            node.target = id;
          }
          if (!read(String(target.get("trackingId")))) {
            /** @type {string} */
            node.clientId = String(target.get(key));
            /** @type {number} */
            node.ka = Number(target.get(date));
            /** @type {!RegExp} */
            item = item.palindrome ? quote : empty;
            /** @type {(string|undefined)} */
            item = (item = doc.cookie.replace(/^|(; +)/g, ";").match(item)) ? item.sort().join("").substring(1) : void 0;
            /** @type {string} */
            node.la = item;
            node.qa = find(target.b.get(html) || "", "gclid");
          }
          target = node.B;
          /** @type {number} */
          item = (new Date).getTime();
          options[target] = options[target] || [];
          item = {
            "gtm.start" : item
          };
          if (!token) {
            /** @type {string} */
            item.event = "gtm.js";
          }
          options[target].push(item);
          item = function(node) {
            /**
             * @param {string} name
             * @param {string} a
             * @return {undefined}
             */
            function callback(name, a) {
              if (a) {
                value = value + ("&" + name + "=" + parse(a));
              }
            }
            /** @type {string} */
            var value = "https://www.google-analytics.com/gtm/js?id=" + parse(node.id);
            return "dataLayer" != node.B && callback("l", node.B), callback("t", node.target), callback("cid", node.clientId), callback("cidt", node.ka), callback("gac", node.la), callback("aip", node.ia), node.sync && callback("m", "sync"), callback("cycle", node.G), node.qa && callback("gclid", node.qa), utils.test(doc.referrer) && callback("cb", String(val())), value;
          }(node);
        }
        if (!item && row.hasOwnProperty(value)) {
          push(39);
          /** @type {string} */
          item = value + ".js";
        } else {
          push(43);
        }
        if (item) {
          if (!(item && 0 <= item.indexOf("/"))) {
            /** @type {string} */
            item = (Te || "https:" == doc.location.protocol ? "https:" : "http:") + "//www.google-analytics.com/plugins/ua/" + item;
          }
          target = (node = format(item)).protocol;
          /** @type {string} */
          item = doc.location.protocol;
          if (("https:" == target || target == item || "http:" == target && "http:" == item) && setup(node)) {
            execute(node.url, void 0, token);
            owner.set(value, true);
          }
        }
      }
    };
    /**
     * @param {!Object} data
     * @param {!Function} s
     * @return {undefined}
     */
    var _ = function(data, s) {
      var url = item.get(data) || [];
      url.push(s);
      item.set(data, url);
    };
    /**
     * @param {!Object} settings
     * @param {string} value
     * @return {undefined}
     */
    var replace = function(settings, value) {
      child.set(settings, value);
      value = item.get(settings) || [];
      /** @type {number} */
      var i = 0;
      for (; i < value.length; i++) {
        value[i]();
      }
      item.set(settings, []);
    };
    /**
     * @param {!Object} a
     * @return {?}
     */
    var setup = function(a) {
      var b = format(doc.location.href);
      return !!assert(a.url, "https://www.google-analytics.com/gtm/js?id=") || !(a.query || 0 <= a.url.indexOf("?") || 0 <= a.path.indexOf("://")) && (a.host == b.host && a.port == b.port || (b = "http:" == a.protocol ? 80 : 443, !("www.google-analytics.com" != a.host || (a.port || b) != b || !assert(a.path, "/plugins/"))));
    };
    /**
     * @param {string} x
     * @return {?}
     */
    var format = function(x) {
      /**
       * @param {!Object} a
       * @return {?}
       */
      function format(a) {
        var t = (a.hostname || "").split(":")[0].toLowerCase();
        var b = (a.protocol || "").toLowerCase();
        return b = 1 * a.port || ("http:" == b ? 80 : "https:" == b ? 443 : ""), a = a.pathname || "", assert(a, "/") || (a = "/" + a), [t, "" + b, a];
      }
      /** @type {!Element} */
      var a = doc.createElement("a");
      /** @type {string} */
      a.href = doc.location.href;
      var result = (a.protocol || "").toLowerCase();
      var args = format(a);
      var y = a.search || "";
      var index = result + "//" + args[0] + (args[1] ? ":" + args[1] : "");
      return assert(x, "//") ? x = result + x : assert(x, "/") ? x = index + x : !x || assert(x, "?") ? x = index + args[2] + (x || y) : 0 > x.split("/")[0].indexOf(":") && (x = index + args[2].substring(0, args[2].lastIndexOf("/")) + "/" + x), a.href = x, result = format(a), {
        protocol : (a.protocol || "").toLowerCase(),
        host : result[0],
        port : result[1],
        path : result[2],
        query : a.search || "",
        url : x || ""
      };
    };
    var self = {
      ga : function() {
        /** @type {!Array} */
        self.f = [];
      }
    };
    self.ga();
    /**
     * @param {!Array} fn
     * @return {undefined}
     */
    self.D = function(fn) {
      var files = self.J.apply(self, arguments);
      /** @type {!Array<?>} */
      files = self.f.concat(files);
      /** @type {!Array} */
      self.f = [];
      for (; 0 < files.length && !self.v(files[0]) && (files.shift(), !(0 < self.f.length));) {
      }
      /** @type {!Array<?>} */
      self.f = self.f.concat(files);
    };
    /**
     * @param {?} p
     * @return {?}
     */
    self.J = function(p) {
      /** @type {!Array} */
      var d = [];
      /** @type {number} */
      var i = 0;
      for (; i < arguments.length; i++) {
        try {
          var m = new check(arguments[i]);
          if (m.g) {
            replace(m.a[0], m.a[1]);
          } else {
            if (m.i) {
              m.ha = init(m.c, m.a[0], m.X, m.W);
            }
            d.push(m);
          }
        } catch (e) {
        }
      }
      return d;
    };
    /**
     * @param {!Object} e
     * @return {?}
     */
    self.v = function(e) {
      try {
        if (e.u) {
          e.u.call(options, params.j("t0"));
        } else {
          var options = e.c == i ? params : params.j(e.c);
          if (e.A) {
            if ("t0" == e.c && null === (options = params.create.apply(params, e.a))) {
              return true;
            }
          } else {
            if (e.ba) {
              params.remove(e.c);
            } else {
              if (options) {
                if (e.i) {
                  if (e.ha && (e.ha = init(e.c, e.a[0], e.X, e.W)), !log(e.a[0], options, e.W)) {
                    return true;
                  }
                } else {
                  if (e.K) {
                    var f = e.C;
                    var dir = e.a;
                    var o = options.plugins_.get(e.K);
                    o[f].apply(o, dir);
                  } else {
                    options[e.C].apply(options, e.a);
                  }
                }
              }
            }
          }
        }
      } catch (e) {
      }
    };
    /**
     * @param {?} name
     * @return {undefined}
     */
    var params = function(name) {
      push(1);
      self.D.apply(self, [arguments]);
    };
    params.h = {};
    /** @type {!Array} */
    params.P = [];
    /** @type {number} */
    params.L = 0;
    /** @type {number} */
    params.answer = 42;
    /** @type {!Array} */
    var props = [value, context, v];
    /**
     * @param {!Function} name
     * @return {?}
     */
    params.create = function(name) {
      var result = reduce(props, [].slice.call(arguments));
      if (!result[v]) {
        /** @type {string} */
        result[v] = "t0";
      }
      var i = "" + result[v];
      if (params.h[i]) {
        return params.h[i];
      }
      e: {
        if (result[which]) {
          if (push(67), result[target] && "cookie" != result[target]) {
            /** @type {boolean} */
            var data = false;
            break e;
          }
          if (void 0 !== s) {
            if (!result[key]) {
              result[key] = s;
            }
          } else {
            t: {
              /** @type {string} */
              data = String(result[context] || toString());
              /** @type {string} */
              var type = String(result[b] || "/");
              var a = map(String(result[path] || "_ga"));
              if (!(data = set(a, data, type)) || other.test(data)) {
                /** @type {boolean} */
                data = true;
              } else {
                if (0 == (data = map("AMP_TOKEN")).length) {
                  /** @type {boolean} */
                  data = true;
                } else {
                  if (1 == data.length && ("$RETRIEVING" == (data = decodeURIComponent(data[0])) || "$OPT_OUT" == data || "$ERROR" == data || "$NOT_FOUND" == data)) {
                    /** @type {boolean} */
                    data = true;
                    break t;
                  }
                  /** @type {boolean} */
                  data = false;
                }
              }
            }
            if (data && success(D, String(result[value]))) {
              /** @type {boolean} */
              data = true;
              break e;
            }
          }
        }
        /** @type {boolean} */
        data = false;
      }
      return data ? null : (result = new main(result), params.h[i] = result, params.P.push(result), result);
    };
    /**
     * @param {!Object} i
     * @return {undefined}
     */
    params.remove = function(i) {
      /** @type {number} */
      var index = 0;
      for (; index < params.P.length; index++) {
        if (params.P[index].get(v) == i) {
          params.P.splice(index, 1);
          /** @type {null} */
          params.h[i] = null;
          break;
        }
      }
    };
    /**
     * @param {string} s
     * @return {?}
     */
    params.j = function(s) {
      return params.h[s];
    };
    /**
     * @return {?}
     */
    params.getAll = function() {
      return params.P.slice(0);
    };
    /**
     * @return {undefined}
     */
    params.N = function() {
      if ("ga" != i) {
        push(49);
      }
      var data = options[i];
      if (!data || 42 != data.answer) {
        params.L = data && data.l;
        /** @type {boolean} */
        params.loaded = true;
        /** @type {function(?): undefined} */
        var c = options[i] = params;
        if (expect("create", c, c.create), expect("remove", c, c.remove), expect("getByName", c, c.j, 5), expect("getAll", c, c.getAll, 6), expect("get", c = main.prototype, c.get, 7), expect("set", c, c.set, 4), expect("send", c, c.send), expect("requireSync", c, c.ma), expect("get", c = Vector.prototype, c.get), expect("set", c, c.set), "https:" != doc.location.protocol && !Te) {
          e: {
            /** @type {!NodeList<Element>} */
            c = doc.getElementsByTagName("script");
            /** @type {number} */
            var i = 0;
            for (; i < c.length && 100 > i; i++) {
              var img_src = c[i].src;
              if (img_src && 0 == img_src.indexOf("https://www.google-analytics.com/analytics")) {
                /** @type {boolean} */
                c = true;
                break e;
              }
            }
            /** @type {boolean} */
            c = false;
          }
          if (c) {
            /** @type {boolean} */
            Te = true;
          }
        }
        /** @type {function(string): undefined} */
        (options.gaplugins = options.gaplugins || {}).Linker = el;
        c = el.prototype;
        replace("linker", el);
        expect("decorate", c, c.ca, 20);
        expect("autoLink", c, c.S, 25);
        replace("displayfeatures", search);
        replace("adfeatures", search);
        data = data && data.q;
        if (isArray(data)) {
          self.D.apply(params, data);
        } else {
          push(50);
        }
      }
    };
    /**
     * @return {undefined}
     */
    params.da = function() {
      var leftGridItems = params.getAll();
      /** @type {number} */
      var i = 0;
      for (; i < leftGridItems.length; i++) {
        leftGridItems[i].get(v);
      }
    };
    /** @type {function(): undefined} */
    var next = params.N;
    var opt = options[i];
    if (opt && opt.r) {
      next();
    } else {
      remove(next);
    }
    remove(function() {
      self.D(["provide", "render", name]);
    });
  }(window);
}]);

